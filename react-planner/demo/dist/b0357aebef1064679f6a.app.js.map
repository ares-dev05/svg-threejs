{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/constants.js","webpack:///../src/shared-style.js","webpack:///../src/utils/export.js","webpack:///../src/class/export.js","webpack:///../src/components/style/export.jsx","webpack:///../src/actions/export.js","webpack:///../src/catalog/properties/shared-property-style.js","webpack:///../src/components/sidebar/panel.jsx","webpack:///../src/index.js","webpack:///./src/catalog/utils/load-obj.js","webpack:///../src/models.js","webpack:///../src/utils/react-if.jsx","webpack:///../src/utils/snap.js","webpack:///../src/utils/geometry.js","webpack:///../src/components/style/button.jsx","webpack:///../src/components/style/form-text-input.jsx","webpack:///../src/translator/translator.js","webpack:///../src/components/toolbar/toolbar-button.jsx","webpack:///../src/components/viewer2d/export.js","webpack:///../src/utils/math.js","webpack:///../src/actions/project-actions.js","webpack:///../src/utils/browser.js","webpack:///../src/components/viewer2d/ruler.jsx","webpack:///../src/components/viewer3d/three-memory-cleaner.js","webpack:///../src/components/UploadSingleFile.js","webpack:///../src/components/parse-svg.jsx","webpack:///../src/catalog/catalog.js","webpack:///../src/catalog/properties/export.js","webpack:///../src/components/style/content-container.jsx","webpack:///../src/components/style/content-title.jsx","webpack:///../src/components/style/form-number-input.jsx","webpack:///../src/catalog/properties/property-string.jsx","webpack:///../src/catalog/properties/property-lenght-measure.jsx","webpack:///../src/reducers/export.js","webpack:///../src/utils/objects-utils.js","webpack:///../src/components/export.js","webpack:///../src/components/viewer2d/viewer2d.jsx","webpack:///../src/components/viewer2d/state.jsx","webpack:///../src/components/viewer2d/scene.jsx","webpack:///../src/components/viewer2d/snap.jsx","webpack:///../src/components/viewer3d/scene-creator.js","webpack:///../src/components/sidebar/panel-layers.jsx","webpack:///../src/components/sidebar/panel-guides.jsx","webpack:///../src/components/sidebar/panel-layer-elements.jsx","webpack:///../src/components/footerbar/footer-toggle-button.jsx","webpack:///../src/components/footerbar/footer-content-button.jsx","webpack:///../src/version.js","webpack:///./src/catalog/lines/dividerwall/textures/painted.jpg","webpack:///./src/catalog/lines/dividerwall/textures/painted-normal.jpg","webpack:///./src/catalog/lines/externalwall/textures/painted.jpg","webpack:///./src/catalog/lines/externalwall/textures/painted-normal.jpg","webpack:///./src/catalog/lines/interiorwall/textures/painted.jpg","webpack:///./src/catalog/lines/interiorwall/textures/painted-normal.jpg","webpack:///./src/renderer.jsx","webpack:///./src/catalog/mycatalog.js","webpack:///../src/catalog/properties/property-color.jsx","webpack:///../src/components/style/cancel-button.jsx","webpack:///../src/components/style/delete-button.jsx","webpack:///../src/components/style/form-block.jsx","webpack:///../src/components/style/form-color-input.jsx","webpack:///../src/components/style/form-label.jsx","webpack:///../src/components/style/form-select.jsx","webpack:///../src/components/style/form-slider.jsx","webpack:///../src/components/style/form-submit-button.jsx","webpack:///../src/catalog/properties/property-enum.jsx","webpack:///../src/catalog/properties/property-number.jsx","webpack:///../src/catalog/properties/property-toggle.jsx","webpack:///../src/catalog/properties/property-checkbox.jsx","webpack:///../src/catalog/properties/property-hidden.jsx","webpack:///../src/catalog/properties/property-read-only.jsx","webpack:///../src/translator/en.js","webpack:///../src/translator/it.js","webpack:///../src/translator/ru.js","webpack:///../src/reducers/reducer.js","webpack:///../src/reducers/areas-reducer.js","webpack:///../src/class/project.js","webpack:///../src/utils/graph-inner-cycles.js","webpack:///../src/utils/graph.js","webpack:///../src/utils/get-edges-of-subgraphs.js","webpack:///../src/utils/graph-cycles.js","webpack:///../src/utils/snap-scene.js","webpack:///../src/utils/history.js","webpack:///../src/utils/id-broker.js","webpack:///../src/utils/name-generator.js","webpack:///../src/class/group.js","webpack:///../src/class/layer.js","webpack:///../src/class/line.js","webpack:///../src/class/hole.js","webpack:///../src/class/vertex.js","webpack:///../src/class/area.js","webpack:///../src/class/item.js","webpack:///../src/class/guide.js","webpack:///../src/reducers/holes-reducer.js","webpack:///../src/reducers/items-reducer.js","webpack:///../src/reducers/lines-reducer.js","webpack:///../src/reducers/groups-reducer.js","webpack:///../src/reducers/project-reducer.js","webpack:///../src/reducers/scene-reducer.js","webpack:///../src/reducers/vertices-reducer.js","webpack:///../src/reducers/viewer2d-reducer.js","webpack:///../src/reducers/viewer3d-reducer.js","webpack:///../src/react-planner.jsx","webpack:///../src/actions/viewer2d-actions.js","webpack:///../src/actions/viewer3d-actions.js","webpack:///../src/actions/lines-actions.js","webpack:///../src/actions/holes-actions.js","webpack:///../src/actions/scene-actions.js","webpack:///../src/actions/vertices-actions.js","webpack:///../src/actions/items-actions.js","webpack:///../src/actions/area-actions.js","webpack:///../src/actions/groups-actions.js","webpack:///../src/components/toolbar/export.js","webpack:///../src/components/toolbar/toolbar-save-button.jsx","webpack:///../src/components/toolbar/toolbar-load-button.jsx","webpack:///../src/components/toolbar/toolbar-load-svg-button.jsx","webpack:///../src/components/toolbar/toolbar.jsx","webpack:///../src/components/toolbar/ItemsBox.jsx","webpack:///../src/components/toolbar/LinesBox.jsx","webpack:///../src/components/toolbar/RectangleBox.jsx","webpack:///../src/components/toolbar/RoomBox.jsx","webpack:///../src/components/content.jsx","webpack:///../src/components/viewer2d/vertex.jsx","webpack:///../src/components/viewer2d/line.jsx","webpack:///../src/components/viewer2d/rulerLeft.jsx","webpack:///../src/components/viewer2d/rulerRight.jsx","webpack:///../src/components/viewer2d/layer.jsx","webpack:///../src/components/viewer2d/item.jsx","webpack:///../src/components/viewer2d/ItemDlg.jsx","webpack:///../src/components/viewer2d/area.jsx","webpack:///../src/components/viewer2d/grids/grids.jsx","webpack:///../src/components/viewer2d/grids/grid-horizontal-streak.jsx","webpack:///../src/components/viewer2d/grids/grid-vertical-streak.jsx","webpack:///../src/components/viewer2d/group.jsx","webpack:///../src/components/viewer2d/rulerX.jsx","webpack:///../src/components/viewer2d/rulerY.jsx","webpack:///../src/components/viewer2d/cursor.jsx","webpack:///../src/components/viewer3d/viewer3d.js","webpack:///../src/components/viewer3d/grid-creator.js","webpack:///../src/components/viewer3d/libs/helvetiker_regular.typeface.js","webpack:///../src/components/viewer3d/grids/grid-horizontal-streak.js","webpack:///../src/components/viewer3d/grids/grid-vertical-streak.js","webpack:///../src/components/viewer3d/libs/orbit-controls.js","webpack:///../src/components/viewer3d/viewer3d-first-person.js","webpack:///../src/components/viewer3d/pointer-lock-navigation.js","webpack:///../src/components/viewer3d/libs/pointer-lock-controls.js","webpack:///../src/components/viewer3d/libs/first-person-controls.js","webpack:///../src/components/catalog-view/catalog-list.jsx","webpack:///../src/components/catalog-view/catalog-item.jsx","webpack:///../src/components/catalog-view/catalog-breadcrumb.jsx","webpack:///../src/components/catalog-view/catalog-page-item.jsx","webpack:///../src/components/catalog-view/catalog-turn-back-page-item.jsx","webpack:///../src/components/configurator/project-configurator.jsx","webpack:///../src/components/sidebar/export.js","webpack:///../src/components/sidebar/sidebar.jsx","webpack:///../src/components/sidebar/panel-element-editor/panel-element-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/element-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/attributes-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/item-attributes-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/line-attributes-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/hole-attributes-editor.jsx","webpack:///../src/components/sidebar/panel-group-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/panel-multi-elements-editor.jsx","webpack:///../src/components/sidebar/panel-groups.jsx","webpack:///../src/components/footerbar/export.js","webpack:///../src/components/footerbar/footerbar.jsx","webpack:///../src/styles/export.js","webpack:///../src/styles/tabs.css?5165","webpack:///../src/styles/tabs.css","webpack:///../src/components/Topbar.jsx","webpack:///../src/components/Footerbar.jsx","webpack:///../src/plugins/export.js","webpack:///../src/plugins/autosave.js","webpack:///../src/plugins/keyboard.js","webpack:///../src/plugins/console-debugger.js","webpack:///../src/catalog/factories/export.js","webpack:///../src/catalog/factories/wall-factory.jsx","webpack:///../src/catalog/factories/wall-factory-3d.js","webpack:///../src/utils/threeCSG.es6.js","webpack:///../src/catalog/factories/area-factory.jsx","webpack:///../src/catalog/factories/area-factory-3d.js","webpack:///./src/catalog/areas/area/planner-element.jsx","webpack:///./src/catalog/areas/area/textures/parquet.jpg","webpack:///./src/catalog/areas/area/textures/tile1.jpg","webpack:///./src/catalog/areas/area/textures/ceramic-tile.jpg","webpack:///./src/catalog/areas/area/textures/strand-porcelain.jpg","webpack:///./src/catalog/areas/area/textures/grass.jpg","webpack:///./src/catalog/lines/dividerwall/planner-element.jsx","webpack:///./src/catalog/lines/dividerwall/wall.png","webpack:///./src/catalog/lines/externalwall/planner-element.jsx","webpack:///./src/catalog/lines/externalwall/wall.png","webpack:///./src/catalog/lines/interiorwall/planner-element.jsx","webpack:///./src/catalog/lines/interiorwall/wall.png","webpack:///./src/catalog/holes/door-cursor/planner-element.jsx","webpack:///./src/catalog/utils/mtl-loader.js","webpack:///./src/catalog/utils/obj-loader.js","webpack:///./src/catalog/holes/door-cursor/door.png","webpack:///./src/catalog/holes/door-cursor/door.mtl","webpack:///./src/catalog/holes/door-cursor/door.obj","webpack:///./src/catalog/holes/door-cursor/texture.jpg","webpack:///./src/catalog/holes/door-double/planner-element.jsx","webpack:///./src/catalog/holes/door-double/door_double.png","webpack:///./src/catalog/holes/door/planner-element.jsx","webpack:///./src/catalog/holes/door/door.png","webpack:///./src/catalog/holes/door/door.mtl","webpack:///./src/catalog/holes/door/door.obj","webpack:///./src/catalog/holes/door/texture.jpg","webpack:///./src/catalog/holes/gate/planner-element.jsx","webpack:///./src/catalog/holes/gate/gate.jpg","webpack:///./src/catalog/holes/panic-door-double/planner-element.jsx","webpack:///./src/catalog/holes/panic-door-double/panicDoorDouble.png","webpack:///./src/catalog/holes/panic-door/planner-element.jsx","webpack:///./src/catalog/holes/panic-door/panicDoor.png","webpack:///./src/catalog/holes/sash-window/planner-element.jsx","webpack:///./src/catalog/holes/sash-window/window.png","webpack:///./src/catalog/holes/sash-window/sash-window.mtl","webpack:///./src/catalog/holes/sash-window/sash-window.obj","webpack:///./src/catalog/holes/sash-window/texture.png","webpack:///./src/catalog/holes/sliding-door/planner-element.jsx","webpack:///./src/catalog/holes/sliding-door/slidingDoor.png","webpack:///./src/catalog/holes/venetian-blind-window/planner-element.jsx","webpack:///./src/catalog/holes/venetian-blind-window/venetian.jpg","webpack:///./src/catalog/holes/venetian-blind-window/venetian.mtl","webpack:///./src/catalog/holes/venetian-blind-window/venetian.obj","webpack:///./src/catalog/holes/venetian-blind-window/texture.png","webpack:///./src/catalog/holes/window-cursor/planner-element.jsx","webpack:///./src/catalog/holes/window-cursor/window.png","webpack:///./src/catalog/holes/window-cursor/window.mtl","webpack:///./src/catalog/holes/window-cursor/window.obj","webpack:///./src/catalog/holes/window-cursor/texture.png","webpack:///./src/catalog/holes/window-curtain/planner-element.jsx","webpack:///./src/catalog/holes/window-curtain/window-curtain.jpg","webpack:///./src/catalog/holes/window-curtain/window.mtl","webpack:///./src/catalog/holes/window-curtain/window.obj","webpack:///./src/catalog/holes/window-curtain/texture.png","webpack:///./src/catalog/holes/window/planner-element.jsx","webpack:///./src/catalog/holes/window/window.png","webpack:///./src/catalog/holes/window/window.mtl","webpack:///./src/catalog/holes/window/window.obj","webpack:///./src/catalog/holes/window/texture.png","webpack:///./src/catalog/items/bathtub/planner-element.jsx","webpack:///./src/catalog/items/bed-1/planner-element.jsx","webpack:///./src/catalog/items/bed-2/planner-element.jsx","webpack:///./src/catalog/items/cooktop-2x/planner-element.jsx","webpack:///./src/catalog/items/cooktop-4x/planner-element.jsx","webpack:///./src/catalog/items/dresser/planner-element.jsx","webpack:///./src/catalog/items/nightstand/planner-element.jsx","webpack:///./src/catalog/items/oven/planner-element.jsx","webpack:///./src/catalog/items/rangehood/planner-element.jsx","webpack:///./src/catalog/items/rectangle-table/planner-element.jsx","webpack:///./src/catalog/items/room/planner-element.jsx","webpack:///./src/catalog/items/round-table/planner-element.jsx","webpack:///./src/catalog/items/shower/planner-element.jsx","webpack:///./src/catalog/items/sink/planner-element.jsx","webpack:///./src/catalog/items/sofa-L/planner-element.jsx","webpack:///./src/catalog/items/sofa-U/planner-element.jsx","webpack:///./src/catalog/items/sofa/planner-element.jsx","webpack:///./src/catalog/items/square-table/planner-element.jsx","webpack:///./src/catalog/items/toilet/planner-element.jsx","webpack:///./src/catalog/items/washing-machine/planner-element.jsx","webpack:///./src/catalog/items/wordrobe/planner-element.jsx","webpack:///./src/ui/toolbar-screenshot-button.jsx","webpack:///../src/components/NewProject.jsx","webpack:///../src/components/LoadBluePrint.jsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","NEW_PROJECT","LOAD_PROJECT","SAVE_PROJECT","OPEN_CATALOG","SELECT_TOOL_EDIT","UNSELECT_ALL","SET_PROPERTIES","SET_ITEMS_ATTRIBUTES","SET_LINES_ATTRIBUTES","SET_HOLES_ATTRIBUTES","REMOVE","UNDO","ROLLBACK","SET_PROJECT_PROPERTIES","OPEN_PROJECT_CONFIGURATOR","INIT_CATALOG","UPDATE_MOUSE_COORDS","UPDATE_ZOOM_SCALE","TOGGLE_SNAP","CHANGE_CATALOG_PAGE","GO_BACK_TO_CATALOG_PAGE","THROW_ERROR","THROW_WARNING","COPY_PROPERTIES","PASTE_PROPERTIES","PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY","ALTERATE_STATE","SET_MODE","ADD_HORIZONTAL_GUIDE","ADD_VERTICAL_GUIDE","ADD_CIRCULAR_GUIDE","REMOVE_HORIZONTAL_GUIDE","REMOVE_VERTICAL_GUIDE","REMOVE_CIRCULAR_GUIDE","SELECT_TOOL_ZOOM_IN","SELECT_TOOL_ZOOM_OUT","SELECT_TOOL_PAN","UPDATE_2D_CAMERA","SELECT_TOOL_3D_VIEW","SELECT_TOOL_3D_FIRST_PERSON","SELECT_TOOL_DRAWING_ITEM","UPDATE_DRAWING_ITEM","END_DRAWING_ITEM","BEGIN_DRAGGING_ITEM","UPDATE_DRAGGING_ITEM","END_DRAGGING_ITEM","BEGIN_ROTATING_ITEM","UPDATE_ROTATING_ITEM","END_ROTATING_ITEM","BEGIN_RESIZE_ITEM_RIGHT_BOTTOM","UPDATE_RESIZE_ITEM_RIGHT_BOTTOM","END_RESIZE_ITEM_RIGHT_BOTTOM","BEGIN_RESIZE_ITEM_RIGHT_TOP","UPDATE_RESIZE_ITEM_RIGHT_TOP","END_RESIZE_ITEM_RIGHT_TOP","BEGIN_RESIZE_ITEM_LEFT_TOP","UPDATE_RESIZE_ITEM_LEFT_TOP","END_RESIZE_ITEM_LEFT_TOP","BEGIN_RESIZE_ITEM_LEFT_BOTTOM","UPDATE_RESIZE_ITEM_LEFT_BOTTOM","END_RESIZE_ITEM_LEFT_BOTTOM","RESIZE_ITEM","ADD_GROUP","ADD_GROUP_FROM_SELECTED","SELECT_GROUP","UNSELECT_GROUP","ADD_TO_GROUP","REMOVE_FROM_GROUP","SET_GROUP_PROPERTIES","SET_GROUP_ATTRIBUTES","SET_GROUP_BARYCENTER","REMOVE_GROUP","REMOVE_GROUP_AND_DELETE_ELEMENTS","GROUP_TRANSLATE","GROUP_ROTATE","SELECT_HOLE","SELECT_AREA","SELECT_ITEM","SELECT_LINE","SELECT_TOOL_DRAWING_LINE","BEGIN_DRAWING_LINE","UPDATE_DRAWING_LINE","END_DRAWING_LINE","SELECT_TOOL_DRAWING_HOLE","UPDATE_DRAWING_HOLE","END_DRAWING_HOLE","BEGIN_DRAGGING_LINE","UPDATE_DRAGGING_LINE","END_DRAGGING_LINE","BEGIN_DRAGGING_HOLE","SELECT_TOOL_UPLOAD_IMAGE","BEGIN_UPLOADING_IMAGE","END_UPLOADING_IMAGE","BEGIN_FITTING_IMAGE","END_FITTING_IMAGE","UPDATE_DRAGGING_HOLE","END_DRAGGING_HOLE","BEGIN_DRAGGING_VERTEX","UPDATE_DRAGGING_VERTEX","END_DRAGGING_VERTEX","SET_LAYER_PROPERTIES","ADD_LAYER","SELECT_LAYER","REMOVE_LAYER","UPDATE_VERTICAL_FLIP_ITEM","UPDATE_HORIZONTAL_FLIP_ITEM","MODE_IDLE","PROJECT_ACTIONS","VIEWER2D_ACTIONS","VIEWER3D_ACTIONS","ITEMS_ACTIONS","HOLE_ACTIONS","LINE_ACTIONS","AREA_ACTIONS","GROUP_ACTIONS","SCENE_ACTIONS","VERTEX_ACTIONS","MODE_2D_ZOOM_IN","MODE_2D_ZOOM_OUT","MODE_2D_PAN","MODE_WAITING_DRAWING_LINE","MODE_3D_VIEW","MODE_3D_FIRST_PERSON","MODE_DRAGGING_LINE","MODE_DRAGGING_VERTEX","MODE_DRAGGING_ITEM","MODE_DRAGGING_HOLE","MODE_DRAWING_LINE","MODE_DRAWING_HOLE","MODE_DRAWING_ITEM","MODE_ROTATING_ITEM","MODE_UPLOADING_IMAGE","MODE_FITTING_IMAGE","MODE_RESIZE_ITEM_RIGHT_BOTTOM","MODE_VIEWING_CATALOG","MODE_CONFIGURING_PROJECT","MODE_RESIZE_ITEM_RIGHT_TOP","MODE_RESIZE_ITEM_LEFT_TOP","MODE_RESIZE_ITEM_LEFT_BOTTOM","UNIT_MILLIMETER","MODE_SNAPPING","UNIT_CENTIMETER","UNIT_METER","UNIT_INCH","UNIT_FOOT","UNIT_MILE","UNITS_LENGTH","EPSILON","KEYBOARD_BUTTON_CODE","DELETE","BACKSPACE","ESC","Z","ALT","C","V","CTRL","ENTER","TAB","COLORS","white","black","grey","MESH_SELECTED","MATERIAL_COLORS","500","amber","blue_grey","blue","brown","cyan","deep_orange","deep_purple","green","indigo","light_blue","light_green","lime","orange","pink","purple","red","teal","yellow","PRIMARY_COLOR","main","alt","icon","border","text_main","text_alt","input","SECONDARY_COLOR","AREA_MESH_COLOR","selected","unselected","LINE_MESH_COLOR","GeometryUtils","GraphInnerCycles","MathUtils","SnapUtils","SnapSceneUtils","history","ObjectUtils","IDBroker","NameGenerator","Project","Group","Layer","Line","Hole","Vertex","Area","Item","HorizontalGuide","VerticalGuide","Button","CancelButton","ContentContainer","ContentTitle","DeleteButton","FormBlock","FormColorInput","FormLabel","FormNumberInput","FormSelect","FormSlider","FormSubmitButton","FormTextInput","projectActions","viewer2DActions","viewer3DActions","linesActions","holesActions","sceneActions","verticesActions","itemsActions","areaActions","groupsActions","PropertyStyle","tableStyle","width","borderSpacing","marginBottom","firstTdStyle","textTransform","SharedStyle","STYLE","borderTop","borderBottom","userSelect","STYLE_TITLE","fontSize","color","padding","backgroundColor","textShadow","boxShadow","margin","cursor","STYLE_CONTENT","STYLE_ARROW","float","Panel","props","context","state","opened","hover","this","setState","headComponents","children","style","onMouseEnter","toggleHover","onMouseLeave","onClick","toggleOpen","FaAngleUp","FaAngleDown","display","Component","propTypes","PropTypes","string","isRequired","array","bool","Models","ReactPlannerConstants","ReactPlannerSharedStyle","Catalog","Translator","reducer","ReactPlanner","Plugins","ReactPlannerComponents","ReactPlannerActions","ReactPlannerReducers","ReactPlannerClasses","ElementsFactories","ReactPlannerUtils","loadObjWithMaterial","mtlFile","objFile","imgPath","mtlLoader","MTLLoader","setTexturePath","url","Promise","resolve","reject","load","materials","preload","objLoader","OBJLoader","setMaterials","safeLoadMapList","mapList","Model","defaultMap","Map","map","toMap","Grid","json","properties","fromJS","Record","id","type","DefaultGrids","h1","step","colors","v1","ElementsSet","vertices","List","lines","holes","areas","items","sharedAttributes","misc","visible","x","y","offset","line","Cursor","rotation","horizontalFlip","verticalFlip","zoom","altitude","order","opacity","elements","DefaultLayers","Scene","layers","grids","selectedLayer","first","groups","meta","guides","horizontal","vertical","circular","unit","height","CatalogElement","info","ready","isEmpty","options","initialProperties","has","catList","element","toArray","Error","merge","page","path","HistoryStructure","list","scene","last","State","sceneHistory","catalog","viewer2D","drawingSupport","draggingSupport","rotatingSupport","resizeSupport","mouse","snapMask","SNAP_MASK","snapElements","activeSnapElement","errors","warnings","clipboardProperties","selectedElementsHistory","alterate","If","condition","Array","isArray","nearestSnap","filter","SNAP_POINT","SNAP_LINE","SNAP_SEGMENT","SNAP_GRID","valueSeq","el","isNear","radius","snap","point","nearestPoint","distance","min","p1","priority","d1","p2","d2","addPointSnap","addLineSnap","a","b","related","withMutations","some","lineSnap","Geometry","twoLinesIntersection","intersection","undefined","forEach","LineSnap","addLineSegmentSnap","x1","y1","x2","y2","LineSegmentSnap","addGridSnap","GridSnap","PointSnap","SNAP_GUIDE","pointsDistance","closestPointFromLine","distancePointFromLine","closestPointFromLineSegment","distancePointFromLineSegment","compareVertices","minVertex","v0","maxVertex","orderVertices","sort","verticesDistance","v2","x0","y0","horizontalLine","verticalLine","linePassingThroughTwoPoints","fAbs","Math","sqrt","denom","k","angularCoefficientsDiff","twoLineSegmentsIntersection","p3","p4","x3","y3","x4","y4","numA","numB","comparator","pa","pb","line0","line1","toJS","lineA","lineB","lineSX","lineDX","uA","uB","isPointOnLineSegment","xp","yp","maxDistance","q","mi","pointPositionOnLineSegment","mapRange","angleBetweenTwoPointsAndOrigin","atan2","PI","angleBetweenTwoPoints","absAngleBetweenTwoPoints","abs","samePoints","extendLine","newDistance","precision","rad","toFixedFloat","cos","sin","roundVertex","vertex","set","ContainsPoint","polygon","pointX","pointY","ax","lup","ay","bx","by","ii","depth","lx","cosWithThreshold","alpha","threshold","sinWithThreshold","midPoint","verticesMidPoint","verticesArray","res","reduce","incr","rotatePointAroundPoint","px","py","ox","oy","theta","thetaRad","deltaX","deltaY","diff_x","diff_y","D","len_sq","param","xx","yy","dx","dy","low1","high1","low2","high2","BASE_STYLE","fontWeight","lineHeight","textAlign","whiteSpace","verticalAlign","WebkitUserSelect","MozUserSelect","MsUserSelect","fonWeight","transition","outline","borderRadius","borderWidth","borderType","BASE_STYLE_SIZE","small","normal","large","customStyle","customStyleHover","styleHover","size","rest","styleMerged","assign","e","defaultProps","borderColor","oneOf","STYLE_INPUT","backgroundImage","focus","textInputStyle","onFocus","onBlur","locale","translations","registerTranslation","EN","IT","RU","languages","getBrowserLanguages","lang","setLocale","phrase","params","translate","translation","console","warn","translatedPhrase","replace","match","number","toLowerCase","navigator","language","userLanguage","alignItems","justifyContent","position","STYLE_TOOLTIP","background","visibility","left","top","marginTop","marginLeft","zIndex","STYLE_TOOLTIP_PIN","right","borderRight","ToolbarButton","active","onMouseOver","event","onMouseOut","tooltip","func","Viewer2D","Snap","Ruler","Grids","RulerX","RulerY","num","parseFloat","toFixed","multiplyMatrices","m1","m2","sum","loadProject","sceneJSON","newProject","saveProject","openCatalog","changeCatalogPage","newPage","oldPage","goBackToCatalogPage","selectToolEdit","unselectAll","setProperties","setItemsAttributes","itemsAttributes","setLinesAttributes","linesAttributes","attributes","setIn","getIn","setHolesAttributes","holesAttributes","remove","undo","rollback","openProjectConfigurator","setProjectProperties","initCatalog","updateMouseCoord","coords","updateZoomScale","scale","toggleSnap","mask","throwError","error","throwWarning","warning","copyProperties","pasteProperties","pushLastSelectedCatalogElementToHistory","setAlterateState","setMode","addHorizontalGuide","coordinate","addVerticalGuide","addCircularGuide","removeHorizontalGuide","guideID","removeVerticalGuide","removeCircularGuide","browserDownload","fileOutputLink","document","createElement","filename","Date","now","prompt","output","JSON","stringify","Blob","URL","createObjectURL","setAttribute","href","body","appendChild","click","removeChild","browserUpload","fileInput","addEventListener","file","target","files","reader","FileReader","fileEvent","loadedData","readAsText","stroke","strokeWidth","STYLE_TEXT","fontFamily","fontStyle","fill","WebkitTouchCallout","half_thickness","distanceText","transform","points","disposeScene","scene3D","traverse","child","disposeMesh","disposeObject","Three","disposeMaterial","material","texture","Material","dispose","mesh","Mesh","BoxHelper","LineSegments","geometry","MultiMaterial","UploadSingleFile","useStyles","makeStyles","theme","letter","letterSpacing","breakpoints","up","flexDirection","dragdrop","caption","setFile","onChange","classes","sx","handleDrop","useCallback","acceptedFiles","preview","useDropzone","onDrop","multiple","getRootProps","getInputProps","isDragActive","isDragReject","useEffect","log","revokeObjectURL","Box","bgcolor","paddingLeft","Typography","className","src","oneOfType","loadProjectFromFile","doc","DOMParser","parseFromString","rulerObj","querySelectorAll","rulerPixel","pow","getAttribute","facadeDomObj","internalDomObj","internalYellowDomObj","facadeParsingData","getParsingData","internalParsingData","internalYellowParsingData","combineBreakLines","moveToInternalWalls","windowsPos","getWindowsPos","facadeLines","holesArr","thickness","textureA","textureB","concat","internalLines","verticesJson","arrangeLines","linesJson","resLines","vertise1","vertise2","temp","checkDoor","parsingData","parseVer1","parseVer2","distance11","distance12","distance21","distance22","checkDupliVertices","checkDupliLines","lineArr","verID1","verID2","domObj","verticesID","acquireID","verticesIndex","floor","SCENE_WIDTH","SCENE_HEIGHT","vertice1","vertice2","lineID","getMoveSize","externalData","internalData","externalVerticesJson","direction","checkWindowWall","count","getIndexVertice","parseData","checkBreakLine","externalLines","externalVertices","externalNo","externalOrder","lineOrder","facadeVertices","tempLines","moveSize","inx1","inx2","getRightPos","vertices1","vertices2","verticesfacaceTempJson","verticesInternTempJson","internTempLines","unnecessayLines","extern","intern","facade1","facade2","holeID","Number","isNaN","isDoor","flip","sult","passedObject","categories","root","label","propertyTypes","registerMultiplePropertyType","PropertyColor","PropertyEnum","PropertyString","PropertyNumber","PropertyLengthMeasure","PropertyToggle","PropertyCheckbox","PropertyHidden","PropertyReadOnly","hasElement","categoryName","hasCategory","validateElement","elementArray","registerElement","Viewer","Editor","propertyTypeArray","registerPropertyType","propertyName","propertyConfigs","childs","validateCategory","addToCategory","indexOf","elementName","overflowY","onWheel","stopPropagation","propsType","confirmStyle","valid","showedValue","nextProps","max","onValid","onInvalid","placeholder","numericInputStyle","regexp","RegExp","isFinite","currValue","test","different","saveFn","savedValue","evt","nativeEvent","onKeyDown","keyCode","which","title","translator","MdUpdate","contextTypes","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","onUpdate","configs","sourceElement","internalState","val","hook","then","_val","any","internalTableStyle","borderCollapse","secondTdStyle","unitContainerStyle","_length","_unit","configRest","update","lengthInput","unitInput","newLength","merged","from","to","instanceOf","ReactPlannerAreasReducer","ReactPlannerHolesReducer","ReactPlannerItemsReducer","ReactPlannerLinesReducer","ReactPlannerGroupsReducer","ReactPlannerProjectReducer","ReactPlannerSceneReducer","ReactPlannerVerticesReducer","ReactPlannerViewer2dReducer","ReactPlannerViewer3dReducer","objectsMap","mappedObject","objectsCompare","constructor","ToolbarComponents","Content","SidebarComponents","FooterBarComponents","Viewer2DComponents","StyleComponents","constants","mode2Tool","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","TOOL_AUTO","TOOL_NONE","mode2PointerEvents","pointerEvents","mode2Cursor","mode2DetectAutopan","extractElementData","node","getNamedItem","tagName","parentNode","part","layer","inputText","useState","setLoad","popup","setPopup","widthV","setWidth","heightV","setHeight","elementData","setElementData","cordinate","setCordinate","useRef","viewerData","SVGWidth","f","SVGHeight","miniatureOpen","pinchPointDistance","lastAction","viewerWidth","startX","startY","version","viewerHeight","prePinchMode","endX","endY","updateCameraView","layerID","mapCursorPosition","rulerFnColor","rulerMkColor","sceneWidth","sceneHeight","sceneZoom","rulerXElements","ceil","rulerYElements","gridRowGap","gridColumnGap","gridTemplateColumns","rulerSize","gridTemplateRows","gridColumn","gridRow","overflow","unitPixelSize","mouseX","zeroLeftPosition","fontColor","markerColor","positiveUnitsNumber","negativeUnitsNumber","mouseY","zeroTopPosition","ReactSVGPanZoom","onChangeValue","tool","onChangeTool","selectToolPan","selectToolZoomIn","selectToolZoomOut","detectAutoPan","onMouseDown","viewerEvent","originalEvent","Event","dispatchEvent","beginDraggingLine","beginDraggingVertex","beginRotatingItem","beginResizingItemRB","beginResizingItemRT","beginResizingItemLB","beginResizingItemLT","posX","clientX","posY","clientY","beginDraggingItem","beginDraggingHole","onMouseMove","updateDrawingLine","updateDrawingHole","updateDraggingHole","updateDrawingItem","updateDraggingLine","updateDraggingVertex","updateDraggingItem","updateRotatingItem","updateResizingItemRB","updateResizingItemRT","updateResizingItemLB","updateResizingItemLT","onMouseUp","selectArea","selectLine","selectHole","selectItem","beginDrawingLine","endDrawingLine","endDrawingHole","endDrawingItem","endDraggingLine","endDraggingVertex","endDraggingItem","endDraggingHole","endRotatingItem","endResizingItemRB","endResizingItemRT","endResizingItemLB","endResizingItemLT","miniaturePosition","toolbarPosition","ref","disableDoubleClickZoomWithToolAuto","flexGrow","gap","TextField","mb","variant","resizingItem","marginRight","updateHorizontalItem","updateVerticalItem","nextState","hashCode","entrySeq","ActiveDrawingHelper","h0","pointH0","pointH1","pointV0","pointV1","sceneData","actions","planData","sceneGraph","busyResources","LODs","plan","Object3D","grid","boundingBox","Box3","setFromObject","promises","createLayerObjects","all","updateBoundingBox","updateScene","oldSceneData","diffArray","filteredDiffs","foundDiff","op","minimizeRemoveDiffsWhenSwitchingLayers","idsFound","minimizeChangePropertiesAfterSelectionsDiffs","minimizeChangePropertiesDiffs","filterDiffs","split","layerId","layerGraph","removeLine","areaID","removeArea","itemID","removeItem","removeHole","removeLayer","replaceObject","modifiedPath","lineHoles","newHoleData","getElement","updateRender3D","differences","selfDestroy","selfBuild","hole","oldHole","updateHole","addHole","addLine","oldLine","updateLine","area","oldArea","updateArea","addArea","item","oldItem","updateItem","addItem","values","addPromise","addAction","addObject","removeObject","layerSelectedID","layerSelected","setTimeout","hole3D","line3D","area3D","item3D","holeData","render3D","LOD","pivot","add","vertex0","vertex1","tmp","asin","center","z","holeAltitude","holeHeight","applyInteract","applyOpacity","interactFunction","interact","materialChild","transparent","maxOpacity","newBoundingBox","newCenter","Vector3","sub","VISIBILITY_MODE","styleEditButton","tableLayerStyle","maxHeight","iconColStyle","styleHoverColor","styleEditButtonHover","styleAddLabel","styleEyeVisible","styleEyeHidden","newLayerLableStyle","newLayerLableHoverStyle","layerInputTableStyle","inputTableButtonStyle","PanelLayers","headHovered","layerAddUIVisible","editingLayer","addLayer","layerData","parseInt","setLayerProperties","isLastLayer","colSpan","configureClick","isCurrentLayer","selectLayer","onDoubleClick","FaEye","FaPencilAlt","FaTrash","delLayer","TiDelete","TiPlus","round","resetLayerMod","updateLayer","tabStyle","iconStyle","addGuideStyle","tableTabStyle","PanelGuides","addHGVisible","addVGVisible","addCGVisible","Tabs","TabList","Tab","TabPanel","ind","hgKey","hgVal","FaTimes","contentArea","elementStyle","elementSelectedStyle","categoryDividerStyle","paddingBottom","tableSearchStyle","searchIconStyle","searchInputStyle","PanelLayerElement","matchString","matchedElements","oldElements","newElements","filterCb","text","MdSearch","matcharray","toggleButtonStyle","toggleButtonStyleOver","FooterToggleButton","over","toggleState","isActive","toggleOn","toggleOff","toggleOver","toggleOut","toggle","labelContainerStyle","contentContainerStyleActive","bottom","contentContainerStyleInactive","contentHeaderStyle","titleStyle","contentAreaStyle","iconCloseStyleOut","borderLeft","iconCloseStyleOver","textStyle","FooterContentButton","closeOver","content","LabelIcon","labelIconStyle","labelTextStyle","inputTitleStyle","VERSION","AppState","PlannerModels","store","createStore","action","plannerState","dispatch","plugins","getState","PlannerPlugins","Keyboard","Autosave","ConsoleDebugger","toolbarButtons","ToolbarScreenshotButton","ReactDOM","render","BrowserRouter","Routes","Route","MyCatalog","stateExtractor","getElementById","Areas","Lines","Holes","Items","registerCategory","sashWindow","venetianBlindWindow","windowCurtain","door","doorDouble","panicDoor","panicDoorDouble","slidingDoor","STYLE_HOVER","EREG_NUMBER","autoComplete","WebkitAppearance","WebkitBorderRadius","backgroundPosition","backgroundRepeat","sliderContainerStyle","sliderStyle","textContainerStyle","Seq","actionName","checkboxStyle","checked","arguments","initialState","select","updatedState","detectAndUpdateAreas","setPropertiesOnSelected","updatePropertiesOnSelected","setAttributesOnSelected","group","unselect","selectedLines","selectedHoles","selectedItems","historyPop","historyPush","date","updateProperties","currHistory","previousPosition","findIndex","updateIn","pageIndex","take","default","calculateInnerCycles","edgesArray","innerCycles","graph","Graph","addEdge","BCC","subgraphs","subgraph","edgesOfSubgraphsArray","edges","es","edge","v_cycles","cycle","isClockWiseOrder","innerCycleWithCoords","twiceEnclosedArea","create_array","Edge","u","v","time","E","adj","w","disc","low","st","parent","_BCCUtil","component","Set","getVerticesFromBiconnectedComponent","mod","compute_angle","P","get_starting_edge","incidences","ev_mapping","get_next_edge","EV","n_items","out","index","endpoint","find_cycles","ev","compute_ev_mapping","incidence","angle","i1","i2","compute_incidences","V_cycles","E_cycles","dir_E_cycles","V_cycle","E_cycle","dir_E_cycle","next","start","e_cycles","dir_e_cycles","cycles","indexes","e_cycle","v_cycle","find_short_cycles_indexes","indx","rooms_sums","room","positive_count","rm_neg","sceneSnapElements","vertexID","xCycle","yCycle","xMul","yMul","onXCross","onYCross","hValues","vValues","hVal","vVal","historyStructure","toPush","diff","pop","shortid","require","generate","substr","toUpperCase","groupID","layerList","setAlterate","groupLayerID","groupLayerElements","g","newState","GroupModel","layerElements","elementPrototype","addElement","elementID","actualList","contains","reloadBaricenter","xBar","yBar","elementCount","vID","xM","yM","lineVertices","areaVertices","setBarycenter","filterNot","mergeIn","removeIn","deleteIn","xV","yV","setAttributes","xI","yI","newAlpha","barX","barY","newX","newY","rI","sameSet","set1","set2","isSuperset","isSubset","LayerModel","elems","linesArray","vertexID_to_verticesArrayIndex","verticesArrayIndex_to_vertexID","latestVertexIndex","innerCyclesByVerticesArrayIndex","innerCyclesByVerticesID","vertexIndex","reverse","areaIDs","areaInUse","find","areaVerticesCoords","resultAdd","verticesCoordsForArea","holesList","areaVerticesList","flatten","doubleHoles","areaHoles","areaHoleID","doubleHoleID","v_id0","v_id1","doubleVertices","doubleVertex","reduced","reducedState","biReduced","stateV0","stateV1","factoryElement","generateName","selectElement","removeElement","stateL1","stateL2","splitPointOffset","holeOffset","pointsPair","zip","skip","stateL","holeWithOffsetPoint","offsetPosition","newOffset","oldProperties","oldHoles","hasCommonEndpoint","orderedVertices","oldLineLength","addFromPoints","stateV","sceneComponentType","replaceVertex","stateLV","createAvoidingIntersections","startPointX","startPointY","startVertex0X","startVertex0Y","startVertex1X","startVertex1Y","diffX","diffY","newVertex0X","newVertex0Y","newVertex1X","newVertex1Y","curSnap0","curSnap1","maxV","minV","lineLength","holesWithOffsetPosition","pointOnLine","lineGroups","mergeEqualsVertices","ret","addedLine","oldLineGroup","hasIn","lineAttributes","lAttr","vertexOne","vertexTwo","_unitLength","ID","selectedHole","cosAlpha","sinAlpha","minLeftVertexHole","maxRightVertexHole","findEntry","removed","hl","line_holes","stateH","removeCursor","createCursor","hAttr","offsetA","offsetB","_unitA","_unitB","mergeDeepIn","relatedPrototype","relatedID","VertexModel","vertexAttributes","elementIndex","forceRemove","delete","previousMode","oldVertexID","oldVertex","lineType","lineProps","removeZeroLengthLines","verticesCoords","stateI","originalX","originalY","itemAttributes","hGuideID","vGuideID","CircularGuide","selectToolDrawingHole","selectToolDrawingItem","selectToolDrawingLine","createFromSelectedElements","barycenter","removeAndDeleteElements","rotate","Toolbar","wrapperStyle","Sidebar","flexFlow","tab","actionNamespace","plugin","contentW","toolbarH","contentH","wrapHeight","extractedState","setTab","preventDefault","allowProjectFileSupport","arrayOf","autosaveKey","autosaveDelay","sidebarComponents","footerbarComponents","customContents","softwareSignature","childContextTypes","connect","reduxState","bindActionCreators","selectTool3DView","selectTool3DFirstPerson","addGroup","addGroupFromSelected","selectGroup","unselectGroup","addToGroup","removeFromGroup","setGroupAttributes","setGroupProperties","setGroupBarycenter","removeGroup","removeGroupAndDeleteElements","groupTranslate","groupRotate","ToolbarSaveButton","ToolbarLoadButton","ToolbarLoadSVGButton","sampleJSON","parse","jsonData","FaFileImport","ASIDE_STYLE","selectedCursor","boxH","box","btmbox","scenseValue","newVal","withStyles","subtype","wrap","menus","menuItems","setmenuItems","fullWidth","searchedMenus","menu","includes","idx","container","useNavigate","CustomContent","data-element-root","data-prototype","data-id","data-selected","data-layer","cx","cy","renderedHoles","startAt","renderedHole","render2D","renderedHolesRuler","elementWidth","leftlength","rightlength","renderedRulerLeft","renderedRulerRight","renderedLine","renderedRulerUp","renderedRulerDown","RulerLeft","flex","floodColor","stdDeviation","tableValues","operator","in","RulerRight","STYLE_CIRCLE","STYLE_CIRCLE2","STYLE_RECT_SELECTED","setScale","renderedItem","WIDTH","DEPTH","poly11","poly12","poly13","poly14","poly21","poly22","poly23","poly24","poly31","poly32","poly33","poly34","poly41","poly42","poly43","poly44","currentWidth","nextScale","NaN","Fragment","data-part","data-width","data-height","data-scale","ItemDlg","viewBox","renderedAreaSize","rendered","polygonWithHoles","polygonHole","areaSize","holePolygon","String","fromCharCode","renderedGrids","gridID","toList","GridHorizontalStreak","GridVerticalStreak","sharedStyles","elementW","insideElementsStyle","rulerStyle","markerStyle","rulerContainer","grdAutoColumns","positiveRulerContainer","negativeRulerContainer","positiveDomElements","elementH","textOrientation","writingMode","grdAutoRows","renderedCursor","Scene3DViewer","lastMousePosition","renderingID","renderer","__threeRenderer","WebGLRenderer","preserveDrawingBuffer","canvasWrapper","findDOMNode","refs","setClearColor","Color","setSize","aspectRatio","camera","PerspectiveCamera","cameraPositionX","cameraPositionY","cameraPositionZ","light","AmbientLight","spotLight1","SpotLight","toIntersect","Vector2","raycaster","Raycaster","mouseDownEvent","offsetX","offsetY","mouseUpEvent","setFromCamera","intersects","intersectObjects","domElement","orbitController","OrbitControls","spotLightTarget","elemID","updateMatrix","updateMatrixWorld","requestAnimationFrame","orbitControls","cancelAnimationFrame","removeEventListener","renderLists","aspect","updateProjectionMatrix","changedValues","React","gridMesh","font","FontLoader","HELVETIKER","\"","streak","counter","LineBasicMaterial","shape","TextGeometry","wrapper","MeshBasicMaterial","words","THREE","quat","quatInverse","lastPosition","lastQuaternion","enabled","minDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","clone","position0","zoom0","getPolarAngle","spherical","phi","getAzimuthalAngle","reset","scope","copy","changeEvent","STATE","NONE","Quaternion","setFromUnitVectors","inverse","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","makeSafe","panOffset","setFromSpherical","lookAt","zoomChanged","distanceToSquared","EPS","dot","quaternion","onContextMenu","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","targetDistance","tan","fov","clientHeight","matrix","OrthographicCamera","clientWidth","dollyIn","dollyScale","dollyOut","button","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","subVectors","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","passive","EventDispatcher","defineProperties","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","Viewer3DFirstPerson","stopRendering","prevTime","performance","velocity","moveForward","moveBackward","moveLeft","moveRight","canJump","sceneOnTop","pointLight","PointLight","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","initPointerLock","controls","pointerlockChangeEvent","requestPointerLockEvent","pointerlockChangeListener","yInitialPosition","getObject","keyDownEvent","moveResult","firstPersonOnKeyDown","keyUpEvent","firstPersonOnKeyUp","pointer","pointerMaterial","depthTest","depthWrite","pointerGeometry1","linePointer1","pointerGeometry2","linePointer2","renderDepth","pointerGeometry3","linePointer3","mouseVector","firstPersonMouseDown","autoClear","delta","normalize","translateX","translateY","translateZ","controlObjectPosition","clear","clearDepth","rendererElement","havePointerLock","pointerlockchange","PointerLockControls","pitchObject","yawObject","PI_2","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","getDirection","Euler","applyEuler","containerStyle","overflowX","itemsStyle","gridGap","searchContainer","WebkitTransition","searchText","searchInput","historyContainer","historyElementStyle","CatalogList","currentCategory","getCategory","elementsToDisplay","toRet","curr","flattenCategories","filtered","categoriesToDisplay","breadcrumbComponent","breadcrumbsNames","pathName","names","pathSize","turnBackButton","selectedHistory","selectedHistoryElements","cat","elem","STYLE_BOX","alignSelf","justifySelf","STYLE_BOX_HOVER","STYLE_TITLE_HOVER","STYLE_IMAGE_CONTAINER","STYLE_IMAGE","backgroundSize","STYLE_IMAGE_HOVER","STYLE_PLUS_HOVER","STYLE_DESCRIPTION","STYLE_TAGS","listStyle","STYLE_TAG","CatalogItem","image","tag","description","breadcrumbStyle","breadcrumbTextStyle","breadcrumbLastTextStyle","breadcrumbTabStyle","CatalogBreadcrumb","labelNames","lastElement","STYLE_TITLE_HOVERED","STYLE_NEXT_HOVER","CONTAINER_DIV","CatalogPageItem","changePage","MdNavigateNext","STYLE_BACK","STYLE_BACK_HOVER","CatalogTurnBackPageItem","MdNavigateBefore","ProjectConfigurator","dataWidth","dataHeight","alert","onSubmit","htmlFor","sortButtonsCb","mapButtonsCb","dom","multiselected","selectedGroup","sorter","onKeyUp","PanelElementEditor","componentRenderer","attrPorpSeparatorStyle","headActionStyle","iconHeadStyle","ElementEditor","attributesFormData","initAttrData","propertiesFormData","initPropData","updateAttribute","v_a","v_b","_lengthA","endAt","_lengthB","catalogElement","mapped","currentValue","defaultValue","attributeName","v_0","v_1","v_b_new","attr","widthLength","halfWidthLength","lengthValue","offsetUnit","offsetAttribute","save","appState","attributeFormData","MdContentCopy","MdContentPaste","getPropertyType","updateProperty","AttributesEditor","ItemAttributesEditor","inputStyle","renderedX","renderedY","renderedR","LineAttributesEditor","HoleAttributesEditor","tablegroupStyle","PanelGroupEditor","nextContext","FaUnlink","PanelMultiElementsEditor","selectedGroupID","selecteds","selectedJs","PanelGroups","newEmptyHover","newSelectedHover","selectClick","shouldHighlight","rowStyle","dimension","lSum","elProt","FaLink","FooterBar","footerBarStyle","boxSizing","leftTextStyle","rightTextStyle","coordStyle","appMessageStyle","globalState","errorsJsx","err","toLocaleString","errorLableStyle","errorIconStyle","warningsJsx","warningLableStyle","warningIconStyle","updateSnapMask","MdAddCircle","toString","MdWarning","TabsStyle","menubar","Link","backbarWrap","backbar","barsubbarH","barsubbar","barsub","textDecoration","paragrah1","paragrah2","Checkbox","delay","localStorage","getModifierState","tempSnapConfiguartion","getStore","do","dispatchAction","groupCollapsed","groupEnd","WallFactory","AreaFactory","textures","wallElement","strokeDasharray","STYLE_RECT","poly1","poly2","poly3","poly4","angleAbs","buildWall","oldElement","updatedWall","textureValues","none","textureName","bricks","inverted","app","halfThickness","halfDistance","soulMaterial","soul","BoxGeometry","holeWidth","holeDistance","holeGeometry","holeMesh","wallBSP","ThreeBSP","holeBSP","wallWithHoleBSP","subtract","toMesh","frontMaterial","backMaterial","applyTexture","scaleFactor","texturedFaceDistance","frontFace","halfPI","backFace","noPerf","getObjectByName","newThickness","oldThickness","originalThickness","xTemp","zTemp","loader","TextureLoader","uri","needsUpdate","wrapS","RepeatWrapping","wrapT","repeat","lengthRepeatScale","heightRepeatScale","normalMap","normalScale","normalScaleX","normalScaleY","_length_i","face","faceVertexUvs","uvs","polygons","Polygon","Node","Matrix4","tree","faces","Face3","vertexNormals","applyMatrix4","Face4","calculateProperties","other_tree","invert","clipTo","build","allPolygons","polygon_vertice_count","vertex_idx_a","vertex_idx_b","vertex_idx_c","verticeUvs","getInverse","polygon_count","vertice_dict","uv","toGeometry","setFromMatrixPosition","setFromRotationMatrix","cross","vertice_count","side_value","classification","num_positive","num_negative","classifyVertex","coplanar_front","coplanar_back","front","back","classifySide","ti","tj","vi","vj","interpolate","scalar","other","lerp","divider","splitPolygon","clipPolygons","areaElement","layerElementsVisible","patternColor","createArea","updatedArea","Shape","moveTo","lineTo","areaMaterial","MeshPhongMaterial","side","DoubleSide","holeCoords","holeShape","createShape","shapeGeometry","ShapeGeometry","computeBoundingBox","range","v3","uvsNeedUpdate","assignUVs","shapeCoords","parquet","tile1","ceramic","strand_porcelain","grass","painted","cached3DDoor","STYLE_HOLE_SELECTED","STYLE_LINE_SELECTED","STYLE_ARC_SELECTED","STYLE_PNG_BASE","flip_orizzontal","arcPath","holePath","onLoadItem","initialWidth","initialHeight","initialThickness","linewidth","renderOrder","mtl","obj","img","dirname","manager","DefaultLoadingManager","onLoad","onProgress","onError","FileLoader","setPath","texturePath","setBaseUrl","setCrossOrigin","crossOrigin","setMaterialOptions","materialOptions","delimiter_pattern","materialsInfo","trim","charAt","pos","substring","ss","materialCreator","MaterialCreator","setManager","baseUrl","materialsArray","nameLookup","FrontSide","convert","converted","mn","mat","covmat","prop","lprop","normalizeRGB","ignoreZeroRGBs","getIndex","materialName","getAsArray","createMaterial_","resolveURL","fromArray","specular","texParams","getTextureParams","loadTexture","specularMap","shininess","bumpMap","matParams","bumpScale","join","mapping","Loader","Handlers","object_pattern","material_library_pattern","material_use_pattern","ParserState","objects","normals","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","mtllib","groupStart","cloned","end","lastMultiMaterial","declared","finalize","parseVertexIndex","len","parseNormalIndex","parseUVIndex","addVertex","dst","addVertexPoint","addVertexLine","addNormal","addColor","addUV","addUVLine","addFace","ua","ub","uc","na","nb","nc","vLen","ia","ib","ic","uvLen","nLen","addPointGeometry","addLineGeometry","uvi","lineFirstChar","trimLeft","vertexData","faceVertices","jl","vertexParts","lineParts","lineUVs","li","llen","parts","pointData","exec","isLine","isPoints","hasVertexColors","buffergeometry","BufferGeometry","addAttribute","Float32BufferAttribute","computeVertexNormals","createdMaterials","miLen","sourceMaterial","PointsMaterial","materialPoints","sizeAttenuation","materialLine","lights","flatShading","vertexColors","VertexColors","NoColors","Points","timeEnd","MeshLambertMaterial","metalBlue","darkGrey","boxMaterials","makeHandle","handle","geometry_p1","CylinderGeometry","geometry_p2","SphereGeometry","geometry_p3","makeHandleBase","handleBase","geometryBase1","geometryBase2","lock","LockGeometry1","lockGeometry2","lockGeometry3","lock_p1","lock_p2","lock_p3","makeLock","handleBase1","handleBase2","flip_horizontal","arcPath2","holeStyle","arcStyle","newAltitude","door_double","LongDoorGeometry","longDoor","ShortDoorGeometry","shortDoor","handle2","makeDoor","valuePosition","deltaZ","bbox","STYLE_HOLE_BASE","STYLE_LINE_BASE","STYLE_ARC_BASE","epsilon","lineStyle","turquoise","metalBlueGrey","makePanicDoor","mechanism","BaseGeometry","FirstBlockGeometry","SecondBlockGeometry","base","FirstBlock","SecondBlock","doorLeft","makeDoorStructure","doorRight","BaseGeometry1","BaseGeometry2","geometryLock1","geometryLock2","geometryLock3","lockPiece1","lockPiece2","lockPiece3","makeLockKey","base1","base2","hilt","GeometryPiece1","GeometryPiece2","GeometryPiece3","piece1","piece2","piece3","piece4","makeHilt","doorLeftPivot","makePivot","doorRightPivot","safetyHandleLeft","makeSafetyHandle","safetyHandleRight","doorLockLeft","makeDoorLock","doorLockRight","block","DoorLockGeometry1","DoorLockGeometry2","DoorLock1","DoorLock2","handleSupportGeometry","PushButtonGeometry","PushButtonCoverGeometry","handleSupport","pushButton","pushButtonCover1","pushButtonCover2","DoorPivot","DownPivotGeometry","UpPivotGeometry","downPivot1","upPivot1","downPivot2","upPivot2","lowBaseDoorGeometry","middleBaseDoorGeometry","highBaseDoorGeometry","BorderCoverDoorGeometry1","BorderCoverDoorGeometry2","MiddleDoorGeometry2","MiddleDoorGeometry1","HighDoorGeometry","glassGeometry","LowDoorGeometry","glassCoverVertical","glassCoverHorizontal","lowCoverDoor","middleDoor1","middleDoor2","baseDoor","middleCoverDoor1","middleCoverDoor2","highCoverDoor","highDoor","borderCoverDoor1","borderCoverDoor2","glass","glassVerticalCover1","glassVerticalCover2","glassHorizontalCover1","glassHorizontalCover2","flip_value","handleSide_value","handleSide","PieceGeometry1","PieceGeometry2","DoorLock","doorLockGeometry1","doorLockGeometry2","doorLock1","doorLock2","leftDoor","Lock","geometry1","geometry2","geometry3","LockPiece1","LockPiece2","LockPiece3","Geometry_p1","Geometry_p2","Geometry_p3","leftDoorPivot","rightDoorPivot","doorLock","HandleSupportGeometry","PushGeometry","CoverPushGeometry","PushButton","CoverPush1","CoverPush2","flip_vertical","scaleX","scaleY","rotateAngle","tX","tY","pX1","pX2","pY1","pY2","cached3DWindow","holeStyle2","doorShape","doorHole","Path","ExtrudeGeometry","steps","bevelEnabled","bevelThickness","bevelSize","bevelSegments","doorGeometry","door2","barGeometry","doorBar","HandleGeometry1","handle_p1","HandleGeometry2","handle_p2","venetian","createTenda","roundedRectShape","quadraticCurveTo","holePath1","arc","holePath2","holePath3","holePath4","holePath5","extrudeSettings","tubo","roundedRectShape2","extrudeSettings2","mesh2","valueObject","width1","STYLE_HOLE_INTERN_BASE","holeInternStyle","holeInternPath","Tenda","geom","applyMatrix","makeTranslation","meshMaterial","createMesh","ParametricGeometry","TorusGeometry","torus","geometryAsta","asta","asta2","geometrySphereUp","sphere","sphere2","sphere3","sphere4","epsilonIntern","widthIntern","STYLE_TRANPARENT","dis1","dis2","dis3","dis4","INNER_WIDTH","INNER_HEIGHT","rx","ry","CIRCLE_RADIUS","H1","poly61","poly62","BOTTOM1","poly63","poly64","poly71","poly72","poly81","poly82","H2","poly83","poly84","poly141","poly142","poly143","poly144","poly151","poly152","poly153","poly154","poly161","poly162","poly51","poly131","poly01","poly02","poly03","poly04","poly52","poly53","poly54","poly73","poly74","PARAM1","PARAM2","TOP","poly91","poly92","poly102","GAP1","poly103","poly101","RADIUS","GAP2","poly93","poly94","poly111","poly112","poly113","poly114","poly121","poly122","poly123","poly124","imageBrowserDownload","imageUri","canvas","getElementsByTagName","toDataURL","MdCamera","svgElements","maxWidthSVGElement","baseVal","serializer","XMLSerializer","Image","ctx","getContext","heightAtt","createAttribute","setAttributeNode","widthAtt","fillStyle","fillRect","btoa","serializeToString","onload","drawImage","navigate","icon1","subscription","miniscription","icon2","minHeight","paddingTop","checkType","spacing","xs","sm","md","uploadbtn","onchange","inputbox","inputboxscript","close"],"mappings":"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","file":"b0357aebef1064679f6a.app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([239,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// ACTIONS project\r\nexport const NEW_PROJECT = \"NEW_PROJECT\";\r\nexport const LOAD_PROJECT = \"LOAD_PROJECT\";\r\nexport const SAVE_PROJECT = \"SAVE_PROJECT\";\r\nexport const OPEN_CATALOG = \"OPEN_CATALOG\";\r\nexport const SELECT_TOOL_EDIT = \"SELECT_TOOL_EDIT\";\r\nexport const UNSELECT_ALL = \"UNSELECT_ALL\";\r\nexport const SET_PROPERTIES = \"SET_PROPERTIES\";\r\nexport const SET_ITEMS_ATTRIBUTES = \"SET_ITEMS_ATTRIBUTES\";\r\nexport const SET_LINES_ATTRIBUTES = \"SET_LINES_ATTRIBUTES\";\r\nexport const SET_HOLES_ATTRIBUTES = \"SET_HOLES_ATTRIBUTES\";\r\nexport const REMOVE = \"REMOVE\";\r\nexport const UNDO = \"UNDO\";\r\nexport const ROLLBACK = \"ROLLBACK\";\r\nexport const SET_PROJECT_PROPERTIES = \"SET_PROJECT_PROPERTIES\";\r\nexport const OPEN_PROJECT_CONFIGURATOR = \"OPEN_PROJECT_CONFIGURATOR\";\r\nexport const INIT_CATALOG = \"INIT_CATALOG\";\r\nexport const UPDATE_MOUSE_COORDS = \"UPDATE_MOUSE_COORDS\";\r\nexport const UPDATE_ZOOM_SCALE = \"UPDATE_ZOOM_SCALE\";\r\nexport const TOGGLE_SNAP = \"TOGGLE_SNAP\";\r\nexport const CHANGE_CATALOG_PAGE = \"CHANGE_CATALOG_PAGE\";\r\nexport const GO_BACK_TO_CATALOG_PAGE = \"GO_BACK_TO_CATALOG_PAGE\";\r\nexport const THROW_ERROR = \"THROW_ERROR\";\r\nexport const THROW_WARNING = \"THROW_WARNING\";\r\nexport const COPY_PROPERTIES = \"COPY_PROPERTIES\";\r\nexport const PASTE_PROPERTIES = \"PASTE_PROPERTIES\";\r\nexport const PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY =\r\n  \"PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY\";\r\nexport const ALTERATE_STATE = \"ALTERATE_STATE\";\r\nexport const SET_MODE = \"SET_MODE\";\r\nexport const ADD_HORIZONTAL_GUIDE = \"ADD_HORIZONTAL_GUIDE\";\r\nexport const ADD_VERTICAL_GUIDE = \"ADD_VERTICAL_GUIDE\";\r\nexport const ADD_CIRCULAR_GUIDE = \"ADD_CIRCULAR_GUIDE\";\r\nexport const REMOVE_HORIZONTAL_GUIDE = \"REMOVE_HORIZONTAL_GUIDE\";\r\nexport const REMOVE_VERTICAL_GUIDE = \"REMOVE_VERTICAL_GUIDE\";\r\nexport const REMOVE_CIRCULAR_GUIDE = \"REMOVE_CIRCULAR_GUIDE\";\r\n\r\n// ACTIONS viewer2D\r\nexport const SELECT_TOOL_ZOOM_IN = \"SELECT_TOOL_ZOOM_IN\";\r\nexport const SELECT_TOOL_ZOOM_OUT = \"SELECT_TOOL_ZOOM_OUT\";\r\nexport const SELECT_TOOL_PAN = \"SELECT_TOOL_PAN\";\r\nexport const UPDATE_2D_CAMERA = \"UPDATE_2D_CAMERA\";\r\n\r\n//ACTIONS viewer3D\r\nexport const SELECT_TOOL_3D_VIEW = \"SELECT_TOOL_3D_VIEW\";\r\nexport const SELECT_TOOL_3D_FIRST_PERSON = \"SELECT_TOOL_3D_FIRST_PERSON\";\r\n\r\n//ACTIONS items\r\nexport const SELECT_TOOL_DRAWING_ITEM = \"SELECT_TOOL_DRAWING_ITEM\";\r\nexport const UPDATE_DRAWING_ITEM = \"UPDATE_DRAWING_ITEM\";\r\nexport const END_DRAWING_ITEM = \"END_DRAWING_ITEM\";\r\nexport const BEGIN_DRAGGING_ITEM = \"BEGIN_DRAGGING_ITEM\";\r\nexport const UPDATE_DRAGGING_ITEM = \"UPDATE_DRAGGING_ITEM\";\r\nexport const END_DRAGGING_ITEM = \"END_DRAGGING_ITEM\";\r\nexport const BEGIN_ROTATING_ITEM = \"BEGIN_ROTATING_ITEM\";\r\nexport const UPDATE_ROTATING_ITEM = \"UPDATE_ROTATING_ITEM\";\r\nexport const END_ROTATING_ITEM = \"END_ROTATING_ITEM\";\r\nexport const BEGIN_RESIZE_ITEM_RIGHT_BOTTOM = \"BEGIN_RESIZE_ITEM_RIGHT_BOTTOM\";\r\nexport const UPDATE_RESIZE_ITEM_RIGHT_BOTTOM =\r\n  \"UPDATE_RESIZE_ITEM_RIGHT_BOTTOM\";\r\nexport const END_RESIZE_ITEM_RIGHT_BOTTOM = \"END_RESIZE_ITEM_RIGHT_BOTTOM\";\r\nexport const BEGIN_RESIZE_ITEM_RIGHT_TOP = \"BEGIN_RESIZE_ITEM_RIGHT_TOP\";\r\nexport const UPDATE_RESIZE_ITEM_RIGHT_TOP = \"UPDATE_RESIZE_ITEM_RIGHT_TOP\";\r\nexport const END_RESIZE_ITEM_RIGHT_TOP = \"END_RESIZE_ITEM_RIGHT_TOP\";\r\nexport const BEGIN_RESIZE_ITEM_LEFT_TOP = \"BEGIN_RESIZE_ITEM_LEFT_TOP\";\r\nexport const UPDATE_RESIZE_ITEM_LEFT_TOP = \"UPDATE_RESIZE_ITEM_LEFT_TOP\";\r\nexport const END_RESIZE_ITEM_LEFT_TOP = \"END_RESIZE_ITEM_LEFT_TOP\";\r\nexport const BEGIN_RESIZE_ITEM_LEFT_BOTTOM = \"BEGIN_RESIZE_ITEM_LEFT_BOTTOM\";\r\nexport const UPDATE_RESIZE_ITEM_LEFT_BOTTOM = \"UPDATE_RESIZE_ITEM_LEFT_BOTTOM\";\r\nexport const END_RESIZE_ITEM_LEFT_BOTTOM = \"END_RESIZE_ITEM_LEFT_BOTTOM\";\r\nexport const RESIZE_ITEM = \"RESIZE_ITEM\";\r\n\r\n//ACTIONS groups\r\nexport const ADD_GROUP = \"ADD_GROUP\";\r\nexport const ADD_GROUP_FROM_SELECTED = \"ADD_GROUP_FROM_SELECTED\";\r\nexport const SELECT_GROUP = \"SELECT_GROUP\";\r\nexport const UNSELECT_GROUP = \"UNSELECT_GROUP\";\r\nexport const ADD_TO_GROUP = \"ADD_TO_GROUP\";\r\nexport const REMOVE_FROM_GROUP = \"REMOVE_FROM_GROUP\";\r\nexport const SET_GROUP_PROPERTIES = \"SET_GROUP_PROPERTIES\";\r\nexport const SET_GROUP_ATTRIBUTES = \"SET_GROUP_ATTRIBUTES\";\r\nexport const SET_GROUP_BARYCENTER = \"SET_GROUP_BARYCENTER\";\r\nexport const REMOVE_GROUP = \"REMOVE_GROUP\";\r\nexport const REMOVE_GROUP_AND_DELETE_ELEMENTS =\r\n  \"REMOVE_GROUP_AND_DELETE_ELEMENTS\";\r\nexport const GROUP_TRANSLATE = \"GROUP_TRANSLATE\";\r\nexport const GROUP_ROTATE = \"GROUP_ROTATE\";\r\n\r\n//ACTION drawings\r\nexport const SELECT_HOLE = \"SELECT_HOLE\";\r\nexport const SELECT_AREA = \"SELECT_AREA\";\r\nexport const SELECT_ITEM = \"SELECT_ITEM\";\r\nexport const SELECT_LINE = \"SELECT_LINE\";\r\nexport const SELECT_TOOL_DRAWING_LINE = \"SELECT_TOOL_DRAWING_LINE\";\r\nexport const BEGIN_DRAWING_LINE = \"BEGIN_DRAWING_LINE\";\r\nexport const UPDATE_DRAWING_LINE = \"UPDATE_DRAWING_LINE\";\r\nexport const END_DRAWING_LINE = \"END_DRAWING_LINE\";\r\nexport const SELECT_TOOL_DRAWING_HOLE = \"SELECT_TOOL_DRAWING_HOLE\";\r\nexport const UPDATE_DRAWING_HOLE = \"UPDATE_DRAWING_HOLE\"; //SHOULD BE SLPITTED IN BEGIN_DRAWING_HOLE AND UPDATE_DRAWING_HOLE\r\nexport const END_DRAWING_HOLE = \"END_DRAWING_HOLE\";\r\nexport const BEGIN_DRAGGING_LINE = \"BEGIN_DRAGGING_LINE\";\r\nexport const UPDATE_DRAGGING_LINE = \"UPDATE_DRAGGING_LINE\";\r\nexport const END_DRAGGING_LINE = \"END_DRAGGING_LINE\";\r\nexport const SELECT_TOOL_UPLOAD_IMAGE = \"SELECT_TOOL_UPLOAD_IMAGE\";\r\nexport const BEGIN_UPLOADING_IMAGE = \"BEGIN_UPLOADING_IMAGE\";\r\nexport const END_UPLOADING_IMAGE = \"END_UPLOADING_IMAGE\";\r\nexport const BEGIN_FITTING_IMAGE = \"BEGIN_FITTING_IMAGE\";\r\nexport const END_FITTING_IMAGE = \"END_FITTING_IMAGE\";\r\nexport const BEGIN_DRAGGING_HOLE = \"BEGIN_DRAGGING_HOLE\";\r\nexport const UPDATE_DRAGGING_HOLE = \"UPDATE_DRAGGING_HOLE\";\r\nexport const END_DRAGGING_HOLE = \"END_DRAGGING_HOLE\";\r\n\r\n//ACTIONS vertices\r\nexport const BEGIN_DRAGGING_VERTEX = \"BEGIN_DRAGGING_VERTEX\";\r\nexport const UPDATE_DRAGGING_VERTEX = \"UPDATE_DRAGGING_VERTEX\";\r\nexport const END_DRAGGING_VERTEX = \"END_DRAGGING_VERTEX\";\r\n\r\n//ACTIONS scene\r\nexport const SET_LAYER_PROPERTIES = \"SET_LAYER_PROPERTIES\";\r\nexport const ADD_LAYER = \"ADD_LAYER\";\r\nexport const SELECT_LAYER = \"SELECT_LAYER\";\r\nexport const REMOVE_LAYER = \"REMOVE_LAYER\";\r\nexport const UPDATE_VERTICAL_FLIP_ITEM = \"UPDATE_VERTICAL_FLIP_ITEM\";\r\nexport const UPDATE_HORIZONTAL_FLIP_ITEM = \"UPDATE_HORIZONTAL_FLIP_ITEM\";\r\n\r\n\r\n//GROUPING ACTIONS\r\nexport const PROJECT_ACTIONS = {\r\n  NEW_PROJECT,\r\n  LOAD_PROJECT,\r\n  SAVE_PROJECT,\r\n  OPEN_CATALOG,\r\n  SELECT_TOOL_EDIT,\r\n  UNSELECT_ALL,\r\n  SET_PROPERTIES,\r\n  SET_ITEMS_ATTRIBUTES,\r\n  SET_LINES_ATTRIBUTES,\r\n  SET_HOLES_ATTRIBUTES,\r\n  REMOVE,\r\n  UNDO,\r\n  ROLLBACK,\r\n  SET_PROJECT_PROPERTIES,\r\n  OPEN_PROJECT_CONFIGURATOR,\r\n  INIT_CATALOG,\r\n  UPDATE_MOUSE_COORDS,\r\n  UPDATE_ZOOM_SCALE,\r\n  TOGGLE_SNAP,\r\n  CHANGE_CATALOG_PAGE,\r\n  GO_BACK_TO_CATALOG_PAGE,\r\n  THROW_ERROR,\r\n  THROW_WARNING,\r\n  COPY_PROPERTIES,\r\n  PASTE_PROPERTIES,\r\n  PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\r\n  ALTERATE_STATE,\r\n  SET_MODE,\r\n  ADD_HORIZONTAL_GUIDE,\r\n  ADD_VERTICAL_GUIDE,\r\n  ADD_CIRCULAR_GUIDE,\r\n  REMOVE_HORIZONTAL_GUIDE,\r\n  REMOVE_VERTICAL_GUIDE,\r\n  REMOVE_CIRCULAR_GUIDE,\r\n};\r\n\r\nexport const VIEWER2D_ACTIONS = {\r\n  SELECT_TOOL_ZOOM_IN,\r\n  SELECT_TOOL_ZOOM_OUT,\r\n  SELECT_TOOL_PAN,\r\n  UPDATE_2D_CAMERA,\r\n};\r\n\r\nexport const VIEWER3D_ACTIONS = {\r\n  SELECT_TOOL_3D_VIEW,\r\n  SELECT_TOOL_3D_FIRST_PERSON,\r\n};\r\n\r\nexport const ITEMS_ACTIONS = {\r\n  SELECT_ITEM,\r\n  SELECT_TOOL_DRAWING_ITEM,\r\n  UPDATE_DRAWING_ITEM,\r\n  END_DRAWING_ITEM,\r\n  BEGIN_DRAGGING_ITEM,\r\n  UPDATE_DRAGGING_ITEM,\r\n  END_DRAGGING_ITEM,\r\n  BEGIN_ROTATING_ITEM,\r\n  UPDATE_ROTATING_ITEM,\r\n  END_ROTATING_ITEM,\r\n  BEGIN_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  UPDATE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  END_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  BEGIN_RESIZE_ITEM_RIGHT_TOP,\r\n  UPDATE_RESIZE_ITEM_RIGHT_TOP,\r\n  END_RESIZE_ITEM_RIGHT_TOP,\r\n  BEGIN_RESIZE_ITEM_LEFT_BOTTOM,\r\n  UPDATE_RESIZE_ITEM_LEFT_BOTTOM,\r\n  END_RESIZE_ITEM_LEFT_BOTTOM,\r\n  BEGIN_RESIZE_ITEM_LEFT_TOP,\r\n  UPDATE_RESIZE_ITEM_LEFT_TOP,\r\n  END_RESIZE_ITEM_LEFT_TOP,\r\n  RESIZE_ITEM,\r\n  UPDATE_HORIZONTAL_FLIP_ITEM,\r\n  UPDATE_VERTICAL_FLIP_ITEM\r\n};\r\n\r\nexport const HOLE_ACTIONS = {\r\n  SELECT_HOLE,\r\n  SELECT_TOOL_DRAWING_HOLE,\r\n  UPDATE_DRAWING_HOLE,\r\n  END_DRAWING_HOLE,\r\n  BEGIN_DRAGGING_HOLE,\r\n  UPDATE_DRAGGING_HOLE,\r\n  END_DRAGGING_HOLE,\r\n};\r\n\r\nexport const LINE_ACTIONS = {\r\n  SELECT_LINE,\r\n  SELECT_TOOL_DRAWING_LINE,\r\n  BEGIN_DRAWING_LINE,\r\n  UPDATE_DRAWING_LINE,\r\n  END_DRAWING_LINE,\r\n  BEGIN_DRAGGING_LINE,\r\n  UPDATE_DRAGGING_LINE,\r\n  END_DRAGGING_LINE,\r\n};\r\n\r\nexport const AREA_ACTIONS = {\r\n  SELECT_AREA,\r\n};\r\n\r\nexport const GROUP_ACTIONS = {\r\n  ADD_GROUP,\r\n  ADD_GROUP_FROM_SELECTED,\r\n  SELECT_GROUP,\r\n  UNSELECT_GROUP,\r\n  ADD_TO_GROUP,\r\n  REMOVE_FROM_GROUP,\r\n  SET_GROUP_PROPERTIES,\r\n  SET_GROUP_ATTRIBUTES,\r\n  SET_GROUP_BARYCENTER,\r\n  REMOVE_GROUP,\r\n  REMOVE_GROUP_AND_DELETE_ELEMENTS,\r\n  GROUP_TRANSLATE,\r\n  GROUP_ROTATE,\r\n};\r\n\r\nexport const SCENE_ACTIONS = {\r\n  ADD_LAYER,\r\n  SET_LAYER_PROPERTIES,\r\n  SELECT_LAYER,\r\n  REMOVE_LAYER,\r\n};\r\n\r\nexport const VERTEX_ACTIONS = {\r\n  BEGIN_DRAGGING_VERTEX,\r\n  UPDATE_DRAGGING_VERTEX,\r\n  END_DRAGGING_VERTEX,\r\n};\r\n\r\n//MODES\r\nexport const MODE_IDLE = \"MODE_IDLE\";\r\nexport const MODE_2D_ZOOM_IN = \"MODE_2D_ZOOM_IN\";\r\nexport const MODE_2D_ZOOM_OUT = \"MODE_2D_ZOOM_OUT\";\r\nexport const MODE_2D_PAN = \"MODE_2D_PAN\";\r\nexport const MODE_3D_VIEW = \"MODE_3D_VIEW\";\r\nexport const MODE_3D_FIRST_PERSON = \"MODE_3D_FIRST_PERSON\";\r\nexport const MODE_WAITING_DRAWING_LINE = \"MODE_WAITING_DRAWING_LINE\";\r\nexport const MODE_DRAGGING_LINE = \"MODE_DRAGGING_LINE\";\r\nexport const MODE_DRAGGING_VERTEX = \"MODE_DRAGGING_VERTEX\";\r\nexport const MODE_DRAGGING_ITEM = \"MODE_DRAGGING_ITEM\";\r\nexport const MODE_DRAGGING_HOLE = \"MODE_DRAGGING_HOLE\";\r\nexport const MODE_DRAWING_LINE = \"MODE_DRAWING_LINE\";\r\nexport const MODE_DRAWING_HOLE = \"MODE_DRAWING_HOLE\";\r\nexport const MODE_DRAWING_ITEM = \"MODE_DRAWING_ITEM\";\r\nexport const MODE_ROTATING_ITEM = \"MODE_ROTATING_ITEM\";\r\nexport const MODE_UPLOADING_IMAGE = \"MODE_UPLOADING_IMAGE\";\r\nexport const MODE_FITTING_IMAGE = \"MODE_FITTING_IMAGE\";\r\nexport const MODE_VIEWING_CATALOG = \"MODE_VIEWING_CATALOG\";\r\nexport const MODE_CONFIGURING_PROJECT = \"MODE_CONFIGURING_PROJECT\";\r\nexport const MODE_RESIZE_ITEM_RIGHT_BOTTOM = \"MODE_RESIZE_ITEM_RIGHT_BOTTOM\";\r\nexport const MODE_RESIZE_ITEM_RIGHT_TOP = \"MODE_RESIZE_ITEM_RIGHT_TOP\";\r\nexport const MODE_RESIZE_ITEM_LEFT_TOP = \"MODE_RESIZE_ITEM_LEFT_TOP\";\r\nexport const MODE_RESIZE_ITEM_LEFT_BOTTOM = \"MODE_RESIZE_ITEM_LEFT_BOTTOM\";\r\n\r\n//Thinking about it...\r\n//https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/Proxy\r\n/*\r\nlet MODE_DEF = [\r\n  'IDLE',\r\n  '2D_ZOOM_IN',\r\n  '2D_ZOOM_OUT',\r\n  '2D_PAN',\r\n  '3D_VIEW',\r\n  '3D_FIRST_PERSON',\r\n  'WAITING_DRAWING_LINE',\r\n  'DRAGGING_LINE',\r\n  'DRAGGING_VERTEX',\r\n  'DRAGGING_ITEM',\r\n  'DRAGGING_HOLE',\r\n  'DRAWING_LINE',\r\n  'DRAWING_HOLE',\r\n  'DRAWING_ITEM',\r\n  'ROTATING_ITEM',\r\n  'UPLOADING_IMAGE',\r\n  'FITTING_IMAGE',\r\n  'VIEWING_CATALOG',\r\n  'CONFIGURING_PROJECT',\r\n];\r\n\r\nexport const MODE = new Proxy( MODE_DEF, { get: (target, name) => { return target.indexOf(name) !== -1 ? name : null } } );\r\n*/\r\n\r\nexport const MODE_SNAPPING = [\r\n  MODE_IDLE,\r\n  MODE_2D_ZOOM_IN,\r\n  MODE_2D_ZOOM_OUT,\r\n  MODE_2D_PAN,\r\n  MODE_WAITING_DRAWING_LINE,\r\n  MODE_DRAWING_LINE,\r\n  MODE_DRAWING_HOLE,\r\n  MODE_DRAWING_ITEM,\r\n  MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX,\r\n  MODE_DRAGGING_ITEM,\r\n  MODE_DRAGGING_HOLE,\r\n  MODE_FITTING_IMAGE,\r\n  MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM,\r\n  MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  MODE_RESIZE_ITEM_RIGHT_TOP,\r\n  MODE_RESIZE_ITEM_LEFT_TOP,\r\n  MODE_RESIZE_ITEM_LEFT_BOTTOM,\r\n];\r\n\r\n//UNITS\r\nexport const UNIT_MILLIMETER = \"mm\";\r\nexport const UNIT_CENTIMETER = \"cm\";\r\nexport const UNIT_METER = \"m\";\r\nexport const UNIT_INCH = \"in\";\r\nexport const UNIT_FOOT = \"ft\";\r\nexport const UNIT_MILE = \"mi\";\r\n\r\nexport const UNITS_LENGTH = [\r\n  UNIT_MILLIMETER,\r\n  UNIT_CENTIMETER,\r\n  UNIT_METER,\r\n  UNIT_INCH,\r\n  UNIT_FOOT,\r\n  UNIT_MILE,\r\n];\r\n\r\nexport const EPSILON = 1e-6;\r\n\r\nexport const KEYBOARD_BUTTON_CODE = {\r\n  DELETE: 46,\r\n  BACKSPACE: 8,\r\n  ESC: 27,\r\n  Z: 90,\r\n  ALT: 18,\r\n  C: 67,\r\n  V: 86,\r\n  CTRL: 17,\r\n  ENTER: 13,\r\n  TAB: 9,\r\n};\r\n","// COLORS\r\nexport const COLORS = {\r\n  white: \"#FFF\",\r\n  black: \"#000\",\r\n  grey: \"#F6F6F6\",\r\n};\r\n\r\nexport const MATERIAL_COLORS = {\r\n  500: {\r\n    amber: \"#FFC107\",\r\n    blue_grey: \"#607D8B\",\r\n    blue: \"#2196F3\",\r\n    brown: \"#795548\",\r\n    cyan: \"#00BCD4\",\r\n    deep_orange: \"#FF5722\",\r\n    deep_purple: \"#673AB7\",\r\n    green: \"#4CAF50\",\r\n    grey: \"#9E9E9E\",\r\n    indigo: \"#3F51B5\",\r\n    light_blue: \"#03A9F4\",\r\n    light_green: \"#8BC34A\",\r\n    lime: \"#CDDC39\",\r\n    orange: \"#FF9800\",\r\n    pink: \"#E91E63\",\r\n    purple: \"#9C27B0\",\r\n    red: \"#F44336\",\r\n    teal: \"#009688\",\r\n    yellow: \"#FFEB3B\",\r\n  },\r\n};\r\n\r\nexport const PRIMARY_COLOR = {\r\n  main: \"#FFF\",\r\n  alt: \"#2E2F33\",\r\n  icon: \"#C2C2C2\",\r\n  border: \"1px solid #E4E8EE\",\r\n  text_main: COLORS.white,\r\n  text_alt: \"#EBEBEB\",\r\n  input: \"#55595C\",\r\n};\r\n\r\nexport const SECONDARY_COLOR = {\r\n  main: \"#1CA6FC\",\r\n  alt: \"#005FAF\",\r\n  icon: \"#1CA6FC\",\r\n  border: \"1px solid #FFF\",\r\n};\r\n\r\nexport const MESH_SELECTED = \"#99C3FB\";\r\n\r\nexport const AREA_MESH_COLOR = {\r\n  selected: MESH_SELECTED,\r\n  unselected: \"#F5F4F4\",\r\n};\r\n\r\nexport const LINE_MESH_COLOR = {\r\n  selected: MESH_SELECTED,\r\n  unselected: \"#8E9BA2\",\r\n};\r\n","import * as GeometryUtils from './geometry';\r\nimport * as GraphInnerCycles from './graph-inner-cycles';\r\nimport * as MathUtils from './math';\r\nimport * as SnapUtils from './snap';\r\nimport * as SnapSceneUtils from './snap-scene';\r\nimport * as history from './history';\r\nimport * as ObjectUtils from './objects-utils';\r\nimport IDBroker from './id-broker';\r\nimport NameGenerator from './name-generator';\r\n\r\nexport {\r\n  GeometryUtils,\r\n  GraphInnerCycles,\r\n  MathUtils,\r\n  SnapUtils,\r\n  SnapSceneUtils,\r\n  history,\r\n  IDBroker,\r\n  NameGenerator,\r\n  ObjectUtils\r\n};\r\n\r\nexport default {\r\n  GeometryUtils,\r\n  GraphInnerCycles,\r\n  MathUtils,\r\n  SnapUtils,\r\n  SnapSceneUtils,\r\n  history,\r\n  IDBroker,\r\n  NameGenerator,\r\n  ObjectUtils\r\n};\r\n","import Project from './project';\r\nimport Group from './group';\r\nimport Layer from './layer';\r\nimport Line from './line';\r\nimport Hole from './hole';\r\nimport Vertex from './vertex';\r\nimport Area from './area';\r\nimport Item from './item';\r\nimport { HorizontalGuide, VerticalGuide } from './guide';\r\n\r\nexport {\r\n  Project,\r\n  Group,\r\n  Layer,\r\n  Line,\r\n  Hole,\r\n  Vertex,\r\n  Area,\r\n  Item,\r\n  HorizontalGuide,\r\n  VerticalGuide\r\n};\r\n\r\nexport default {\r\n  Project,\r\n  Group,\r\n  Layer,\r\n  Line,\r\n  Hole,\r\n  Vertex,\r\n  Area,\r\n  Item,\r\n  HorizontalGuide,\r\n  VerticalGuide\r\n};\r\n","import Button from './button';\r\nimport CancelButton from './cancel-button';\r\nimport ContentContainer from './content-container';\r\nimport ContentTitle from './content-title';\r\nimport DeleteButton from './delete-button';\r\nimport FormBlock from './form-block';\r\nimport FormColorInput from './form-color-input';\r\nimport FormLabel from './form-label';\r\nimport FormNumberInput from './form-number-input';\r\nimport FormSelect from './form-select';\r\nimport FormSlider from './form-slider';\r\nimport FormSubmitButton from './form-submit-button';\r\nimport FormTextInput from './form-text-input';\r\n\r\nexport {\r\n  Button,\r\n  CancelButton,\r\n  ContentContainer,\r\n  ContentTitle,\r\n  DeleteButton,\r\n  FormBlock,\r\n  FormColorInput,\r\n  FormLabel,\r\n  FormNumberInput,\r\n  FormSelect,\r\n  FormSlider,\r\n  FormSubmitButton,\r\n  FormTextInput\r\n};\r\n\r\nexport default {\r\n  Button,\r\n  CancelButton,\r\n  ContentContainer,\r\n  ContentTitle,\r\n  DeleteButton,\r\n  FormBlock,\r\n  FormColorInput,\r\n  FormLabel,\r\n  FormNumberInput,\r\n  FormSelect,\r\n  FormSlider,\r\n  FormSubmitButton,\r\n  FormTextInput\r\n};\r\n","import * as projectActions from './project-actions';\r\nimport * as viewer2DActions from './viewer2d-actions';\r\nimport * as viewer3DActions from './viewer3d-actions';\r\nimport * as linesActions from './lines-actions';\r\nimport * as holesActions from './holes-actions';\r\nimport * as sceneActions from './scene-actions';\r\nimport * as verticesActions from './vertices-actions';\r\nimport * as itemsActions from './items-actions';\r\nimport * as areaActions from './area-actions';\r\nimport * as groupsActions from './groups-actions';\r\n\r\nexport {\r\n  projectActions,\r\n  viewer2DActions,\r\n  viewer3DActions,\r\n  linesActions,\r\n  holesActions,\r\n  sceneActions,\r\n  verticesActions,\r\n  itemsActions,\r\n  areaActions,\r\n  groupsActions\r\n};\r\n\r\nexport default {\r\n  projectActions,\r\n  viewer2DActions,\r\n  viewer3DActions,\r\n  linesActions,\r\n  holesActions,\r\n  sceneActions,\r\n  verticesActions,\r\n  itemsActions,\r\n  areaActions,\r\n  groupsActions\r\n};\r\n","const tableStyle = {width: '100%', borderSpacing: '2px 0', marginBottom: '2px'};\r\nconst firstTdStyle = {width: '6em', textTransform:'capitalize'};\r\n\r\nconst PropertyStyle = {\r\n  tableStyle,\r\n  firstTdStyle\r\n};\r\n\r\nexport default PropertyStyle;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport { FaAngleDown, FaAngleUp } from 'react-icons/fa';\r\n\r\nconst STYLE = {\r\n  borderTop: '1px solid #222',\r\n  borderBottom: '1px solid #48494E',\r\n  userSelect: 'none'\r\n};\r\nconst STYLE_TITLE = {\r\n  fontSize: '11px',\r\n  color: SharedStyle.PRIMARY_COLOR.text_alt,\r\n  padding: '5px 15px 8px 15px',\r\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\r\n  textShadow: '-1px -1px 2px rgba(0, 0, 0, 1)',\r\n  boxShadow: 'inset 0px -3px 19px 0px rgba(0,0,0,0.5)',\r\n  margin: '0px',\r\n  cursor: 'pointer'\r\n};\r\nconst STYLE_CONTENT = {\r\n  fontSize: '11px',\r\n  color: SharedStyle.PRIMARY_COLOR.text_alt,\r\n  border: '1px solid #222',\r\n  padding: '0px',\r\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\r\n  textShadow: '-1px -1px 2px rgba(0, 0, 0, 1)'\r\n};\r\nconst STYLE_ARROW = {\r\n  float: 'right'\r\n};\r\n\r\nexport default class Panel extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      opened: props.hasOwnProperty('opened') ? props.opened : false,\r\n      hover: false\r\n    };\r\n  }\r\n\r\n  toggleOpen() {\r\n    this.setState({opened: !this.state.opened});\r\n  }\r\n\r\n  toggleHover() {\r\n    this.setState({hover: !this.state.hover});\r\n  }\r\n\r\n  render() {\r\n\r\n    let { name, headComponents, children } = this.props;\r\n    let { opened, hover } = this.state;\r\n\r\n    return (\r\n      <div style={STYLE}>\r\n        <h3\r\n          style={{...STYLE_TITLE, color: hover ? SharedStyle.SECONDARY_COLOR.main : SharedStyle.PRIMARY_COLOR.text_alt}}\r\n          onMouseEnter={() => this.toggleHover()}\r\n          onMouseLeave={() => this.toggleHover()}\r\n          onClick={() => this.toggleOpen()}\r\n        >\r\n          {name}\r\n          {headComponents}\r\n          {\r\n            opened ?\r\n              <FaAngleUp style={STYLE_ARROW} /> :\r\n              <FaAngleDown style={STYLE_ARROW} />\r\n          }\r\n        </h3>\r\n\r\n        <div style={{...STYLE_CONTENT, display: opened ? 'block' : 'none'}}>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nPanel.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  headComponents: PropTypes.array,\r\n  opened: PropTypes.bool\r\n};\r\n","import Catalog from \"./catalog/catalog\";\r\nimport Translator from \"./translator/translator\";\r\nimport * as Models from \"./models\";\r\nimport reducer from \"./reducers/reducer\";\r\nimport ReactPlanner from \"./react-planner\";\r\nimport Plugins from \"./plugins/export\";\r\nimport * as ReactPlannerConstants from \"./constants\";\r\nimport * as ReactPlannerSharedStyle from \"./shared-style\";\r\nimport ReactPlannerComponents from \"./components/export\";\r\nimport ReactPlannerActions from \"./actions/export\";\r\nimport ReactPlannerReducers from \"./reducers/export\";\r\nimport ReactPlannerClasses from \"./class/export\";\r\nimport ElementsFactories from \"./catalog/factories/export\";\r\nimport ReactPlannerUtils from \"./utils/export\";\r\n\r\nexport {\r\n  Catalog,\r\n  Translator,\r\n  Models,\r\n  reducer,\r\n  ReactPlanner,\r\n  Plugins,\r\n  ReactPlannerConstants,\r\n  ReactPlannerSharedStyle,\r\n  ReactPlannerComponents,\r\n  ReactPlannerActions,\r\n  ReactPlannerReducers,\r\n  ReactPlannerClasses,\r\n  ElementsFactories,\r\n  ReactPlannerUtils,\r\n};\r\n","import MTLLoader from './mtl-loader';\r\nimport OBJLoader from './obj-loader';\r\n\r\nexport function loadObjWithMaterial(mtlFile, objFile, imgPath) {\r\n  let mtlLoader = new MTLLoader();\r\n  mtlLoader.setTexturePath(imgPath);\r\n  let url = mtlFile;\r\n  return new Promise((resolve, reject) => {\r\n\r\n    mtlLoader.load(url, materials => {\r\n      materials.preload();\r\n      let objLoader = new OBJLoader();\r\n      objLoader.setMaterials(materials);\r\n      objLoader.load(objFile, object => resolve(object));\r\n\r\n    });\r\n  });\r\n}\r\n\r\n","import { Record, List, Map, fromJS } from \"immutable\";\r\nimport { MODE_IDLE } from \"./constants\";\r\nimport { SNAP_MASK } from \"./utils/snap\";\r\n\r\nlet safeLoadMapList = (mapList, Model, defaultMap) => {\r\n  return mapList\r\n    ? new Map(mapList).map((m) => new Model(m)).toMap()\r\n    : defaultMap || new Map();\r\n};\r\n\r\nexport class Grid extends Record(\r\n  {\r\n    id: \"\",\r\n    type: \"\",\r\n    properties: Map(),\r\n  },\r\n  \"Grid\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      properties: fromJS(json.properties || {}),\r\n    });\r\n  }\r\n}\r\n\r\nexport const DefaultGrids = new Map({\r\n  h1: new Grid({\r\n    id: \"h1\",\r\n    type: \"horizontal-streak\",\r\n    properties: {\r\n      step: 20,\r\n      colors: [\"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\"],\r\n    },\r\n  }),\r\n  v1: new Grid({\r\n    id: \"v1\",\r\n    type: \"vertical-streak\",\r\n    properties: {\r\n      step: 20,\r\n      colors: [\"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\"],\r\n    },\r\n  }),\r\n});\r\n\r\nexport class ElementsSet extends Record(\r\n  {\r\n    vertices: new List(),\r\n    lines: new List(),\r\n    holes: new List(),\r\n    areas: new List(),\r\n    items: new List(),\r\n  },\r\n  \"ElementsSet\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      vertices: new List(json.vertices || []),\r\n      lines: new List(json.lines || []),\r\n      holes: new List(json.holes || []),\r\n      areas: new List(json.areas || []),\r\n      items: new List(json.items || []),\r\n    });\r\n  }\r\n}\r\n\r\nconst sharedAttributes = {\r\n  id: \"\",\r\n  type: \"\",\r\n  prototype: \"\",\r\n  name: \"\",\r\n  misc: new Map(),\r\n  selected: false,\r\n  properties: new Map(),\r\n  visible: true,\r\n};\r\n\r\nexport class Vertex extends Record(\r\n  {\r\n    ...sharedAttributes,\r\n    x: -1,\r\n    y: -1,\r\n    prototype: \"vertices\",\r\n    lines: new List(),\r\n    areas: new List(),\r\n  },\r\n  \"Vertex\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      lines: new List(json.lines || []),\r\n      areas: new List(json.areas || []),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Line extends Record(\r\n  {\r\n    ...sharedAttributes,\r\n    prototype: \"lines\",\r\n    vertices: new List(),\r\n    holes: new List(),\r\n  },\r\n  \"Line\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      properties: fromJS(json.properties || {}),\r\n      vertices: new List(json.vertices || []),\r\n      holes: new List(json.holes || []),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Hole extends Record(\r\n  {\r\n    ...sharedAttributes,\r\n    prototype: \"holes\",\r\n    offset: -1,\r\n    line: \"\",\r\n  },\r\n  \"Hole\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      properties: fromJS(json.properties || {}),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Cursor extends Record(\r\n  {\r\n    ...sharedAttributes,\r\n    x: 0,\r\n    y: 0\r\n  },\r\n  \"Hole\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      properties: fromJS(json.properties || {}),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Area extends Record(\r\n  {\r\n    ...sharedAttributes,\r\n    prototype: \"areas\",\r\n    vertices: new List(),\r\n    holes: new List(),\r\n  },\r\n  \"Area\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      properties: fromJS(json.properties || {}),\r\n      vertices: new List(json.vertices || []),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Item extends Record(\r\n  {\r\n    ...sharedAttributes,\r\n    prototype: \"items\",\r\n    x: 0,\r\n    y: 0,\r\n    rotation: 0,\r\n    horizontalFlip: false,\r\n    verticalFlip: false,\r\n    zoom: 0\r\n  },\r\n  \"Item\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      properties: fromJS(json.properties || {}),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Layer extends Record(\r\n  {\r\n    id: \"\",\r\n    altitude: 0,\r\n    order: 0,\r\n    opacity: 1,\r\n    name: \"\",\r\n    visible: true,\r\n    vertices: new Map(),\r\n    lines: new Map(),\r\n    holes: new Map(),\r\n    areas: new Map(),\r\n    items: new Map(),\r\n    selected: new ElementsSet(),\r\n  },\r\n  \"Layer\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      vertices: safeLoadMapList(json.vertices, Vertex),\r\n      lines: safeLoadMapList(json.lines, Line),\r\n      holes: safeLoadMapList(json.holes, Hole),\r\n      areas: safeLoadMapList(json.areas, Area),\r\n      items: safeLoadMapList(json.items, Item),\r\n      selected: new ElementsSet(json.selected),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Group extends Record(\r\n  {\r\n    ...sharedAttributes,\r\n    prototype: \"groups\",\r\n    x: 0,\r\n    y: 0,\r\n    rotation: 0,\r\n    elements: new Map(),\r\n  },\r\n  \"Group\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      properties: fromJS(json.properties || {}),\r\n      elements: fromJS(json.elements || {}),\r\n    });\r\n  }\r\n}\r\n\r\nexport const DefaultLayers = new Map({\r\n  \"layer-1\": new Layer({ id: \"layer-1\", name: \"default\" }),\r\n});\r\n\r\nexport class Scene extends Record(\r\n  {\r\n    unit: \"cm\",\r\n    layers: new Map(),\r\n    grids: new Map(),\r\n    selectedLayer: null,\r\n    groups: new Map(),\r\n    width: 6000,\r\n    height: 4000,\r\n    meta: new Map(), //additional info\r\n    guides: new Map(),\r\n  },\r\n  \"Scene\"\r\n) {\r\n  constructor(json = {}) {\r\n    let layers = safeLoadMapList(json.layers, Layer, DefaultLayers);\r\n    super({\r\n      ...json,\r\n      grids: safeLoadMapList(json.grids, Grid, DefaultGrids),\r\n      layers,\r\n      selectedLayer: layers.first().id,\r\n      groups: safeLoadMapList(json.groups || {}, Group),\r\n      meta: json.meta ? fromJS(json.meta) : new Map(),\r\n      guides: json.guides\r\n        ? fromJS(json.guides)\r\n        : new Map({\r\n          horizontal: new Map(),\r\n          vertical: new Map(),\r\n          circular: new Map(),\r\n        }),\r\n    });\r\n  }\r\n}\r\n\r\nexport class CatalogElement extends Record(\r\n  {\r\n    name: \"\",\r\n    prototype: \"\",\r\n    info: new Map(),\r\n    properties: new Map(),\r\n  },\r\n  \"CatalogElement\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      info: fromJS(json.info),\r\n      properties: fromJS(json.properties),\r\n    });\r\n  }\r\n}\r\n\r\nexport class Catalog extends Record(\r\n  {\r\n    ready: false,\r\n    page: \"root\",\r\n    path: new List(),\r\n    elements: new Map(),\r\n  },\r\n  \"Catalog\"\r\n) {\r\n  constructor(json = {}) {\r\n    let elements = safeLoadMapList(json.elements, CatalogElement);\r\n    super({\r\n      elements,\r\n      ready: !elements.isEmpty(),\r\n    });\r\n  }\r\n\r\n  factoryElement(type, options, initialProperties) {\r\n    if (!this.elements.has(type)) {\r\n      let catList = this.elements.map((element) => element.name).toArray();\r\n      throw new Error(`Element ${type} does not exist in catalog ${catList}`);\r\n    }\r\n\r\n    let element = this.elements.get(type);\r\n    let properties = element.properties.map((value, key) =>\r\n      initialProperties && initialProperties.has(key)\r\n        ? initialProperties.get(key)\r\n        : value.get(\"defaultValue\")\r\n    );\r\n\r\n    switch (element.prototype) {\r\n      case \"lines\":\r\n        return new Line(options).merge({ properties });\r\n\r\n      case \"holes\":\r\n        return new Hole(options).merge({ properties });\r\n\r\n      case \"areas\":\r\n        return new Area(options).merge({ properties });\r\n\r\n      case \"items\":\r\n        return new Item(options).merge({ properties });\r\n\r\n      case \"cursor\":\r\n        return new Cursor(options).merge({ properties });\r\n\r\n      default:\r\n        throw new Error(\"prototype not valid\");\r\n    }\r\n  }\r\n}\r\n\r\nexport class HistoryStructure extends Record(\r\n  {\r\n    list: new List(),\r\n    first: null,\r\n    last: null,\r\n  },\r\n  \"HistoryStructure\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      list: fromJS(json.list || []),\r\n      first: new Scene(json.scene),\r\n      last: new Scene(json.last || json.scene),\r\n    });\r\n  }\r\n}\r\n\r\nexport class State extends Record(\r\n  {\r\n    mode: MODE_IDLE,\r\n    scene: new Scene(),\r\n    sceneHistory: new HistoryStructure(),\r\n    catalog: new Catalog(),\r\n    viewer2D: new Map(),\r\n    mouse: new Map({ x: 0, y: 0 }),\r\n    zoom: 0,\r\n    snapMask: SNAP_MASK,\r\n    snapElements: new List(),\r\n    activeSnapElement: null,\r\n    drawingSupport: new Map(),\r\n    draggingSupport: new Map(),\r\n    rotatingSupport: new Map(),\r\n    resizeSupport: new Map(),\r\n    errors: new List(),\r\n    warnings: new List(),\r\n    clipboardProperties: new Map(),\r\n    selectedElementsHistory: new List(),\r\n    misc: new Map(), //additional info\r\n    alterate: false,\r\n  },\r\n  \"State\"\r\n) {\r\n  constructor(json = {}) {\r\n    super({\r\n      ...json,\r\n      scene: new Scene(json.scene),\r\n      sceneHistory: new HistoryStructure(json),\r\n      catalog: new Catalog(json.catalog || {}),\r\n      viewer2D: new Map(json.viewer2D || {}),\r\n      drawingSupport: new Map(json.drawingSupport || {}),\r\n      draggingSupport: new Map(json.draggingSupport || {}),\r\n      rotatingSupport: new Map(json.rotatingSupport || {}),\r\n      resizeSupport: new Map(json.resizeSupport || {}),\r\n      misc: json.misc ? fromJS(json.misc) : new Map(),\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n/**\r\n * @return {null}\r\n */\r\nexport default function If({condition, style, children}) {\r\n  return condition ? ( Array.isArray(children) ? <div style={style}>{children}</div> : children ) : null;\r\n}\r\n\r\nIf.propTypes = {\r\n  condition: PropTypes.bool.isRequired,\r\n  style: PropTypes.object\r\n};\r\n","import {Map, List, Record} from 'immutable';\r\nimport * as Geometry from './geometry';\r\n\r\nexport const SNAP_POINT = 'SNAP_POINT';\r\nexport const SNAP_LINE = 'SNAP_LINE';\r\nexport const SNAP_SEGMENT = 'SNAP_SEGMENT';\r\nexport const SNAP_GRID = 'SNAP_GRID';\r\nexport const SNAP_GUIDE = 'SNAP_GUIDE';\r\n\r\nexport const SNAP_MASK = new Map({\r\n  SNAP_POINT : true,\r\n  SNAP_LINE : true,\r\n  SNAP_SEGMENT : true,\r\n  SNAP_GRID : false,\r\n  SNAP_GUIDE : true\r\n});\r\n\r\nclass PointSnap extends Record({\r\n  type: 'point',\r\n  x: -1, y: -1,\r\n  radius: 1, priority: 1,\r\n  related: new List()\r\n}) {\r\n  nearestPoint(x, y) {\r\n    return {\r\n      x: this.x,\r\n      y: this.y,\r\n      distance: Geometry.pointsDistance(this.x, this.y, x, y)\r\n    };\r\n  }\r\n  isNear(x,y,distance){ return ~(this.x - x) + 1 < distance && ~(this.y - y) + 1 < distance; }\r\n}\r\n\r\nclass LineSnap extends Record({\r\n  type: 'line',\r\n  a: -1, b: -1, c: -1,\r\n  radius: 1, priority: 1,\r\n  related: new List()\r\n}) {\r\n  nearestPoint(x, y) {\r\n    return {\r\n      ...Geometry.closestPointFromLine(this.a, this.b, this.c, x, y),\r\n      distance: Geometry.distancePointFromLine(this.a, this.b, this.c, x, y)\r\n    };\r\n  }\r\n  isNear(x,y,distance){ return true; }\r\n}\r\n\r\nclass LineSegmentSnap extends Record({\r\n  type: 'line-segment',\r\n  x1: -1, y1: -1, x2: -1, y2: -1,\r\n  radius: 1, priority: 1,\r\n  related: new List()\r\n}) {\r\n  nearestPoint(x, y) {\r\n    return {\r\n      ...Geometry.closestPointFromLineSegment(this.x1, this.y1, this.x2, this.y2, x, y),\r\n      distance: Geometry.distancePointFromLineSegment(this.x1, this.y1, this.x2, this.y2, x, y)\r\n    };\r\n  }\r\n  isNear(x,y,distance){ return true; }\r\n}\r\n\r\nclass GridSnap extends Record({\r\n  type: 'grid',\r\n  x: -1, y: -1,\r\n  radius: 1, priority: 1,\r\n  related: new List()\r\n}) {\r\n  nearestPoint(x, y) {\r\n    return {\r\n      x: this.x,\r\n      y: this.y,\r\n      distance: Geometry.pointsDistance(this.x, this.y, x, y)\r\n    };\r\n  }\r\n  isNear(x,y,distance){ return ~(this.x - x) + 1 < distance && ~(this.y - y) + 1 < distance; }\r\n}\r\n\r\nexport function nearestSnap(snapElements, x, y, snapMask) {\r\n\r\n  let filter = {\r\n    'point': snapMask.get(SNAP_POINT),\r\n    'line': snapMask.get(SNAP_LINE),\r\n    'line-segment': snapMask.get(SNAP_SEGMENT),\r\n    'grid': snapMask.get(SNAP_GRID)\r\n  };\r\n\r\n  return snapElements\r\n  .valueSeq()\r\n  .filter( ( el ) => filter[el.type] && el.isNear(x,y, el.radius) )\r\n  .map(snap => { return {snap, point: snap.nearestPoint(x, y)} })\r\n  .filter(({snap: {radius}, point: {distance}}) => distance < radius)\r\n  .min(\r\n    (\r\n      {snap: { priority : p1 }, point: { distance : d1 }},\r\n      {snap: { priority : p2 }, point: { distance : d2 }}\r\n    ) => p1 === p2 ? ( d1 < d2 ? -1 : 1 ) : ( p1 > p2 ? -1 : 1 )\r\n  );\r\n}\r\n\r\nexport function addPointSnap(snapElements, x, y, radius, priority, related) {\r\n  related = new List([related]);\r\n  return snapElements.push(new PointSnap({x, y, radius, priority, related}));\r\n}\r\n\r\nexport function addLineSnap(snapElements, a, b, c, radius, priority, related) {\r\n  related = new List([related]);\r\n\r\n  return snapElements.withMutations(snapElements => {\r\n\r\n    let alreadyPresent = snapElements.some(lineSnap =>\r\n    lineSnap.type === 'line' &&\r\n    a === lineSnap.a &&\r\n    b === lineSnap.b &&\r\n    c === lineSnap.c);\r\n    if (alreadyPresent) return snapElements;\r\n\r\n    let intersections = snapElements\r\n      .valueSeq()\r\n      .filter(snap => snap.type === 'line')\r\n      .map(snap => Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, a, b, c))\r\n      .filter(intersection => intersection !== undefined)\r\n      .forEach(({x, y}) => addPointSnap(snapElements, x, y, 20, 40));\r\n\r\n    snapElements.push(new LineSnap({a, b, c, radius, priority, related}));\r\n  })\r\n}\r\n\r\nexport function addLineSegmentSnap(snapElements, x1, y1, x2, y2, radius, priority, related) {\r\n  related = new List([related]);\r\n  return snapElements.push(new LineSegmentSnap({x1, y1, x2, y2, radius, priority, related}));\r\n}\r\n\r\nexport function addGridSnap(snapElements, x, y, radius, priority, related) {\r\n  related = new List([related]);\r\n  return snapElements.push(new GridSnap({x, y, radius, priority, related}));\r\n}\r\n","/** @description Determines the distance between two points\r\n *  @param {number} x0 Vertex 0 x\r\n *  @param {number} y0 Vertex 0 y\r\n *  @param {number} x1 Vertex 1 x\r\n *  @param {number} y1 Vertex 1 y\r\n *  @return {number}\r\n */\r\nimport {toFixedFloat, fAbs} from './math.js';\r\nimport {EPSILON} from '../constants';\r\n\r\nexport function compareVertices(v0, v1) {\r\n  return v0.x === v1.x ? v0.y - v1.y : v0.x - v1.x;\r\n}\r\n\r\nexport function minVertex(v0, v1) {\r\n  return compareVertices(v0, v1) > 0 ? v1 : v0;\r\n}\r\n\r\nexport function maxVertex(v0, v1) {\r\n  return compareVertices(v0, v1) > 0 ? v0 : v1;\r\n}\r\n\r\nexport function orderVertices(vertices) {\r\n  return vertices.sort(compareVertices);\r\n}\r\n\r\nexport function pointsDistance(x0, y0, x1, y1) {\r\n  let diff_x = x0 - x1;\r\n  let diff_y = y0 - y1;\r\n\r\n  return Math.sqrt((diff_x * diff_x) + (diff_y * diff_y));\r\n}\r\n\r\nexport function verticesDistance(v1, v2) {\r\n\r\n  let {x: x0, y: y0} = v1;\r\n  let {x: x1, y: y1} = v2;\r\n\r\n  return pointsDistance(x0, y0, x1, y1);\r\n}\r\n\r\nexport function horizontalLine(y) {\r\n  return {a: 0, b: 1, c: -y};\r\n}\r\n\r\nexport function verticalLine(x) {\r\n  return {a: 1, b: 0, c: -x};\r\n}\r\n\r\nexport function linePassingThroughTwoPoints(x1, y1, x2, y2) {\r\n  if (x1 === x2 && y1 == y2) throw new Error('Geometry error');\r\n  if (x1 === x2) return verticalLine(x);\r\n  if (y1 === y2) return horizontalLine(y1);\r\n\r\n  return {\r\n    a: y1 - y2,\r\n    b: x2 - x1,\r\n    c: y2 * x1 - x2 * y1\r\n  };\r\n}\r\n\r\nexport function distancePointFromLine(a, b, c, x, y) {\r\n  //https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n  return fAbs(a * x + b * y + c) / Math.sqrt(a * a + b * b);\r\n}\r\n\r\nexport function closestPointFromLine(a, b, c, x, y) {\r\n  //https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n  let denom = a * a + b * b;\r\n  return {\r\n    x: (b * (b * x - a * y) - a * c) / denom,\r\n    y: ((a * -b * x + a * y) - b * c) / denom,\r\n  }\r\n}\r\n\r\n/** @description Get point of intersection between two lines using ax+by+c line's equation\r\n *  @param {number} a x coefficent of first line\r\n *  @param {number} b y coefficent of first line\r\n *  @param {number} c costant of first line\r\n *  @param {number} j x coefficent of second line\r\n *  @param {number} k y coefficent of second line\r\n *  @param {number} l costant of second line\r\n *  @return {object} {x,y} point's coordinates\r\n */\r\nexport function twoLinesIntersection(a, b, c, j, k, l) {\r\n  let angularCoefficientsDiff = (b * j - a * k);\r\n\r\n  if (angularCoefficientsDiff === 0) return undefined; //no intersection\r\n\r\n  let y = (a * l - c * j) / angularCoefficientsDiff;\r\n  let x = (c * k - b * l) / angularCoefficientsDiff;\r\n  return {x, y};\r\n}\r\n\r\nexport function twoLineSegmentsIntersection(p1, p2, p3, p4) {\r\n  //https://github.com/psalaets/line-intersect/blob/master/lib/check-intersection.js\r\n\r\n  let {x: x1, y: y1} = p1;\r\n  let {x: x2, y: y2} = p2;\r\n  let {x: x3, y: y3} = p3;\r\n  let {x: x4, y: y4} = p4;\r\n\r\n  let denom = ((y4 - y3) * (x2 - x1)) - ((x4 - x3) * (y2 - y1));\r\n  let numA = ((x4 - x3) * (y1 - y3)) - ((y4 - y3) * (x1 - x3));\r\n  let numB = ((x2 - x1) * (y1 - y3)) - ((y2 - y1) * (x1 - x3));\r\n\r\n  if (fAbs(denom) <= EPSILON) {\r\n    if (fAbs(numA) <= EPSILON && fAbs(numB) <= EPSILON) {\r\n\r\n      let comparator = (pa, pb) => pa.x === pb.x ? pa.y - pb.y : pa.x - pb.x;\r\n      let line0 = [p1, p2].sort(comparator);\r\n      let line1 = [p3.toJS(), p4.toJS()].sort(comparator);\r\n\r\n      let [lineSX, lineDX] = [line0, line1].sort((lineA, lineB) => comparator(lineA[0], lineB[0]));\r\n\r\n      if (lineSX[1].x === lineDX[0].x) {\r\n        return {type: (lineDX[0].y <= lineSX[1].y) ? 'colinear' : 'none'};\r\n      } else {\r\n        return {type: (lineDX[0].x <= lineSX[1].x) ? 'colinear' : 'none'};\r\n      }\r\n    }\r\n    return {type: 'parallel'};\r\n  }\r\n\r\n  let uA = numA / denom;\r\n  let uB = numB / denom;\r\n\r\n  if (uA >= (0 - EPSILON) && uA <= (1 + EPSILON) && uB >= (0 - EPSILON) && uB <= (1 + EPSILON)) {\r\n    let point = {\r\n      x: x1 + (uA * (x2 - x1)),\r\n      y: y1 + (uA * (y2 - y1))\r\n    };\r\n    return {type: 'intersecting', point};\r\n  }\r\n\r\n  return {type: 'none'};\r\n}\r\n\r\nexport function distancePointFromLineSegment(x1, y1, x2, y2, xp, yp) {\r\n  //http://stackoverflow.com/a/6853926/1398836\r\n\r\n  let A = xp - x1;\r\n  let B = yp - y1;\r\n  let C = x2 - x1;\r\n  let D = y2 - y1;\r\n\r\n  let dot = A * C + B * D;\r\n  let len_sq = C * C + D * D;\r\n  let param = -1;\r\n  if (len_sq != 0) //in case of 0 length line\r\n    param = dot / len_sq;\r\n\r\n  let xx, yy;\r\n\r\n  if (param < 0) {\r\n    xx = x1;\r\n    yy = y1;\r\n  }\r\n  else if (param > 1) {\r\n    xx = x2;\r\n    yy = y2;\r\n  }\r\n  else {\r\n    xx = x1 + param * C;\r\n    yy = y1 + param * D;\r\n  }\r\n\r\n  let dx = xp - xx;\r\n  let dy = yp - yy;\r\n  return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\n/**\r\n *\r\n * @param x1 {number} x for first vertex of the segment\r\n * @param y1 {number} y for first vertex of the segment\r\n * @param x2 {number} x for second vertex of the segment\r\n * @param y2 {number} y for second vertex of the segment\r\n * @param xp {number} x for point we want to verify\r\n * @param yp {number} y for point we want to verify\r\n * @param maxDistance {number} the epsilon value used for comparisons\r\n * @returns {boolean} true if the point lies on the line segment false otherwise\r\n */\r\nexport function isPointOnLineSegment(x1, y1, x2, y2, xp, yp, maxDistance = EPSILON) {\r\n  return distancePointFromLineSegment(x1, y1, x2, y2, xp, yp) <= maxDistance;\r\n}\r\n\r\nexport function closestPointFromLineSegment(x1, y1, x2, y2, xp, yp) {\r\n  if (x1 === x2) return {x: x1, y: yp};\r\n  if (y1 === y2) return {x: xp, y: y1};\r\n\r\n  let m = (y2 - y1) / (x2 - x1);\r\n  let q = y1 - m * x1;\r\n\r\n  let mi = -1 / m;\r\n  let qi = yp - mi * xp;\r\n\r\n  let x = (qi - q) / (m - mi);\r\n  let y = (m * x + q);\r\n\r\n  return {x, y};\r\n}\r\n\r\nexport function pointPositionOnLineSegment(x1, y1, x2, y2, xp, yp) {\r\n  let length = pointsDistance(x1, y1, x2, y2);\r\n  let distance = pointsDistance(x1, y1, xp, yp);\r\n\r\n  let offset = distance / length;\r\n  if (x1 > x2) offset = mapRange(offset, 0, 1, 1, 0);\r\n\r\n  return offset;\r\n}\r\n\r\nexport function mapRange(value, low1, high1, low2, high2) {\r\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\r\n}\r\n\r\nexport function angleBetweenTwoPointsAndOrigin(x1, y1, x2, y2) {\r\n  return -(Math.atan2(y1 - y2, x2 - x1)) * 180 / Math.PI;\r\n}\r\n\r\nexport function angleBetweenTwoPoints(x1, y1, x2, y2) {\r\n  return Math.atan2(y2 - y1, x2 - x1);\r\n}\r\n\r\nexport function absAngleBetweenTwoPoints(x1, y1, x2, y2) {\r\n  return Math.atan2(Math.abs(y2 - y1), Math.abs(x2 - x1));\r\n}\r\n\r\nexport function samePoints({x: x1, y: y1}, {x: x2, y: y2}) {\r\n  return fAbs(x1 - x2) <= EPSILON && fAbs(y1 - y2) <= EPSILON;\r\n}\r\n\r\n/** @description Extend line based on coordinates and new line length\r\n *  @param {number} x1 Vertex 1 x\r\n *  @param {number} y1 Vertex 1 y\r\n *  @param {number} x2 Vertex 2 x\r\n *  @param {number} y2 Vertex 2 y\r\n *  @param {number} newDistance New line length\r\n *  @return {object}\r\n */\r\nexport function extendLine(x1, y1, x2, y2, newDistance, precision = 6) {\r\n  let rad = angleBetweenTwoPoints( x1, y1, x2, y2 );\r\n\r\n  return {\r\n    x: toFixedFloat(x1 + (Math.cos(rad) * newDistance), precision),\r\n    y: toFixedFloat(y1 + (Math.sin(rad) * newDistance), precision),\r\n  };\r\n}\r\n\r\nexport function roundVertex(vertex, precision = 6) {\r\n  vertex.set('x', toFixedFloat(vertex.get('x'), precision));\r\n  vertex.set('y', toFixedFloat(vertex.get('y'), precision));\r\n\r\n  return vertex;\r\n}\r\n\r\n//https://github.com/MartyWallace/PolyK\r\nexport function ContainsPoint(polygon, pointX, pointY) {\r\n  let n = polygon.length >> 1;\r\n\r\n  let ax, lup;\r\n  let ay = polygon[2 * n - 3] - pointY;\r\n  let bx = polygon[2 * n - 2] - pointX;\r\n  let by = polygon[2 * n - 1] - pointY;\r\n\r\n  if (bx === 0 && by === 0) return false; // point on edge\r\n\r\n  // let lup = by > ay;\r\n  for (let ii = 0; ii < n; ii++) {\r\n    ax = bx;\r\n    ay = by;\r\n    bx = polygon[2 * ii] - pointX;\r\n    by = polygon[2 * ii + 1] - pointY;\r\n    if (bx === 0 && by === 0) return false; // point on edge\r\n    if (ay === by) continue;\r\n    lup = by > ay;\r\n  }\r\n\r\n  let depth = 0;\r\n  for (let i = 0; i < n; i++) {\r\n    ax = bx;\r\n    ay = by;\r\n    bx = polygon[2 * i] - pointX;\r\n    by = polygon[2 * i + 1] - pointY;\r\n    if (ay < 0 && by < 0) continue;  // both 'up' or both 'down'\r\n    if (ay > 0 && by > 0) continue;  // both 'up' or both 'down'\r\n    if (ax < 0 && bx < 0) continue;   // both points on the left\r\n\r\n    if (ay === by && Math.min(ax, bx) < 0) return true;\r\n    if (ay === by) continue;\r\n\r\n    let lx = ax + (bx - ax) * (-ay) / (by - ay);\r\n    if (lx === 0) return false;      // point on edge\r\n    if (lx > 0) depth++;\r\n    if (ay === 0 && lup && by > ay) depth--;  // hit vertex, both up\r\n    if (ay === 0 && !lup && by < ay) depth--; // hit vertex, both down\r\n    lup = by > ay;\r\n  }\r\n  return (depth & 1) === 1;\r\n}\r\n\r\nexport function cosWithThreshold(alpha, threshold) {\r\n  let cos = Math.cos(alpha);\r\n  return cos < threshold ? 0 : cos;\r\n}\r\n\r\nexport function sinWithThreshold(alpha, threshold) {\r\n  let sin = Math.sin(alpha);\r\n  return sin < threshold ? 0 : sin;\r\n}\r\n\r\nexport function midPoint( x1, y1, x2, y2 ) {\r\n  return { x: (x1+x2)/2, y: (y1+y2)/2 };\r\n}\r\n\r\nexport function verticesMidPoint( verticesArray ) {\r\n  let res = verticesArray.reduce( ( incr, vertex ) => { return { x: incr.x + vertex.x, y: incr.y + vertex.y } }, { x: 0, y: 0 });\r\n  return { x: res.x / verticesArray.length, y: res.y / verticesArray.length };\r\n}\r\n\r\nexport function rotatePointAroundPoint( px, py, ox, oy, theta ) {\r\n\r\n  let thetaRad = theta * Math.PI / 180;\r\n\r\n  let cos = Math.cos( thetaRad );\r\n  let sin = Math.sin( thetaRad );\r\n\r\n  let deltaX = px - ox;\r\n  let deltaY = py - oy;\r\n\r\n  return {\r\n    x: cos * deltaX - sin * deltaY + ox,\r\n    y: sin * deltaX + cos * deltaY + oy\r\n  };\r\n\r\n}\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst BASE_STYLE = {\r\n  display: \"inline-block\",\r\n  fontWeight: \"400\",\r\n  lineHeight: \"1.25\",\r\n  textAlign: \"center\",\r\n  whiteSpace: \"nowrap\",\r\n  verticalAlign: \"middle\",\r\n  cursor: \"pointer\",\r\n  WebkitUserSelect: \"none\",\r\n  MozUserSelect: \"none\",\r\n  MsUserSelect: \"none\",\r\n  userSelect: \"none\",\r\n  padding: \"5px 14px\",\r\n  fontSize: \"14px\",\r\n  color: SharedStyle.COLORS.black,\r\n  fonWeight: \"400px\",\r\n  transition: \"background-color 175ms ease, border 175ms ease\",\r\n  outline: \"none\",\r\n  borderRadius: \"2px\",\r\n  borderWidth: \"1px\",\r\n  borderType: \"solid\",\r\n  width: '100%'\r\n};\r\n\r\nconst BASE_STYLE_SIZE = {\r\n  small: {\r\n    fontSize: \"12px\",\r\n    padding: \"3px 8px\",\r\n  },\r\n  normal: {},\r\n  large: {\r\n    padding: \"8px 20px\",\r\n  },\r\n};\r\n\r\nexport default class Button extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {hover: false};\r\n  }\r\n\r\n  render() {\r\n    let {hover} = this.state;\r\n    let {type, style: customStyle, styleHover: customStyleHover, children, size, ...rest} = this.props;\r\n    let styleMerged = Object.assign({}, BASE_STYLE, BASE_STYLE_SIZE[size], hover ? customStyleHover : customStyle);\r\n\r\n    return <button\r\n      type={type}\r\n      onMouseEnter={e => this.setState({hover: true})}\r\n      onMouseLeave={e => this.setState({hover: false})}\r\n      style={styleMerged}\r\n      {...rest}>{children}</button>\r\n  }\r\n}\r\n\r\nButton.defaultProps = {\r\n  type: \"button\",\r\n  size: \"normal\",\r\n  style: {\r\n    backgroundColor: \"#e6e6e6\",\r\n    borderColor: \"#adadad\",\r\n  },\r\n  styleHover: {\r\n    backgroundColor: \"#d4d4d4\",\r\n    borderColor: \"#8c8c8c\"\r\n  },\r\n};\r\n\r\nButton.propTypes = {\r\n  type: PropTypes.string,\r\n  style: PropTypes.object,\r\n  styleHover: PropTypes.object,\r\n  size: PropTypes.oneOf(['large', 'normal', 'small']),\r\n};\r\n\r\n","import React, { Component } from 'react';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst STYLE_INPUT = {\r\n  display: 'block',\r\n  width: '100%',\r\n  padding: '0 2px',\r\n  fontSize: '13px',\r\n  lineHeight: '1.25',\r\n  color: SharedStyle.PRIMARY_COLOR.input,\r\n  backgroundColor: SharedStyle.COLORS.white,\r\n  backgroundImage: 'none',\r\n  border: '1px solid rgba(0,0,0,.15)',\r\n  outline: 'none',\r\n  height: '30px',\r\n};\r\n\r\n\r\nexport default class FormTextInput extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { focus: false };\r\n  }\r\n\r\n  render() {\r\n    let { style, ...rest } = this.props;\r\n\r\n    let textInputStyle = { ...STYLE_INPUT, ...style };\r\n    if (this.state.focus) textInputStyle.border = `1px solid ${SharedStyle.SECONDARY_COLOR.main}`;\r\n\r\n    return <input\r\n      onFocus={e => this.setState({ focus: true })}\r\n      onBlur={e => this.setState({ focus: false })}\r\n      style={textInputStyle}\r\n      type=\"text\"\r\n      {...rest}\r\n    />\r\n  }\r\n}\r\n\r\nFormTextInput.defaultProps = {\r\n  style: {}\r\n};\r\n","import EN from './en'\r\nimport IT from './it'\r\nimport RU from './ru'\r\n\r\nconst DEFAULT_LOCALE = 'en'\r\n\r\nexport default class Translator {\r\n  constructor() {\r\n    this.locale = null\r\n    this.translations = {}\r\n\r\n    this.registerTranslation('en', EN)\r\n    this.registerTranslation('it', IT)\r\n    this.registerTranslation('ru', RU)\r\n\r\n    let locale = null\r\n    let languages = Translator.getBrowserLanguages()\r\n    for (let i = 0; i < languages.length; i++) {\r\n      let lang = languages[i]\r\n      if (this.translations.hasOwnProperty(lang)) {\r\n        locale = lang\r\n        break\r\n      }\r\n    }\r\n    locale = locale ? locale : DEFAULT_LOCALE\r\n\r\n    this.setLocale(locale)\r\n  }\r\n\r\n  t(phrase, ...params) {\r\n    return this.translate(phrase, ...params)\r\n  }\r\n\r\n  translate(phrase, ...params) {\r\n    let locale = this.locale\r\n\r\n    let translation = this.translations[locale]\r\n    if (!translation.hasOwnProperty(phrase)) {\r\n      console.warn(`translation '${phrase}' not found in language '${locale}'`)\r\n      return phrase\r\n    }\r\n\r\n    let translatedPhrase = translation[phrase]\r\n\r\n    translatedPhrase = translatedPhrase.replace(/{(\\d+)}/g, function(match, number) {\r\n      return typeof params[number] != 'undefined' ? params[number] : match\r\n    })\r\n\r\n    return translatedPhrase\r\n  }\r\n\r\n  setLocale(locale) {\r\n    locale = locale.toLowerCase()\r\n\r\n    if (this.translations.hasOwnProperty(locale)) {\r\n      this.locale = locale\r\n    } else {\r\n      console.warn(`locale '${locale}' not available, switch to ${DEFAULT_LOCALE}`)\r\n      this.locale = DEFAULT_LOCALE.toLowerCase()\r\n    }\r\n  }\r\n\r\n  registerTranslation(locale, translations) {\r\n    if (!this.translations.hasOwnProperty(locale)) {\r\n      this.translations[locale] = translations\r\n    } else {\r\n      Object.assign(this.translations[locale], translations)\r\n    }\r\n  }\r\n\r\n  static getBrowserLanguages() {\r\n    return navigator.languages\r\n      ? navigator.languages\r\n      : [navigator.language || navigator.userLanguage]\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\n//http://www.cssportal.com/css-tooltip-generator/\r\n\r\nconst STYLE = {\r\n  width: '30px',\r\n  height: '30px',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  marginBottom: '5px',\r\n  fontSize: '25px',\r\n  position: 'relative',\r\n  cursor: 'pointer'\r\n};\r\n\r\nconst STYLE_TOOLTIP = {\r\n  position: 'absolute',\r\n  width: '140px',\r\n  color: SharedStyle.COLORS.white,\r\n  background: SharedStyle.COLORS.black,\r\n  height: '30px',\r\n  lineHeight: '30px',\r\n  textAlign: 'center',\r\n  visibility: 'visible',\r\n  borderRadius: '6px',\r\n  opacity: '0.8',\r\n  left: '100%',\r\n  top: '50%',\r\n  marginTop: '-15px',\r\n  marginLeft: '15px',\r\n  zIndex: '999',\r\n  fontSize: '12px'\r\n};\r\n\r\nconst STYLE_TOOLTIP_PIN = {\r\n  position: 'absolute',\r\n  top: '50%',\r\n  right: '100%',\r\n  marginTop: '-8px',\r\n  width: '0',\r\n  height: '0',\r\n  borderRight: '8px solid #000000',\r\n  borderTop: '8px solid transparent',\r\n  borderBottom: '8px solid transparent'\r\n};\r\n\r\nexport default class ToolbarButton extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = { active: false };\r\n  }\r\n\r\n  render() {\r\n    let { state, props } = this;\r\n    let color = props.active || state.active ? SharedStyle.SECONDARY_COLOR.icon : SharedStyle.PRIMARY_COLOR.icon;\r\n\r\n    return (\r\n      <div style={STYLE}\r\n        onMouseOver={event => this.setState({ active: true })}\r\n        onMouseOut={event => this.setState({ active: false })}>\r\n        <div style={{ color }} onClick={props.onClick}>\r\n          {props.children}\r\n        </div>\r\n\r\n        {\r\n          state.active ?\r\n          <div style={STYLE_TOOLTIP}>\r\n            <span style={STYLE_TOOLTIP_PIN} />\r\n            {props.tooltip}\r\n          </div>\r\n          : null\r\n        }\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nToolbarButton.propTypes = {\r\n  active: PropTypes.bool.isRequired,\r\n  tooltip: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired\r\n};\r\n","import Viewer2D from './viewer2d';\r\nimport Vertex from './vertex';\r\nimport State from './state';\r\nimport Snap from './snap';\r\nimport Scene from './scene';\r\nimport Ruler from './ruler';\r\nimport Line from './line';\r\nimport Layer from './layer';\r\nimport Item from './item';\r\nimport Area from './area';\r\nimport Grids from './grids/grids';\r\nimport Group from './group';\r\nimport RulerX from './rulerX';\r\nimport RulerY from './rulerY';\r\nimport Cursor from './cursor';\r\n\r\n\r\nexport {\r\n  Viewer2D,\r\n  Vertex,\r\n  State,\r\n  Snap,\r\n  Scene,\r\n  Ruler,\r\n  Line,\r\n  Layer,\r\n  Item,\r\n  Area,\r\n  Grids,\r\n  Group,\r\n  RulerX,\r\n  RulerY,\r\n  Cursor\r\n};\r\n\r\nexport default {\r\n  Viewer2D,\r\n  Vertex,\r\n  State,\r\n  Snap,\r\n  Scene,\r\n  Ruler,\r\n  Line,\r\n  Layer,\r\n  Item,\r\n  Area,\r\n  Grids,\r\n  Group,\r\n  RulerX,\r\n  RulerY,\r\n  Cursor\r\n};\r\n","/** @description Return float fixed to desired precision\r\n *  @param {number} num Float to fix\r\n *  @param {number} precision Desired precision, or 6 if not specified\r\n *  @return {number}\r\n*/\r\nexport function toFixedFloat(num, precision = 6) {\r\n  if (num && precision) {\r\n    return parseFloat(parseFloat(num).toFixed(precision));\r\n  }\r\n  return 0;\r\n}\r\n\r\n/** @description Return absolute value of a number\r\n *  @param {number} n Number of wich get value without sign\r\n *  @return {number}\r\n*/\r\nexport const fAbs = n => { let x = n; (x < 0) && (x = ~x + 1); return x; };\r\n\r\n/** @description Multiply two matrices\r\n *  @param {Array} m1 Matrix 1\r\n *  @param {Array} m2 Matrix 2\r\n *  @return {Array}\r\n*/\r\nexport const multiplyMatrices = (m1, m2) => {\r\n  let result = [];\r\n  for (let i = 0; i < m1.length; i++) {\r\n    result[i] = [];\r\n    for (let j = 0; j < m2[0].length; j++) {\r\n      let sum = 0;\r\n      for (let k = 0; k < m1[0].length; k++) {\r\n        sum += m1[i][k] * m2[k][j];\r\n      }\r\n      result[i][j] = sum;\r\n    }\r\n  }\r\n  return result;\r\n};\r\n","import {\r\n  NEW_PROJECT,\r\n  LOAD_PROJECT,\r\n  SAVE_PROJECT,\r\n  OPEN_CATALOG,\r\n  SELECT_TOOL_EDIT,\r\n  UNSELECT_ALL,\r\n  SET_PROPERTIES,\r\n  SET_ITEMS_ATTRIBUTES,\r\n  SET_LINES_ATTRIBUTES,\r\n  SET_HOLES_ATTRIBUTES,\r\n  REMOVE,\r\n  UNDO,\r\n  ROLLBACK,\r\n  OPEN_PROJECT_CONFIGURATOR,\r\n  SET_PROJECT_PROPERTIES,\r\n  INIT_CATALOG,\r\n  UPDATE_MOUSE_COORDS,\r\n  UPDATE_ZOOM_SCALE,\r\n  TOGGLE_SNAP,\r\n  CHANGE_CATALOG_PAGE,\r\n  GO_BACK_TO_CATALOG_PAGE,\r\n  THROW_ERROR,\r\n  THROW_WARNING,\r\n  COPY_PROPERTIES,\r\n  PASTE_PROPERTIES,\r\n  PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\r\n  ALTERATE_STATE,\r\n  SET_MODE,\r\n  ADD_HORIZONTAL_GUIDE,\r\n  ADD_VERTICAL_GUIDE,\r\n  ADD_CIRCULAR_GUIDE,\r\n  REMOVE_HORIZONTAL_GUIDE,\r\n  REMOVE_VERTICAL_GUIDE,\r\n  REMOVE_CIRCULAR_GUIDE,\r\n} from \"../constants\";\r\n\r\nexport function loadProject(sceneJSON) {\r\n  return {\r\n    type: LOAD_PROJECT,\r\n    sceneJSON,\r\n  };\r\n}\r\n\r\nexport function newProject() {\r\n  return {\r\n    type: NEW_PROJECT,\r\n  };\r\n}\r\n\r\nexport function saveProject() {\r\n  return {\r\n    type: SAVE_PROJECT,\r\n  };\r\n}\r\n\r\nexport function openCatalog() {\r\n  return {\r\n    type: OPEN_CATALOG,\r\n  };\r\n}\r\n\r\nexport function changeCatalogPage(newPage, oldPage) {\r\n  return {\r\n    type: CHANGE_CATALOG_PAGE,\r\n    newPage,\r\n    oldPage,\r\n  };\r\n}\r\n\r\nexport function goBackToCatalogPage(newPage) {\r\n  return {\r\n    type: GO_BACK_TO_CATALOG_PAGE,\r\n    newPage,\r\n  };\r\n}\r\n\r\nexport function selectToolEdit() {\r\n  return {\r\n    type: SELECT_TOOL_EDIT,\r\n  };\r\n}\r\n\r\nexport function unselectAll() {\r\n  return {\r\n    type: UNSELECT_ALL,\r\n  };\r\n}\r\n\r\nexport function setProperties(properties) {\r\n  return {\r\n    type: SET_PROPERTIES,\r\n    properties,\r\n  };\r\n}\r\n\r\nexport function setItemsAttributes(itemsAttributes) {\r\n  itemsAttributes = itemsAttributes.set(\r\n    \"rotation\",\r\n    parseFloat(itemsAttributes.get(\"rotation\"))\r\n  );\r\n\r\n  return {\r\n    type: SET_ITEMS_ATTRIBUTES,\r\n    itemsAttributes,\r\n  };\r\n}\r\n\r\nexport function setLinesAttributes(linesAttributes) {\r\n  linesAttributes = linesAttributes.withMutations((attributes) => {\r\n    attributes.setIn(\r\n      [\"vertexOne\", \"x\"],\r\n      parseFloat(linesAttributes.getIn([\"vertexOne\", \"x\"]))\r\n    );\r\n    attributes.setIn(\r\n      [\"vertexOne\", \"y\"],\r\n      parseFloat(linesAttributes.getIn([\"vertexOne\", \"y\"]))\r\n    );\r\n    attributes.setIn(\r\n      [\"vertexTwo\", \"x\"],\r\n      parseFloat(linesAttributes.getIn([\"vertexTwo\", \"x\"]))\r\n    );\r\n    attributes.setIn(\r\n      [\"vertexTwo\", \"y\"],\r\n      parseFloat(linesAttributes.getIn([\"vertexTwo\", \"y\"]))\r\n    );\r\n  });\r\n\r\n  return {\r\n    type: SET_LINES_ATTRIBUTES,\r\n    linesAttributes,\r\n  };\r\n}\r\n\r\nexport function setHolesAttributes(holesAttributes) {\r\n  holesAttributes = holesAttributes.set(\r\n    \"offset\",\r\n    parseFloat(holesAttributes.get(\"offset\"))\r\n  );\r\n\r\n  return {\r\n    type: SET_HOLES_ATTRIBUTES,\r\n    holesAttributes,\r\n  };\r\n}\r\n\r\nexport function remove() {\r\n  return {\r\n    type: REMOVE,\r\n  };\r\n}\r\n\r\nexport function undo() {\r\n  return {\r\n    type: UNDO,\r\n  };\r\n}\r\n\r\nexport function rollback() {\r\n  return {\r\n    type: ROLLBACK,\r\n  };\r\n}\r\n\r\nexport function openProjectConfigurator() {\r\n  return {\r\n    type: OPEN_PROJECT_CONFIGURATOR,\r\n  };\r\n}\r\n\r\nexport function setProjectProperties(properties) {\r\n  return {\r\n    type: SET_PROJECT_PROPERTIES,\r\n    properties,\r\n  };\r\n}\r\n\r\nexport function initCatalog(catalog) {\r\n  return {\r\n    type: INIT_CATALOG,\r\n    catalog,\r\n  };\r\n}\r\n\r\nexport function updateMouseCoord(coords = { x, y }) {\r\n  return {\r\n    type: UPDATE_MOUSE_COORDS,\r\n    coords,\r\n  };\r\n}\r\n\r\nexport function updateZoomScale(scale) {\r\n  return {\r\n    type: UPDATE_ZOOM_SCALE,\r\n    scale,\r\n  };\r\n}\r\n\r\nexport function toggleSnap(mask) {\r\n  return {\r\n    type: TOGGLE_SNAP,\r\n    mask,\r\n  };\r\n}\r\n\r\nexport function throwError(error) {\r\n  return {\r\n    type: THROW_ERROR,\r\n    error,\r\n  };\r\n}\r\n\r\nexport function throwWarning(warning) {\r\n  return {\r\n    type: THROW_WARNING,\r\n    warning,\r\n  };\r\n}\r\n\r\nexport function copyProperties(properties) {\r\n  return {\r\n    type: COPY_PROPERTIES,\r\n    properties,\r\n  };\r\n}\r\n\r\nexport function pasteProperties() {\r\n  return {\r\n    type: PASTE_PROPERTIES,\r\n  };\r\n}\r\n\r\nexport function pushLastSelectedCatalogElementToHistory(element) {\r\n  return {\r\n    type: PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\r\n    element,\r\n  };\r\n}\r\n\r\nexport function setAlterateState() {\r\n  return {\r\n    type: ALTERATE_STATE,\r\n  };\r\n}\r\n\r\nexport function setMode(mode) {\r\n  return {\r\n    type: SET_MODE,\r\n    mode,\r\n  };\r\n}\r\n\r\nexport function addHorizontalGuide(coordinate) {\r\n  return {\r\n    type: ADD_HORIZONTAL_GUIDE,\r\n    coordinate,\r\n  };\r\n}\r\n\r\nexport function addVerticalGuide(coordinate) {\r\n  return {\r\n    type: ADD_VERTICAL_GUIDE,\r\n    coordinate,\r\n  };\r\n}\r\n\r\nexport function addCircularGuide(x, y, radius) {\r\n  return {\r\n    type: ADD_CIRCULAR_GUIDE,\r\n    x,\r\n    y,\r\n    radius,\r\n  };\r\n}\r\nexport function removeHorizontalGuide(guideID) {\r\n  return {\r\n    type: REMOVE_HORIZONTAL_GUIDE,\r\n    guideID,\r\n  };\r\n}\r\n\r\nexport function removeVerticalGuide(guideID) {\r\n  return {\r\n    type: REMOVE_VERTICAL_GUIDE,\r\n    guideID,\r\n  };\r\n}\r\n\r\nexport function removeCircularGuide(guideID) {\r\n  return {\r\n    type: REMOVE_CIRCULAR_GUIDE,\r\n    guideID,\r\n  };\r\n}\r\n","export function browserDownload(json) {\r\n  let fileOutputLink = document.createElement('a');\r\n\r\n  let filename = 'output' + Date.now() + '.json';\r\n  filename = window.prompt('Insert output filename', filename);\r\n  if (!filename) return;\r\n\r\n  let output = JSON.stringify(json);\r\n  let data = new Blob([output], {type: 'text/plain'});\r\n  let url = window.URL.createObjectURL(data);\r\n  fileOutputLink.setAttribute('download', filename);\r\n  fileOutputLink.href = url;\r\n  fileOutputLink.style.display = 'none';\r\n  document.body.appendChild(fileOutputLink);\r\n  fileOutputLink.click();\r\n  document.body.removeChild(fileOutputLink);\r\n}\r\n\r\nexport function browserUpload() {\r\n  return new Promise(function (resolve, reject) {\r\n\r\n    let fileInput = document.createElement('input');\r\n    fileInput.type = 'file';\r\n\r\n    fileInput.addEventListener('change', function (event) {\r\n      let file = event.target.files[0];\r\n      let reader = new FileReader();\r\n      reader.addEventListener('load', (fileEvent) => {\r\n        let loadedData = fileEvent.target.result;\r\n        resolve(loadedData);\r\n      });\r\n      reader.readAsText(file);\r\n    });\r\n\r\n    fileInput.click();\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst STYLE = {\r\n  stroke: \"#99BCFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"9px\",\r\n  textAlign: \"right\",\r\n  fill: \"#407AEC\",\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default function Ruler({ length, unit, half_thickness, mode = 0 }) {\r\n  let distanceText = `${(length / 100).toFixed(2)} M`;\r\n\r\n  if (mode == 0)\r\n    return (\r\n      <g transform={`translate(0, ${half_thickness + 10} )`}>\r\n        <text\r\n          x={length / 2}\r\n          y=\"-10\"\r\n          transform={`scale(1, -1)`}\r\n          style={STYLE_TEXT}\r\n        >\r\n          A: {distanceText}\r\n        </text>\r\n        <polygon points=\"0,-5 0,5 4,0\" style={STYLE} />\r\n        <line x1={length} y1=\"-5\" x2={length} y2=\"5\" style={STYLE} />\r\n        <polygon\r\n          points={`${length},-5 ${length},5 ${length - 4} 0`}\r\n          style={STYLE}\r\n        />\r\n        <line x1=\"0\" y1=\"0\" x2={length} y2=\"0\" style={STYLE} />\r\n      </g>\r\n    );\r\n  else\r\n    return (\r\n      <g transform={`translate(0, ${-half_thickness - 10} )`}>\r\n        <text\r\n          x={length / 2}\r\n          y=\"20\"\r\n          transform={`scale(1, -1)`}\r\n          style={STYLE_TEXT}\r\n        >\r\n          B: {distanceText}\r\n        </text>\r\n        <polygon points=\"0,-5 0,5 4,0\" style={STYLE} />\r\n        <line x1={length} y1=\"-5\" x2={length} y2=\"5\" style={STYLE} />\r\n        <polygon\r\n          points={`${length},-5 ${length},5 ${length - 4} 0`}\r\n          style={STYLE}\r\n        />\r\n        <line x1=\"0\" y1=\"0\" x2={length} y2=\"0\" style={STYLE} />\r\n      </g>\r\n    );\r\n}\r\n\r\nRuler.propTypes = {\r\n  length: PropTypes.number.isRequired,\r\n  unit: PropTypes.string.isRequired,\r\n  half_thickness: PropTypes.number.isRequired,\r\n};\r\n","import * as Three from 'three';\r\n\r\nfunction disposeGeometry(geometry) {\r\n  geometry.dispose();\r\n}\r\n\r\nfunction disposeTexture(texture) {\r\n  if (!texture) {\r\n    return;\r\n  }\r\n  texture.dispose();\r\n}\r\n\r\nfunction disposeMultimaterial(material) {\r\n  if (!(material instanceof Three.MultiMaterial)) {\r\n    return;\r\n  }\r\n  material.materials.forEach(material => {\r\n    disposeMaterial(material);\r\n  });\r\n\r\n}\r\n\r\nfunction disposeMaterial(material) {\r\n  if (!(material instanceof Three.Material)) {\r\n    return;\r\n  }\r\n\r\n  disposeTexture(material.map);\r\n  material.map = null;\r\n  material.dispose();\r\n}\r\n\r\nfunction disposeMesh(mesh) {\r\n  if (!(mesh instanceof Three.Mesh || mesh instanceof Three.BoxHelper || mesh instanceof Three.LineSegments)) {\r\n    return;\r\n  }\r\n  disposeGeometry(mesh.geometry);\r\n  disposeMultimaterial(mesh.material);\r\n  disposeMaterial(mesh.material);\r\n\r\n  mesh.geometry = null;\r\n  mesh.material = null;\r\n}\r\n\r\nexport function disposeScene(scene3D) {\r\n  scene3D.traverse(child => {\r\n    disposeMesh(child);\r\n    child = null;\r\n  });\r\n}\r\n\r\nexport function disposeObject(object) {\r\n  object.traverse(child => {\r\n    disposeMesh(child);\r\n    child = null;\r\n  });\r\n}\r\n","import PropTypes from \"prop-types\";\nimport { useDropzone } from \"react-dropzone\";\nimport { useCallback, useEffect } from \"react\";\n// material\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { Box, Typography } from \"@material-ui/core\";\n\n// ----------------------------------------------------------------------\n\nconst useStyles = makeStyles((theme) => ({\n  letter: {\n    fontFamily: \"DM Sans\",\n    fontStyle: \"normal\",\n    fontWeight: 500,\n    fontSize: \"14px\",\n    lineHeight: \"18px\",\n    letterSpacing: \"-0.02em\",\n    color: \"#838383\",\n    \"&:hover\": {\n      opacity: 0.72,\n      cursor: \"pointer\",\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      textAlign: \"left\",\n      flexDirection: \"row\",\n    },\n  },\n  dragdrop: {\n    marginLeft: \"0.5rem\",\n  },\n}));\n\n// ----------------------------------------------------------------------\n\nUploadSingleFile.propTypes = {\n  caption: PropTypes.string,\n  error: PropTypes.bool,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  onChange: PropTypes.func,\n  sx: PropTypes.object,\n};\n\nexport default function UploadSingleFile({\n  caption,\n  error = false,\n  value: file,\n  onChange: setFile,\n  sx,\n  ...other\n}) {\n  const classes = useStyles();\n\n  const handleDrop = useCallback(\n    (acceptedFiles) => {\n      const file = acceptedFiles[0];\n\n      if (file) {\n        setFile({\n          ...file,\n          size: file.size,\n          type: file.type,\n          name: file.name,\n          preview: URL.createObjectURL(file),\n        });\n      }\n    },\n    [setFile]\n  );\n\n  const { getRootProps, getInputProps, isDragActive, isDragReject } =\n    useDropzone({\n      onDrop: handleDrop,\n      multiple: false,\n    });\n\n  useEffect(\n    () => () => {\n      console.log(\"file\", file);\n      if (file) {\n        URL.revokeObjectURL(file.preview);\n      }\n    },\n    [file]\n  );\n\n  return (\n    <Box\n      {...getRootProps()}\n      sx={{\n        ...(isDragActive && { opacity: 0.72 }),\n        ...((isDragReject || error) && {\n          color: \"error.main\",\n          borderColor: \"error.light\",\n          bgcolor: \"error.lighter\",\n          display: \"inline-block\",\n        }),\n        ...file,\n      }}\n    >\n      <input {...getInputProps()} />\n\n      {!file && (\n        <Box\n          display=\"flex\"\n          alignItems=\"center\"\n          sx={{\n            height: \"32px\",\n            paddingLeft: \"1.5rem\",\n          }}\n        >\n          <Typography className={classes.letter}>\n            or drag your file here\n          </Typography>\n          <img src=\"/assets/dragdrop.png\" className={classes.dragdrop} />\n        </Box>\n      )}\n\n      {file && (\n        <Box\n          alt=\"file preview\"\n          display=\"flex\"\n          alignItems=\"center\"\n          sx={{\n            height: \"32px\",\n            paddingLeft: \"1.5rem\",\n          }}\n        >\n          <Typography className={classes.letter}>{file.name}</Typography>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","import { IDBroker } from \"../utils/export\";\r\n\r\nconst RULER_LENGTH = 1000;\r\nconst SCENE_WIDTH = 6000;\r\nconst SCENE_HEIGHT = 4000;\r\nconst WALL_HEIGHT = 259;\r\nconst WALL_THICKNESS = 10;\r\nconst WINDOWS_HEIGHT = 150;\r\n\r\nexport function loadProjectFromFile(data) {\r\n  try {\r\n    var parser = new DOMParser();\r\n    var doc = parser.parseFromString(data, \"image/svg+xml\");\r\n\r\n    var rulerObj = doc.querySelectorAll(\"#ruler line\")[0];\r\n\r\n    const rulerPixel =\r\n      RULER_LENGTH /\r\n      Math.sqrt(\r\n        Math.pow(rulerObj.getAttribute(\"x1\") - rulerObj.getAttribute(\"x2\"), 2) +\r\n          Math.pow(rulerObj.getAttribute(\"y1\") - rulerObj.getAttribute(\"y2\"), 2)\r\n      );\r\n\r\n    var facadeDomObj = Array.prototype.slice.call(\r\n      doc.querySelectorAll(\"#facade_x5F_sagamore line.st1\")\r\n    );\r\n\r\n    var internalDomObj = Array.prototype.slice.call(\r\n      doc.querySelectorAll(\"#internals_x5F_sagamore line.st11\")\r\n    );\r\n\r\n    var internalYellowDomObj = Array.prototype.slice.call(\r\n      doc.querySelectorAll(\"#internals_x5F_sagamore line.st15\")\r\n    );\r\n\r\n    let facadeParsingData = getParsingData(rulerPixel, facadeDomObj);\r\n    let internalParsingData = getParsingData(rulerPixel, internalDomObj);\r\n    let internalYellowParsingData = getParsingData(\r\n      rulerPixel,\r\n      internalYellowDomObj\r\n    );\r\n\r\n    // Remove the break lines\r\n    facadeParsingData = combineBreakLines(facadeParsingData);\r\n    internalParsingData = combineBreakLines(internalParsingData);\r\n    internalYellowParsingData = combineBreakLines(internalYellowParsingData);\r\n    // //\r\n\r\n    // Move facade to internal walls\r\n    facadeParsingData = moveToInternalWalls(\r\n      facadeParsingData,\r\n      internalParsingData\r\n    );\r\n    // // // //\r\n\r\n    // Get the windows and doors position and remove the intern unnessary walls.\r\n    const windowsPos = getWindowsPos(\r\n      facadeParsingData,\r\n      internalParsingData,\r\n      internalYellowParsingData\r\n    );\r\n    // //\r\n\r\n    //// Add the hole data to facade.\r\n    let facadeLines = facadeParsingData.lines;\r\n\r\n    for (let i = 0; i < facadeLines.length; i++) {\r\n      for (let j = 0; j < windowsPos.holesArr.length; j++) {\r\n        if (windowsPos.holesArr[j].line == facadeLines[i].id) {\r\n          let holes = facadeLines[i].holes;\r\n          holes.push(windowsPos.holesArr[j].id);\r\n          facadeLines[i] = {\r\n            id: facadeLines[i].id,\r\n            type: \"internalwall\",\r\n            prototype: \"lines\",\r\n            name: \"internalwall\",\r\n            misc: {},\r\n            selected: false,\r\n            properties: {\r\n              height: {\r\n                length: WALL_HEIGHT,\r\n              },\r\n              thickness: {\r\n                length: WALL_THICKNESS,\r\n              },\r\n              textureA: \"bricks\",\r\n              textureB: \"bricks\",\r\n            },\r\n            visible: true,\r\n            vertices: facadeLines[i].vertices,\r\n            holes: holes,\r\n          };\r\n        }\r\n      }\r\n    }\r\n    ////\r\n\r\n    let vertices = facadeParsingData.vertices.concat(\r\n      internalParsingData.vertices\r\n    );\r\n    let lines = facadeLines.concat(windowsPos.internalLines);\r\n\r\n    let verticesJson = {};\r\n    for (let i = 0; i < vertices.length; i++) {\r\n      verticesJson[vertices[i].id] = vertices[i];\r\n    }\r\n    lines = arrangeLines(lines, verticesJson);\r\n    let linesJson = {};\r\n    for (let i = 0; i < lines.length; i++) {\r\n      linesJson[lines[i].id] = lines[i];\r\n    }\r\n\r\n    const jsonData = {\r\n      unit: \"cm\",\r\n      layers: {\r\n        \"layer-1\": {\r\n          id: \"layer-1\",\r\n          altitude: 0,\r\n          order: 0,\r\n          opacity: 1,\r\n          name: \"default\",\r\n          visible: true,\r\n          vertices: verticesJson,\r\n          lines: linesJson,\r\n          holes: windowsPos.holes,\r\n          areas: {},\r\n          items: {},\r\n          selected: {\r\n            vertices: [],\r\n            lines: [],\r\n            holes: [],\r\n            areas: [],\r\n            items: [],\r\n          },\r\n        },\r\n      },\r\n      grids: {\r\n        h1: {\r\n          id: \"h1\",\r\n          type: \"horizontal-streak\",\r\n          properties: {\r\n            step: 20,\r\n            colors: [\"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\"],\r\n          },\r\n        },\r\n        v1: {\r\n          id: \"v1\",\r\n          type: \"vertical-streak\",\r\n          properties: {\r\n            step: 20,\r\n            colors: [\"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\"],\r\n          },\r\n        },\r\n      },\r\n      selectedLayer: \"layer-1\",\r\n      groups: {},\r\n      width: SCENE_WIDTH,\r\n      height: SCENE_HEIGHT,\r\n      meta: {},\r\n      guides: { horizontal: {}, vertical: {}, circular: {} },\r\n    };\r\n\r\n    return jsonData;\r\n  } catch (e) {\r\n    console.log(\"e\", e);\r\n    return {};\r\n  }\r\n}\r\n\r\nconst arrangeLines = (lines, verticesJson) => {\r\n  let resLines = [];\r\n  for (let i = 0; i < lines.length; i++) {\r\n    let vertise1 = verticesJson[lines[i].vertices[0]];\r\n    let vertise2 = verticesJson[lines[i].vertices[1]];\r\n\r\n    if (vertise1.x == vertise2.x && vertise1.y > vertise2.y) {\r\n      const temp = vertise1;\r\n      vertise1 = vertise2;\r\n      vertise2 = temp;\r\n    } else if (vertise1.y == vertise2.y && vertise1.x > vertise2.x) {\r\n      const temp = vertise1;\r\n      vertise1 = vertise2;\r\n      vertise2 = temp;\r\n    }\r\n\r\n    resLines.push({\r\n      id: lines[i].id,\r\n      type: lines[i].type,\r\n      prototype: lines[i].prototype,\r\n      name: lines[i].name,\r\n      misc: {},\r\n      selected: false,\r\n      properties: {\r\n        height: {\r\n          length: WALL_HEIGHT,\r\n        },\r\n        thickness: {\r\n          length: WALL_THICKNESS,\r\n        },\r\n        textureA: \"bricks\",\r\n        textureB: \"bricks\",\r\n      },\r\n      visible: true,\r\n      vertices: [vertise1.id, vertise2.id],\r\n      holes: lines[i].holes,\r\n    });\r\n  }\r\n\r\n  return resLines;\r\n};\r\n\r\nconst checkDoor = (vertise1, vertise2, parsingData) => {\r\n  let verticesJson = [];\r\n  for (let i = 0; i < parsingData.vertices.length; i++) {\r\n    verticesJson[parsingData.vertices[i].id] = parsingData.vertices[i];\r\n  }\r\n\r\n  for (let i = 0; i < parsingData.lines.length; i++) {\r\n    const parseVer1 = verticesJson[parsingData.lines[i].vertices[0]];\r\n    const parseVer2 = verticesJson[parsingData.lines[i].vertices[1]];\r\n    const distance11 = Math.sqrt(\r\n      Math.pow(parseVer1.x - vertise1.x, 2) +\r\n        Math.pow(parseVer1.y - vertise1.y, 2)\r\n    );\r\n    const distance12 = Math.sqrt(\r\n      Math.pow(parseVer1.x - vertise2.x, 2) +\r\n        Math.pow(parseVer1.y - vertise2.y, 2)\r\n    );\r\n    const distance21 = Math.sqrt(\r\n      Math.pow(parseVer2.x - vertise1.x, 2) +\r\n        Math.pow(parseVer2.y - vertise1.y, 2)\r\n    );\r\n    const distance22 = Math.sqrt(\r\n      Math.pow(parseVer2.x - vertise2.x, 2) +\r\n        Math.pow(parseVer2.y - vertise2.y, 2)\r\n    );\r\n\r\n    if (\r\n      distance11 <= 15 ||\r\n      distance12 <= 15 ||\r\n      distance21 <= 15 ||\r\n      distance22 <= 15\r\n    ) {\r\n      return 1;\r\n    }\r\n  }\r\n\r\n  return 0;\r\n};\r\n\r\nconst checkDupliVertices = (vertices, x, y) => {\r\n  for (let i = 0; i < vertices.length; i++) {\r\n    if (x == vertices[i].x && y == vertices[i].y) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nconst checkDupliLines = (lineArr, verID1, verID2) => {\r\n  for (let i = 0; i < lineArr.length; i++) {\r\n    if (\r\n      lineArr[i].vertices[0] + lineArr[i].vertices[1] == verID1 + verID2 ||\r\n      lineArr[i].vertices[1] + lineArr[i].vertices[0] == verID1 + verID2\r\n    ) {\r\n      return 1;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nconst getParsingData = (rulerPixel, domObj) => {\r\n  var vertices = [];\r\n  var lines = {};\r\n  var lineArr = [];\r\n  // var room = \"\";\r\n\r\n  for (var i = 0; i < domObj.length; i++) {\r\n    let verticesID = IDBroker.acquireID();\r\n    let verticesIndex = checkDupliVertices(\r\n      vertices,\r\n      Math.floor(SCENE_WIDTH / 2 + domObj[i].getAttribute(\"x1\") * rulerPixel),\r\n      Math.floor(SCENE_HEIGHT / 2 - domObj[i].getAttribute(\"y1\") * rulerPixel)\r\n    );\r\n\r\n    let vertice1, vertice2;\r\n    if (verticesIndex != -1) {\r\n      // duplicated\r\n      vertice1 = vertices[verticesIndex];\r\n    } else {\r\n      // not duplicated\r\n      vertice1 = {\r\n        id: verticesID,\r\n        type: \"\",\r\n        prototype: \"vertices\",\r\n        name: \"Vertex\",\r\n        misc: {},\r\n        selected: false,\r\n        properties: {},\r\n        visible: true,\r\n        x: Math.floor(\r\n          SCENE_WIDTH / 2 + domObj[i].getAttribute(\"x1\") * rulerPixel\r\n        ),\r\n        y: Math.floor(\r\n          SCENE_HEIGHT / 2 - domObj[i].getAttribute(\"y1\") * rulerPixel\r\n        ),\r\n        lines: [\"maIUMKnv7l\", \"nhQAdYl8q\"],\r\n        areas: [],\r\n      };\r\n      vertices.push(vertice1);\r\n    }\r\n\r\n    verticesID = IDBroker.acquireID();\r\n    verticesIndex = checkDupliVertices(\r\n      vertices,\r\n      Math.floor(SCENE_WIDTH / 2 + domObj[i].getAttribute(\"x2\") * rulerPixel),\r\n      Math.floor(SCENE_HEIGHT / 2 - domObj[i].getAttribute(\"y2\") * rulerPixel)\r\n    );\r\n    if (verticesIndex != -1) {\r\n      // duplicated\r\n      vertice2 = vertices[verticesIndex];\r\n    } else {\r\n      vertice2 = {\r\n        id: verticesID,\r\n        type: \"\",\r\n        prototype: \"vertices\",\r\n        name: \"Vertex\",\r\n        misc: {},\r\n        selected: false,\r\n        properties: {},\r\n        visible: true,\r\n        x: Math.floor(\r\n          SCENE_WIDTH / 2 + domObj[i].getAttribute(\"x2\") * rulerPixel\r\n        ),\r\n        y: Math.floor(\r\n          SCENE_HEIGHT / 2 - domObj[i].getAttribute(\"y2\") * rulerPixel\r\n        ),\r\n        lines: [\"maIUMKnv7l\", \"nhQAdYl8q\"],\r\n        areas: [],\r\n      };\r\n      vertices.push(vertice2);\r\n    }\r\n\r\n    const checkLine = checkDupliLines(lineArr, vertice1.id, vertice2.id);\r\n\r\n    if (checkLine == -1) {\r\n      const lineID = IDBroker.acquireID();\r\n\r\n      lineArr.push({\r\n        id: lineID,\r\n        type: \"internalwall\",\r\n        prototype: \"lines\",\r\n        name: \"internalwall\",\r\n        misc: {},\r\n        selected: false,\r\n        properties: {\r\n          height: { length: WALL_HEIGHT },\r\n          thickness: { length: WALL_THICKNESS },\r\n          textureA: \"bricks\",\r\n          textureB: \"bricks\",\r\n        },\r\n        visible: true,\r\n        vertices: [vertice1.id, vertice2.id],\r\n        holes: [],\r\n      });\r\n    }\r\n  }\r\n\r\n  return {\r\n    vertices: vertices,\r\n    lines: lineArr,\r\n  };\r\n};\r\n\r\nconst getMoveSize = (line, externalData, internalData) => {\r\n  let externalVerticesJson = [];\r\n  for (let i = 0; i < externalData.vertices.length; i++) {\r\n    externalVerticesJson[externalData.vertices[i].id] =\r\n      externalData.vertices[i];\r\n  }\r\n  const vertice1 = externalVerticesJson[line.vertices[0]];\r\n  const vertice2 = externalVerticesJson[line.vertices[1]];\r\n\r\n  let distance = 99999999;\r\n  let result = { direction: -1, position: -1 };\r\n  for (let i = 0; i < internalData.vertices.length; i++) {\r\n    if (vertice1.x == vertice2.x) {\r\n      // x move\r\n      let rest = Math.abs(internalData.vertices[i].y - vertice1.y);\r\n      if (\r\n        Math.abs(internalData.vertices[i].y - vertice1.y) >=\r\n        Math.abs(internalData.vertices[i].y - vertice2.y)\r\n      ) {\r\n        rest = Math.abs(internalData.vertices[i].y - vertice2.y);\r\n      }\r\n      if (\r\n        Math.abs(internalData.vertices[i].x - vertice1.x) + rest < distance &&\r\n        vertice1.x != internalData.vertices[i].x &&\r\n        checkWindowWall(internalData, internalData.vertices[i].x, 0)\r\n      ) {\r\n        distance = Math.abs(internalData.vertices[i].x - vertice1.x) + rest;\r\n        result = {\r\n          direction: 0,\r\n          position: internalData.vertices[i].x,\r\n        };\r\n      }\r\n    } else if (vertice1.y == vertice2.y) {\r\n      // y move\r\n      let rest = Math.abs(internalData.vertices[i].x - vertice1.x);\r\n      if (\r\n        Math.abs(internalData.vertices[i].x - vertice1.x) >=\r\n        Math.abs(internalData.vertices[i].x - vertice2.x)\r\n      ) {\r\n        rest = Math.abs(internalData.vertices[i].x - vertice2.x);\r\n      }\r\n      if (\r\n        Math.abs(internalData.vertices[i].y - vertice1.y) + rest < distance &&\r\n        vertice1.y != internalData.vertices[i].y &&\r\n        checkWindowWall(internalData, internalData.vertices[i].y, 1)\r\n      ) {\r\n        distance = Math.abs(internalData.vertices[i].y - vertice1.y) + rest;\r\n        result = {\r\n          direction: 1,\r\n          position: internalData.vertices[i].y,\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nconst checkWindowWall = (internalData, position, direction) => {\r\n  let count = 0;\r\n  for (let i = 0; i < internalData.vertices.length; i++) {\r\n    if (direction == 0) {\r\n      // x axios\r\n      if (internalData.vertices[i].x == position) {\r\n        count++;\r\n      }\r\n    } else {\r\n      // y axios\r\n      if (internalData.vertices[i].y == position) {\r\n        count++;\r\n      }\r\n    }\r\n  }\r\n  return count > 1 ? 1 : 0;\r\n};\r\n\r\nconst getIndexVertice = (parseData, id) => {\r\n  for (let i = 0; i < parseData.vertices.length; i++) {\r\n    if (parseData.vertices[i].id == id) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nconst checkBreakLine = (externalLines, externalVertices, line) => {\r\n  let verticesJson = {};\r\n  for (let i = 0; i < externalVertices.length; i++) {\r\n    verticesJson[externalVertices[i].id] = externalVertices[i];\r\n  }\r\n\r\n  let count = 0;\r\n  for (let i = 0; i < externalLines.length; i++) {\r\n    if (\r\n      externalLines[i].vertices[0] == line.vertices[0] &&\r\n      externalLines[i].id != line.id\r\n    ) {\r\n      if (\r\n        verticesJson[externalLines[i].vertices[1]].y ==\r\n          verticesJson[line.vertices[1]].y ||\r\n        verticesJson[externalLines[i].vertices[1]].x ==\r\n          verticesJson[line.vertices[1]].x\r\n      ) {\r\n        return {\r\n          externalNo: i,\r\n          externalOrder: 0,\r\n          lineOrder: 0,\r\n        };\r\n      }\r\n    } else if (\r\n      externalLines[i].vertices[0] == line.vertices[1] &&\r\n      externalLines[i].id != line.id\r\n    ) {\r\n      if (\r\n        verticesJson[externalLines[i].vertices[1]].y ==\r\n          verticesJson[line.vertices[0]].y ||\r\n        verticesJson[externalLines[i].vertices[1]].x ==\r\n          verticesJson[line.vertices[0]].x\r\n      ) {\r\n        return {\r\n          externalNo: i,\r\n          externalOrder: 0,\r\n          lineOrder: 1,\r\n        };\r\n      }\r\n    } else if (\r\n      externalLines[i].vertices[1] == line.vertices[0] &&\r\n      externalLines[i].id != line.id\r\n    ) {\r\n      if (\r\n        verticesJson[externalLines[i].vertices[0]].y ==\r\n          verticesJson[line.vertices[1]].y ||\r\n        verticesJson[externalLines[i].vertices[0]].x ==\r\n          verticesJson[line.vertices[1]].x\r\n      ) {\r\n        return {\r\n          externalNo: i,\r\n          externalOrder: 1,\r\n          lineOrder: 0,\r\n        };\r\n      }\r\n    } else if (\r\n      externalLines[i].vertices[1] == line.vertices[1] &&\r\n      externalLines[i].id != line.id\r\n    ) {\r\n      if (\r\n        verticesJson[externalLines[i].vertices[0]].y ==\r\n          verticesJson[line.vertices[0]].y ||\r\n        verticesJson[externalLines[i].vertices[0]].x ==\r\n          verticesJson[line.vertices[0]].x\r\n      ) {\r\n        return {\r\n          externalNo: i,\r\n          externalOrder: 1,\r\n          lineOrder: 1,\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    externalNo: -1,\r\n    externalOrder: -1,\r\n    lineOrder: -1,\r\n  };\r\n};\r\n\r\nconst combineBreakLines = (parsingData) => {\r\n  let facadeVertices = parsingData.vertices;\r\n  let facadeLines = parsingData.lines;\r\n\r\n  let tempLines = [];\r\n\r\n  for (let i = 0; i < facadeLines.length; i++) {\r\n    const res = checkBreakLine(facadeLines, facadeVertices, facadeLines[i]);\r\n    if (res.externalNo != -1) {\r\n      if (\r\n        checkDupliLines(\r\n          tempLines,\r\n          res.lineOrder == 0\r\n            ? facadeLines[i].vertices[1]\r\n            : facadeLines[i].vertices[0],\r\n          res.externalOrder == 0\r\n            ? facadeLines[res.externalNo].vertices[1]\r\n            : facadeLines[res.externalNo].vertices[0]\r\n        ) == -1\r\n      ) {\r\n        tempLines.push({\r\n          id: facadeLines[i].id,\r\n          type: \"internalwall\",\r\n          prototype: \"lines\",\r\n          name: \"internalwall\",\r\n          misc: {},\r\n          selected: false,\r\n          properties: {\r\n            height: { length: WALL_HEIGHT },\r\n            thickness: { length: WALL_THICKNESS },\r\n            textureA: \"bricks\",\r\n            textureB: \"bricks\",\r\n          },\r\n          visible: true,\r\n          vertices: [\r\n            res.lineOrder == 0\r\n              ? facadeLines[i].vertices[1]\r\n              : facadeLines[i].vertices[0],\r\n            res.externalOrder == 0\r\n              ? facadeLines[res.externalNo].vertices[1]\r\n              : facadeLines[res.externalNo].vertices[0],\r\n          ],\r\n          holes: [],\r\n        });\r\n      }\r\n    } else {\r\n      tempLines.push(facadeLines[i]);\r\n    }\r\n  }\r\n\r\n  facadeLines = tempLines;\r\n  return {\r\n    vertices: facadeVertices,\r\n    lines: facadeLines,\r\n  };\r\n};\r\n\r\nconst moveToInternalWalls = (facadeParsingData, internalParsingData) => {\r\n  let facadeVertices = facadeParsingData.vertices;\r\n  for (let i = 0; i < facadeParsingData.lines.length; i++) {\r\n    const moveSize = getMoveSize(\r\n      facadeParsingData.lines[i],\r\n      facadeParsingData,\r\n      internalParsingData\r\n    );\r\n\r\n    const inx1 = getIndexVertice(\r\n      facadeParsingData,\r\n      facadeParsingData.lines[i].vertices[0]\r\n    );\r\n    const inx2 = getIndexVertice(\r\n      facadeParsingData,\r\n      facadeParsingData.lines[i].vertices[1]\r\n    );\r\n\r\n    facadeVertices[inx1] = {\r\n      id: facadeVertices[inx1].id,\r\n      type: \"\",\r\n      prototype: \"vertices\",\r\n      name: \"Vertex\",\r\n      misc: {},\r\n      selected: false,\r\n      properties: {},\r\n      visible: true,\r\n      x: moveSize.direction == 0 ? moveSize.position : facadeVertices[inx1].x,\r\n      y: moveSize.direction == 1 ? moveSize.position : facadeVertices[inx1].y,\r\n      lines: facadeVertices[inx1].lines,\r\n      areas: [],\r\n    };\r\n    facadeVertices[inx2] = {\r\n      id: facadeVertices[inx2].id,\r\n      type: \"\",\r\n      prototype: \"vertices\",\r\n      name: \"Vertex\",\r\n      misc: {},\r\n      selected: false,\r\n      properties: {},\r\n      visible: true,\r\n      x: moveSize.direction == 0 ? moveSize.position : facadeVertices[inx2].x,\r\n      y: moveSize.direction == 1 ? moveSize.position : facadeVertices[inx2].y,\r\n      lines: facadeVertices[inx2].lines,\r\n      areas: [],\r\n    };\r\n  }\r\n\r\n  return {\r\n    vertices: facadeVertices,\r\n    lines: facadeParsingData.lines,\r\n  };\r\n};\r\n\r\nconst getRightPos = (vertices1, vertices2) => {\r\n  if (vertices1.x == vertices2.x) {\r\n    // X axios\r\n    if (vertices1.y <= vertices2.y) {\r\n      return {\r\n        vertices1: vertices1,\r\n        vertices2: vertices2,\r\n      };\r\n    }\r\n    return {\r\n      vertices1: vertices2,\r\n      vertices2: vertices1,\r\n    };\r\n  } else if (vertices1.y == vertices2.y) {\r\n    // Y axios\r\n    if (vertices1.x <= vertices2.x) {\r\n      return {\r\n        vertices1: vertices1,\r\n        vertices2: vertices2,\r\n      };\r\n    }\r\n    return {\r\n      vertices1: vertices2,\r\n      vertices2: vertices1,\r\n    };\r\n  }\r\n};\r\n\r\nconst getWindowsPos = (\r\n  facadeParsingData,\r\n  internalParsingData,\r\n  internalYellowParsingData\r\n) => {\r\n  internalYellowParsingData;\r\n  let verticesfacaceTempJson = {};\r\n  for (let i = 0; i < facadeParsingData.vertices.length; i++) {\r\n    verticesfacaceTempJson[facadeParsingData.vertices[i].id] =\r\n      facadeParsingData.vertices[i];\r\n  }\r\n  let verticesInternTempJson = {};\r\n  for (let i = 0; i < internalParsingData.vertices.length; i++) {\r\n    verticesInternTempJson[internalParsingData.vertices[i].id] =\r\n      internalParsingData.vertices[i];\r\n  }\r\n  let internTempLines = internalParsingData.lines;\r\n\r\n  let result = [];\r\n  let unnecessayLines = [];\r\n\r\n  for (let i = 0; i < facadeParsingData.lines.length; i++) {\r\n    let tempLines = [];\r\n    let direction = 0; // X axio\r\n    for (let j = 0; j < internTempLines.length; j++) {\r\n      if (\r\n        verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].x ==\r\n        verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]].x\r\n      ) {\r\n        // X axio\r\n        direction = 0;\r\n        if (\r\n          verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].x ==\r\n            verticesInternTempJson[internTempLines[j].vertices[0]].x &&\r\n          verticesInternTempJson[internTempLines[j].vertices[0]].x ==\r\n            verticesInternTempJson[internTempLines[j].vertices[1]].x\r\n        ) {\r\n          const extern = getRightPos(\r\n            verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]],\r\n            verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]]\r\n          );\r\n          const intern = getRightPos(\r\n            verticesInternTempJson[internTempLines[j].vertices[0]],\r\n            verticesInternTempJson[internTempLines[j].vertices[1]]\r\n          );\r\n          if (\r\n            intern.vertices1.y >= extern.vertices1.y ||\r\n            intern.vertices2.y <= extern.vertices2.y\r\n          ) {\r\n            tempLines.push({\r\n              vertices1: intern.vertices1,\r\n              vertices2: intern.vertices2,\r\n              id: facadeParsingData.lines[i].id,\r\n              facade1: extern.vertices1,\r\n              facade2: extern.vertices2,\r\n            });\r\n            if (\r\n              intern.vertices1.y >= extern.vertices1.y &&\r\n              intern.vertices2.y <= extern.vertices2.y\r\n            )\r\n              unnecessayLines.push(internTempLines[j].id);\r\n          }\r\n        }\r\n      } else if (\r\n        verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].y ==\r\n        verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]].y\r\n      ) {\r\n        // Y axio\r\n        direction = 1;\r\n        if (\r\n          verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].y ==\r\n            verticesInternTempJson[internTempLines[j].vertices[0]].y &&\r\n          verticesInternTempJson[internTempLines[j].vertices[0]].y ==\r\n            verticesInternTempJson[internTempLines[j].vertices[1]].y\r\n        ) {\r\n          const extern = getRightPos(\r\n            verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]],\r\n            verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]]\r\n          );\r\n          const intern = getRightPos(\r\n            verticesInternTempJson[internTempLines[j].vertices[0]],\r\n            verticesInternTempJson[internTempLines[j].vertices[1]]\r\n          );\r\n          if (\r\n            intern.vertices1.x >= extern.vertices1.x ||\r\n            intern.vertices2.x <= extern.vertices2.x\r\n          ) {\r\n            tempLines.push({\r\n              vertices1: intern.vertices1,\r\n              vertices2: intern.vertices2,\r\n              id: facadeParsingData.lines[i].id,\r\n              facade1: extern.vertices1,\r\n              facade2: extern.vertices2,\r\n            });\r\n            if (\r\n              intern.vertices1.x >= extern.vertices1.x &&\r\n              intern.vertices2.x <= extern.vertices2.x\r\n            )\r\n              unnecessayLines.push(internTempLines[j].id);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (tempLines.length > 1) {\r\n      // sort tempLines\r\n      tempLines = tempLines.sort((a, b) => {\r\n        if (direction == 0) {\r\n          // X axios\r\n          return a.vertices1.y - b.vertices1.y;\r\n        } else if (direction == 1) {\r\n          // Y axios\r\n          return a.vertices1.x - b.vertices1.x;\r\n        }\r\n      });\r\n      // extract the windows or doors position\r\n      for (let i = 0; i < tempLines.length - 1; i++) {\r\n        if (tempLines[i].facade1.x == tempLines[i].facade2.x) {\r\n          // X Axios\r\n          let holeID = IDBroker.acquireID();\r\n\r\n          const offset =\r\n            ((tempLines[i].vertices2.y + tempLines[i + 1].vertices1.y) / 2 -\r\n              tempLines[i].facade1.y) /\r\n            (tempLines[i].facade2.y - tempLines[i].facade1.y);\r\n\r\n          if (\r\n            !Number.isNaN(offset) &&\r\n            Math.abs(tempLines[i].vertices2.y - tempLines[i + 1].vertices1.y) <=\r\n              Math.abs(tempLines[i].facade2.y - tempLines[i + 1].facade1.y)\r\n          ) {\r\n            const isDoor = checkDoor(\r\n              tempLines[i].vertices2,\r\n              tempLines[i + 1].vertices1,\r\n              internalYellowParsingData\r\n            );\r\n\r\n            if (isDoor == 0) {\r\n              result.push({\r\n                id: holeID,\r\n                type: \"window\",\r\n                prototype: \"holes\",\r\n                name: \"Window\",\r\n                misc: {},\r\n                selected: false,\r\n                properties: {\r\n                  width: {\r\n                    length: Math.abs(\r\n                      tempLines[i].vertices2.y - tempLines[i + 1].vertices1.y\r\n                    ),\r\n                  },\r\n                  height: {\r\n                    length: WINDOWS_HEIGHT,\r\n                  },\r\n                  altitude: {\r\n                    length: 40,\r\n                  },\r\n                  thickness: {\r\n                    length: 5,\r\n                  },\r\n                  flip: \"false\",\r\n                },\r\n                visible: true,\r\n                offset: offset,\r\n                line: tempLines[i].id,\r\n              });\r\n            } else if (isDoor == 1) {\r\n              result.push({\r\n                id: holeID,\r\n                type: \"door\",\r\n                prototype: \"holes\",\r\n                name: \"Door\",\r\n                misc: {},\r\n                selected: false,\r\n                properties: {\r\n                  width: {\r\n                    length: Math.abs(\r\n                      tempLines[i].vertices2.y - tempLines[i + 1].vertices1.y\r\n                    ),\r\n                  },\r\n                  height: {\r\n                    length: WINDOWS_HEIGHT,\r\n                  },\r\n                  altitude: {\r\n                    length: 40,\r\n                  },\r\n                  thickness: {\r\n                    length: 5,\r\n                  },\r\n                  flip: \"false\",\r\n                },\r\n                visible: true,\r\n                offset: offset,\r\n                line: tempLines[i].id,\r\n              });\r\n            }\r\n          }\r\n        } else {\r\n          // Y Axios\r\n          let holeID = IDBroker.acquireID();\r\n\r\n          const offset =\r\n            ((tempLines[i].vertices2.x + tempLines[i + 1].vertices1.x) / 2 -\r\n              tempLines[i].facade1.x) /\r\n            (tempLines[i].facade2.x - tempLines[i].facade1.x);\r\n\r\n          if (\r\n            !Number.isNaN(offset) &&\r\n            Math.abs(tempLines[i].vertices2.x - tempLines[i + 1].vertices1.x) <=\r\n              Math.abs(tempLines[i].facade2.x - tempLines[i + 1].facade1.x)\r\n          ) {\r\n            const isDoor = checkDoor(\r\n              tempLines[i].vertices2,\r\n              tempLines[i + 1].vertices1,\r\n              internalYellowParsingData\r\n            );\r\n\r\n            if (isDoor == 0) {\r\n              result.push({\r\n                id: holeID,\r\n                type: \"window\",\r\n                prototype: \"holes\",\r\n                name: \"Window\",\r\n                misc: {},\r\n                selected: false,\r\n                properties: {\r\n                  width: {\r\n                    length: Math.abs(\r\n                      tempLines[i].vertices2.x - tempLines[i + 1].vertices1.x\r\n                    ),\r\n                  },\r\n                  height: {\r\n                    length: WINDOWS_HEIGHT,\r\n                  },\r\n                  altitude: {\r\n                    length: 40,\r\n                  },\r\n                  thickness: {\r\n                    length: 5,\r\n                  },\r\n                },\r\n                visible: true,\r\n                offset: offset,\r\n                line: tempLines[i].id,\r\n              });\r\n            } else if (isDoor == 1) {\r\n              sult.push({\r\n                id: holeID,\r\n                type: \"door\",\r\n                prototype: \"holes\",\r\n                name: \"Door\",\r\n                misc: {},\r\n                selected: false,\r\n                properties: {\r\n                  width: {\r\n                    length: Math.abs(\r\n                      tempLines[i].vertices2.x - tempLines[i + 1].vertices1.x\r\n                    ),\r\n                  },\r\n                  height: {\r\n                    length: WINDOWS_HEIGHT,\r\n                  },\r\n                  altitude: {\r\n                    length: 40,\r\n                  },\r\n                  thickness: {\r\n                    length: 5,\r\n                  },\r\n                },\r\n                visible: true,\r\n                offset: offset,\r\n                line: tempLines[i].id,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let json = {};\r\n  for (let i = 0; i < result.length; i++) {\r\n    json[result[i].id] = result[i];\r\n  }\r\n\r\n  // remove the unnessary internal lines\r\n\r\n  let internalLines = [];\r\n  for (let i = 0; i < internTempLines.length; i++) {\r\n    let passedObject = true;\r\n    for (let j = 0; j < unnecessayLines.length; j++) {\r\n      if (unnecessayLines[j] == internTempLines[i].id) {\r\n        passedObject = false;\r\n        break;\r\n      }\r\n    }\r\n    if (passedObject) internalLines.push(internTempLines[i]);\r\n  }\r\n\r\n  return {\r\n    holes: json,\r\n    holesArr: result,\r\n    internalLines: internalLines,\r\n  };\r\n};\r\n","import {\r\n  PropertyColor,\r\n  PropertyEnum,\r\n  PropertyString,\r\n  PropertyNumber,\r\n  PropertyLengthMeasure,\r\n  PropertyToggle,\r\n  PropertyCheckbox,\r\n  PropertyHidden,\r\n  PropertyReadOnly,\r\n} from \"./properties/export\";\r\n\r\nimport { UNIT_CENTIMETER } from \"../constants\";\r\n\r\nexport default class Catalog {\r\n  constructor(unit = UNIT_CENTIMETER) {\r\n    this.elements = {};\r\n    this.categories = {\r\n      root: { name: \"root\", label: \"/\", elements: [], categories: [] },\r\n    };\r\n    this.propertyTypes = {};\r\n    this.unit = unit;\r\n\r\n    this.registerMultiplePropertyType([\r\n      [\"color\", PropertyColor, PropertyColor],\r\n      [\"enum\", PropertyEnum, PropertyEnum],\r\n      [\"string\", PropertyString, PropertyString],\r\n      [\"number\", PropertyNumber, PropertyNumber],\r\n      [\"length-measure\", PropertyLengthMeasure, PropertyLengthMeasure],\r\n      [\"toggle\", PropertyToggle, PropertyToggle],\r\n      [\"checkbox\", PropertyCheckbox, PropertyCheckbox],\r\n      [\"hidden\", PropertyHidden, PropertyHidden],\r\n      [\"read-only\", PropertyReadOnly, PropertyReadOnly],\r\n    ]);\r\n  }\r\n\r\n  /** @description Get catalog's element\r\n   *  @param {string} type Element's type\r\n   *  @return {?object} Element\r\n   */\r\n  getElement(type) {\r\n    if (this.hasElement(type)) {\r\n      return this.elements[type];\r\n    }\r\n    throw new Error(`Element ${type} does not exist in catalog`);\r\n  }\r\n\r\n  /** @description Get catalog category\r\n   *  @param {string} categoryName Name of category\r\n   *  @return {object} Category\r\n   */\r\n  getCategory(categoryName) {\r\n    if (this.hasCategory(categoryName)) {\r\n      return this.categories[categoryName];\r\n    }\r\n    throw new Error(`Category ${categoryName} does not exist in catalog`);\r\n  }\r\n\r\n  /** @description Return type of a specfied property\r\n   *  @param {string} type Property type\r\n   *  @return {?object} Property\r\n   */\r\n  getPropertyType(type) {\r\n    if (this.propertyTypes.hasOwnProperty(type)) {\r\n      return this.propertyTypes[type];\r\n    }\r\n    throw new Error(`Element ${type} does not exist in catalog`);\r\n  }\r\n\r\n  /** @description Register a new element\r\n   *  @param {object} json Element structure\r\n   *  @return {void}\r\n   */\r\n  registerElement(json) {\r\n    json.properties = json.properties || {};\r\n    if (this.validateElement(json)) {\r\n      this.elements[json.name] = json;\r\n      this.categories.root.elements.push(this.elements[json.name]);\r\n    }\r\n  }\r\n\r\n  /** @description Register multiple elements\r\n   *  @param {array} [elementArray] Array of elements\r\n   *  @return {void}\r\n   */\r\n  registerMultipleElements(elementArray) {\r\n    elementArray.forEach((el) => this.registerElement(el));\r\n  }\r\n\r\n  /** @description Register a new property\r\n   *  @param {string} type Type of property\r\n   *  @param {object} Viewer Property viewer component\r\n   *  @param {object} Editor Property editor component\r\n   *  @return {void}\r\n   */\r\n  registerPropertyType(type, Viewer, Editor) {\r\n    this.propertyTypes[type] = { type, Viewer, Editor };\r\n  }\r\n\r\n  /** @description Register multiple property\r\n   *  @param {array} propertyTypeArray Array of properties\r\n   *  @return {void}\r\n   */\r\n  registerMultiplePropertyType(propertyTypeArray) {\r\n    propertyTypeArray.forEach((el) => this.registerPropertyType(...el));\r\n  }\r\n\r\n  /** @description Validate an element\r\n   *  @param {object} json Element's structure\r\n   *  @return {?boolean}\r\n   */\r\n  validateElement(json) {\r\n    if (!json.hasOwnProperty(\"name\")) throw new Error(\"Element not valid\");\r\n\r\n    let name = json.name;\r\n    if (!json.hasOwnProperty(\"prototype\"))\r\n      throw new Error(`Element ${name} doesn't have prototype`);\r\n\r\n    if (!json.hasOwnProperty(\"info\"))\r\n      throw new Error(`Element ${name} doesn't have info`);\r\n    if (!json.info.hasOwnProperty(\"tag\"))\r\n      throw new Error(`Element ${name} doesn't have tag`);\r\n    if (!json.info.hasOwnProperty(\"description\"))\r\n      throw new Error(`Element ${name} doesn't have description`);\r\n    if (!json.info.hasOwnProperty(\"image\"))\r\n      throw new Error(`Element ${name} doesn't have image`);\r\n\r\n    if (!json.hasOwnProperty(\"render2D\"))\r\n      throw new Error(`Element ${name} doesn't have render2D handler`);\r\n    if (!json.hasOwnProperty(\"render3D\"))\r\n      throw new Error(`Element ${name} doesn't have render3D handler`);\r\n    if (!json.hasOwnProperty(\"properties\"))\r\n      throw new Error(`Element ${name} doesn't have properties`);\r\n\r\n    for (let propertyName in json.properties) {\r\n      let propertyConfigs = json.properties[propertyName];\r\n      if (!propertyConfigs.hasOwnProperty(\"type\"))\r\n        throw new Error(\r\n          `Element ${name}, Property ${propertyName} doesn't have type`\r\n        );\r\n      if (!propertyConfigs.hasOwnProperty(\"defaultValue\"))\r\n        throw new Error(\r\n          `Element ${name}, Property ${propertyName} doesn't have defaultValue`\r\n        );\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /** @description Check if catalog has element\r\n   *  @param {string} type Element's type\r\n   *  @return {boolean}\r\n   */\r\n  hasElement(type) {\r\n    return this.elements.hasOwnProperty(type);\r\n  }\r\n\r\n  /** @description Register a new category\r\n   *  @param {string} name Name of category\r\n   *  @param {string} label Label of category\r\n   *  @param {array} [childs] Category's childs\r\n   *  @return {?object} Registered category\r\n   */\r\n  registerCategory(name, label, childs) {\r\n    if (this.validateCategory(name, label)) {\r\n      this.categories[name] = { name, label, categories: [], elements: [] };\r\n      this.categories.root.categories.push(this.categories[name]);\r\n\r\n      if (childs && childs.length) {\r\n        childs.forEach((el) => this.addToCategory(name, el));\r\n      }\r\n\r\n      return this.categories[name];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /** @description Add an element to the specified category\r\n   *  @param {string} name Name of category\r\n   *  @param {object} child Element's structure\r\n   *  @return {?void}\r\n   */\r\n  addToCategory(name, child) {\r\n    if (this.hasElement(child.name)) {\r\n      this.categories[name].elements.push(child);\r\n      this.categories.root.elements.splice(\r\n        this.categories.root.elements.indexOf(child),\r\n        1\r\n      );\r\n    } else if (this.hasCategory(child.name)) {\r\n      this.categories[name].categories.push(child);\r\n      this.categories.root.categories.splice(\r\n        this.categories.root.categories.indexOf(child),\r\n        1\r\n      );\r\n    } else {\r\n      throw new Error(`child ${child} is either category nor element`);\r\n    }\r\n  }\r\n\r\n  /** @description Check if category contain element\r\n   *  @param {string} categoryName Name of category\r\n   *  @param {string} elementName Name of element\r\n   *  @return {boolean}\r\n   */\r\n  categoryHasElement(categoryName, elementName) {\r\n    return (\r\n      this.hasCategory(categoryName) &&\r\n      this.categories[categoryName].elements.some(\r\n        (el) => el.name === elementName\r\n      )\r\n    );\r\n  }\r\n\r\n  /** @description Validate a category\r\n   *  @param {string} name Name of category\r\n   *  @param {string} label Label of category\r\n   *  @return {?boolean}\r\n   */\r\n  validateCategory(name, label) {\r\n    if (!name) {\r\n      throw new Error(\"Category has undefined name\");\r\n    }\r\n    if (name === \"\") {\r\n      throw new Error(\"Category has empty name\");\r\n    }\r\n    if (this.hasCategory(name)) {\r\n      throw new Error(\"Category has already been registered\");\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /** @description Verify if catalog already contain a category with specified name\r\n   *  @param {string} categoryName Name of category\r\n   *  @return {boolean}\r\n   */\r\n  hasCategory(categoryName) {\r\n    return this.categories.hasOwnProperty(categoryName);\r\n  }\r\n}\r\n","import PropertyColor from './property-color';\r\nimport PropertyEnum from './property-enum';\r\nimport PropertyString from './property-string';\r\nimport PropertyNumber from './property-number';\r\nimport PropertyLengthMeasure from './property-lenght-measure';\r\nimport PropertyToggle from './property-toggle';\r\nimport PropertyCheckbox from './property-checkbox';\r\nimport PropertyHidden from './property-hidden';\r\nimport PropertyReadOnly from './property-read-only';\r\n\r\nexport {\r\n  PropertyColor,\r\n  PropertyEnum,\r\n  PropertyString,\r\n  PropertyNumber,\r\n  PropertyLengthMeasure,\r\n  PropertyToggle,\r\n  PropertyCheckbox,\r\n  PropertyHidden,\r\n  PropertyReadOnly\r\n};\r\n\r\nexport default {\r\n  PropertyColor,\r\n  PropertyEnum,\r\n  PropertyString,\r\n  PropertyNumber,\r\n  PropertyLengthMeasure,\r\n  PropertyToggle,\r\n  PropertyCheckbox,\r\n  PropertyHidden,\r\n  PropertyReadOnly\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst STYLE = {\r\n  padding: '0 20px',\r\n  overflowY: 'auto'\r\n};\r\n\r\nexport default function ContentContainer({children, width, height, style = {}}) {\r\n  return <div style={{width, height, ...STYLE, ...style}} onWheel={event => event.stopPropagation()}>{children}</div>\r\n}\r\n\r\nContentContainer.propsType = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  style: PropTypes.object\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst STYLE = {\r\n  color: SharedStyle.PRIMARY_COLOR.alt,\r\n  fontWeight: 300,\r\n};\r\n\r\nexport default function ContentTitle({children, style = {}, ...rest}) {\r\n  return <h1 style={{...STYLE, ...style}} {...rest}>{children}</h1>\r\n}\r\n\r\nContentTitle.propsType = {\r\n  style: PropTypes.object\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport { MdUpdate } from 'react-icons/md';\r\nimport { KEYBOARD_BUTTON_CODE } from '../../constants';\r\n\r\nconst STYLE_INPUT = {\r\n  display: 'block',\r\n  width: '100%',\r\n  padding: '0 2px',\r\n  fontSize: '13px',\r\n  lineHeight: '1.25',\r\n  color: SharedStyle.PRIMARY_COLOR.input,\r\n  backgroundColor: SharedStyle.COLORS.white,\r\n  backgroundImage: 'none',\r\n  border: '1px solid rgba(0,0,0,.15)',\r\n  outline: 'none',\r\n  height: '30px',\r\n};\r\n\r\nconst confirmStyle = {\r\n  position: 'absolute',\r\n  cursor: 'pointer',\r\n  width: '2em',\r\n  height: '2em',\r\n  right: '0.35em',\r\n  top: '0.35em',\r\n  backgroundColor: SharedStyle.SECONDARY_COLOR.main,\r\n  color: '#FFF',\r\n  transition: 'all 0.1s linear'\r\n};\r\n\r\nexport default class FormNumberInput extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {\r\n      focus: false,\r\n      valid: true,\r\n      showedValue: props.value\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps( nextProps ) {\r\n    if( this.props.value !== nextProps.value ) {\r\n      this.setState({ showedValue: nextProps.value });\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    let { value, min, max, precision, onChange, onValid, onInvalid, style, placeholder } = this.props;\r\n    let numericInputStyle = { ...STYLE_INPUT, ...style };\r\n\r\n    if (this.state.focus) numericInputStyle.border = `1px solid ${SharedStyle.SECONDARY_COLOR.main}`;\r\n\r\n    let regexp = new RegExp(`^-?([0-9]+)?\\\\.?([0-9]{0,${precision}})?$`);\r\n\r\n    if (!isNaN(min) && isFinite(min) && this.state.showedValue < min) this.setState({ showedValue: min }); // value = min;\r\n    if (!isNaN(max) && isFinite(max) && this.state.showedValue > max) this.setState({ showedValue: max }); // value = max;\r\n\r\n    let currValue = regexp.test(this.state.showedValue) ? this.state.showedValue : parseFloat(this.state.showedValue).toFixed(precision);\r\n\r\n    let different = parseFloat(this.props.value).toFixed(precision) !== parseFloat(this.state.showedValue).toFixed(precision);\r\n\r\n    let saveFn = (e) => {\r\n      e.stopPropagation();\r\n\r\n      if (this.state.valid) {\r\n        let savedValue = (this.state.showedValue !== '' && this.state.showedValue !== '-') ? parseFloat(this.state.showedValue) : 0;\r\n\r\n        this.setState({ showedValue: savedValue });\r\n        onChange({ target: { value: savedValue } });\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div style={{ position: 'relative' }}>\r\n        <input\r\n          type=\"text\"\r\n          value={currValue}\r\n          style={numericInputStyle}\r\n          onChange={(evt) => {\r\n            let valid = regexp.test(evt.nativeEvent.target.value);\r\n\r\n            if (valid) {\r\n              this.setState({ showedValue: evt.nativeEvent.target.value });\r\n              if (onValid) onValid(evt.nativeEvent);\r\n            }\r\n            else {\r\n              if (onInvalid) onInvalid(evt.nativeEvent);\r\n            }\r\n\r\n            this.setState({ valid });\r\n          }}\r\n          onFocus={e => this.setState({ focus: true })}\r\n          onBlur={e => this.setState({ focus: false })}\r\n          onKeyDown={e => {\r\n            var keyCode = e.keyCode || e.which;\r\n            if ((keyCode == KEYBOARD_BUTTON_CODE.ENTER || keyCode == KEYBOARD_BUTTON_CODE.TAB) && different) {\r\n              saveFn(e);\r\n            }\r\n          }}\r\n          placeholder={placeholder}\r\n        />\r\n        <div\r\n          onClick={e => { if (different) saveFn(e); }}\r\n          title={this.context.translator.t('Confirm')}\r\n          style={{ ...confirmStyle, visibility: different ? 'visible' : 'hidden', opacity: different ? '1' : '0' }}\r\n        >\r\n          <MdUpdate style={{ width: '100%', height: '100%', padding: '0.2em', color: '#FFF' }} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFormNumberInput.propTypes = {\r\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  style: PropTypes.object,\r\n  onChange: PropTypes.func.isRequired,\r\n  onValid: PropTypes.func,\r\n  onInvalid: PropTypes.func,\r\n  min: PropTypes.number,\r\n  max: PropTypes.number,\r\n  precision: PropTypes.number,\r\n  placeholder: PropTypes.string\r\n};\r\n\r\nFormNumberInput.contextTypes = {\r\n  translator: PropTypes.object.isRequired\r\n};\r\n\r\nFormNumberInput.defaultProps = {\r\n  value: 0,\r\n  style: {},\r\n  min: Number.MIN_SAFE_INTEGER,\r\n  max: Number.MAX_SAFE_INTEGER,\r\n  precision: 3\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormLabel, FormTextInput } from '../../components/style/export';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\nconst tableStyle = {width: \"100%\", borderSpacing: \"2px 0\", marginBottom: \"2px\"};\r\nconst firstTdStyle = {width: '6em', textTransform:'capitalize'};\r\n\r\nexport default function PropertyString({value, onUpdate, configs, sourceElement, internalState, state}) {\r\n\r\n  let update = (val) => {\r\n\r\n    if (configs.hook) {\r\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\r\n        return onUpdate(_val);\r\n      });\r\n    }\r\n\r\n    return onUpdate(val);\r\n  };\r\n\r\n  return (\r\n    <table className=\"PropertyString\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\r\n        <td>\r\n          <FormTextInput\r\n            value={value}\r\n            onChange={event => update(event.target.value)}/>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nPropertyString.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {UNITS_LENGTH, UNIT_CENTIMETER} from './../../constants';\r\nimport convert from 'convert-units';\r\nimport { FormLabel, FormNumberInput, FormSelect } from '../../components/style/export';\r\nimport {Map} from 'immutable';\r\nimport {toFixedFloat} from '../../utils/math';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\nconst internalTableStyle = {borderCollapse: 'collapse'};\r\nconst secondTdStyle = {padding: 0};\r\nconst unitContainerStyle = {width: '5em'};\r\n\r\nexport default function PropertyLengthMeasure({value, onUpdate, onValid, configs, sourceElement, internalState, state}, {catalog}) {\r\n\r\n  let length = value.get('length') || 0;\r\n  let _length = value.get('_length') || length;\r\n  let _unit = value.get('_unit') || UNIT_CENTIMETER;\r\n  let { hook, label, ...configRest} = configs;\r\n\r\n  let update = (lengthInput, unitInput) => {\r\n\r\n    let newLength = toFixedFloat(lengthInput);\r\n    let merged = value.merge({\r\n      length: unitInput !== UNIT_CENTIMETER ? convert(newLength).from(unitInput).to(UNIT_CENTIMETER) : newLength,\r\n      _length: lengthInput,\r\n      _unit: unitInput\r\n    });\r\n\r\n    if (hook) {\r\n      return hook(merged, sourceElement, internalState, state).then(val => {\r\n        return onUpdate(val);\r\n      });\r\n    }\r\n\r\n    return onUpdate(merged);\r\n  };\r\n\r\n  return (\r\n    <table className=\"PropertyLengthMeasure\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{label}</FormLabel></td>\r\n        <td style={secondTdStyle}>\r\n          <table style={internalTableStyle}>\r\n            <tbody>\r\n            <tr>\r\n              <td>\r\n                <FormNumberInput\r\n                  value={_length}\r\n                  onChange={event => update(event.target.value, _unit)}\r\n                  onValid={onValid}\r\n                  {...configRest}\r\n                />\r\n              </td>\r\n              <td style={unitContainerStyle}>\r\n                <FormSelect value={_unit} onChange={event => update(_length, event.target.value) }>\r\n                  {\r\n                    UNITS_LENGTH.map(el => <option key={el} value={el}>{el}</option>)\r\n                  }\r\n                </FormSelect>\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n\r\n}\r\n\r\nPropertyLengthMeasure.propTypes = {\r\n  value: PropTypes.instanceOf(Map).isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  onValid: PropTypes.func,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n\r\nPropertyLengthMeasure.contextTypes = {\r\n  catalog: PropTypes.object.isRequired\r\n};\r\n","import ReactPlannerAreasReducer from './areas-reducer';\r\nimport ReactPlannerHolesReducer from './holes-reducer';\r\nimport ReactPlannerItemsReducer from './items-reducer';\r\nimport ReactPlannerLinesReducer from './lines-reducer';\r\nimport ReactPlannerGroupsReducer from './groups-reducer';\r\nimport ReactPlannerProjectReducer from './project-reducer';\r\nimport ReactPlannerSceneReducer from './scene-reducer';\r\nimport ReactPlannerVerticesReducer from './vertices-reducer';\r\nimport ReactPlannerViewer2dReducer from './viewer2d-reducer';\r\nimport ReactPlannerViewer3dReducer from './viewer3d-reducer';\r\n\r\nexport {\r\n  ReactPlannerAreasReducer,\r\n  ReactPlannerHolesReducer,\r\n  ReactPlannerItemsReducer,\r\n  ReactPlannerLinesReducer,\r\n  ReactPlannerGroupsReducer,\r\n  ReactPlannerProjectReducer,\r\n  ReactPlannerSceneReducer,\r\n  ReactPlannerVerticesReducer,\r\n  ReactPlannerViewer2dReducer,\r\n  ReactPlannerViewer3dReducer\r\n};\r\n\r\nexport default {\r\n  ReactPlannerAreasReducer,\r\n  ReactPlannerHolesReducer,\r\n  ReactPlannerItemsReducer,\r\n  ReactPlannerLinesReducer,\r\n  ReactPlannerGroupsReducer,\r\n  ReactPlannerProjectReducer,\r\n  ReactPlannerSceneReducer,\r\n  ReactPlannerVerticesReducer,\r\n  ReactPlannerViewer2dReducer,\r\n  ReactPlannerViewer3dReducer\r\n}\r\n","export function objectsMap(object, func){\r\n  let mappedObject = {};\r\n  for (let key in object) {\r\n    mappedObject[key] = func(key, mappedObject[key]);\r\n  }\r\n  return mappedObject;\r\n}\r\n\r\nexport function objectsCompare( x, y ) {\r\n  if ( x === y ) return true;\r\n  if ( ! ( x instanceof Object ) || ! ( y instanceof Object ) ) return false;\r\n  if ( x.constructor !== y.constructor ) return false;\r\n  \r\n  for ( let p in x ) {\r\n    if ( ! x.hasOwnProperty( p ) ) continue;\r\n    if ( ! y.hasOwnProperty( p ) ) return false;\r\n    if ( x[ p ] === y[ p ] ) continue;\r\n    if ( typeof( x[ p ] ) !== 'object' ) return false;\r\n    if ( ! objectsCompare( x[ p ],  y[ p ] ) ) return false;\r\n  }\r\n\r\n  for ( let p in y ) {\r\n    if ( y.hasOwnProperty( p ) && ! x.hasOwnProperty( p ) ) return false;\r\n  }\r\n\r\n  return true;\r\n}","import ToolbarComponents from './toolbar/export';\r\nimport Content from './content';\r\nimport SidebarComponents from './sidebar/export';\r\nimport FooterBarComponents from './footerbar/export';\r\nimport Viewer2DComponents from './viewer2d/export';\r\nimport StyleComponents from './style/export';\r\n\r\nexport {\r\n  ToolbarComponents,\r\n  Content,\r\n  SidebarComponents,\r\n  FooterBarComponents,\r\n  Viewer2DComponents,\r\n  StyleComponents\r\n};\r\n\r\nexport default {\r\n  ToolbarComponents,\r\n  Content,\r\n  SidebarComponents,\r\n  FooterBarComponents,\r\n  Viewer2DComponents,\r\n  StyleComponents\r\n};\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport {\r\n  ReactSVGPanZoom,\r\n  TOOL_NONE,\r\n  TOOL_PAN,\r\n  TOOL_ZOOM_IN,\r\n  TOOL_ZOOM_OUT,\r\n  TOOL_AUTO,\r\n} from \"react-svg-pan-zoom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { Box, Typography, TextField } from \"@material-ui/core\";\r\n\r\nimport * as constants from \"../../constants\";\r\nimport State from \"./state\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\nimport { RulerX, RulerY } from \"./export\";\r\n\r\nfunction mode2Tool(mode) {\r\n  switch (mode) {\r\n    case constants.MODE_2D_PAN:\r\n      return TOOL_PAN;\r\n    case constants.MODE_2D_ZOOM_IN:\r\n      return TOOL_ZOOM_IN;\r\n    case constants.MODE_2D_ZOOM_OUT:\r\n      return TOOL_ZOOM_OUT;\r\n    case constants.MODE_IDLE:\r\n      return TOOL_AUTO;\r\n    default:\r\n      return TOOL_NONE;\r\n  }\r\n}\r\n\r\nfunction mode2PointerEvents(mode) {\r\n  switch (mode) {\r\n    case constants.MODE_DRAWING_LINE:\r\n    case constants.MODE_DRAWING_HOLE:\r\n    case constants.MODE_DRAWING_ITEM:\r\n    case constants.MODE_DRAGGING_HOLE:\r\n    case constants.MODE_DRAGGING_ITEM:\r\n    case constants.MODE_DRAGGING_LINE:\r\n    case constants.MODE_DRAGGING_VERTEX:\r\n      return { pointerEvents: \"none\" };\r\n\r\n    default:\r\n      return {};\r\n  }\r\n}\r\n\r\nfunction mode2Cursor(mode) {\r\n  switch (mode) {\r\n    case constants.MODE_DRAGGING_HOLE:\r\n    case constants.MODE_DRAGGING_LINE:\r\n    case constants.MODE_DRAGGING_VERTEX:\r\n    case constants.MODE_DRAGGING_ITEM:\r\n      return { cursor: \"move\" };\r\n\r\n    case constants.MODE_ROTATING_ITEM:\r\n      return { cursor: \"ew-resize\" };\r\n    case constants.MODE_RESIZE_ITEM_RIGHT_BOTTOM:\r\n      return { cursor: \"nwse-resize\" };\r\n    case constants.MODE_RESIZE_ITEM_RIGHT_TOP:\r\n      return { cursor: \"nesw-resize\" };\r\n    case constants.MODE_RESIZE_ITEM_LEFT_BOTTOM:\r\n      return { cursor: \"nesw-resize\" };\r\n    case constants.MODE_RESIZE_ITEM_LEFT_TOP:\r\n      return { cursor: \"nwse-resize\" };\r\n\r\n    case constants.MODE_WAITING_DRAWING_LINE:\r\n    case constants.MODE_DRAWING_LINE:\r\n      return { cursor: \"crosshair\" };\r\n    default:\r\n      return { cursor: \"default\" };\r\n  }\r\n}\r\n\r\nfunction mode2DetectAutopan(mode) {\r\n  switch (mode) {\r\n    case constants.MODE_DRAWING_LINE:\r\n    case constants.MODE_DRAGGING_LINE:\r\n    case constants.MODE_DRAGGING_VERTEX:\r\n    case constants.MODE_DRAGGING_HOLE:\r\n    case constants.MODE_DRAGGING_ITEM:\r\n    case constants.MODE_DRAWING_HOLE:\r\n    case constants.MODE_DRAWING_ITEM:\r\n      return true;\r\n\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\nfunction extractElementData(node) {\r\n  while (\r\n    !node.attributes.getNamedItem(\"data-element-root\") &&\r\n    node.tagName !== \"svg\"\r\n  ) {\r\n    node = node.parentNode;\r\n  }\r\n  if (node.tagName === \"svg\") return null;\r\n\r\n  try {\r\n    return {\r\n      part: node.attributes.getNamedItem(\"data-part\")\r\n        ? node.attributes.getNamedItem(\"data-part\").value\r\n        : undefined,\r\n      layer: node.attributes.getNamedItem(\"data-layer\").value,\r\n      prototype: node.attributes.getNamedItem(\"data-prototype\").value,\r\n      width: node.attributes.getNamedItem(\"data-width\").value,\r\n      height: node.attributes.getNamedItem(\"data-height\").value,\r\n      scale: node.attributes.getNamedItem(\"data-scale\").value,\r\n      selected: node.attributes.getNamedItem(\"data-selected\").value === \"true\",\r\n      id: node.attributes.getNamedItem(\"data-id\").value,\r\n    };\r\n  } catch (e) {\r\n    return {\r\n      part: node.attributes.getNamedItem(\"data-part\")\r\n        ? node.attributes.getNamedItem(\"data-part\").value\r\n        : undefined,\r\n      layer: node.attributes.getNamedItem(\"data-layer\").value,\r\n      prototype: node.attributes.getNamedItem(\"data-prototype\").value,\r\n      width: 0,\r\n      height: 0,\r\n      scale: 1,\r\n      selected: node.attributes.getNamedItem(\"data-selected\").value === \"true\",\r\n      id: node.attributes.getNamedItem(\"data-id\").value,\r\n    };\r\n  }\r\n}\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  inputText: {\r\n    \"&:hover .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline\": {\r\n      borderColor: \"#5B5F66\",\r\n    },\r\n    \"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline\": {\r\n      borderColor: \"#5B5F66\",\r\n    },\r\n    \"& .MuiOutlinedInput-input\": {\r\n      color: \"#fff\",\r\n      textAlign: \"right\",\r\n      padding: \"5px\",\r\n    },\r\n    \"& .Mui-focused\": {\r\n      borderColor: \"white\",\r\n    },\r\n    \"& .MuiInputLabel-outlined.Mui-focused\": {\r\n      color: \"#fff\",\r\n    },\r\n    \"& .MuiOutlinedInput-root\": {\r\n      backgroundColor: \"transparent\",\r\n      borderRadius: \"7px\",\r\n      padding: \"offset\",\r\n    },\r\n    \"& .MuiInputBase-root\": {\r\n      color: \"white\",\r\n      fontSize: \"12px\",\r\n      lineHeight: \"24px\",\r\n      width: \"64px\",\r\n    },\r\n    \"& .MuiInputBase-input\": {\r\n      textAlign: \"right\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function Viewer2D(\r\n  { state, width, height },\r\n  {\r\n    viewer2DActions,\r\n    linesActions,\r\n    holesActions,\r\n    verticesActions,\r\n    itemsActions,\r\n    areaActions,\r\n    projectActions,\r\n    catalog,\r\n  }\r\n) {\r\n  let { viewer2D, mode, scene } = state;\r\n\r\n  const [load, setLoad] = useState(false);\r\n  const [popup, setPopup] = useState(false);\r\n  const [widthV, setWidth] = useState(0);\r\n  const [heightV, setHeight] = useState(0);\r\n  const [elementData, setElementData] = useState({ layer: \"\", id: \"\" });\r\n  const [cordinate, setCordinate] = useState({ x: 0, y: 0 });\r\n\r\n  const Viewer = useRef(null);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    let viewerData = state.get(\"viewer2D\").toJS();\r\n    if (viewerData.SVGWidth != undefined && load == false) {\r\n      const val = {\r\n        a: viewerData.a,\r\n        b: viewerData.b,\r\n        SVGWidth: viewerData.SVGWidth,\r\n        c: viewerData.c,\r\n        mode: \"idle\",\r\n        d: viewerData.d,\r\n        e: -viewerData.SVGWidth / 2,\r\n        f: -viewerData.SVGHeight / 2,\r\n        miniatureOpen: true,\r\n        SVGHeight: viewerData.SVGHeight,\r\n        pinchPointDistance: null,\r\n        lastAction: null,\r\n        viewerWidth: viewerData.viewerWidth,\r\n        startX: null,\r\n        startY: null,\r\n        version: 2,\r\n        focus: false,\r\n        viewerHeight: viewerData.viewerHeight,\r\n        prePinchMode: null,\r\n        endX: null,\r\n        endY: null,\r\n      };\r\n      viewer2DActions.updateCameraView(val);\r\n      setLoad(true);\r\n    }\r\n  }, [state]);\r\n\r\n  let layerID = scene.selectedLayer;\r\n\r\n  let mapCursorPosition = ({ x, y }) => {\r\n    return { x, y: -y + scene.height };\r\n  };\r\n\r\n  let onMouseMove = (viewerEvent) => {\r\n    //workaround that allow imageful component to work\r\n    let evt = new Event(\"mousemove-planner-event\");\r\n    evt.viewerEvent = viewerEvent;\r\n    document.dispatchEvent(evt);\r\n\r\n    let { x, y } = mapCursorPosition(viewerEvent);\r\n\r\n    projectActions.updateMouseCoord({ x, y });\r\n\r\n    switch (mode) {\r\n      case constants.MODE_DRAWING_LINE:\r\n        linesActions.updateDrawingLine(x, y, state.snapMask);\r\n        break;\r\n\r\n      case constants.MODE_DRAWING_HOLE:\r\n        holesActions.updateDrawingHole(layerID, x, y);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_HOLE:\r\n        holesActions.updateDraggingHole(x, y);\r\n        break;\r\n\r\n      case constants.MODE_DRAWING_ITEM:\r\n        itemsActions.updateDrawingItem(layerID, x, y);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_LINE:\r\n        linesActions.updateDraggingLine(x, y, state.snapMask);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_VERTEX:\r\n        verticesActions.updateDraggingVertex(x, y, state.snapMask);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_ITEM:\r\n        itemsActions.updateDraggingItem(x, y);\r\n        break;\r\n\r\n      case constants.MODE_ROTATING_ITEM:\r\n        itemsActions.updateRotatingItem(x, y);\r\n        break;\r\n\r\n      case constants.MODE_RESIZE_ITEM_RIGHT_BOTTOM:\r\n        itemsActions.updateResizingItemRB(x, y);\r\n        break;\r\n      case constants.MODE_RESIZE_ITEM_RIGHT_TOP:\r\n        itemsActions.updateResizingItemRT(x, y);\r\n        break;\r\n\r\n      case constants.MODE_RESIZE_ITEM_LEFT_BOTTOM:\r\n        itemsActions.updateResizingItemLB(x, y);\r\n        break;\r\n\r\n      case constants.MODE_RESIZE_ITEM_LEFT_TOP:\r\n        itemsActions.updateResizingItemLT(x, y);\r\n        break;\r\n    }\r\n\r\n    viewerEvent.originalEvent.stopPropagation();\r\n  };\r\n\r\n  let onMouseDown = (viewerEvent) => {\r\n    let event = viewerEvent.originalEvent;\r\n\r\n    //workaround that allow imageful component to work\r\n    let evt = new Event(\"mousedown-planner-event\");\r\n    evt.viewerEvent = viewerEvent;\r\n    document.dispatchEvent(evt);\r\n\r\n    let { x, y } = mapCursorPosition(viewerEvent);\r\n\r\n    if (mode === constants.MODE_IDLE) {\r\n      let elementData = extractElementData(event.target);\r\n      if (!elementData || !elementData.selected) {\r\n        setPopup(false);\r\n        return;\r\n      }\r\n\r\n      switch (elementData.prototype) {\r\n        case \"lines\":\r\n          linesActions.beginDraggingLine(\r\n            elementData.layer,\r\n            elementData.id,\r\n            x,\r\n            y,\r\n            state.snapMask\r\n          );\r\n          break;\r\n\r\n        case \"vertices\":\r\n          verticesActions.beginDraggingVertex(\r\n            elementData.layer,\r\n            elementData.id,\r\n            x,\r\n            y,\r\n            state.snapMask\r\n          );\r\n          break;\r\n\r\n        case \"items\":\r\n          if (elementData.part === \"rotation-anchor\") {\r\n            itemsActions.beginRotatingItem(\r\n              elementData.layer,\r\n              elementData.id,\r\n              x,\r\n              y\r\n            );\r\n          } else if (elementData.part === \"resize-points-rb\") {\r\n            itemsActions.beginResizingItemRB(\r\n              elementData.layer,\r\n              elementData.id,\r\n              x,\r\n              y\r\n            );\r\n          } else if (elementData.part === \"resize-points-rt\") {\r\n            itemsActions.beginResizingItemRT(\r\n              elementData.layer,\r\n              elementData.id,\r\n              x,\r\n              y\r\n            );\r\n          } else if (elementData.part === \"resize-points-lb\") {\r\n            itemsActions.beginResizingItemLB(\r\n              elementData.layer,\r\n              elementData.id,\r\n              x,\r\n              y\r\n            );\r\n          } else if (elementData.part === \"resize-points-lt\") {\r\n            itemsActions.beginResizingItemLT(\r\n              elementData.layer,\r\n              elementData.id,\r\n              x,\r\n              y\r\n            );\r\n          } else if (elementData.part === \"outline-item\") {\r\n            setElementData({ layer: elementData.layer, id: elementData.id });\r\n            setPopup(true);\r\n\r\n            var e = window.event;\r\n\r\n            var posX = e.clientX;\r\n            var posY = e.clientY;\r\n\r\n            setCordinate({ x: posX - 20, y: posY - 80 });\r\n            setWidth(\r\n              parseFloat(elementData.width) * parseFloat(elementData.scale)\r\n            );\r\n            setHeight(\r\n              parseFloat(elementData.height) * parseFloat(elementData.scale)\r\n            );\r\n          } else\r\n            itemsActions.beginDraggingItem(\r\n              elementData.layer,\r\n              elementData.id,\r\n              x,\r\n              y\r\n            );\r\n          break;\r\n\r\n        case \"holes\":\r\n          holesActions.beginDraggingHole(\r\n            elementData.layer,\r\n            elementData.id,\r\n            x,\r\n            y\r\n          );\r\n          break;\r\n\r\n        default:\r\n          setPopup(false);\r\n          break;\r\n      }\r\n    }\r\n    event.stopPropagation();\r\n  };\r\n\r\n  let onMouseUp = (viewerEvent) => {\r\n    let event = viewerEvent.originalEvent;\r\n\r\n    let evt = new Event(\"mouseup-planner-event\");\r\n    evt.viewerEvent = viewerEvent;\r\n    document.dispatchEvent(evt);\r\n\r\n    let { x, y } = mapCursorPosition(viewerEvent);\r\n\r\n    switch (mode) {\r\n      case constants.MODE_IDLE:\r\n        let elementData = extractElementData(event.target);\r\n\r\n        if (elementData && elementData.selected) return;\r\n\r\n        switch (elementData ? elementData.prototype : \"none\") {\r\n          case \"areas\":\r\n            areaActions.selectArea(elementData.layer, elementData.id);\r\n            break;\r\n\r\n          case \"lines\":\r\n            linesActions.selectLine(elementData.layer, elementData.id);\r\n            break;\r\n\r\n          case \"holes\":\r\n            holesActions.selectHole(elementData.layer, elementData.id);\r\n            break;\r\n\r\n          case \"items\":\r\n            itemsActions.selectItem(elementData.layer, elementData.id);\r\n            break;\r\n\r\n          case \"none\":\r\n            projectActions.unselectAll();\r\n            break;\r\n        }\r\n        break;\r\n\r\n      case constants.MODE_WAITING_DRAWING_LINE:\r\n        linesActions.beginDrawingLine(layerID, x, y, state.snapMask);\r\n        break;\r\n\r\n      case constants.MODE_DRAWING_LINE:\r\n        linesActions.endDrawingLine(x, y, state.snapMask);\r\n        linesActions.beginDrawingLine(layerID, x, y, state.snapMask);\r\n        break;\r\n\r\n      case constants.MODE_DRAWING_HOLE:\r\n        holesActions.endDrawingHole(layerID, x, y);\r\n        break;\r\n\r\n      case constants.MODE_DRAWING_ITEM:\r\n        itemsActions.endDrawingItem(layerID, x, y);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_LINE:\r\n        linesActions.endDraggingLine(x, y, state.snapMask);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_VERTEX:\r\n        verticesActions.endDraggingVertex(x, y, state.snapMask);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_ITEM:\r\n        itemsActions.endDraggingItem(x, y);\r\n        break;\r\n\r\n      case constants.MODE_DRAGGING_HOLE:\r\n        holesActions.endDraggingHole(x, y);\r\n        break;\r\n\r\n      case constants.MODE_ROTATING_ITEM:\r\n        itemsActions.endRotatingItem(x, y);\r\n        break;\r\n\r\n      case constants.MODE_RESIZE_ITEM_RIGHT_BOTTOM:\r\n        itemsActions.endResizingItemRB(x, y);\r\n        break;\r\n      case constants.MODE_RESIZE_ITEM_RIGHT_TOP:\r\n        itemsActions.endResizingItemRT(x, y);\r\n        break;\r\n      case constants.MODE_RESIZE_ITEM_LEFT_BOTTOM:\r\n        itemsActions.endResizingItemLB(x, y);\r\n        break;\r\n      case constants.MODE_RESIZE_ITEM_LEFT_TOP:\r\n        itemsActions.endResizingItemLT(x, y);\r\n        break;\r\n    }\r\n\r\n    event.stopPropagation();\r\n  };\r\n\r\n  let onChangeValue = (value) => {\r\n    // if (value.e < 0 && value.f < 0 && value.e > -8500 && value.f > -8500) {\r\n    // }\r\n    projectActions.updateZoomScale(value.a);\r\n    return viewer2DActions.updateCameraView(value);\r\n  };\r\n\r\n  let onChangeTool = (tool) => {\r\n    switch (tool) {\r\n      case TOOL_NONE:\r\n        projectActions.selectToolEdit();\r\n        break;\r\n\r\n      case TOOL_PAN:\r\n        viewer2DActions.selectToolPan();\r\n        break;\r\n\r\n      case TOOL_ZOOM_IN:\r\n        viewer2DActions.selectToolZoomIn();\r\n        break;\r\n\r\n      case TOOL_ZOOM_OUT:\r\n        viewer2DActions.selectToolZoomOut();\r\n        break;\r\n    }\r\n  };\r\n\r\n  let { e, f, SVGWidth, SVGHeight } = state.get(\"viewer2D\").toJS();\r\n\r\n  let rulerSize = 0; //px\r\n  let rulerUnitPixelSize = 100;\r\n  let rulerBgColor = \"#000\";\r\n  let rulerFnColor = SharedStyle.COLORS.white;\r\n  let rulerMkColor = SharedStyle.SECONDARY_COLOR.main;\r\n  let sceneWidth = SVGWidth || state.getIn([\"scene\", \"width\"]);\r\n  let sceneHeight = SVGHeight || state.getIn([\"scene\", \"height\"]);\r\n  let sceneZoom = state.zoom || 1;\r\n  let rulerXElements = Math.ceil(sceneWidth / rulerUnitPixelSize) + 1;\r\n  let rulerYElements = Math.ceil(sceneHeight / rulerUnitPixelSize) + 1;\r\n\r\n  // const handleDocumentMouseUp = (event) => {\r\n  //   console.log('popup', popup)\r\n  //   setCordinate({x: event.clientX, y: event.clientY});\r\n  // };\r\n\r\n  // useEffect(() => {\r\n  //   document.addEventListener(\"mouseup\", handleDocumentMouseUp);\r\n  //   return () => {\r\n  //     document.removeEventListener('mouseup', handleDocumentMouseUp);\r\n  //   };\r\n\r\n  // }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        margin: 0,\r\n        padding: 0,\r\n        display: \"grid\",\r\n        gridRowGap: \"0\",\r\n        gridColumnGap: \"0\",\r\n        gridTemplateColumns: `${rulerSize}px ${width - rulerSize}px`,\r\n        gridTemplateRows: `${rulerSize}px ${height - rulerSize}px`,\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <div\r\n        style={{ gridColumn: 1, gridRow: 1, backgroundColor: rulerBgColor }}\r\n      ></div>\r\n      <div\r\n        style={{\r\n          gridRow: 1,\r\n          gridColumn: 2,\r\n          position: \"relative\",\r\n          overflow: \"hidden\",\r\n        }}\r\n        id=\"rulerX\"\r\n      >\r\n        {sceneWidth ? (\r\n          <RulerX\r\n            unitPixelSize={rulerUnitPixelSize}\r\n            zoom={sceneZoom}\r\n            mouseX={state.mouse.get(\"x\")}\r\n            width={width - rulerSize}\r\n            zeroLeftPosition={e || 0}\r\n            backgroundColor={rulerBgColor}\r\n            fontColor={rulerFnColor}\r\n            markerColor={rulerMkColor}\r\n            positiveUnitsNumber={rulerXElements}\r\n            negativeUnitsNumber={0}\r\n          />\r\n        ) : null}\r\n      </div>\r\n      <div\r\n        style={{\r\n          gridColumn: 1,\r\n          gridRow: 2,\r\n          position: \"relative\",\r\n          overflow: \"hidden\",\r\n        }}\r\n        id=\"rulerY\"\r\n      >\r\n        {sceneHeight ? (\r\n          <RulerY\r\n            unitPixelSize={rulerUnitPixelSize}\r\n            zoom={sceneZoom}\r\n            mouseY={state.mouse.get(\"y\")}\r\n            height={height - rulerSize}\r\n            zeroTopPosition={sceneHeight * sceneZoom + f || 0}\r\n            backgroundColor={rulerBgColor}\r\n            fontColor={rulerFnColor}\r\n            markerColor={rulerMkColor}\r\n            positiveUnitsNumber={rulerYElements}\r\n            negativeUnitsNumber={0}\r\n          />\r\n        ) : null}\r\n      </div>\r\n      <ReactSVGPanZoom\r\n        style={{ gridColumn: 0, gridRow: 0 }}\r\n        width={width - rulerSize}\r\n        height={height - rulerSize}\r\n        value={viewer2D.isEmpty() ? null : viewer2D.toJS()}\r\n        onChangeValue={onChangeValue}\r\n        tool={mode2Tool(mode)}\r\n        onChangeTool={onChangeTool}\r\n        detectAutoPan={mode2DetectAutopan(mode)}\r\n        onMouseDown={onMouseDown}\r\n        onMouseMove={onMouseMove}\r\n        onMouseUp={onMouseUp}\r\n        miniaturePosition=\"none\"\r\n        toolbarPosition=\"none\"\r\n        // detectWheel={false}\r\n        ref={Viewer}\r\n        disableDoubleClickZoomWithToolAuto={false}\r\n      >\r\n        <svg width={scene.width} height={scene.height} fill=\"red\">\r\n          <g style={Object.assign(mode2Cursor(mode), mode2PointerEvents(mode))}>\r\n            <State state={state} catalog={catalog} />\r\n          </g>\r\n        </svg>\r\n      </ReactSVGPanZoom>\r\n      <Box\r\n        style={{\r\n          flexGrow: 1,\r\n          position: \"absolute\",\r\n          width: \"195px\",\r\n          height: \"154px\",\r\n          left: cordinate.x,\r\n          top: cordinate.y,\r\n          background: \"#020916\",\r\n          borderRadius: \"4px\",\r\n          zIndex: 2,\r\n          padding: \"16.04px 14.23px\",\r\n          display: popup ? \"block\" : \"none\",\r\n        }}\r\n      >\r\n        <img\r\n          src=\"/assets/arrow.png\"\r\n          style={{\r\n            position: \"absolute\",\r\n            left: \"-6px\",\r\n            top: \"21px\",\r\n            zIndex: \"33\",\r\n          }}\r\n        />\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"flex-start\"\r\n            alignItems=\"center\"\r\n            style={{ gap: \"5px\" }}\r\n          >\r\n            <Typography\r\n              style={{\r\n                fontFamily: \"DM Sans\",\r\n                fontStyle: \"normal\",\r\n                fontWeight: 400,\r\n                fontSize: \"12px\",\r\n                lineHeight: \"16px\",\r\n                color: \"#FFFFFF\",\r\n              }}\r\n            >\r\n              Width\r\n            </Typography>\r\n            <Typography\r\n              style={{\r\n                fontFamily: \"DM Sans\",\r\n                fontStyle: \"normal\",\r\n                fontWeight: 400,\r\n                fontSize: \"12px\",\r\n                lineHeight: \"16px\",\r\n                color: \"#3D424A\",\r\n              }}\r\n            >\r\n              mm\r\n            </Typography>\r\n          </Box>\r\n          <TextField\r\n            className={classes.inputText}\r\n            type=\"text\"\r\n            placeholder=\"\"\r\n            label=\"\"\r\n            sx={{ mb: 1 }}\r\n            value={widthV}\r\n            variant=\"outlined\"\r\n            onChange={(e) => {\r\n              if(e.target.value != '') {\r\n                const deltaX = parseFloat(e.target.value) / 2 + 5;\r\n                itemsActions.resizingItem(\r\n                  elementData.layer,\r\n                  elementData.id,\r\n                  deltaX.toFixed(4)\r\n                );\r\n                setWidth(e.target.value);\r\n                setHeight(heightV * parseFloat(e.target.value) / widthV)\r\n              }\r\n            }}\r\n          />\r\n        </Box>\r\n\r\n        <Box\r\n          display=\"flex\"\r\n          justifyContent=\"space-between\"\r\n          alignItems=\"center\"\r\n          marginTop=\"7px\"\r\n        >\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"flex-start\"\r\n            alignItems=\"center\"\r\n            style={{ gap: \"5px\" }}\r\n          >\r\n            <Typography\r\n              style={{\r\n                fontFamily: \"DM Sans\",\r\n                fontStyle: \"normal\",\r\n                fontWeight: 400,\r\n                fontSize: \"12px\",\r\n                lineHeight: \"16px\",\r\n                color: \"#FFFFFF\",\r\n              }}\r\n            >\r\n              Height\r\n            </Typography>\r\n            <Typography\r\n              style={{\r\n                fontFamily: \"DM Sans\",\r\n                fontStyle: \"normal\",\r\n                fontWeight: 400,\r\n                fontSize: \"12px\",\r\n                lineHeight: \"16px\",\r\n                color: \"#3D424A\",\r\n              }}\r\n            >\r\n              mm\r\n            </Typography>\r\n          </Box>\r\n          <TextField\r\n            className={classes.inputText}\r\n            type=\"text\"\r\n            placeholder=\"\"\r\n            label=\"\"\r\n            value={heightV}\r\n            sx={{ mb: 1 }}\r\n            variant=\"outlined\"\r\n            onChange={(e) => {\r\n              if(e.target.value != '') {\r\n                const deltaX =\r\n                  (widthV * parseFloat(e.target.value)) / heightV / 2 + 5;\r\n                itemsActions.resizingItem(\r\n                  elementData.layer,\r\n                  elementData.id,\r\n                  deltaX.toFixed(4)\r\n                );\r\n                setHeight(e.target.value);\r\n                setWidth(widthV * parseFloat(e.target.value) / heightV);\r\n              }\r\n            }}\r\n          />\r\n        </Box>\r\n\r\n        <hr\r\n          style={{\r\n            borderColor: \"#252A32\",\r\n            marginLeft: \"-12px\",\r\n            marginRight: \"-12px\",\r\n          }}\r\n        />\r\n\r\n        <Box\r\n          display=\"flex\"\r\n          justifyContent=\"space-between\"\r\n          alignItems=\"center\"\r\n          marginTop=\"15px\"\r\n        >\r\n          <Typography\r\n            style={{\r\n              fontFamily: \"DM Sans\",\r\n              fontStyle: \"normal\",\r\n              fontWeight: 400,\r\n              fontSize: \"12px\",\r\n              lineHeight: \"16px\",\r\n              color: \"#FFFFFF\",\r\n            }}\r\n          >\r\n            Flip horizontaly\r\n          </Typography>\r\n          <Typography\r\n            style={{\r\n              fontFamily: \"DM Sans\",\r\n              fontStyle: \"normal\",\r\n              fontWeight: 400,\r\n              fontSize: \"12px\",\r\n              lineHeight: \"16px\",\r\n              color: \"#FFFFFF\",\r\n              cursor: \"pointer\",\r\n            }}\r\n            onClick={() => {\r\n              itemsActions.updateHorizontalItem(\r\n                elementData.layer,\r\n                elementData.id\r\n              );\r\n            }}\r\n          >\r\n            H\r\n          </Typography>\r\n        </Box>\r\n\r\n        <Box\r\n          display=\"flex\"\r\n          justifyContent=\"space-between\"\r\n          alignItems=\"center\"\r\n          marginTop=\"15px\"\r\n        >\r\n          <Typography\r\n            style={{\r\n              fontFamily: \"DM Sans\",\r\n              fontStyle: \"normal\",\r\n              fontWeight: 400,\r\n              fontSize: \"12px\",\r\n              lineHeight: \"16px\",\r\n              color: \"#FFFFFF\",\r\n            }}\r\n          >\r\n            Flip verticaly\r\n          </Typography>\r\n          <Typography\r\n            style={{\r\n              fontFamily: \"DM Sans\",\r\n              fontStyle: \"normal\",\r\n              fontWeight: 400,\r\n              fontSize: \"12px\",\r\n              lineHeight: \"16px\",\r\n              color: \"#FFFFFF\",\r\n              cursor: \"pointer\"\r\n            }}\r\n            onClick={() => {\r\n              itemsActions.updateVerticalItem(\r\n                elementData.layer,\r\n                elementData.id\r\n              );\r\n            }}\r\n          >\r\n            V\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nViewer2D.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n};\r\n\r\nViewer2D.contextTypes = {\r\n  viewer2DActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  verticesActions: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  areaActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Scene from \"./scene\";\r\nimport Snap from \"./snap\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\n\r\nconst guideStyle = {\r\n  stroke: SharedStyle.SECONDARY_COLOR.main,\r\n  strokewidth: \"2.5px\",\r\n};\r\n\r\nexport default function State({ state, catalog }) {\r\n  let { activeSnapElement, snapElements, scene } = state;\r\n  let { width, height } = scene;\r\n\r\n  activeSnapElement = activeSnapElement ? (\r\n    <Snap snap={activeSnapElement} width={scene.width} height={scene.height} />\r\n  ) : null;\r\n  // snapElements = snapElements.map((snap,id) => <Snap key={id} snap={snap} width={scene.width} height={scene.height}/>);\r\n  snapElements = null; //only for debug purpose\r\n\r\n  return (\r\n    <g>\r\n      <rect\r\n        x=\"0\"\r\n        y=\"0\"\r\n        width={width}\r\n        height={height}\r\n        fill={SharedStyle.COLORS.grey}\r\n      />\r\n      <g\r\n        transform={`translate(0, ${scene.height}) scale(1, -1)`}\r\n        id=\"svg-drawing-paper\"\r\n      >\r\n        <Scene scene={scene} catalog={catalog} />\r\n        {/* {scene\r\n          .getIn([\"guides\", \"horizontal\"])\r\n          .entrySeq()\r\n          .map(([hgKey, hgVal]) => (\r\n            <line\r\n              id={\"hGuide\" + hgKey}\r\n              key={hgKey}\r\n              x1={0}\r\n              y1={hgVal}\r\n              x2={width}\r\n              y2={hgVal}\r\n              style={guideStyle}\r\n            />\r\n          ))}\r\n        {scene\r\n          .getIn([\"guides\", \"vertical\"])\r\n          .entrySeq()\r\n          .map(([vgKey, vgVal]) => (\r\n            <line\r\n              key={vgKey}\r\n              x1={vgVal}\r\n              y1={0}\r\n              x2={vgVal}\r\n              y2={height}\r\n              style={guideStyle}\r\n            />\r\n          ))} */}\r\n        {activeSnapElement}\r\n        {snapElements}\r\n      </g>\r\n    </g>\r\n  );\r\n}\r\n\r\nState.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Layer, Grids } from './export';\r\n\r\nexport default class Scene extends Component {\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return this.props.scene.hashCode() !== nextProps.scene.hashCode();\r\n  }\r\n\r\n  render() {\r\n    let {scene, catalog} = this.props;\r\n    let {height, layers} = scene;\r\n    let selectedLayer = layers.get(scene.selectedLayer);\r\n\r\n    return (\r\n      <g>\r\n        <Grids scene={scene}/>\r\n\r\n        <g style={{pointerEvents: 'none'}}>\r\n          {\r\n            layers\r\n            .entrySeq()\r\n            .filter(([layerID, layer]) => layerID !== scene.selectedLayer && layer.visible)\r\n            .map(([layerID, layer]) => <Layer key={layerID} layer={layer} scene={scene} catalog={catalog}/>)\r\n          }\r\n        </g>\r\n\r\n        <Layer key={selectedLayer.id} layer={selectedLayer} scene={scene} catalog={catalog}/>\r\n      </g>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nScene.propTypes = {\r\n  scene: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as Geometry from '../../utils/geometry';\r\n\r\nconst STYLE = {\r\n  stroke: '#D32F2F',\r\n  strokeWidth: \"1px\"\r\n};\r\n\r\nexport default function ActiveDrawingHelper({snap, width, height}) {\r\n  switch (snap.type) {\r\n    case 'point':\r\n      return (\r\n        <g transform={`translate(${snap.x} ${snap.y})`}>\r\n          <line x1=\"0\" y1=\"-70\" x2=\"0\" y2=\"70\" style={STYLE}/>\r\n          <line x1=\"-70\" y1=\"0\" x2=\"70\" y2=\"0\" style={STYLE}/>\r\n        </g>);\r\n\r\n    case 'line':\r\n      let h0 = Geometry.horizontalLine(0);\r\n      let h1 = Geometry.horizontalLine(height);\r\n      let pointH0 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, h0.a, h0.b, h0.c);\r\n      let pointH1 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, h1.a, h1.b, h1.c);\r\n\r\n      let v0 = Geometry.verticalLine(0);\r\n      let v1 = Geometry.verticalLine(width);\r\n      let pointV0 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, v0.a, v0.b, v0.c);\r\n      let pointV1 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, v1.a, v1.b, v1.c);\r\n\r\n      if (pointH0 && pointH1)\r\n        return <line x1={pointH0.x} y1={pointH0.y} x2={pointH1.x} y2={pointH1.y} style={STYLE}/>;\r\n      if (pointV0 && pointV1)\r\n        return <line x1={pointV0.x} y1={pointV0.y} x2={pointV1.x} y2={pointV1.y} style={STYLE}/>;\r\n      return null;\r\n\r\n    case'line-segment':\r\n      return <line x1={snap.x1} y1={snap.y1} x2={snap.x2} y2={snap.y2} style={STYLE}/>;\r\n\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nActiveDrawingHelper.propTypes = {\r\n  snap: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired\r\n};\r\n","import * as Three from \"three\";\r\nimport createGrid from \"./grid-creator\";\r\nimport { disposeObject } from \"./three-memory-cleaner\";\r\n\r\nexport function parseData(sceneData, actions, catalog) {\r\n  console.log(\"viewer3D parseData\", sceneData, actions, catalog);\r\n  let planData = {};\r\n\r\n  planData.sceneGraph = {\r\n    unit: sceneData.unit,\r\n    layers: {},\r\n    busyResources: { layers: {} },\r\n    width: sceneData.width,\r\n    height: sceneData.height,\r\n    LODs: {},\r\n  };\r\n\r\n  planData.plan = new Three.Object3D();\r\n  planData.plan.name = \"plan\";\r\n\r\n  // Add a grid to the plan\r\n  planData.grid = createGrid(sceneData);\r\n  planData.grid.name = \"grid\";\r\n\r\n  planData.boundingBox = new Three.Box3().setFromObject(planData.grid);\r\n  planData.boundingBox.name = \"boundingBox\";\r\n\r\n  let promises = [];\r\n\r\n  sceneData.layers.forEach((layer) => {\r\n    if (layer.id === sceneData.selectedLayer || layer.visible) {\r\n      promises = promises.concat(\r\n        createLayerObjects(layer, planData, sceneData, actions, catalog)\r\n      );\r\n    }\r\n  });\r\n\r\n  Promise.all(promises).then((value) => updateBoundingBox(planData));\r\n\r\n  return planData;\r\n}\r\n\r\nfunction createLayerObjects(layer, planData, sceneData, actions, catalog) {\r\n  let promises = [];\r\n\r\n  planData.sceneGraph.layers[layer.id] = {\r\n    id: layer.id,\r\n    lines: {},\r\n    holes: {},\r\n    areas: {},\r\n    items: {},\r\n    visible: layer.visible,\r\n    altitude: layer.altitude,\r\n  };\r\n\r\n  planData.sceneGraph.busyResources.layers[layer.id] = {\r\n    id: layer.id,\r\n    lines: {},\r\n    holes: {},\r\n    areas: {},\r\n    items: {},\r\n  };\r\n\r\n  // Import lines\r\n  layer.lines.forEach((line) => {\r\n    promises.push(\r\n      addLine(\r\n        sceneData,\r\n        planData,\r\n        layer,\r\n        line.id,\r\n        catalog,\r\n        actions.linesActions\r\n      )\r\n    );\r\n    line.holes.forEach((holeID) => {\r\n      promises.push(\r\n        addHole(\r\n          sceneData,\r\n          planData,\r\n          layer,\r\n          holeID,\r\n          catalog,\r\n          actions.holesActions\r\n        )\r\n      );\r\n    });\r\n  });\r\n\r\n  // Import areas\r\n  layer.areas.forEach((area) => {\r\n    promises.push(\r\n      addArea(sceneData, planData, layer, area.id, catalog, actions.areaActions)\r\n    );\r\n  });\r\n\r\n  // Import items\r\n  layer.items.forEach((item) => {\r\n    promises.push(\r\n      addItem(\r\n        sceneData,\r\n        planData,\r\n        layer,\r\n        item.id,\r\n        catalog,\r\n        actions.itemsActions\r\n      )\r\n    );\r\n  });\r\n\r\n  return promises;\r\n}\r\n\r\nexport function updateScene(\r\n  planData,\r\n  sceneData,\r\n  oldSceneData,\r\n  diffArray,\r\n  actions,\r\n  catalog\r\n) {\r\n  let splitted = diffArray.map((el) => {\r\n    return { op: el.op, path: el.path.split(\"/\"), value: el.value };\r\n  });\r\n  let filteredDiffs = filterDiffs(splitted, sceneData, oldSceneData);\r\n\r\n  //***testing additional filter***\r\n  filteredDiffs = filteredDiffs.filter(({ path }) => path[3] !== \"selected\");\r\n  filteredDiffs = filteredDiffs.filter(({ path }) => path[1] !== \"groups\");\r\n  //*******************************\r\n\r\n  filteredDiffs.forEach(({ op, path, value }) => {\r\n    /* First of all I need to find the object I need to update */\r\n    if (path[1] === \"layers\") {\r\n      let layer = sceneData.getIn([\"layers\", path[2]]);\r\n\r\n      if (path.length === 3 && op === \"remove\") {\r\n        removeLayer(path[2], planData);\r\n      } else if (path.length > 3) {\r\n        switch (op) {\r\n          case \"replace\":\r\n            replaceObject(\r\n              path,\r\n              layer,\r\n              planData,\r\n              actions,\r\n              sceneData,\r\n              oldSceneData,\r\n              catalog\r\n            );\r\n            break;\r\n          case \"add\":\r\n            addObject(\r\n              path,\r\n              layer,\r\n              planData,\r\n              actions,\r\n              sceneData,\r\n              oldSceneData,\r\n              catalog\r\n            );\r\n            break;\r\n          case \"remove\":\r\n            removeObject(\r\n              path,\r\n              layer,\r\n              planData,\r\n              actions,\r\n              sceneData,\r\n              oldSceneData,\r\n              catalog\r\n            );\r\n            break;\r\n        }\r\n      }\r\n    } else if (path[1] === \"selectedLayer\") {\r\n      let layerSelectedID = value;\r\n      let layerSelected = sceneData.getIn([\"layers\", layerSelectedID]);\r\n      // First of all I check if the new selected layer is not visible\r\n      if (!layerSelected.visible) {\r\n        // I need to create the objects for this layer\r\n        let promises = createLayerObjects(\r\n          layerSelected,\r\n          planData,\r\n          sceneData,\r\n          actions,\r\n          catalog\r\n        );\r\n        Promise.all(promises).then(() => updateBoundingBox(planData));\r\n      }\r\n\r\n      let layerGraph = planData.sceneGraph.layers[oldSceneData.selectedLayer];\r\n\r\n      if (layerGraph) {\r\n        if (!layerGraph.visible) {\r\n          // I need to remove the objects for this layer\r\n          for (let lineID in layerGraph.lines)\r\n            removeLine(planData, layerGraph.id, lineID);\r\n          for (let areaID in layerGraph.areas)\r\n            removeArea(planData, layerGraph.id, areaID);\r\n          for (let itemID in layerGraph.items)\r\n            removeItem(planData, layerGraph.id, itemID);\r\n          for (let holeID in layerGraph.holes)\r\n            removeHole(planData, layerGraph.id, holeID);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  return planData;\r\n}\r\n\r\nfunction replaceObject(\r\n  modifiedPath,\r\n  layer,\r\n  planData,\r\n  actions,\r\n  sceneData,\r\n  oldSceneData,\r\n  catalog\r\n) {\r\n  let promises = [];\r\n\r\n  switch (modifiedPath[3]) {\r\n    case \"vertices\":\r\n      if (modifiedPath[5] !== \"selected\") {\r\n        let vertex = layer.getIn([\"vertices\", modifiedPath[4]]);\r\n\r\n        if (modifiedPath[5] === \"x\" || modifiedPath[5] === \"y\") {\r\n          vertex.lines.forEach((lineID) => {\r\n            let lineHoles = oldSceneData.getIn([\r\n              \"layers\",\r\n              layer.id,\r\n              \"lines\",\r\n              lineID,\r\n              \"holes\",\r\n            ]);\r\n            if (lineHoles)\r\n              lineHoles.forEach((holeID) => {\r\n                replaceObject(\r\n                  [0, 0, 0, \"holes\", holeID, \"selected\"],\r\n                  layer,\r\n                  planData,\r\n                  actions,\r\n                  sceneData,\r\n                  oldSceneData,\r\n                  catalog\r\n                );\r\n              });\r\n            return replaceObject(\r\n              [0, 0, 0, \"lines\", lineID],\r\n              layer,\r\n              planData,\r\n              actions,\r\n              sceneData,\r\n              oldSceneData,\r\n              catalog\r\n            );\r\n          });\r\n          vertex.areas.forEach((areaID) =>\r\n            replaceObject(\r\n              [0, 0, 0, \"areas\", areaID],\r\n              layer,\r\n              planData,\r\n              actions,\r\n              sceneData,\r\n              oldSceneData,\r\n              catalog\r\n            )\r\n          );\r\n        }\r\n\r\n        if (modifiedPath[5] === \"areas\") {\r\n          let areaID = vertex.getIn([\"areas\", ~~modifiedPath[6]]);\r\n          replaceObject(\r\n            [0, 0, 0, \"areas\", areaID],\r\n            layer,\r\n            planData,\r\n            actions,\r\n            sceneData,\r\n            oldSceneData,\r\n            catalog\r\n          );\r\n        }\r\n      }\r\n      break;\r\n    case \"holes\":\r\n      let newHoleData = layer.getIn([\"holes\", modifiedPath[4]]);\r\n\r\n      if (catalog.getElement(newHoleData.type).updateRender3D) {\r\n        promises.push(\r\n          updateHole(\r\n            sceneData,\r\n            oldSceneData,\r\n            planData,\r\n            layer,\r\n            modifiedPath[4],\r\n            modifiedPath.slice(5),\r\n            catalog,\r\n            actions.holesActions,\r\n            () => removeHole(planData, layer.id, newHoleData.id),\r\n            () =>\r\n              addHole(\r\n                sceneData,\r\n                planData,\r\n                layer,\r\n                newHoleData.id,\r\n                catalog,\r\n                actions.holesActions\r\n              )\r\n          )\r\n        );\r\n      } else {\r\n        let lineID = newHoleData.line;\r\n        if (modifiedPath[5] === \"selected\") {\r\n          // I remove only the hole without removing the wall\r\n          removeHole(planData, layer.id, newHoleData.id);\r\n          promises.push(\r\n            addHole(\r\n              sceneData,\r\n              planData,\r\n              layer,\r\n              newHoleData.id,\r\n              catalog,\r\n              actions.holesActions\r\n            )\r\n          );\r\n        } else {\r\n          layer.getIn([\"lines\", lineID, \"holes\"]).forEach((holeID) => {\r\n            removeHole(planData, layer.id, holeID);\r\n          });\r\n          removeLine(planData, layer.id, lineID);\r\n          promises.push(\r\n            addLine(\r\n              sceneData,\r\n              planData,\r\n              layer,\r\n              lineID,\r\n              catalog,\r\n              actions.linesActions\r\n            )\r\n          );\r\n          layer.getIn([\"lines\", lineID, \"holes\"]).forEach((holeID) => {\r\n            promises.push(\r\n              addHole(\r\n                sceneData,\r\n                planData,\r\n                layer,\r\n                holeID,\r\n                catalog,\r\n                actions.holesActions\r\n              )\r\n            );\r\n          });\r\n        }\r\n      }\r\n      break;\r\n    case \"lines\":\r\n      let line = layer.getIn([\"lines\", modifiedPath[4]]);\r\n\r\n      if (catalog.getElement(line.type).updateRender3D) {\r\n        promises.push(\r\n          updateLine(\r\n            sceneData,\r\n            oldSceneData,\r\n            planData,\r\n            layer,\r\n            modifiedPath[4],\r\n            modifiedPath.slice(5),\r\n            catalog,\r\n            actions.linesActions,\r\n            () => removeLine(planData, layer.id, modifiedPath[4]),\r\n            () =>\r\n              addLine(\r\n                sceneData,\r\n                planData,\r\n                layer,\r\n                modifiedPath[4],\r\n                catalog,\r\n                actions.linesActions\r\n              )\r\n          )\r\n        );\r\n      } else {\r\n        removeLine(planData, layer.id, modifiedPath[4]);\r\n        promises.push(\r\n          addLine(\r\n            sceneData,\r\n            planData,\r\n            layer,\r\n            modifiedPath[4],\r\n            catalog,\r\n            actions.linesActions\r\n          )\r\n        );\r\n      }\r\n      break;\r\n    case \"areas\":\r\n      let area = layer.getIn([\"areas\", modifiedPath[4]]);\r\n\r\n      if (catalog.getElement(area.type).updateRender3D) {\r\n        promises.push(\r\n          updateArea(\r\n            sceneData,\r\n            oldSceneData,\r\n            planData,\r\n            layer,\r\n            modifiedPath[4],\r\n            modifiedPath.slice(5),\r\n            catalog,\r\n            actions.areaActions,\r\n            () => removeArea(planData, layer.id, modifiedPath[4]),\r\n            () =>\r\n              addArea(\r\n                sceneData,\r\n                planData,\r\n                layer,\r\n                modifiedPath[4],\r\n                catalog,\r\n                actions.areaActions\r\n              )\r\n          )\r\n        );\r\n      } else {\r\n        if (planData.sceneGraph.layers[layer.id].areas[modifiedPath[4]]) {\r\n          removeArea(planData, layer.id, modifiedPath[4]);\r\n        }\r\n        promises.push(\r\n          addArea(\r\n            sceneData,\r\n            planData,\r\n            layer,\r\n            modifiedPath[4],\r\n            catalog,\r\n            actions.areaActions\r\n          )\r\n        );\r\n      }\r\n      break;\r\n    case \"items\":\r\n      let item = layer.getIn([\"items\", modifiedPath[4]]);\r\n\r\n      if (catalog.getElement(item.type).updateRender3D) {\r\n        promises.push(\r\n          updateItem(\r\n            sceneData,\r\n            oldSceneData,\r\n            planData,\r\n            layer,\r\n            modifiedPath[4],\r\n            modifiedPath.slice(5),\r\n            catalog,\r\n            actions.itemsActions,\r\n            () => removeItem(planData, layer.id, modifiedPath[4]),\r\n            () =>\r\n              addItem(\r\n                sceneData,\r\n                planData,\r\n                layer,\r\n                modifiedPath[4],\r\n                catalog,\r\n                actions.itemsActions\r\n              )\r\n          )\r\n        );\r\n      } else {\r\n        removeItem(planData, layer.id, modifiedPath[4]);\r\n        promises.push(\r\n          addItem(\r\n            sceneData,\r\n            planData,\r\n            layer,\r\n            modifiedPath[4],\r\n            catalog,\r\n            actions.itemsActions\r\n          )\r\n        );\r\n      }\r\n      break;\r\n\r\n    case \"visible\":\r\n      if (!layer.visible) {\r\n        let layerGraph = planData.sceneGraph.layers[layer.id];\r\n\r\n        for (let lineID in layerGraph.lines)\r\n          removeLine(planData, layer.id, lineID);\r\n        for (let areaID in layerGraph.areas)\r\n          removeArea(planData, layer.id, areaID);\r\n        for (let itemID in layerGraph.items)\r\n          removeItem(planData, layer.id, itemID);\r\n        for (let holeID in layerGraph.holes)\r\n          removeHole(planData, layer.id, holeID);\r\n      } else {\r\n        promises = promises.concat(\r\n          createLayerObjects(layer, planData, sceneData, actions, catalog)\r\n        );\r\n      }\r\n\r\n      break;\r\n\r\n    case \"opacity\":\r\n    case \"altitude\":\r\n      let layerGraph = planData.sceneGraph.layers[layer.id];\r\n      for (let lineID in layerGraph.lines)\r\n        removeLine(planData, layer.id, lineID);\r\n      for (let areaID in layerGraph.areas)\r\n        removeArea(planData, layer.id, areaID);\r\n      for (let itemID in layerGraph.items)\r\n        removeItem(planData, layer.id, itemID);\r\n      for (let holeID in layerGraph.holes)\r\n        removeHole(planData, layer.id, holeID);\r\n\r\n      promises = promises.concat(\r\n        createLayerObjects(layer, planData, sceneData, actions, catalog)\r\n      );\r\n  }\r\n  Promise.all(promises).then((values) => updateBoundingBox(planData));\r\n}\r\n\r\nfunction removeObject(\r\n  modifiedPath,\r\n  layer,\r\n  planData,\r\n  actions,\r\n  sceneData,\r\n  oldSceneData,\r\n  catalog\r\n) {\r\n  let promises = [];\r\n  switch (modifiedPath[3]) {\r\n    case \"lines\":\r\n      // Here I remove the line with all its holes\r\n      let lineID = modifiedPath[4];\r\n      oldSceneData\r\n        .getIn([\"layers\", layer.id, \"lines\", lineID, \"holes\"])\r\n        .forEach((holeID) => {\r\n          removeHole(planData, layer.id, holeID);\r\n        });\r\n      removeLine(planData, layer.id, lineID);\r\n      if (modifiedPath.length > 5) {\r\n        // I removed an hole, so I should add the new line\r\n        promises.push(\r\n          addLine(\r\n            sceneData,\r\n            planData,\r\n            layer,\r\n            lineID,\r\n            catalog,\r\n            actions.linesActions\r\n          )\r\n        );\r\n        layer.getIn([\"lines\", lineID, \"holes\"]).forEach((holeID) => {\r\n          promises.push(\r\n            addHole(\r\n              sceneData,\r\n              planData,\r\n              layer,\r\n              holeID,\r\n              catalog,\r\n              actions.holesActions\r\n            )\r\n          );\r\n        });\r\n      }\r\n      break;\r\n    case \"areas\":\r\n      if (modifiedPath.length === 5) {\r\n        // I am removing an entire area\r\n        removeArea(planData, layer.id, modifiedPath[4]);\r\n      }\r\n      break;\r\n    case \"items\":\r\n      if (modifiedPath.length === 5) {\r\n        // I am removing an item\r\n        removeItem(planData, layer.id, modifiedPath[4]);\r\n      }\r\n      break;\r\n  }\r\n\r\n  Promise.all(promises).then((values) => updateBoundingBox(planData));\r\n}\r\n\r\nfunction removeLayer(layerId, planData) {\r\n  let layerGraph = planData.sceneGraph.layers[layerId];\r\n\r\n  for (let lineID in layerGraph.lines) removeLine(planData, layerId, lineID);\r\n  for (let areaID in layerGraph.areas) removeArea(planData, layerId, areaID);\r\n  for (let itemID in layerGraph.items) removeItem(planData, layerId, itemID);\r\n  for (let holeID in layerGraph.holes) removeHole(planData, layerId, holeID);\r\n\r\n  delete planData.sceneGraph.layers[layerId];\r\n}\r\n\r\nfunction removeHole(planData, layerId, holeID) {\r\n  if (planData.sceneGraph.busyResources.layers[layerId].holes[holeID]) {\r\n    setTimeout(() => removeHole(planData, layerId, holeID), 100);\r\n    return;\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].holes[holeID] = true;\r\n\r\n  let hole3D = planData.sceneGraph.layers[layerId].holes[holeID];\r\n\r\n  if (hole3D) {\r\n    planData.plan.remove(hole3D);\r\n    disposeObject(hole3D);\r\n    delete planData.sceneGraph.layers[layerId].holes[holeID];\r\n    delete planData.sceneGraph.LODs[holeID];\r\n    hole3D = null;\r\n    updateBoundingBox(planData);\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].holes[holeID] = false;\r\n}\r\n\r\nfunction removeLine(planData, layerId, lineID) {\r\n  if (planData.sceneGraph.busyResources.layers[layerId].lines[lineID]) {\r\n    setTimeout(() => removeLine(planData, layerId, lineID), 100);\r\n    return;\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].lines[lineID] = true;\r\n\r\n  let line3D = planData.sceneGraph.layers[layerId].lines[lineID];\r\n\r\n  if (line3D) {\r\n    planData.plan.remove(line3D);\r\n    disposeObject(line3D);\r\n    delete planData.sceneGraph.layers[layerId].lines[lineID];\r\n    delete planData.sceneGraph.LODs[lineID];\r\n    line3D = null;\r\n    updateBoundingBox(planData);\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].lines[lineID] = false;\r\n}\r\n\r\nfunction removeArea(planData, layerId, areaID) {\r\n  if (planData.sceneGraph.busyResources.layers[layerId].areas[areaID]) {\r\n    setTimeout(() => removeArea(planData, layerId, areaID), 100);\r\n    return;\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].areas[areaID] = true;\r\n\r\n  let area3D = planData.sceneGraph.layers[layerId].areas[areaID];\r\n\r\n  if (area3D) {\r\n    planData.plan.remove(area3D);\r\n    disposeObject(area3D);\r\n    delete planData.sceneGraph.layers[layerId].areas[areaID];\r\n    delete planData.sceneGraph.LODs[areaID];\r\n    area3D = null;\r\n    updateBoundingBox(planData);\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].areas[areaID] = false;\r\n}\r\n\r\nfunction removeItem(planData, layerId, itemID) {\r\n  if (planData.sceneGraph.busyResources.layers[layerId].items[itemID]) {\r\n    setTimeout(() => removeItem(planData, layerId, itemID), 100);\r\n    return;\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].items[itemID] = true;\r\n\r\n  let item3D = planData.sceneGraph.layers[layerId].items[itemID];\r\n\r\n  if (item3D) {\r\n    planData.plan.remove(item3D);\r\n    disposeObject(item3D);\r\n    delete planData.sceneGraph.layers[layerId].items[itemID];\r\n    delete planData.sceneGraph.LODs[itemID];\r\n    item3D = null;\r\n    updateBoundingBox(planData);\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layerId].items[itemID] = false;\r\n}\r\n\r\n//TODO generate an area's replace if vertex has been changed\r\nfunction addObject(\r\n  modifiedPath,\r\n  layer,\r\n  planData,\r\n  actions,\r\n  sceneData,\r\n  oldSceneData,\r\n  catalog\r\n) {\r\n  if (modifiedPath.length === 5) {\r\n    let addPromise = null,\r\n      addAction = null;\r\n\r\n    switch (modifiedPath[3]) {\r\n      case \"lines\":\r\n        addPromise = addLine;\r\n        addAction = actions.linesActions;\r\n        break;\r\n      case \"areas\":\r\n        addPromise = addArea;\r\n        addAction = actions.areaActions;\r\n        break;\r\n      case \"items\":\r\n        addPromise = addItem;\r\n        addAction = actions.itemsActions;\r\n        break;\r\n      case \"holes\":\r\n        addPromise = addHole;\r\n        addAction = actions.holesActions;\r\n        break;\r\n    }\r\n\r\n    if (addPromise)\r\n      addPromise(\r\n        sceneData,\r\n        planData,\r\n        layer,\r\n        modifiedPath[4],\r\n        catalog,\r\n        addAction\r\n      ).then(() => updateBoundingBox(planData));\r\n  }\r\n}\r\n\r\nfunction addHole(sceneData, planData, layer, holeID, catalog, holesActions) {\r\n  let holeData = layer.getIn([\"holes\", holeID]);\r\n\r\n  // Create the hole object\r\n  return catalog\r\n    .getElement(holeData.type)\r\n    .render3D(holeData, layer, sceneData)\r\n    .then((object) => {\r\n      if (object instanceof Three.LOD) {\r\n        planData.sceneGraph.LODs[holeID] = object;\r\n      }\r\n\r\n      let pivot = new Three.Object3D();\r\n      pivot.name = \"pivot\";\r\n      pivot.add(object);\r\n\r\n      let line = layer.getIn([\"lines\", holeData.line]);\r\n\r\n      // First of all I need to find the vertices of this line\r\n      let vertex0 = layer.vertices.get(line.vertices.get(0));\r\n      let vertex1 = layer.vertices.get(line.vertices.get(1));\r\n      let offset = holeData.offset;\r\n\r\n      if (vertex0.x > vertex1.x) {\r\n        let tmp = vertex0;\r\n        vertex0 = vertex1;\r\n        vertex1 = tmp;\r\n        offset = 1 - offset;\r\n      }\r\n\r\n      let distance = Math.sqrt(\r\n        Math.pow(vertex0.x - vertex1.x, 2) + Math.pow(vertex0.y - vertex1.y, 2)\r\n      );\r\n      let alpha = Math.asin((vertex1.y - vertex0.y) / distance);\r\n\r\n      let boundingBox = new Three.Box3().setFromObject(pivot);\r\n      let center = [\r\n        (boundingBox.max.x - boundingBox.min.x) / 2 + boundingBox.min.x,\r\n        (boundingBox.max.y - boundingBox.min.y) / 2 + boundingBox.min.y,\r\n        (boundingBox.max.z - boundingBox.min.z) / 2 + boundingBox.min.z,\r\n      ];\r\n\r\n      let holeAltitude = holeData.properties.getIn([\"altitude\", \"length\"]);\r\n      let holeHeight = holeData.properties.getIn([\"height\", \"length\"]);\r\n\r\n      pivot.rotation.y = alpha;\r\n      pivot.position.x =\r\n        vertex0.x +\r\n        distance * offset * Math.cos(alpha) -\r\n        center[2] * Math.sin(alpha);\r\n      pivot.position.y =\r\n        holeAltitude + holeHeight / 2 - center[1] + layer.altitude;\r\n      pivot.position.z =\r\n        -vertex0.y -\r\n        distance * offset * Math.sin(alpha) -\r\n        center[2] * Math.cos(alpha);\r\n\r\n      planData.plan.add(pivot);\r\n      planData.sceneGraph.layers[layer.id].holes[holeData.id] = pivot;\r\n\r\n      applyInteract(pivot, () => {\r\n        return holesActions.selectHole(layer.id, holeData.id);\r\n      });\r\n\r\n      let opacity = layer.opacity;\r\n      if (holeData.selected) {\r\n        opacity = 1;\r\n      }\r\n      applyOpacity(pivot, opacity);\r\n    });\r\n}\r\n\r\nfunction updateHole(\r\n  sceneData,\r\n  oldSceneData,\r\n  planData,\r\n  layer,\r\n  holeID,\r\n  differences,\r\n  catalog,\r\n  holesActions,\r\n  selfDestroy,\r\n  selfBuild\r\n) {\r\n  let hole = layer.getIn([\"holes\", holeID]);\r\n  let oldHole = oldSceneData.getIn([\"layers\", layer.id, \"holes\", holeID]);\r\n  let mesh = planData.sceneGraph.layers[layer.id].holes[holeID];\r\n\r\n  if (!mesh) return null;\r\n\r\n  return catalog\r\n    .getElement(hole.type)\r\n    .updateRender3D(\r\n      hole,\r\n      layer,\r\n      sceneData,\r\n      mesh,\r\n      oldHole,\r\n      differences,\r\n      selfDestroy,\r\n      selfBuild\r\n    );\r\n}\r\n\r\nfunction addLine(sceneData, planData, layer, lineID, catalog, linesActions) {\r\n  if (planData.sceneGraph.busyResources.layers[layer.id].lines[lineID]) {\r\n    setTimeout(\r\n      () => addLine(sceneData, planData, layer, lineID, catalog, linesActions),\r\n      100\r\n    );\r\n    return;\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layer.id].lines[lineID] = true;\r\n\r\n  let line = layer.getIn([\"lines\", lineID]);\r\n\r\n  // First of all I need to find the vertices of this line\r\n  let vertex0 = layer.vertices.get(line.vertices.get(0));\r\n  let vertex1 = layer.vertices.get(line.vertices.get(1));\r\n\r\n  if (vertex0.x > vertex1.x) {\r\n    let tmp = vertex0;\r\n    vertex0 = vertex1;\r\n    vertex1 = tmp;\r\n  }\r\n\r\n  return catalog\r\n    .getElement(line.type)\r\n    .render3D(line, layer, sceneData)\r\n    .then((line3D) => {\r\n      if (line3D instanceof Three.LOD) {\r\n        planData.sceneGraph.LODs[line.id] = line3D;\r\n      }\r\n\r\n      let pivot = new Three.Object3D();\r\n      pivot.name = \"pivot\";\r\n      pivot.add(line3D);\r\n\r\n      pivot.position.x = vertex0.x;\r\n      pivot.position.y = layer.altitude;\r\n      pivot.position.z = -vertex0.y;\r\n\r\n      planData.plan.add(pivot);\r\n      planData.sceneGraph.layers[layer.id].lines[lineID] = pivot;\r\n\r\n      applyInteract(pivot, () => {\r\n        return linesActions.selectLine(layer.id, line.id);\r\n      });\r\n\r\n      let opacity = layer.opacity;\r\n      if (line.selected) {\r\n        opacity = 1;\r\n      }\r\n      applyOpacity(pivot, opacity);\r\n      planData.sceneGraph.busyResources.layers[layer.id].lines[lineID] = false;\r\n    });\r\n}\r\n\r\nfunction updateLine(\r\n  sceneData,\r\n  oldSceneData,\r\n  planData,\r\n  layer,\r\n  lineID,\r\n  differences,\r\n  catalog,\r\n  linesActions,\r\n  selfDestroy,\r\n  selfBuild\r\n) {\r\n  let line = layer.getIn([\"lines\", lineID]);\r\n  let oldLine = oldSceneData.getIn([\"layers\", layer.id, \"lines\", lineID]);\r\n  let mesh = planData.sceneGraph.layers[layer.id].lines[lineID];\r\n\r\n  if (!mesh) return null;\r\n\r\n  return catalog\r\n    .getElement(line.type)\r\n    .updateRender3D(\r\n      line,\r\n      layer,\r\n      sceneData,\r\n      mesh,\r\n      oldLine,\r\n      differences,\r\n      selfDestroy,\r\n      selfBuild\r\n    );\r\n}\r\n\r\nfunction addArea(sceneData, planData, layer, areaID, catalog, areaActions) {\r\n  if (planData.sceneGraph.busyResources.layers[layer.id].areas[areaID]) {\r\n    setTimeout(\r\n      () => addArea(sceneData, planData, layer, areaID, catalog, areaActions),\r\n      100\r\n    );\r\n    return;\r\n  }\r\n\r\n  planData.sceneGraph.busyResources.layers[layer.id].areas[areaID] = true;\r\n\r\n  let area = layer.getIn([\"areas\", areaID]);\r\n  let interactFunction = () => areaActions.selectArea(layer.id, areaID);\r\n\r\n  return catalog\r\n    .getElement(area.type)\r\n    .render3D(area, layer, sceneData)\r\n    .then((area3D) => {\r\n      if (area3D instanceof Three.LOD) {\r\n        planData.sceneGraph.LODs[areaID] = area3D;\r\n      }\r\n\r\n      let pivot = new Three.Object3D();\r\n      pivot.name = \"pivot\";\r\n      pivot.add(area3D);\r\n      pivot.position.y = layer.altitude;\r\n      planData.plan.add(pivot);\r\n      planData.sceneGraph.layers[layer.id].areas[areaID] = pivot;\r\n\r\n      applyInteract(pivot, interactFunction);\r\n\r\n      let opacity = layer.opacity;\r\n      if (area.selected) {\r\n        opacity = 1;\r\n      }\r\n\r\n      applyOpacity(pivot, opacity);\r\n      planData.sceneGraph.busyResources.layers[layer.id].areas[areaID] = false;\r\n    });\r\n}\r\n\r\nfunction updateArea(\r\n  sceneData,\r\n  oldSceneData,\r\n  planData,\r\n  layer,\r\n  areaID,\r\n  differences,\r\n  catalog,\r\n  areaActions,\r\n  selfDestroy,\r\n  selfBuild\r\n) {\r\n  let area = layer.getIn([\"areas\", areaID]);\r\n  let oldArea = oldSceneData.getIn([\"layers\", layer.id, \"areas\", areaID]);\r\n  let mesh = planData.sceneGraph.layers[layer.id].areas[areaID];\r\n\r\n  if (!mesh) return null;\r\n\r\n  return catalog\r\n    .getElement(area.type)\r\n    .updateRender3D(\r\n      area,\r\n      layer,\r\n      sceneData,\r\n      mesh,\r\n      oldArea,\r\n      differences,\r\n      selfDestroy,\r\n      selfBuild\r\n    );\r\n}\r\n\r\nfunction addItem(sceneData, planData, layer, itemID, catalog, itemsActions) {\r\n  let item = layer.getIn([\"items\", itemID]);\r\n\r\n  return catalog\r\n    .getElement(item.type)\r\n    .render3D(item, layer, sceneData)\r\n    .then((item3D) => {\r\n      if (item3D instanceof Three.LOD) {\r\n        planData.sceneGraph.LODs[itemID] = item3D;\r\n      }\r\n\r\n      let pivot = new Three.Object3D();\r\n      pivot.name = \"pivot\";\r\n      pivot.add(item3D);\r\n\r\n      pivot.rotation.y = (item.rotation * Math.PI) / 180;\r\n      pivot.position.x = item.x;\r\n      pivot.position.y = layer.altitude;\r\n      pivot.position.z = -item.y;\r\n\r\n      applyInteract(item3D, () => {\r\n        itemsActions.selectItem(layer.id, item.id);\r\n      });\r\n\r\n      let opacity = layer.opacity;\r\n      if (item.selected) {\r\n        opacity = 1;\r\n      }\r\n\r\n      applyOpacity(pivot, opacity);\r\n\r\n      planData.plan.add(pivot);\r\n      planData.sceneGraph.layers[layer.id].items[item.id] = pivot;\r\n    });\r\n}\r\n\r\nfunction updateItem(\r\n  sceneData,\r\n  oldSceneData,\r\n  planData,\r\n  layer,\r\n  itemID,\r\n  differences,\r\n  catalog,\r\n  itemsActions,\r\n  selfDestroy,\r\n  selfBuild\r\n) {\r\n  let item = layer.getIn([\"items\", itemID]);\r\n  let oldItem = oldSceneData.getIn([\"layers\", layer.id, \"items\", itemID]);\r\n  let mesh = planData.sceneGraph.layers[layer.id].items[itemID];\r\n\r\n  if (!mesh) return null;\r\n\r\n  return catalog\r\n    .getElement(item.type)\r\n    .updateRender3D(\r\n      item,\r\n      layer,\r\n      sceneData,\r\n      mesh,\r\n      oldItem,\r\n      differences,\r\n      selfDestroy,\r\n      selfBuild\r\n    );\r\n}\r\n\r\n// Apply interact function to children of an Object3D\r\nfunction applyInteract(object, interactFunction) {\r\n  object.traverse((child) => {\r\n    if (child instanceof Three.Mesh) {\r\n      child.interact = interactFunction;\r\n    }\r\n  });\r\n}\r\n\r\n// Apply opacity to children of an Object3D\r\nfunction applyOpacity(object, opacity) {\r\n  object.traverse((child) => {\r\n    if (child instanceof Three.Mesh) {\r\n      if (child.material instanceof Three.MultiMaterial) {\r\n        child.material.materials.forEach((materialChild) => {\r\n          materialChild.transparent = true;\r\n          if (materialChild.maxOpacity) {\r\n            materialChild.opacity = Math.min(materialChild.maxOpacity, opacity);\r\n          } else if (materialChild.opacity && materialChild.opacity > opacity) {\r\n            materialChild.maxOpacity = materialChild.opacity;\r\n            materialChild.opacity = opacity;\r\n          }\r\n        });\r\n      } else if (child.material instanceof Array) {\r\n        child.material.forEach((material) => {\r\n          material.transparent = true;\r\n          if (material.maxOpacity) {\r\n            material.opacity = Math.min(material.maxOpacity, opacity);\r\n          } else if (material.opacity && material.opacity > opacity) {\r\n            material.maxOpacity = material.opacity;\r\n            material.opacity = opacity;\r\n          }\r\n        });\r\n      } else {\r\n        child.material.transparent = true;\r\n        if (child.material.maxOpacity) {\r\n          child.material.opacity = Math.min(child.material.maxOpacity, opacity);\r\n        } else if (child.material.opacity && child.material.opacity > opacity) {\r\n          child.material.maxOpacity = child.material.opacity;\r\n          child.material.opacity = opacity;\r\n        }\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction updateBoundingBox(planData) {\r\n  let newBoundingBox = new Three.Box3().setFromObject(planData.plan);\r\n  if (\r\n    isFinite(newBoundingBox.max.x) &&\r\n    isFinite(newBoundingBox.min.x) &&\r\n    isFinite(newBoundingBox.max.y) &&\r\n    isFinite(newBoundingBox.min.y) &&\r\n    isFinite(newBoundingBox.max.z) &&\r\n    isFinite(newBoundingBox.min.z)\r\n  ) {\r\n    let newCenter = new Three.Vector3(\r\n      (newBoundingBox.max.x - newBoundingBox.min.x) / 2 + newBoundingBox.min.x,\r\n      (newBoundingBox.max.y - newBoundingBox.min.y) / 2 + newBoundingBox.min.y,\r\n      (newBoundingBox.max.z - newBoundingBox.min.z) / 2 + newBoundingBox.min.z\r\n    );\r\n\r\n    planData.plan.position.sub(newCenter);\r\n    planData.grid.position.sub(newCenter);\r\n\r\n    newBoundingBox.min.sub(newCenter);\r\n    newBoundingBox.max.sub(newCenter);\r\n\r\n    planData.boundingBox = newBoundingBox;\r\n  }\r\n}\r\n\r\n/**\r\n * Filter the array of diffs\r\n * @param diffArray\r\n * @param sceneData\r\n * @param oldSceneData\r\n * @returns {Array}\r\n */\r\nfunction filterDiffs(diffArray, sceneData, oldSceneData) {\r\n  return minimizeRemoveDiffsWhenSwitchingLayers(\r\n    minimizeChangePropertiesAfterSelectionsDiffs(\r\n      minimizeChangePropertiesDiffs(diffArray, sceneData, oldSceneData),\r\n      sceneData,\r\n      oldSceneData\r\n    ),\r\n    sceneData,\r\n    oldSceneData\r\n  );\r\n}\r\n\r\n/**\r\n * Reduces the number of remove diffs when switching an hidden layer\r\n * @param diffArray the array of the diffs\r\n * @param sceneData\r\n * @param oldSceneData\r\n * @returns {Array}\r\n */\r\nfunction minimizeRemoveDiffsWhenSwitchingLayers(\r\n  diffArray,\r\n  sceneData,\r\n  oldSceneData\r\n) {\r\n  let foundDiff;\r\n  let i;\r\n  for (i = 0; i < diffArray.length && !foundDiff; i++) {\r\n    if (diffArray[i].path[1] === \"selectedLayer\") {\r\n      foundDiff = diffArray[i];\r\n    }\r\n  }\r\n\r\n  if (foundDiff) {\r\n    if (!sceneData.getIn([\"layers\", oldSceneData.selectedLayer, \"visible\"])) {\r\n      return diffArray.filter(({ op, path }) => {\r\n        return (\r\n          !(\r\n            path[path.length - 1] === \"selected\" &&\r\n            path[1] === \"layers\" &&\r\n            path[2] === oldSceneData.selectedLayer\r\n          ) &&\r\n          !(op === \"remove\" && path.indexOf(oldSceneData.selectedLayer) !== -1)\r\n        );\r\n      });\r\n    }\r\n  }\r\n\r\n  return diffArray;\r\n}\r\n\r\n/**\r\n * Reduces the number of change properties diffs for selected elements\r\n * @param diffArray the array of the diffs\r\n * @param sceneData\r\n * @param oldSceneData\r\n * @returns {Array}\r\n */\r\nfunction minimizeChangePropertiesAfterSelectionsDiffs(\r\n  diffArray,\r\n  sceneData,\r\n  oldSceneData\r\n) {\r\n  let idsFound = {};\r\n  diffArray.forEach(({ path }) => {\r\n    if (path[5] === \"selected\") {\r\n      idsFound[path[4]] = path[4];\r\n    }\r\n  });\r\n\r\n  return diffArray.filter(({ path }) => {\r\n    if (path[5] === \"properties\") {\r\n      return idsFound[path[4]] ? false : true;\r\n    }\r\n    return true;\r\n  });\r\n}\r\n\r\n/**\r\n * Reduces the number of change properties diffs\r\n * @param diffArray the array of the diffs\r\n * @param sceneData\r\n * @param oldSceneData\r\n * @returns {Array}\r\n */\r\nfunction minimizeChangePropertiesDiffs(diffArray, sceneData, oldSceneData) {\r\n  let idsFound = {};\r\n  return diffArray.filter(({ path }) => {\r\n    if (path[5] === \"properties\") {\r\n      return idsFound[path[4]] ? false : (idsFound[path[4]] = true);\r\n    } else if (path[5] === \"misc\") {\r\n      // Remove misc changes\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Map } from \"immutable\";\r\nimport Panel from \"./panel\";\r\nimport { TiPlus, TiDelete } from \"react-icons/ti\";\r\nimport { FaPencilAlt, FaTrash, FaEye } from \"react-icons/fa\";\r\nimport {\r\n  FormTextInput,\r\n  FormNumberInput,\r\n  FormSubmitButton,\r\n  FormSlider,\r\n  CancelButton,\r\n} from \"../style/export\";\r\n\r\nimport {\r\n  MODE_IDLE,\r\n  MODE_2D_ZOOM_IN,\r\n  MODE_2D_ZOOM_OUT,\r\n  MODE_2D_PAN,\r\n  MODE_3D_VIEW,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE,\r\n  MODE_DRAWING_LINE,\r\n  MODE_DRAWING_HOLE,\r\n  MODE_DRAWING_ITEM,\r\n  MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX,\r\n  MODE_DRAGGING_ITEM,\r\n  MODE_DRAGGING_HOLE,\r\n  MODE_FITTING_IMAGE,\r\n  MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM,\r\n  MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  MODE_RESIZE_ITEM_RIGHT_TOP, \r\n  MODE_RESIZE_ITEM_LEFT_BOTTOM, \r\n  MODE_RESIZE_ITEM_LEFT_TOP\r\n} from \"../../constants\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\n\r\nconst VISIBILITY_MODE = {\r\n  MODE_IDLE,\r\n  MODE_2D_ZOOM_IN,\r\n  MODE_2D_ZOOM_OUT,\r\n  MODE_2D_PAN,\r\n  MODE_3D_VIEW,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE,\r\n  MODE_DRAWING_LINE,\r\n  MODE_DRAWING_HOLE,\r\n  MODE_DRAWING_ITEM,\r\n  MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX,\r\n  MODE_DRAGGING_ITEM,\r\n  MODE_DRAGGING_HOLE,\r\n  MODE_ROTATING_ITEM,\r\n  MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  MODE_RESIZE_ITEM_RIGHT_TOP, \r\n  MODE_RESIZE_ITEM_LEFT_BOTTOM, \r\n  MODE_RESIZE_ITEM_LEFT_TOP,\r\n  MODE_UPLOADING_IMAGE,\r\n  MODE_FITTING_IMAGE,\r\n};\r\n\r\nconst styleEditButton = {\r\n  cursor: \"pointer\",\r\n  marginLeft: \"5px\",\r\n  border: \"0px\",\r\n  background: \"none\",\r\n  color: SharedStyle.COLORS.white,\r\n  fontSize: \"14px\",\r\n  outline: \"0px\",\r\n};\r\n\r\nconst tableLayerStyle = {\r\n  width: \"100%\",\r\n  cursor: \"pointer\",\r\n  overflowY: \"auto\",\r\n  maxHeight: \"20em\",\r\n  display: \"block\",\r\n  padding: \"0 1em\",\r\n  marginLeft: \"1px\",\r\n};\r\n\r\nconst iconColStyle = { width: \"2em\" };\r\nconst styleHoverColor = { color: SharedStyle.SECONDARY_COLOR.main };\r\nconst styleEditButtonHover = { ...styleEditButton, ...styleHoverColor };\r\nconst styleAddLabel = { fontSize: \"10px\", marginLeft: \"5px\" };\r\nconst styleEyeVisible = { fontSize: \"1.25em\" };\r\nconst styleEyeHidden = { ...styleEyeVisible, color: \"#a5a1a1\" };\r\nconst firstTdStyle = { width: \"6em\" };\r\nconst newLayerLableStyle = {\r\n  margin: \"0.5em 0\",\r\n  fontSize: \"1.3em\",\r\n  cursor: \"pointer\",\r\n  textAlign: \"center\",\r\n};\r\nconst newLayerLableHoverStyle = { ...newLayerLableStyle, ...styleHoverColor };\r\nconst layerInputTableStyle = {\r\n  width: \"100%\",\r\n  borderSpacing: \"2px 0\",\r\n  padding: \"5px 15px\",\r\n};\r\nconst inputTableButtonStyle = {\r\n  float: \"right\",\r\n  marginTop: \"0.5em\",\r\n  borderSpacing: \"0\",\r\n};\r\n\r\nexport default class PanelLayers extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      headHovered: false,\r\n      layerAddUIVisible: false,\r\n      editingLayer: new Map(),\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (\r\n      this.props.state.scene.layers.size !==\r\n        nextProps.state.scene.layers.size ||\r\n      nextState.layerAddUIVisible != this.state.layerAddUIVisible ||\r\n      this.state.editingLayer.hashCode() !==\r\n        nextState.editingLayer.hashCode() ||\r\n      this.props.state.sceneHistory.hashCode() !==\r\n        nextProps.state.sceneHistory.hashCode()\r\n    )\r\n      return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  addLayer(e) {\r\n    e.stopPropagation();\r\n    if (!this.state.layerAddUIVisible) {\r\n      this.context.sceneActions.addLayer(\"\", 0);\r\n      this.setState({ layerAddUIVisible: false });\r\n    } else this.setState({ layerAddUIVisible: !this.state.layerAddUIVisible });\r\n  }\r\n\r\n  resetLayerMod(e) {\r\n    e.stopPropagation();\r\n    this.setState({ layerAddUIVisible: false, editingLayer: new Map() });\r\n  }\r\n\r\n  updateLayer(e, layerData) {\r\n    e.stopPropagation();\r\n    let { id, name, opacity, altitude, order } = layerData.toJS();\r\n\r\n    altitude = parseInt(altitude);\r\n\r\n    this.context.sceneActions.setLayerProperties(id, {\r\n      name,\r\n      opacity,\r\n      altitude,\r\n      order,\r\n    });\r\n    this.setState({ layerAddUIVisible: false, editingLayer: new Map() });\r\n  }\r\n\r\n  delLayer(e, layerID) {\r\n    e.stopPropagation();\r\n    this.context.sceneActions.removeLayer(layerID);\r\n    this.setState({ layerAddUIVisible: false, editingLayer: new Map() });\r\n  }\r\n\r\n  render() {\r\n    if (!VISIBILITY_MODE[this.props.state.mode]) return null;\r\n\r\n    let scene = this.props.state.scene;\r\n    let isLastLayer = scene.layers.size === 1;\r\n\r\n    return (\r\n      <Panel name={this.context.translator.t(\"Layers\")}>\r\n        <table style={tableLayerStyle}>\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"3\"></th>\r\n              <th>{this.context.translator.t(\"Altitude\")}</th>\r\n              <th>{this.context.translator.t(\"Name\")}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {scene.layers.entrySeq().map(([layerID, layer]) => {\r\n              let selectClick = (e) =>\r\n                this.context.sceneActions.selectLayer(layerID);\r\n              let configureClick = (e) =>\r\n                this.setState({ editingLayer: layer, layerAddUIVisible: true });\r\n\r\n              let swapVisibility = (e) => {\r\n                e.stopPropagation();\r\n                this.context.sceneActions.setLayerProperties(layerID, {\r\n                  visible: !layer.visible,\r\n                });\r\n              };\r\n\r\n              let isCurrentLayer = layerID === scene.selectedLayer;\r\n\r\n              return (\r\n                <tr\r\n                  key={layerID}\r\n                  onClick={selectClick}\r\n                  onDoubleClick={configureClick}\r\n                  style={!isCurrentLayer ? null : styleHoverColor}\r\n                >\r\n                  <td style={iconColStyle}>\r\n                    {!isCurrentLayer ? (\r\n                      <FaEye\r\n                        onClick={swapVisibility}\r\n                        style={\r\n                          !layer.visible ? styleEyeHidden : styleEyeVisible\r\n                        }\r\n                      />\r\n                    ) : null}\r\n                  </td>\r\n                  <td style={iconColStyle}>\r\n                    <FaPencilAlt\r\n                      onClick={configureClick}\r\n                      style={\r\n                        !isCurrentLayer ? styleEditButton : styleEditButtonHover\r\n                      }\r\n                      title={this.context.translator.t(\"Configure layer\")}\r\n                    />\r\n                  </td>\r\n                  <td style={iconColStyle}>\r\n                    {!isLastLayer ? (\r\n                      <FaTrash\r\n                        onClick={(e) => this.delLayer(e, layerID)}\r\n                        style={\r\n                          !isCurrentLayer\r\n                            ? styleEditButton\r\n                            : styleEditButtonHover\r\n                        }\r\n                        title={this.context.translator.t(\"Delete layer\")}\r\n                      />\r\n                    ) : null}\r\n                  </td>\r\n                  <td style={{ width: \"6em\", textAlign: \"center\" }}>\r\n                    [ h : {layer.altitude} ]\r\n                  </td>\r\n                  <td>{layer.name}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n        <p\r\n          style={\r\n            !this.state.headHovered\r\n              ? newLayerLableStyle\r\n              : newLayerLableHoverStyle\r\n          }\r\n          onMouseOver={() => this.setState({ headHovered: true })}\r\n          onMouseOut={() => this.setState({ headHovered: false })}\r\n          onClick={(e) => this.addLayer(e)}\r\n        >\r\n          {!this.state.layerAddUIVisible ? <TiPlus /> : <TiDelete />}\r\n          <b style={styleAddLabel}>{this.context.translator.t(\"New layer\")}</b>\r\n        </p>\r\n\r\n        {this.state.layerAddUIVisible && this.state.editingLayer ? (\r\n          <table style={layerInputTableStyle}>\r\n            <tbody>\r\n              <tr style={{ marginTop: \"1em\" }}>\r\n                <td style={firstTdStyle}>\r\n                  {this.context.translator.t(\"Name\")}:\r\n                </td>\r\n                <td>\r\n                  <FormTextInput\r\n                    value={this.state.editingLayer.get(\"name\")}\r\n                    onChange={(e) =>\r\n                      this.setState({\r\n                        editingLayer: this.state.editingLayer.merge({\r\n                          name: e.target.value,\r\n                        }),\r\n                      })\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style={firstTdStyle}>\r\n                  {this.context.translator.t(\"opacity\")}:\r\n                </td>\r\n                <td>\r\n                  <FormSlider\r\n                    min={0}\r\n                    max={100}\r\n                    value={Math.round(\r\n                      this.state.editingLayer.get(\"opacity\") * 100\r\n                    )}\r\n                    onChange={(e) =>\r\n                      this.setState({\r\n                        editingLayer: this.state.editingLayer.merge({\r\n                          opacity: e.target.value / 100,\r\n                        }),\r\n                      })\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style={firstTdStyle}>\r\n                  {this.context.translator.t(\"altitude\")}:\r\n                </td>\r\n                <td>\r\n                  <FormNumberInput\r\n                    value={this.state.editingLayer.get(\"altitude\")}\r\n                    onChange={(e) =>\r\n                      this.setState({\r\n                        editingLayer: this.state.editingLayer.merge({\r\n                          altitude: e.target.value,\r\n                        }),\r\n                      })\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style={firstTdStyle}>\r\n                  {this.context.translator.t(\"order\")}:\r\n                </td>\r\n                <td>\r\n                  <FormNumberInput\r\n                    value={this.state.editingLayer.get(\"order\")}\r\n                    onChange={(e) =>\r\n                      this.setState({\r\n                        editingLayer: this.state.editingLayer.merge({\r\n                          order: e.target.value,\r\n                        }),\r\n                      })\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td colSpan=\"2\">\r\n                  <table style={inputTableButtonStyle}>\r\n                    <tbody>\r\n                      <tr>\r\n                        <td>\r\n                          <CancelButton\r\n                            size=\"small\"\r\n                            onClick={(e) => {\r\n                              this.resetLayerMod(e);\r\n                            }}\r\n                          >\r\n                            {this.context.translator.t(\"Reset\")}\r\n                          </CancelButton>\r\n                        </td>\r\n                        <td>\r\n                          <FormSubmitButton\r\n                            size=\"small\"\r\n                            onClick={(e) => {\r\n                              this.updateLayer(e, this.state.editingLayer);\r\n                            }}\r\n                          >\r\n                            {this.context.translator.t(\"Save\")}\r\n                          </FormSubmitButton>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        ) : null}\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nPanelLayers.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nPanelLayers.contextTypes = {\r\n  sceneActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Panel from './panel';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport { FaPencil, FaTrash, FaTimes } from 'react-icons/fa';\r\nimport { FormNumberInput } from '../../components/style/export';\r\n\r\nconst tabStyle = { margin: '1em' };\r\n\r\nconst iconStyle = {\r\n  fontSize: '14px',\r\n  margin: '2px',\r\n  cursor: 'pointer'\r\n};\r\n\r\nconst addGuideStyle = {\r\n  cursor: 'pointer',\r\n  height: '2em'\r\n};\r\n\r\nconst tableTabStyle = {\r\n  width: '100%',\r\n  textAlign: 'center'\r\n};\r\n\r\nexport default class PanelGuides extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      addHGVisible: true,\r\n      addVGVisible: true,\r\n      addCGVisible: true\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return (\r\n      this.state.addHGVisible !== nextState.addHGVisible ||\r\n      this.state.addVGVisible !== nextState.addVGVisible ||\r\n      this.state.addCGVisible !== nextState.addCGVisible ||\r\n      this.props.state.getIn(['scene', 'guides']).hashCode() !==\r\n        nextProps.state.getIn(['scene', 'guides']).hashCode()\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let { state } = this.props;\r\n    let { projectActions, translator } = this.context;\r\n    let { guides } = state.scene;\r\n\r\n    return (\r\n      <Panel name={translator.t('Guides')}>\r\n        <Tabs id='guidesTabs' style={tabStyle}>\r\n          <TabList>\r\n            <Tab>{translator.t('Horizontal')}</Tab>\r\n            <Tab>{translator.t('Vertical')}</Tab>\r\n            {/*<Tab>{translator.t('Circular')}</Tab>*/}\r\n          </TabList>\r\n\r\n          <TabPanel>\r\n            <table style={tableTabStyle}>\r\n              <tbody>\r\n                {guides\r\n                  .get('horizontal')\r\n                  .entrySeq()\r\n                  .map(([hgKey, hgVal], ind) => {\r\n                    return (\r\n                      <tr key={hgKey}>\r\n                        <td style={{ width: '2em' }}>{ind + 1}</td>\r\n                        <td>{hgVal}</td>\r\n                        <td style={{ width: '5em' }}>\r\n                          {/*<FaPencil style={iconStyle} />*/}\r\n                          <FaTrash\r\n                            style={iconStyle}\r\n                            onClick={e =>\r\n                              projectActions.removeHorizontalGuide(hgKey)\r\n                            }\r\n                          />\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                {this.state.addHGVisible ? (\r\n                  <tr>\r\n                    <td\r\n                      colSpan='3'\r\n                      style={addGuideStyle}\r\n                      onClick={e => this.setState({ addHGVisible: false })}\r\n                    >\r\n                      {translator.t('+ Add Horizontal Giude')}\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan='2'>\r\n                      <FormNumberInput\r\n                        value={0}\r\n                        onChange={e => {\r\n                          projectActions.addHorizontalGuide(e.target.value);\r\n                          return this.setState({ addHGVisible: true });\r\n                        }}\r\n                        min={0}\r\n                        max={this.props.state.getIn(['scene', 'height'])}\r\n                      />\r\n                    </td>\r\n                    <td>\r\n                      <FaTimes\r\n                        style={iconStyle}\r\n                        onClick={e => this.setState({ addHGVisible: true })}\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </TabPanel>\r\n          <TabPanel>\r\n            <table style={tableTabStyle}>\r\n              <tbody>\r\n                {guides\r\n                  .get('vertical')\r\n                  .entrySeq()\r\n                  .map(([hgKey, hgVal], ind) => {\r\n                    return (\r\n                      <tr key={hgKey}>\r\n                        <td style={{ width: '2em' }}>{ind + 1}</td>\r\n                        <td>{hgVal}</td>\r\n                        <td style={{ width: '5em' }}>\r\n                          {/*<FaPencil style={iconStyle} />*/}\r\n                          <FaTrash\r\n                            style={iconStyle}\r\n                            onClick={e =>\r\n                              projectActions.removeVerticalGuide(hgKey)\r\n                            }\r\n                          />\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                {this.state.addVGVisible ? (\r\n                  <tr>\r\n                    <td\r\n                      colSpan='3'\r\n                      style={addGuideStyle}\r\n                      onClick={e => this.setState({ addVGVisible: false })}\r\n                    >\r\n                      {translator.t('+ Add Vertical Giude')}\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan='2'>\r\n                      <FormNumberInput\r\n                        value={0}\r\n                        onChange={e => {\r\n                          projectActions.addVerticalGuide(e.target.value);\r\n                          return this.setState({ addVGVisible: true });\r\n                        }}\r\n                        min={0}\r\n                        max={this.props.state.getIn(['scene', 'height'])}\r\n                      />\r\n                    </td>\r\n                    <td>\r\n                      <FaTimes\r\n                        style={iconStyle}\r\n                        onClick={e => this.setState({ addVGVisible: true })}\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </TabPanel>\r\n          {/*<TabPanel>\r\n            <b>TODO Circular Giudes</b>\r\n          </TabPanel>*/}\r\n        </Tabs>\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nPanelGuides.propTypes = {\r\n  state: PropTypes.object.isRequired\r\n};\r\n\r\nPanelGuides.contextTypes = {\r\n  translator: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Panel from \"./panel\";\r\nimport {\r\n  MODE_IDLE,\r\n  MODE_2D_ZOOM_IN,\r\n  MODE_2D_ZOOM_OUT,\r\n  MODE_2D_PAN,\r\n  MODE_3D_VIEW,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE,\r\n  MODE_DRAWING_LINE,\r\n  MODE_DRAWING_HOLE,\r\n  MODE_DRAWING_ITEM,\r\n  MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX,\r\n  MODE_DRAGGING_ITEM,\r\n  MODE_DRAGGING_HOLE,\r\n  MODE_FITTING_IMAGE,\r\n  MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM,\r\n  MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  MODE_RESIZE_ITEM_RIGHT_TOP, \r\n  MODE_RESIZE_ITEM_LEFT_BOTTOM, \r\n  MODE_RESIZE_ITEM_LEFT_TOP\r\n} from \"../../constants\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\nimport { MdSearch } from \"react-icons/md\";\r\n\r\nconst VISIBILITY_MODE = {\r\n  MODE_IDLE,\r\n  MODE_2D_ZOOM_IN,\r\n  MODE_2D_ZOOM_OUT,\r\n  MODE_2D_PAN,\r\n  MODE_3D_VIEW,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE,\r\n  MODE_DRAWING_LINE,\r\n  MODE_DRAWING_HOLE,\r\n  MODE_DRAWING_ITEM,\r\n  MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX,\r\n  MODE_DRAGGING_ITEM,\r\n  MODE_DRAGGING_HOLE,\r\n  MODE_FITTING_IMAGE,\r\n  MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM,\r\n  MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  MODE_RESIZE_ITEM_RIGHT_TOP, \r\n  MODE_RESIZE_ITEM_LEFT_BOTTOM, \r\n  MODE_RESIZE_ITEM_LEFT_TOP\r\n};\r\n\r\nconst contentArea = {\r\n  height: \"auto\",\r\n  maxHeight: \"15em\",\r\n  overflowY: \"auto\",\r\n  padding: \"0.25em 1.15em\",\r\n  cursor: \"pointer\",\r\n  marginBottom: \"1em\",\r\n  userSelect: \"none\",\r\n};\r\n\r\nconst elementStyle = {\r\n  width: \"auto\",\r\n  height: \"2.5em\",\r\n  margin: \"0.25em 0.25em 0 0\",\r\n  padding: \"0.5em\",\r\n  textAlign: \"center\",\r\n  display: \"inline-block\",\r\n  border: \"1px solid #CCC\",\r\n  borderRadius: \"0.2em\",\r\n};\r\n\r\nconst elementSelectedStyle = {\r\n  ...elementStyle,\r\n  color: SharedStyle.SECONDARY_COLOR.main,\r\n  borderColor: SharedStyle.SECONDARY_COLOR.main,\r\n};\r\n\r\nconst categoryDividerStyle = {\r\n  paddingBottom: \"0.5em\",\r\n  borderBottom: \"1px solid #888\",\r\n};\r\n\r\nconst tableSearchStyle = { width: \"100%\", marginTop: \"0.8em\" };\r\nconst searchIconStyle = { fontSize: \"1.5em\" };\r\nconst searchInputStyle = {\r\n  fontSize: \"1em\",\r\n  width: \"100%\",\r\n  height: \"1em\",\r\n  padding: \"1em 0.5em\",\r\n};\r\n\r\nexport default class PanelLayerElement extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    let layer = props.layers.get(props.selectedLayer);\r\n    let elements = {\r\n      lines: layer.lines,\r\n      holes: layer.holes,\r\n      items: layer.items,\r\n    };\r\n\r\n    this.state = {\r\n      elements,\r\n      matchString: \"\",\r\n      matchedElements: elements,\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (this.state.matchString !== nextState.matchString) return true;\r\n\r\n    let oldElements = this.state.elements;\r\n    let newElements = nextState.elements;\r\n\r\n    if (\r\n      oldElements.lines.hashCode() !== newElements.lines.hashCode() ||\r\n      oldElements.holes.hashCode() !== newElements.holes.hashCode() ||\r\n      oldElements.items.hashCode() !== newElements.items.hashCode()\r\n    )\r\n      return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    let layer = nextProps.layers.get(nextProps.selectedLayer);\r\n\r\n    if (this.props.layers.hashCode() === nextProps.layers.hashCode()) return;\r\n\r\n    let elements = {\r\n      lines: layer.lines,\r\n      holes: layer.holes,\r\n      items: layer.items,\r\n    };\r\n\r\n    if (this.state.matchString !== \"\") {\r\n      let regexp = new RegExp(this.state.matchString, \"i\");\r\n      let filterCb = (el) => regexp.test(el.get(\"name\"));\r\n\r\n      this.setState({\r\n        matchedElements: {\r\n          elements,\r\n          lines: elements.lines.filter(filterCb),\r\n          holes: elements.holes.filter(filterCb),\r\n          items: elements.items.filter(filterCb),\r\n        },\r\n      });\r\n    } else {\r\n      this.setState({ elements, matchedElements: elements });\r\n    }\r\n  }\r\n\r\n  matcharray(text) {\r\n    if (text === \"\") {\r\n      this.setState({\r\n        matchString: \"\",\r\n        matchedElements: this.state.elements,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let regexp = new RegExp(text, \"i\");\r\n    let filterCb = (el) => regexp.test(el.get(\"name\"));\r\n\r\n    this.setState({\r\n      matchString: text,\r\n      matchedElements: {\r\n        lines: this.state.elements.lines.filter(filterCb),\r\n        holes: this.state.elements.holes.filter(filterCb),\r\n        items: this.state.elements.items.filter(filterCb),\r\n      },\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (!VISIBILITY_MODE[this.props.mode]) return null;\r\n\r\n    let layer = this.props.layers.get(this.props.selectedLayer);\r\n\r\n    return (\r\n      <Panel\r\n        name={this.context.translator.t(\"Elements on layer {0}\", layer.name)}\r\n      >\r\n        <div style={contentArea} onWheel={(e) => e.stopPropagation()}>\r\n          <table style={tableSearchStyle}>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  <MdSearch style={searchIconStyle} />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"text\"\r\n                    style={searchInputStyle}\r\n                    onChange={(e) => {\r\n                      this.matcharray(e.target.value);\r\n                    }}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          {this.state.matchedElements.lines.count() ? (\r\n            <div>\r\n              <p style={categoryDividerStyle}>\r\n                {this.context.translator.t(\"Lines\")}\r\n              </p>\r\n              {this.state.matchedElements.lines\r\n                .entrySeq()\r\n                .map(([lineID, line]) => {\r\n                  return (\r\n                    <div\r\n                      key={lineID}\r\n                      onClick={(e) =>\r\n                        this.context.linesActions.selectLine(layer.id, line.id)\r\n                      }\r\n                      style={\r\n                        line.selected ? elementSelectedStyle : elementStyle\r\n                      }\r\n                    >\r\n                      {line.name}\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          ) : null}\r\n\r\n          {this.state.matchedElements.holes.count() ? (\r\n            <div>\r\n              <p style={categoryDividerStyle}>\r\n                {this.context.translator.t(\"Holes\")}\r\n              </p>\r\n              {this.state.matchedElements.holes\r\n                .entrySeq()\r\n                .map(([holeID, hole]) => {\r\n                  return (\r\n                    <div\r\n                      key={holeID}\r\n                      onClick={(e) =>\r\n                        this.context.holesActions.selectHole(layer.id, hole.id)\r\n                      }\r\n                      style={\r\n                        hole.selected ? elementSelectedStyle : elementStyle\r\n                      }\r\n                    >\r\n                      {hole.name}\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          ) : null}\r\n\r\n          {this.state.matchedElements.items.count() ? (\r\n            <div>\r\n              <p style={categoryDividerStyle}>\r\n                {this.context.translator.t(\"Items\")}\r\n              </p>\r\n              {this.state.matchedElements.items\r\n                .entrySeq()\r\n                .map(([itemID, item]) => {\r\n                  return (\r\n                    <div\r\n                      key={itemID}\r\n                      onClick={(e) =>\r\n                        this.context.itemsActions.selectItem(layer.id, item.id)\r\n                      }\r\n                      style={\r\n                        item.selected ? elementSelectedStyle : elementStyle\r\n                      }\r\n                    >\r\n                      {item.name}\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nPanelLayerElement.propTypes = {\r\n  mode: PropTypes.string.isRequired,\r\n  layers: PropTypes.object.isRequired,\r\n};\r\n\r\nPanelLayerElement.contextTypes = {\r\n  catalog: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst toggleButtonStyle = {\r\n  width: '5.5em',\r\n  color: '#CCC',\r\n  textAlign: 'center',\r\n  cursor: 'pointer',\r\n  userSelect: 'none',\r\n  border: '1px solid transparent',\r\n  margin: '-1px 5px 0 5px',\r\n  borderRadius: '2px',\r\n  display: 'inline-block'\r\n};\r\n\r\nconst toggleButtonStyleOver = {\r\n  ...toggleButtonStyle,\r\n  backgroundColor: '#1c82c6',\r\n  border: '1px solid #FFF',\r\n  color: SharedStyle.COLORS.white\r\n};\r\n\r\nexport default class FooterToggleButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      over: false,\r\n      active: this.props.toggleState || false\r\n    };\r\n  }\r\n\r\n  toggleOver(e) { this.setState({ over: true }); }\r\n  toggleOut(e) { this.setState({ over: false }); }\r\n\r\n  toggle(e) {\r\n    let isActive = !this.state.active;\r\n    this.setState({ active: isActive });\r\n\r\n    if (isActive)\r\n    {\r\n      this.props.toggleOn();\r\n    }\r\n    else\r\n    {\r\n      this.props.toggleOff();\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if( this.state.over != nextState.over ) return true;\r\n    if( this.state.active != nextState.active ) return true;\r\n    if( this.props.toggleState != nextProps.toggleState ) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if( nextProps.toggleState != this.props.toggleState  )\r\n      this.state.active = nextProps.toggleState;\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div\r\n        style={this.state.over || this.state.active ? toggleButtonStyleOver : toggleButtonStyle}\r\n        onMouseOver={e => this.toggleOver(e)}\r\n        onMouseOut={e => this.toggleOut(e)}\r\n        onClick={e => this.toggle(e)}\r\n        title={this.props.title}\r\n      >\r\n        {this.props.text}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFooterToggleButton.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  toggleOn: PropTypes.func.isRequired,\r\n  toggleOff: PropTypes.func.isRequired,\r\n  text: PropTypes.string.isRequired,\r\n  toggleState: PropTypes.bool,\r\n  title: PropTypes.string\r\n};\r\n\r\nFooterToggleButton.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  viewer2DActions: PropTypes.object.isRequired,\r\n  viewer3DActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport {FaTimes as IconClose} from 'react-icons/fa';\r\n\r\nconst labelContainerStyle = {\r\n  width: 'auto',\r\n  display: 'inline-block',\r\n  margin:0,\r\n  padding:'0px 5px 0px 0px'\r\n};\r\n\r\nconst toggleButtonStyle = {\r\n  color: '#CCC',\r\n  textAlign: 'center',\r\n  cursor: 'pointer',\r\n  userSelect: 'none'\r\n};\r\n\r\nconst toggleButtonStyleOver = {\r\n  ...toggleButtonStyle,\r\n  color: SharedStyle.COLORS.white\r\n};\r\n\r\nconst contentContainerStyleActive = {\r\n  position:'fixed',\r\n  width:'calc( 100% - 2px )',\r\n  height:'40%',\r\n  left:0,\r\n  bottom:20,\r\n  backgroundColor:SharedStyle.PRIMARY_COLOR.alt,\r\n  borderTop: SharedStyle.PRIMARY_COLOR.border,\r\n  zIndex:0,\r\n  padding:0,\r\n  margin:0,\r\n  transition:'all 300ms ease'\r\n};\r\n\r\nconst contentContainerStyleInactive = {\r\n  ...contentContainerStyleActive,\r\n  visibility:'hidden',\r\n  height:0\r\n};\r\n\r\nconst contentHeaderStyle = {\r\n  position:'relative',\r\n  width:'100%',\r\n  height:'2em',\r\n  top:0,\r\n  left:0,\r\n  borderBottom:SharedStyle.PRIMARY_COLOR.border\r\n};\r\n\r\nconst titleStyle = {\r\n  position:'relative',\r\n  height:'2em',\r\n  lineHeight:'2em',\r\n  marginLeft:'1em'\r\n};\r\n\r\nconst contentAreaStyle = {\r\n  position:'relative',\r\n  width:'100%',\r\n  height:'calc( 100% - 2em )',\r\n  padding:'1em',\r\n  overflowY:'auto'\r\n};\r\n\r\nconst iconCloseStyleOut = {\r\n  position:'absolute',\r\n  width:'2em',\r\n  height:'2em',\r\n  right:0,\r\n  top:0,\r\n  padding:'0.5em',\r\n  borderLeft:SharedStyle.PRIMARY_COLOR.border,\r\n  cursor:'pointer'\r\n};\r\n\r\nconst iconCloseStyleOver = {\r\n  ...iconCloseStyleOut,\r\n  color:SharedStyle.COLORS.white,\r\n  backgroundColor:SharedStyle.SECONDARY_COLOR.alt\r\n};\r\n\r\nconst iconStyle = {\r\n  width:'15px',\r\n  height:'15px',\r\n  marginTop:'-2px',\r\n  marginRight:'2px'\r\n};\r\n\r\nconst textStyle = {\r\n  position: 'relative'\r\n}\r\n\r\nexport default class FooterContentButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      over: false,\r\n      closeOver: false,\r\n      active: this.props.toggleState || false\r\n    };\r\n  }\r\n\r\n  toggleOver(e) { this.setState({ over: true }); }\r\n  toggleOut(e) { this.setState({ over: false }); }\r\n\r\n  toggle(e) {\r\n    let isActive = !this.state.active;\r\n    this.setState({ active: isActive });\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if( this.state.over != nextState.over ) return true;\r\n    if( this.state.closeOver != nextState.closeOver ) return true;\r\n    if( this.state.active != nextState.active ) return true;\r\n\r\n    if( this.props.content.length != nextProps.content.length ) return true;\r\n    if( this.props.toggleState != nextProps.toggleState ) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if( nextProps.toggleState != this.props.toggleState  )\r\n      this.state.active = nextProps.toggleState;\r\n  }\r\n\r\n  render() {\r\n\r\n    let s = this.state;\r\n    let p = this.props;\r\n\r\n    let LabelIcon = p.icon || null;\r\n    let labelIconStyle = p.iconStyle || {};\r\n    let labelTextStyle = p.textStyle || {};\r\n    let inputTitleStyle = p.titleStyle || {};\r\n\r\n    return (\r\n      <div style={labelContainerStyle}>\r\n        <div\r\n          style={s.over || s.active ? toggleButtonStyleOver : toggleButtonStyle}\r\n          onClick={e => this.toggle(e)}\r\n          title={p.title}\r\n        >\r\n          <LabelIcon style={{...labelIconStyle, ...iconStyle}}/>\r\n          <span style={{...textStyle, ...labelTextStyle}}>{p.text}</span>\r\n        </div>\r\n        <div style={s.active ? contentContainerStyleActive : contentContainerStyleInactive}>\r\n          <div style={contentHeaderStyle}>\r\n            <b style={{...titleStyle, ...inputTitleStyle}}>{p.title}</b>\r\n            <IconClose\r\n              style={ s.closeOver ? iconCloseStyleOver : iconCloseStyleOut}\r\n              onMouseOver={e => this.setState({closeOver:true})}\r\n              onMouseOut={e => this.setState({closeOver:false})}\r\n              onClick={e => this.toggle(e)}\r\n            />\r\n          </div>\r\n          <div style={contentAreaStyle}>\r\n            {p.content}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFooterContentButton.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  text: PropTypes.string.isRequired,\r\n  textStyle: PropTypes.object,\r\n  icon: PropTypes.func,\r\n  iconStyle: PropTypes.object,\r\n  content: PropTypes.array.isRequired,\r\n  toggleState: PropTypes.bool,\r\n  title: PropTypes.string,\r\n  titleStyle: PropTypes.object\r\n};\r\n\r\nFooterContentButton.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  viewer2DActions: PropTypes.object.isRequired,\r\n  viewer3DActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\r\nexport const VERSION = '2.0.6';","module.exports = __webpack_public_path__ + \"catalog/lines/dividerwall/textures/painted.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/dividerwall/textures/painted-normal.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/externalwall/textures/painted.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/externalwall/textures/painted-normal.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/interiorwall/textures/painted.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/interiorwall/textures/painted-normal.jpg\";","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport ContainerDimensions from \"react-container-dimensions\";\r\nimport Immutable, { Map } from \"immutable\";\r\nimport immutableDevtools from \"immutable-devtools\";\r\nimport { createStore } from \"redux\";\r\nimport { Provider as ReduxProvider } from \"react-redux\";\r\nimport { BrowserRouter, Routes, Route, Link } from \"react-router-dom\";\r\n\r\nimport MyCatalog from \"./catalog/mycatalog\";\r\n\r\nimport ToolbarScreenshotButton from \"./ui/toolbar-screenshot-button\";\r\nimport NewProject from \"../../src/components/NewProject\";\r\nimport LoadBluePrint from \"../../src/components/LoadBluePrint\";\r\n\r\nimport {\r\n  Models as PlannerModels,\r\n  reducer as PlannerReducer,\r\n  ReactPlanner,\r\n  Plugins as PlannerPlugins,\r\n} from \"react-planner\"; //react-planner\r\n\r\n//define state\r\nlet AppState = Map({\r\n  \"react-planner\": new PlannerModels.State(),\r\n});\r\n\r\n//define reducer\r\nlet reducer = (state, action) => {\r\n  state = state || AppState;\r\n  state = state.update(\"react-planner\", (plannerState) =>\r\n    PlannerReducer(plannerState, action)\r\n  );\r\n  return state;\r\n};\r\n\r\nlet blackList =\r\n  isProduction === true\r\n    ? []\r\n    : [\"UPDATE_MOUSE_COORDS\", \"UPDATE_ZOOM_SCALE\", \"UPDATE_2D_CAMERA\"];\r\n\r\nif (!isProduction) {\r\n  console.info(\r\n    \"Environment is in development and these actions will be blacklisted\",\r\n    blackList\r\n  );\r\n  console.info(\"Enable Chrome custom formatter for Immutable pretty print\");\r\n  immutableDevtools(Immutable);\r\n}\r\n\r\n//init store\r\nlet store = createStore(\r\n  reducer,\r\n  null,\r\n  !isProduction && window.devToolsExtension\r\n    ? window.devToolsExtension({\r\n        features: {\r\n          pause: true, // start/pause recording of dispatched actions\r\n          lock: true, // lock/unlock dispatching actions and side effects\r\n          persist: true, // persist states on page reloading\r\n          export: true, // export history of actions in a file\r\n          import: \"custom\", // import history of actions from a file\r\n          jump: true, // jump back and forth (time travelling)\r\n          skip: true, // skip (cancel) actions\r\n          reorder: true, // drag and drop actions in the history list\r\n          dispatch: true, // dispatch custom actions or action creators\r\n          test: true, // generate tests for the selected actions\r\n        },\r\n        actionsBlacklist: blackList,\r\n        maxAge: 999999,\r\n      })\r\n    : (f) => f\r\n);\r\n\r\nconst { dispatch, getState } = store;\r\n\r\nlet plugins = [\r\n  PlannerPlugins.Keyboard(),\r\n  PlannerPlugins.Autosave(\"react-planner_v0\"),\r\n  PlannerPlugins.ConsoleDebugger(),\r\n];\r\n\r\nlet toolbarButtons = [ToolbarScreenshotButton];\r\n\r\n//render\r\nReactDOM.render(\r\n  <ReduxProvider store={store}>\r\n    <BrowserRouter>\r\n      <Routes>\r\n        <Route\r\n          path=\"/main\"\r\n          element={\r\n            <ContainerDimensions>\r\n              {({ width, height }) => (\r\n                <ReactPlanner\r\n                  catalog={MyCatalog}\r\n                  width={width}\r\n                  height={height}\r\n                  plugins={plugins}\r\n                  toolbarButtons={toolbarButtons}\r\n                  stateExtractor={(state) => state.get(\"react-planner\")}\r\n                  dispatch={dispatch}\r\n                />\r\n              )}\r\n            </ContainerDimensions>\r\n          }\r\n        />\r\n        <Route\r\n          path=\"/\"\r\n          element={\r\n            <NewProject\r\n              stateExtractor={(state) => state.get(\"react-planner\")}\r\n              plugins={plugins}\r\n              toolbarButtons={toolbarButtons}\r\n              catalog={MyCatalog}\r\n              dispatch={dispatch}\r\n            />\r\n          }\r\n        />\r\n        <Route\r\n          path=\"/load\"\r\n          element={\r\n            <LoadBluePrint\r\n              stateExtractor={(state) => state.get(\"react-planner\")}\r\n              plugins={plugins}\r\n              toolbarButtons={toolbarButtons}\r\n              catalog={MyCatalog}\r\n              dispatch={dispatch}\r\n            />\r\n          }\r\n        />\r\n      </Routes>\r\n    </BrowserRouter>\r\n  </ReduxProvider>,\r\n  document.getElementById(\"app\")\r\n);\r\n","import { Catalog } from \"react-planner\";\r\n\r\nlet catalog = new Catalog();\r\n\r\nimport * as Areas from \"./areas/**/planner-element.jsx\";\r\nimport * as Lines from \"./lines/**/planner-element.jsx\";\r\nimport * as Holes from \"./holes/**/planner-element.jsx\";\r\nimport * as Items from \"./items/**/planner-element.jsx\";\r\n\r\nfor (let x in Areas) catalog.registerElement(Areas[x]);\r\nfor (let x in Lines) catalog.registerElement(Lines[x]);\r\nfor (let x in Holes) catalog.registerElement(Holes[x]);\r\nfor (let x in Items) catalog.registerElement(Items[x]);\r\n\r\ncatalog.registerCategory(\"windows\", \"Windows\", [\r\n  Holes.window,\r\n  Holes.sashWindow,\r\n  Holes.venetianBlindWindow,\r\n  Holes.windowCurtain,\r\n]);\r\ncatalog.registerCategory(\"doors\", \"Doors\", [\r\n  Holes.door,\r\n  Holes.doorDouble,\r\n  Holes.panicDoor,\r\n  Holes.panicDoorDouble,\r\n  Holes.slidingDoor,\r\n]);\r\n\r\nexport default catalog;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormLabel, FormColorInput } from '../../components/style/export';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\nexport default function PropertyColor({value, onUpdate, configs, sourceElement, internalState, state}) {\r\n\r\n  let update = (val) => {\r\n\r\n    if (configs.hook) {\r\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\r\n        return onUpdate(_val);\r\n      });\r\n    }\r\n\r\n    return onUpdate(val);\r\n  };\r\n\r\n  return (\r\n    <table className=\"PropertyColor\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}>\r\n          <FormLabel>{configs.label}</FormLabel>\r\n        </td>\r\n        <td>\r\n          <FormColorInput value={value} onChange={event => update(event.target.value)}/>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nPropertyColor.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport Button from './button';\r\n\r\nconst STYLE = {\r\n  borderColor: \"#adadad\",\r\n  backgroundColor: \"#e6e6e6\"\r\n};\r\n\r\nconst STYLE_HOVER = {\r\n  backgroundColor: \"#d4d4d4\",\r\n  borderColor: \"#8c8c8c\"\r\n};\r\n\r\nexport default function CancelButton({children, ...rest}) {\r\n  return <Button style={STYLE} styleHover={STYLE_HOVER} {...rest}>{children}</Button>\r\n}\r\n","import React from 'react';\r\nimport Button from './button';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst STYLE = {\r\n  borderColor: \"#c12e2a\",\r\n  backgroundColor: \"#c9302c\",\r\n  color: SharedStyle.COLORS.white\r\n};\r\n\r\nconst STYLE_HOVER = {\r\n  backgroundColor: \"#972726\",\r\n  borderColor: \"#c12e2a\",\r\n  color: SharedStyle.COLORS.white\r\n};\r\n\r\nexport default function FormDeleteButton({children, ...rest}) {\r\n  return <Button style={STYLE} styleHover={STYLE_HOVER} {...rest}>{children}</Button>\r\n}\r\n","import React from 'react';\r\n\r\nconst BASE_STYLE = {\r\n  marginBottom: \"16px\"\r\n};\r\n\r\nexport default function FormBlock({children, style, ...rest}) {\r\n  return <div style={{...BASE_STYLE, style}} {...rest}>{children}</div>\r\n}\r\n","import React from 'react';\r\nimport FormTextInput from './form-text-input';\r\n\r\n\r\nconst STYLE = {\r\n  padding: 0,\r\n  border: 0,\r\n};\r\nconst EREG_NUMBER = /^.*$/;\r\n\r\nexport default function FormColorInput({onChange, ...rest}) {\r\n  let onChangeCustom = event => {\r\n    let value = event.target.value;\r\n    if (EREG_NUMBER.test(value)) {\r\n      onChange(event);\r\n    }\r\n  };\r\n\r\n  return <FormTextInput type=\"color\" style={STYLE} onChange={onChangeCustom} autoComplete=\"off\" {...rest}/>;\r\n}\r\n","import React from 'react';\r\n\r\nconst BASE_STYLE = {\r\n  display: \"block\",\r\n  marginBottom: \"5px\"\r\n};\r\n\r\nexport default function FormLabel({children, style, ...rest}) {\r\n  return <label style={{...BASE_STYLE, style}} {...rest}>{children}</label>\r\n}\r\n","import React from 'react';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst BASE_STYLE = {\r\n  display: \"block\",\r\n  width: \"100%\",\r\n  padding: \"0px 4px\",\r\n  fontSize: \"13px\",\r\n  color: SharedStyle.PRIMARY_COLOR.input,\r\n  backgroundColor: SharedStyle.COLORS.white,\r\n  backgroundImage: \"none\",\r\n  border: \"1px solid rgba(0,0,0,.15)\",\r\n  outline: \"none\",\r\n  borderRadius: \"0px\",\r\n  height: \"30px\",\r\n  WebkitAppearance: \"none\",\r\n  WebkitBorderRadius: \"0px\",\r\n  background: `url(\"data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='24' height='24' viewBox='0 0 24 24'><path fill='#444' d='M7.406 7.828l4.594 4.594 4.594-4.594 1.406 1.406-6 6-6-6z'></path></svg>\") #fff`,\r\n  backgroundPosition: \"100% 50%\",\r\n  backgroundRepeat: \"no-repeat\",\r\n};\r\n\r\nexport default function FormSelect({children, style, ...rest}) {\r\n  return <select type=\"text\" style={{...BASE_STYLE, ...style}} {...rest}>{children}</select>;\r\n}\r\n","import React from 'react';\r\nimport ReactRange from '@mapbox/react-range';\r\nimport FormTextInput from './form-text-input';\r\n\r\nconst sliderContainerStyle = {display: 'inline-block', width: '80%', marginRight: '5%'};\r\nconst sliderStyle = { display: 'block', width: '100%', height: '30px' };\r\nconst textContainerStyle = {display: 'inline-block', width: '15%', float: 'right'};\r\nconst textStyle = {height:'34px', textAlign:'center'};\r\n\r\nexport default function FormNumberInput({value, onChange, ...rest}) {\r\n  return (\r\n    <div>\r\n      <div style={sliderContainerStyle}>\r\n        <ReactRange type='range' style={sliderStyle} onChange={onChange} value={value} {...rest}/>\r\n      </div>\r\n\r\n      <div style={textContainerStyle}>\r\n        <FormTextInput value={value} onChange={onChange} style={textStyle}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport Button from './button';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst STYLE = {\r\n  borderColor: \"#415375\",\r\n  backgroundColor: \"#415375\",\r\n  color: SharedStyle.COLORS.white\r\n};\r\n\r\nconst STYLE_HOVER = {\r\n  borderColor: \"#1f3149\",\r\n  backgroundColor: \"#1f3149\",\r\n  color: SharedStyle.COLORS.white\r\n};\r\n\r\nexport default function FormSubmitButton({children, ...rest}) {\r\n  return <Button type=\"submit\" style={STYLE} styleHover={STYLE_HOVER} {...rest}>{children}</Button>\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Seq} from 'immutable';\r\nimport { FormLabel, FormSelect } from '../../components/style/export';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\nexport default function PropertyEnum({value, onUpdate, configs, sourceElement, internalState, state}) {\r\n\r\n  let update = (val) => {\r\n\r\n    if (configs.hook) {\r\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\r\n        return onUpdate(_val);\r\n      });\r\n    }\r\n\r\n    return onUpdate(val);\r\n  };\r\n\r\n  return (\r\n    <table className=\"PropertyEnum\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\r\n        <td>\r\n          <FormSelect value={value} onChange={event => update(event.target.value)}>\r\n            {Seq(configs.values)\r\n              .entrySeq()\r\n              .map(([key, value]) => <option key={key} value={key}>{value}</option>)}\r\n          </FormSelect>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nPropertyEnum.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormLabel, FormNumberInput } from '../../components/style/export';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\nexport default function PropertyNumber({value, onUpdate, onValid, configs, sourceElement, internalState, state}) {\r\n\r\n  let update = (val) => {\r\n    let number = parseFloat(val);\r\n\r\n    if (isNaN(number)) {\r\n      number = 0;\r\n    }\r\n\r\n    if (configs.hook) {\r\n      return configs.hook(number, sourceElement, internalState, state).then(_val => {\r\n        return onUpdate(_val);\r\n      });\r\n    }\r\n\r\n    return onUpdate(number);\r\n  };\r\n\r\n  return (\r\n    <table className=\"PropertyNumber\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\r\n        <td>\r\n          <FormNumberInput\r\n            value={value}\r\n            onChange={event => update(event.target.value)}\r\n            onValid={onValid}\r\n            min={configs.min}\r\n            max={configs.max}/>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n\r\n}\r\n\r\nPropertyNumber.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  onValid: PropTypes.func,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormLabel, Button } from '../../components/style/export';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\n\r\nexport default function PropertyToggle({value, onUpdate, configs, sourceElement, internalState, state}) {\r\n\r\n  let update = (val) => {\r\n\r\n    if (configs.hook) {\r\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\r\n        return onUpdate(_val);\r\n      });\r\n    }\r\n\r\n    return onUpdate(val);\r\n  };\r\n\r\n  return (\r\n    <table className=\"PropertyToggle\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\r\n        <td>\r\n          <Button onClick={e => update(!value)} size=\"small\">{configs.actionName}</Button>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nPropertyToggle.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormLabel } from '../../components/style/export';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\nconst checkboxStyle = {margin: 0};\r\n\r\nexport default function PropertyCheckbox({value, onUpdate, configs, sourceElement, internalState, state}) {\r\n\r\n  let update = (val) => {\r\n\r\n    if (configs.hook) {\r\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\r\n        return onUpdate(_val);\r\n      });\r\n    }\r\n\r\n    return onUpdate(val);\r\n  };\r\n\r\n  return (\r\n    <table className=\"PropertyCheckbox\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\r\n        <td>\r\n          <input style={checkboxStyle} type=\"checkbox\" checked={value} onChange={e => update(!value)}/>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nPropertyCheckbox.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default function PropertyHidden({value, onUpdate, configs, sourceElement, internalState, state}) {\r\n  return null\r\n}\r\n\r\nPropertyHidden.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormLabel } from '../../components/style/export';\r\nimport PropertyStyle from './shared-property-style';\r\n\r\nexport default function PropertyReadOnly({value, onUpdate, configs, sourceElement, internalState, state}) {\r\n  return (\r\n    <table className=\"PropertyReadOnly\" style={PropertyStyle.tableStyle}>\r\n      <tbody>\r\n      <tr>\r\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\r\n        <td>\r\n          <div>{value}</div>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nPropertyReadOnly.propTypes = {\r\n  value: PropTypes.any.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  configs: PropTypes.object.isRequired,\r\n  sourceElement: PropTypes.object,\r\n  internalState: PropTypes.object,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","export default {\r\n  \"+ Add Horizontal Giude\":\"+ Add Horizontal Giude\",\r\n  \"+ Add Vertical Giude\":\"+ Add Vertical Giude\",\r\n  \"2D View\": \"2D View\",\r\n  \"3D First Person\": \"3D First Person\",\r\n  \"3D View\": \"3D View\",\r\n  \"altitude\": \"altitude\",\r\n  \"Altitude\": \"Altitude\",\r\n  \"Areas\":\"Areas\",\r\n  \"Cancel\": \"Cancel\",\r\n  \"Catalog\" : \"Catalog\",\r\n  \"Chain selected Elements to Group\":\"Chain selected Elements to Group\",\r\n  \"Circular\":\"Circular\",\r\n  \"color\":\"color\",\r\n  \"Configure layer\": \"Configure layer\",\r\n  \"Configure project\": \"Configure project\",\r\n  \"Confirm\": \"Confirm\",\r\n  \"Copy\":\"Copy\",\r\n  \"Delete group and all Elements\":\"Delete group and all Elements\",\r\n  \"Delete layer\": \"Delete layer\",\r\n  \"Delete\": \"Delete\",\r\n  \"Elements on layer {0}\": \"Elements on layer {0}\",\r\n  \"Elements\":\"Elements\",\r\n  \"Get Screenshot\" : \"Get Screenshot\",\r\n  \"Group [{0}]\":\"Group [{0}]\",\r\n  \"Group's Barycenter\":\"Group's Barycenter\",\r\n  \"Group's Elements\":\"Group's Elements\",\r\n  \"Groups\":\"Groups\",\r\n  \"Guides\":\"Guides\",\r\n  \"height\": \"height\",\r\n  \"Holes\":\"Holes\",\r\n  \"Horizontal\":\"Horizontal\",\r\n  \"Items\":\"Items\",\r\n  \"Last Selected\":\"Last Selected\",\r\n  \"Layer config\": \"Layer config\",\r\n  \"Layer\":\"Layer\",\r\n  \"Layers\": \"Layers\",\r\n  \"Length\":\"Length\",\r\n  \"Lines\":\"Lines\",\r\n  \"Load project\": \"Load project\",\r\n  \"Mouse X Coordinate\":\"Mouse X Coordinate\",\r\n  \"Mouse Y Coordinate\":\"Mouse Y Coordinate\",\r\n  \"Name\": \"Name\",\r\n  \"New Empty Group\":\"New Empty Group\",\r\n  \"New Group from selected\":\"New Group from selected\",\r\n  \"New layer\": \"New layer\",\r\n  \"New project\": \"New project\",\r\n  \"opacity\": \"opacity\",\r\n  \"Open catalog\": \"Open catalog\",\r\n  \"order\": \"order\",\r\n  \"Pan\": \"Pan\",\r\n  \"Paste\":\"Paste\",\r\n  \"Project config\": \"Project config\",\r\n  \"Properties: [{0}] {1}\": \"Properties: [{0}] {1}\",\r\n  \"Prototype\":\"Prototype\",\r\n  \"Reset\": \"Reset\",\r\n  \"Rotation\" : \"Rotation\",\r\n  \"Save project\": \"Save project\",\r\n  \"Save\": \"Save\",\r\n  \"Scene Zoom Level\":\"Scene Zoom Level\",\r\n  \"Search Element\":\"Search Element\",\r\n  \"Snap to Grid\":\"Snap to Grid\",\r\n  \"Snap to Guide\":\"Snap to Guide\",\r\n  \"Snap to Line\":\"Snap to Line\",\r\n  \"Snap to Point\":\"Snap to Point\",\r\n  \"Snap to Segment\":\"Snap to Segment\",\r\n  \"texture\":\"texture\",\r\n  \"thickness\":\"thickness\",\r\n  \"Toggle Group Visibility\":\"Toggle Group Visibility\",\r\n  \"Un-chain all Group\\'s Elements and remove Group\":\"Un-chain all Group\\'s Elements and remove Group\",\r\n  \"Un-chain Element from Group\":\"Un-chain Element from Group\",\r\n  \"Undo (CTRL-Z)\": \"Undo (CTRL-Z)\",\r\n  \"Unselect\": \"Unselect\",\r\n  \"Vertical\":\"Vertical\",\r\n  \"width\": \"width\",\r\n  \"Would you want to start a new Project?\": \"Would you want to start a new Project?\",\r\n  \"Zoom in\": \"Zoom in\",\r\n  \"Zoom out\": \"Zoom out\"\r\n};\r\n","export default {\r\n  \"+ Add Horizontal Giude\":\"+ Aggiungi Guida Orizzontale\",\r\n  \"+ Add Vertical Giude\":\"+ Aggiungi Guida Verticale\",\r\n  \"2D View\": \"Vista 2D\",\r\n  \"3D First Person\": \"3D Prima persona\",\r\n  \"3D View\": \"Vista 3D\",\r\n  \"Altitude\": \"Quota\",\r\n  \"altitude\": \"Quota\",\r\n  \"Areas\":\"Aree\",\r\n  \"Cancel\": \"Annulla\",\r\n  \"Catalog\" : \"Catalogo\",\r\n  \"Chain selected Elements to Group\":\"Collega l'Elemento selzionato al Gruppo\",\r\n  \"Circular\":\"Circolare\",\r\n  \"color\":\"colore\",\r\n  \"Configure layer\": \"Configura livello\",\r\n  \"Configure project\": \"Configura progetto\",\r\n  \"Confirm\": \"Conferma\",\r\n  \"Copy\":\"Copia\",\r\n  \"Delete group and all Elements\":\"Elimina Gruppo e tutti i suoi Elementi\",\r\n  \"Delete layer\": \"Elimina livello\",\r\n  \"Delete\": \"Elimina\",\r\n  \"Elements on layer {0}\": \"Elementi nel livello {0}\",\r\n  \"Elements\":\"Elementi\",\r\n  \"Get Screenshot\" : \"Cattura uno screenshot\",\r\n  \"Group [{0}]\":\"Gruppo [{0}]\",\r\n  \"Group's Barycenter\":\"Baricentro del Gruppo\",\r\n  \"Group's Elements\":\"Elementi del Gruppo\",\r\n  \"Groups\":\"Gruppi\",\r\n  \"Guides\":\"Guide\",\r\n  \"height\": \"Altezza\",\r\n  \"Holes\":\"Buchi\",\r\n  \"Horizontal\":\"Orizzontale\",\r\n  \"Items\":\"Oggetti\",\r\n  \"Last Selected\":\"Ultimi Selezionati\",\r\n  \"Layer config\": \"Configurazione livello\",\r\n  \"Layer\":\"Livello\",\r\n  \"Layers\": \"Livelli\",\r\n  \"Length\":\"Lunghezza\",\r\n  \"Lines\":\"Linee\",\r\n  \"Load project\": \"Carica progetto\",\r\n  \"Mouse X Coordinate\":\"Coordinata X del Mouse\",\r\n  \"Mouse Y Coordinate\":\"Coordinata Y del Mouse\",\r\n  \"Name\" : \"Nome\",\r\n  \"New Empty Group\":\"Crea Gruppo Vuoto\",\r\n  \"New Group from selected\":\"Crea Gruppo dai selezionati\",\r\n  \"New layer\": \"Nuovo livello\",\r\n  \"New project\": \"Nuovo progetto\",\r\n  \"opacity\": \"Opacit\",\r\n  \"Open catalog\": \"Apri catalogo\",\r\n  \"order\":\"Ordine\",\r\n  \"Pan\": \"Muovi\",\r\n  \"Paste\":\"Incolla\",\r\n  \"Project config\": \"Configurazione progetto\",\r\n  \"Properties: [{0}] {1}\": \"Propriet: [{0}] {1}\",\r\n  \"Prototype\":\"Prototipo\",\r\n  \"Reset\": \"Annulla\",\r\n  \"Rotation\" : \"Rotazione\",\r\n  \"Save project\": \"Salva progetto\",\r\n  \"Save\" : \"Salva\",\r\n  \"Scene Zoom Level\":\"Livello di Zoom della Scena\",\r\n  \"Search Element\":\"Cerca Elemento\",\r\n  \"Snap to Grid\":\"Snap alla Griglia\",\r\n  \"Snap to Guide\":\"Snap alla Guida\",\r\n  \"Snap to Line\":\"Snap alla Linea\",\r\n  \"Snap to Point\":\"Snap al Punto\",\r\n  \"Snap to Segment\":\"Snap al Segmento\",\r\n  \"texture\":\"texture\",\r\n  \"thickness\":\"spessore\",\r\n  \"Toggle Group Visibility\":\"Varia la visibilit del Gruppo\",\r\n  \"Un-chain all Group\\'s Elements and remove Group\":\"Elimina il Gruppo e scollega tutti gli Elementi appartenenti\",\r\n  \"Un-chain Element from Group\":\"Scollega l'Elemento dal Gruppo\",\r\n  \"Undo (CTRL-Z)\": \"Annulla (CTRL-Z)\",\r\n  \"Unselect\": \"Deseleziona\",\r\n  \"Vertical\":\"Verticale\",\r\n  \"width\": \"Larghezza\",\r\n  \"Would you want to start a new Project?\": \"Vuoi iniziare un nuovo progetto?\",\r\n  \"Zoom in\": \"Ingrandisci\",\r\n  \"Zoom out\": \"Riduci\"\r\n};\r\n","export default {\r\n  \"+ Add Horizontal Giude\":\"+   \",\r\n  \"+ Add Vertical Giude\":\"+   \",\r\n  \"2D View\": \" \",\r\n  \"3D First Person\": \"3D   \",\r\n  \"3D View\": \" \",\r\n  \"altitude\": \"\",\r\n  \"Altitude\": \"\",\r\n  \"Areas\": \"\",\r\n  \"Cancel\": \"\",\r\n  \"Catalog\": \"\",\r\n  \"Chain selected Elements to Group\":\"    \",\r\n  \"Circular\":\"\",\r\n  \"color\":\"\",\r\n  \"Configure layer\": \" \",\r\n  \"Configure project\": \" \",\r\n  \"Confirm\": \"\",\r\n  \"Copy\": \"\",\r\n  \"Delete group and all Elements\":\"    \",\r\n  \"Delete layer\": \" \",\r\n  \"Delete\": \"\",\r\n  \"Elements on layer {0}\": \"   {0}\",\r\n  \"Elements\":\"\",\r\n  \"Get Screenshot\": \"  \",\r\n  \"Group [{0}]\":\" [{0}]\",\r\n  \"Group's Barycenter\":\" \",\r\n  \"Group's Elements\":\" \",\r\n  \"Groups\":\"\",\r\n  \"Guides\":\"\",\r\n  \"height\": \"\",\r\n  \"Holes\": \"\",\r\n  \"Horizontal\":\"\",\r\n  \"Items\": \"\",\r\n  \"Last Selected\": \" \",\r\n  \"Layer config\": \" \",\r\n  \"Layer\":\"\",\r\n  \"Layers\": \"\",\r\n  \"Length\": \"\",\r\n  \"Lines\": \"\",\r\n  \"Load project\": \" \",\r\n  \"Mouse X Coordinate\": \"X- \",\r\n  \"Mouse Y Coordinate\": \"Y- \",\r\n  \"Name\": \"\",\r\n  \"New Empty Group\":\"  \",\r\n  \"New Group from selected\":\"   \",\r\n  \"New layer\": \" \",\r\n  \"New project\": \" \",\r\n  \"opacity\": \"\",\r\n  \"Open catalog\": \" \",\r\n  \"order\": \"\",\r\n  \"Pan\": \"\",\r\n  \"Paste\": \"\",\r\n  \"Project config\": \" \",\r\n  \"Properties: [{0}] {1}\": \": [{0}] {1}\",\r\n  \"Prototype\":\" \",\r\n  \"Reset\": \"\",\r\n  \"Rotation\": \"\",\r\n  \"Save project\": \" \",\r\n  \"Save\": \"\",\r\n  \"Scene Zoom Level\": \"  \",\r\n  \"Search Element\": \"\",\r\n  \"Snap to Grid\": \"  \",\r\n  \"Snap to Guide\": \"  \",\r\n  \"Snap to Line\": \"  \",\r\n  \"Snap to Point\": \"  \",\r\n  \"Snap to Segment\": \"  \",\r\n  \"texture\":\"\",\r\n  \"thickness\":\"\",\r\n  \"Toggle Group Visibility\":\"  \",\r\n  \"Un-chain all Group\\'s Elements and remove Group\":\"      \",\r\n  \"Un-chain Element from Group\":\"Unchain Element  \",\r\n  \"Undo (CTRL-Z)\": \"  (CTRL-Z)\",\r\n  \"Unselect\": \" \",\r\n  \"Vertical\":\"\",\r\n  \"width\": \"\",\r\n  \"Would you want to start a new Project?\": \"  ?\",\r\n  \"Zoom in\": \"\",\r\n  \"Zoom out\": \"\"\r\n};\r\n","import {\r\n  PROJECT_ACTIONS,\r\n  VIEWER2D_ACTIONS,\r\n  VIEWER3D_ACTIONS,\r\n  GROUP_ACTIONS,\r\n  ITEMS_ACTIONS,\r\n  HOLE_ACTIONS,\r\n  LINE_ACTIONS,\r\n  AREA_ACTIONS,\r\n  SCENE_ACTIONS,\r\n  VERTEX_ACTIONS\r\n} from '../constants';\r\n\r\nimport {\r\n  ReactPlannerAreasReducer,\r\n  ReactPlannerHolesReducer,\r\n  ReactPlannerItemsReducer,\r\n  ReactPlannerLinesReducer,\r\n  ReactPlannerGroupsReducer,\r\n  ReactPlannerProjectReducer,\r\n  ReactPlannerSceneReducer,\r\n  ReactPlannerVerticesReducer,\r\n  ReactPlannerViewer2dReducer,\r\n  ReactPlannerViewer3dReducer\r\n} from './export';\r\n\r\nimport {State} from '../models';\r\n\r\nexport const initialState = new State();\r\n\r\nexport default function appReducer(state, action) {\r\n  if( PROJECT_ACTIONS[action.type] ) return ReactPlannerProjectReducer(...arguments);\r\n  if( VIEWER2D_ACTIONS[action.type] ) return ReactPlannerViewer2dReducer(...arguments);\r\n  if( VIEWER3D_ACTIONS[action.type] ) return ReactPlannerViewer3dReducer(...arguments);\r\n  if( ITEMS_ACTIONS[action.type] ) return ReactPlannerItemsReducer(...arguments);\r\n  if( HOLE_ACTIONS[action.type] ) return ReactPlannerHolesReducer(...arguments);\r\n  if( LINE_ACTIONS[action.type] ) return ReactPlannerLinesReducer(...arguments);\r\n  if( AREA_ACTIONS[action.type] ) return ReactPlannerAreasReducer(...arguments);\r\n  if( GROUP_ACTIONS[action.type] ) return ReactPlannerGroupsReducer(...arguments);\r\n  if( SCENE_ACTIONS[action.type] ) return ReactPlannerSceneReducer(...arguments);\r\n  if( VERTEX_ACTIONS[action.type] ) return ReactPlannerVerticesReducer(...arguments);\r\n\r\n  return state || initialState;\r\n};\r\n","import { Area } from '../class/export';\r\nimport { SELECT_AREA } from '../constants';\r\n\r\nexport default function (state, action) {\r\n  switch (action.type) {\r\n    case SELECT_AREA:\r\n      return Area.select(state, action.layerID, action.areaID).updatedState;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { Map, List } from \"immutable\";\r\nimport {\r\n  MODE_VIEWING_CATALOG,\r\n  MODE_CONFIGURING_PROJECT,\r\n  MODE_IDLE,\r\n} from \"../constants\";\r\nimport { State, Catalog } from \"../models\";\r\nimport { history } from \"../utils/export\";\r\nimport {\r\n  Layer,\r\n  Group,\r\n  Line,\r\n  Hole,\r\n  Item,\r\n  HorizontalGuide,\r\n  VerticalGuide,\r\n} from \"../class/export\";\r\n\r\nclass Project {\r\n  static setAlterate(state) {\r\n    return { updatedState: state.set(\"alterate\", !state.alterate) };\r\n  }\r\n\r\n  static openCatalog(state) {\r\n    state = this.setMode(state, MODE_VIEWING_CATALOG).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static newProject(state) {\r\n    state = new State({ viewer2D: state.get(\"viewer2D\") });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static loadProject(state, sceneJSON) {\r\n    state = new State({ scene: sceneJSON, catalog: state.catalog.toJS() });\r\n    console.log(\"loadProject\", state.catalog.toJS());\r\n    // parsing svg\r\n    state = Layer.detectAndUpdateAreas(state, \"layer-1\").updatedState;\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setProperties(state, layerID, properties) {\r\n    state = Layer.setPropertiesOnSelected(\r\n      state,\r\n      layerID,\r\n      properties\r\n    ).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateProperties(state, layerID, properties) {\r\n    state = Layer.updatePropertiesOnSelected(\r\n      state,\r\n      layerID,\r\n      properties\r\n    ).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setItemsAttributes(state, attributes) {\r\n    //TODO apply only to items\r\n    state.getIn([\"scene\", \"layers\"]).forEach((layer) => {\r\n      state = Layer.setAttributesOnSelected(\r\n        state,\r\n        layer.id,\r\n        attributes\r\n      ).updatedState;\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setLinesAttributes(state, attributes) {\r\n    //TODO apply only to lines\r\n    state.getIn([\"scene\", \"layers\"]).forEach((layer) => {\r\n      state = Layer.setAttributesOnSelected(\r\n        state,\r\n        layer.id,\r\n        attributes\r\n      ).updatedState;\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setHolesAttributes(state, attributes) {\r\n    //TODO apply only to holes\r\n    state.getIn([\"scene\", \"layers\"]).forEach((layer) => {\r\n      state = Layer.setAttributesOnSelected(\r\n        state,\r\n        layer.id,\r\n        attributes\r\n      ).updatedState;\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static unselectAll(state) {\r\n    state.getIn([\"scene\", \"layers\"]).forEach(({ id: layerID }) => {\r\n      state = Layer.unselectAll(state, layerID).updatedState;\r\n    });\r\n    state.getIn([\"scene\", \"groups\"]).forEach((group) => {\r\n      state = Group.unselect(state, group.get(\"id\")).updatedState;\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove(state) {\r\n    let selectedLayer = state.getIn([\"scene\", \"selectedLayer\"]);\r\n    let {\r\n      lines: selectedLines,\r\n      holes: selectedHoles,\r\n      items: selectedItems,\r\n    } = state.getIn([\"scene\", \"layers\", selectedLayer, \"selected\"]);\r\n\r\n    state = Layer.unselectAll(state, selectedLayer).updatedState;\r\n\r\n    selectedLines.forEach((lineID) => {\r\n      state = Line.remove(state, selectedLayer, lineID).updatedState;\r\n    });\r\n    selectedHoles.forEach((holeID) => {\r\n      state = Hole.remove(state, selectedLayer, holeID).updatedState;\r\n    });\r\n    selectedItems.forEach((itemID) => {\r\n      state = Item.remove(state, selectedLayer, itemID).updatedState;\r\n    });\r\n\r\n    state = Layer.detectAndUpdateAreas(state, selectedLayer).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static undo(state) {\r\n    let sceneHistory = state.sceneHistory;\r\n    if (state.scene === sceneHistory.last && sceneHistory.list.size > 1) {\r\n      sceneHistory = history.historyPop(sceneHistory);\r\n    }\r\n\r\n    state = state.merge({\r\n      mode: MODE_IDLE,\r\n      scene: sceneHistory.last,\r\n      sceneHistory: history.historyPop(sceneHistory),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static rollback(state) {\r\n    let sceneHistory = state.sceneHistory;\r\n\r\n    if (!sceneHistory.last && sceneHistory.list.isEmpty()) {\r\n      return { updatedState: state };\r\n    }\r\n\r\n    state = this.unselectAll(state).updatedState;\r\n\r\n    state = state.merge({\r\n      mode: MODE_IDLE,\r\n      scene: sceneHistory.last,\r\n      sceneHistory: history.historyPush(sceneHistory, sceneHistory.last),\r\n      snapElements: new List(),\r\n      activeSnapElement: null,\r\n      drawingSupport: new Map(),\r\n      draggingSupport: new Map(),\r\n      rotatingSupport: new Map(),\r\n      resizeSupport: new Map(),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setProjectProperties(state, properties) {\r\n    let scene = state.scene.merge(properties);\r\n    state = state.merge({\r\n      mode: MODE_IDLE,\r\n      scene,\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static openProjectConfigurator(state) {\r\n    state = state.merge({\r\n      mode: MODE_CONFIGURING_PROJECT,\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static initCatalog(state, catalog) {\r\n    state = state.set(\"catalog\", new Catalog(catalog));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateMouseCoord(state, coords) {\r\n    state = state.set(\"mouse\", new Map(coords));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateZoomScale(state, scale) {\r\n    state = state.set(\"zoom\", scale);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static toggleSnap(state, mask) {\r\n    state = state.set(\"snapMask\", mask);\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static throwError(state, error) {\r\n    state = state.set(\r\n      \"errors\",\r\n      state.get(\"errors\").push({\r\n        date: Date.now(),\r\n        error,\r\n      })\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static throwWarning(state, warning) {\r\n    state = state.set(\r\n      \"warnings\",\r\n      state.get(\"warnings\").push({\r\n        date: Date.now(),\r\n        warning,\r\n      })\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static copyProperties(state, properties) {\r\n    state = state.set(\"clipboardProperties\", properties);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static pasteProperties(state) {\r\n    state = this.updateProperties(\r\n      state,\r\n      state.getIn([\"scene\", \"selectedLayer\"]),\r\n      state.get(\"clipboardProperties\")\r\n    ).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static pushLastSelectedCatalogElementToHistory(state, element) {\r\n    let currHistory = state.selectedElementsHistory;\r\n\r\n    let previousPosition = currHistory.findIndex(\r\n      (el) => el.name === element.name\r\n    );\r\n    if (previousPosition !== -1) {\r\n      currHistory = currHistory.splice(previousPosition, 1);\r\n    }\r\n    currHistory = currHistory.splice(0, 0, element);\r\n\r\n    state = state.set(\"selectedElementsHistory\", currHistory);\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static changeCatalogPage(state, oldPage, newPage) {\r\n    state = state\r\n      .setIn([\"catalog\", \"page\"], newPage)\r\n      .updateIn([\"catalog\", \"path\"], (path) => path.push(oldPage));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static goBackToCatalogPage(state, newPage) {\r\n    let pageIndex = state.catalog.path.findIndex((page) => page === newPage);\r\n    state = state\r\n      .setIn([\"catalog\", \"page\"], newPage)\r\n      .updateIn([\"catalog\", \"path\"], (path) => path.take(pageIndex));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setMode(state, mode) {\r\n    state = state.set(\"mode\", mode);\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static addHorizontalGuide(state, coordinate) {\r\n    state = HorizontalGuide.create(state, coordinate).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static addVerticalGuide(state, coordinate) {\r\n    state = VerticalGuide.create(state, coordinate).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static addCircularGuide(state, x, y, radius) {\r\n    console.log(\"adding horizontal guide at\", x, y, radius);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeHorizontalGuide(state, guideID) {\r\n    state = HorizontalGuide.remove(state, guideID).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeVerticalGuide(state, guideID) {\r\n    state = VerticalGuide.remove(state, guideID).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeCircularGuide(state, guideID) {\r\n    console.log(\"removeing horizontal guide \", guideID);\r\n\r\n    return { updatedState: state };\r\n  }\r\n}\r\n\r\nexport { Project as default };\r\n","import Graph from './graph';\r\nimport getEdgesOfSubgraphs from './get-edges-of-subgraphs';\r\nimport graphCycles from './graph-cycles';\r\nimport {List} from 'immutable';\r\n\r\nexport function calculateInnerCycles(verticesArray, edgesArray) {\r\n  let innerCycles = new List();\r\n\r\n  let graph = new Graph(verticesArray.length);\r\n  edgesArray.forEach(line => {\r\n    graph.addEdge(line[0], line[1]);\r\n    graph.addEdge(line[1], line[0]);\r\n  });\r\n\r\n  graph.BCC();\r\n\r\n  let subgraphs = graph.subgraphs.filter(subgraph => subgraph.length >= 3);\r\n  let edgesOfSubgraphsArray = getEdgesOfSubgraphs(subgraphs, graph);\r\n\r\n  let edges = [];\r\n  edgesOfSubgraphsArray.forEach(es => {\r\n    es.forEach(edge => edges.push(edge))\r\n  });\r\n\r\n  let cycles = graphCycles(verticesArray, edges);\r\n  cycles.v_cycles.forEach(cycle => {\r\n    cycle.shift();\r\n    innerCycles = innerCycles.push(cycle);\r\n  });\r\n\r\n  return innerCycles;\r\n}\r\n\r\nexport function isClockWiseOrder(innerCycleWithCoords) {\r\n  // See: https://stackoverflow.com/a/1165943 and http://blog.element84.com/polygon-winding.html\r\n\r\n  let i = 0;\r\n  let twiceEnclosedArea = 0;\r\n  let size = innerCycleWithCoords.size;\r\n\r\n  for (i = 0; i < size; i++) {\r\n\r\n    let { x: x1, y: y1 } = innerCycleWithCoords.get(i);\r\n    let { x: x2, y: y2 } = innerCycleWithCoords.get((i + 1) % size);\r\n\r\n    twiceEnclosedArea += (x2 - x1) * (y2 + y1);\r\n  }\r\n\r\n  return twiceEnclosedArea > 0;\r\n}\r\n","//JS porting of this code http://www.geeksforgeeks.org/biconnected-components/\r\n\r\nfunction create_array(length) {\r\n  let array = [];\r\n  for (let i = 0; i < length; ++i) {\r\n    array.push([]);\r\n  }\r\n  return array;\r\n}\r\n\r\n\r\nclass Edge {\r\n  constructor(u, v) {\r\n    this.u = u;\r\n    this.v = v;\r\n  }\r\n}\r\n\r\nclass Graph {\r\n\r\n  constructor(v) {\r\n    this.count = 0; // count is number of biconnected components\r\n    this.subgraphs = []; //biconnected components\r\n    this.time = 0;  // time is used to find discovery times\r\n\r\n    this.V = v;     // No. of vertices\r\n    this.E = 0;     // No. of Edges\r\n    this.adj = [];  // Adjacency List\r\n\r\n    this.adj = create_array(v);\r\n  }\r\n\r\n  //Function to add an edge into the graph\r\n  addEdge(v, w) {\r\n    this.adj[v].push(w);\r\n    this.E++;\r\n  }\r\n\r\n  // A recursive function that finds and prints strongly connected\r\n  // components using DFS traversal\r\n  // u --> The vertex to be visited next\r\n  // disc[] --> Stores discovery times of visited vertices\r\n  // low[] -- >> earliest visited vertex (the vertex with minimum\r\n  //             discovery time) that can be reached from subtree\r\n  //             rooted with current vertex\r\n  // *st -- >> To store visited edges\r\n  // // A recursive function that finds and prints strongly connected\r\n  // components using DFS traversal\r\n  // u --> The vertex to be visited next\r\n  // disc[] --> Stores discovery times of visited vertices\r\n  // low[] -- >> earliest visited vertex (the vertex with minimum\r\n  //             discovery time) that can be reached from subtree\r\n  //             rooted with current vertex\r\n  // *st -- >> To store visited edges\r\n  _BCCUtil(u, disc, low, st, parent) {\r\n    // Initialize discovery time and low value\r\n    disc[u] = low[u] = ++this.time;\r\n    this.children = 0;\r\n\r\n    // Go through all vertices adjacent to this\r\n    // v is current adjacent of 'u'\r\n    this.adj[u].forEach(v => {\r\n\r\n      // If v is not visited yet, then recur for it\r\n      if (disc[v] == -1) {\r\n        this.children++;\r\n        parent[v] = u;\r\n\r\n        // store the edge in stack\r\n        st.push(new Edge(u, v));\r\n        this._BCCUtil(v, disc, low, st, parent);\r\n\r\n        // Check if the subtree rooted with 'v' has a\r\n        // connection to one of the ancestors of 'u'\r\n        // Case 1 -- per Strongly Connected Components Article\r\n        if (low[u] > low[v])\r\n          low[u] = low[v];\r\n\r\n        // If u is an articulation point,\r\n        // pop all edges from stack till u -- v\r\n        if ((disc[u] == 1 && this.children > 1) || (disc[u] > 1 && low[v] >= disc[u])) {\r\n          let subgraph = [];\r\n          while (st[st.length - 1].u != u || st[st.length - 1].v != v) {\r\n            subgraph.push(st[st.length - 1]);\r\n            //console.log(st[st.length - 1].u + \"--\" + st[st.length - 1].v + \" \");\r\n            st.splice(st.length - 1, 1);\r\n          }\r\n\r\n          subgraph.push(st[st.length - 1]);\r\n          //console.log(st[st.length - 1].u + \"--\" + st[st.length - 1].v + \" \");\r\n          this.subgraphs.push(subgraph);\r\n          subgraph = [];\r\n          //console.log()\r\n          st.splice(st.length - 1, 1);\r\n\r\n          this.count++;\r\n        }\r\n      }\r\n\r\n      // Update low value of 'u' only of 'v' is still in stack\r\n      // (i.e. it's a back edge, not cross edge).\r\n      // Case 2 -- per Strongly Connected Components Article\r\n      else if (v != parent[u] && disc[v] < low[u]) {\r\n        if (low[u] > disc[v])\r\n          low[u] = disc[v];\r\n        st.push(new Edge(u, v));\r\n      }\r\n    })\r\n  }\r\n\r\n  BCC() {\r\n    let V = this.V;\r\n    let disc = create_array(V);\r\n    let low = create_array(V);\r\n    let parent = create_array(V);\r\n    let st = [];\r\n\r\n    // Initialize disc and low, and parent arrays\r\n    for (let i = 0; i < V; i++) {\r\n      disc[i] = -1;\r\n      low[i] = -1;\r\n      parent[i] = -1;\r\n    }\r\n\r\n    for (let i = 0; i < V; i++) {\r\n      if (disc[i] == -1)\r\n        this._BCCUtil(i, disc, low, st, parent);\r\n\r\n      let j = 0;\r\n\r\n      // If stack is not empty, pop all edges from stack\r\n      let subgraph = [];\r\n      while (st.length > 0) {\r\n        j = 1;\r\n        subgraph.push(st[st.length - 1]);\r\n        //console.log(st[st.length - 1].u + \"--\" + st[st.length - 1].v + \" \");\r\n        st.splice(st.length - 1, 1);\r\n      }\r\n\r\n      if (j == 1) {\r\n        this.subgraphs.push(subgraph);\r\n        subgraph = [];\r\n        //console.log();\r\n        this.count++;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = Graph;\r\n","function getEdgesOfSubgraphs(subgraphs, graph) {\r\n\r\n    let edges = [];\r\n\r\n    subgraphs.forEach(component => {\r\n        edges.push([]);\r\n        let vertices = getVerticesFromBiconnectedComponent(component);\r\n        let inserted = [];\r\n        vertices.forEach(vertex => {\r\n            let adjacents = graph.adj[vertex];\r\n            adjacents.forEach(adj => {\r\n                if (vertex <= adj && vertices.has(adj)) {\r\n                    edges[edges.length - 1].push([vertex,adj]);\r\n                }\r\n            });\r\n        });\r\n    });\r\n    return edges;\r\n\r\n}\r\n\r\nfunction getVerticesFromBiconnectedComponent(component) {\r\n    let vertices = new Set();\r\n    component.forEach(edge => {\r\n        vertices.add(edge.u);\r\n        vertices.add(edge.v);\r\n    });\r\n    return vertices;\r\n}\r\n\r\nmodule.exports = getEdgesOfSubgraphs;\r\n","/**\r\n * UTILS\r\n */\r\n\r\nfunction sub (v1, v2) {\r\n  return [v1[0] - v2[0], v1[1] - v2[1]]\r\n}\r\n\r\nfunction mod (n, m) {\r\n  return ((n % m) + m) % m\r\n}\r\n\r\n/**\r\n * CYCLES\r\n */\r\n\r\nfunction compute_ev_mapping (EV) {\r\n  let ev_mapping = EV.map(function (ev) {\r\n    return {\r\n      ev: ev,\r\n      color: 0,\r\n      direction: -1\r\n    }\r\n  })\r\n\r\n  return ev_mapping\r\n}\r\n\r\nfunction compute_angle (P, V) {\r\n  let point = sub(V, P)\r\n  let angle = Math.atan2(point[1], point[0])\r\n  return angle\r\n}\r\n\r\nfunction compute_incidences (V, EV) {\r\n  let incidences = V.map(function (vertex, i) {\r\n    let incidence = []\r\n    EV.forEach(function (edge, j) {\r\n      let endpoint\r\n      let position\r\n\r\n      if (edge[0] === i) {\r\n        endpoint = edge[1]\r\n        position = 1\r\n      }\r\n\r\n      if (edge[1] === i) {\r\n        endpoint = edge[0]\r\n        position = 0\r\n      }\r\n\r\n      endpoint !== undefined && incidence.push({\r\n        index: j,\r\n        endpoint: endpoint,\r\n        angle: compute_angle(vertex, V[endpoint]),\r\n        edge: edge,\r\n        position: position\r\n      })\r\n    })\r\n\r\n    incidence.sort(function (i1, i2) {\r\n      return i2.angle - i1.angle\r\n    })\r\n\r\n    return incidence\r\n  })\r\n\r\n  return incidences\r\n}\r\n\r\nfunction get_starting_edge (incidences, ev_mapping) {\r\n  let e\r\n  let position\r\n  let direction\r\n  for (e = 0; e < ev_mapping.length; e += 1) {\r\n    if (ev_mapping[e].color < 2) {\r\n      direction = -1 * ev_mapping[e].direction\r\n      color(ev_mapping, e, direction)\r\n      return {\r\n        edge: e,\r\n        direction: direction,\r\n        position: direction === -1 ? 0 : 1\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction get_next_edge (incidences, edge, position, EV) {\r\n  let items = incidences[EV[edge][position]]\r\n  //console.log(items, incidences, EV, edge, position);\r\n  let n_items = items.length\r\n  let item\r\n  let out\r\n  let j\r\n  for (j = 0; j < n_items; j += 1) {\r\n    item = items[j]\r\n    if (item.index === edge) {\r\n      out = items[mod(j + 1, items.length)]\r\n      return {\r\n        edge: out.index,\r\n        vertex: out.endpoint,\r\n        position: out.position,\r\n        direction: out.position ? 1 : -1\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction color (ev_mapping, index, direction) {\r\n  ev_mapping[index].color += 1\r\n  ev_mapping[index].direction = direction\r\n}\r\n\r\nfunction find_cycles (V, EV) {\r\n  let ev_mapping = compute_ev_mapping(EV)\r\n  let incidences = compute_incidences(V, EV)\r\n  let V_cycles = []\r\n  let E_cycles = []\r\n  let dir_E_cycles = []\r\n  let V_cycle\r\n  let E_cycle\r\n  let dir_E_cycle\r\n  let next\r\n  let counter = 0\r\n  let start = get_starting_edge(incidences, ev_mapping)\r\n\r\n  while (start !== undefined) {\r\n    V_cycle = [EV[start.edge][mod(start.position + 1, 2)], EV[start.edge][start.position]]\r\n    E_cycle = [start.edge]\r\n    dir_E_cycle = [start.direction]\r\n    next = get_next_edge(incidences, start.edge, start.position, EV)\r\n    while (next.edge !== start.edge) {\r\n      V_cycle.push(next.vertex)\r\n      E_cycle.push(next.edge)\r\n      dir_E_cycle.push(next.direction)\r\n      color(ev_mapping, next.edge, next.direction)\r\n      next = get_next_edge(incidences, next.edge, next.position, EV)\r\n    }\r\n    E_cycles.push(E_cycle)\r\n    V_cycles.push(V_cycle)\r\n    dir_E_cycles.push(dir_E_cycle)\r\n\r\n    //console.log('############## CYCLE ', ++counter)\r\n    //console.log('EDGES:', E_cycle)\r\n    //console.log('VERTICES:', V_cycle)\r\n    //console.log('START', 'edge:', start.edge, 'position:', start.position)\r\n    //console.log('COUNTER:', ev_mapping.map(e => e.color), ev_mapping.map(e => e.color).reduce((a, b) => a + b));\r\n    //console.log('\\n')\r\n\r\n    start = get_starting_edge(incidences, ev_mapping)\r\n  }\r\n\r\n  return {\r\n    v_cycles: V_cycles,\r\n    e_cycles: E_cycles,\r\n    dir_e_cycles: dir_E_cycles,\r\n    ev_mapping: ev_mapping\r\n  }\r\n}\r\n\r\nfunction find_short_cycles_indexes (v_cycles, e_cycles) {\r\n  let indexes = [];\r\n  let e_cycle;\r\n  let v_cycle;\r\n  let i;\r\n\r\n  for (i = 0; i < e_cycles.length; i += 1) {\r\n    e_cycle = e_cycles[i];\r\n    v_cycle = v_cycles[i];\r\n    if ((e_cycle.length < 3) || (v_cycle[0] !== v_cycle[v_cycle.length - 1])) {\r\n      indexes.push(i);\r\n    }\r\n  }\r\n\r\n  return indexes;\r\n}\r\n\r\nfunction find_inner_cycles (V, EV) {\r\n  let cycles = find_cycles(V, EV);\r\n  let v_cycles = cycles.v_cycles;\r\n  let e_cycles = cycles.e_cycles;\r\n  let short_cycles_indexes = find_short_cycles_indexes(v_cycles, e_cycles);\r\n  short_cycles_indexes.forEach(indx => {\r\n    v_cycles.splice(indx, 1);\r\n    e_cycles.splice(indx, 1);\r\n  })\r\n  let dir_e_cycles = cycles.dir_e_cycles;\r\n  let rooms_values = cycles.e_cycles.map((cycle, i) => cycle.map(function (edge, j) {\r\n    let v1;\r\n    let v2;\r\n\r\n    let dir = dir_e_cycles[i][j] > 0\r\n\r\n    if (dir > 0) {\r\n      v1 = EV[edge][0];\r\n      v2 = EV[edge][1];\r\n    } else {\r\n      v1 = EV[edge][1];\r\n      v2 = EV[edge][0];\r\n    }\r\n\r\n    return (V[v2][0]  - V[v1][0]) * (V[v2][1] + V[v1][1]);\r\n  }));\r\n\r\n  let rooms_sums = rooms_values.map(room => room.reduce((a, b) => a + b))\r\n\r\n  let positive_count = rooms_sums.filter(sum => sum > 0).length;\r\n  let negative_count = rooms_sums.length - positive_count;\r\n\r\n  let rm_neg =  positive_count >= negative_count ? 1 : -1;\r\n\r\n  return {\r\n    v_cycles: cycles.v_cycles.filter((v, i) => (rm_neg * rooms_sums[i]) > 0 ),\r\n    e_cycles: cycles.e_cycles.filter((v, i) => (rm_neg * rooms_sums[i]) > 0 ),\r\n    ev_mapping: cycles.ev_mapping\r\n  }\r\n}\r\n\r\n// export default find_inner_cycles;\r\nmodule.exports = find_inner_cycles\r\n\r\n/**\r\n* DATA\r\n*/\r\n\r\n// let V = [[0.5774, 1.0], [1.0, 1.0], [1.1547, 0.0], [1.0, 0.0], [0.0, 0.0], [0.0, 0.732], [1.0, 0.1547], [0.732, 0.0], [1.0491, 0.183], [-0.317, 0.549], [1.0, 0.268], [0.183, -0.3169], [0.5491, 1.049], [0.4642, 1.0], [0.0, -0.4226], [0.0, 1.0]]\r\n// let EV = [[0, 1], [2, 3], [5, 4], [7, 6], [2, 8], [3, 6], [4, 9], [0, 10], [9, 5], [8, 10], [7, 11], [12, 13], [6, 8], [6, 10], [4, 7], [4, 11], [4, 14], [5, 15], [11, 14], [0, 12], [13, 15], [0, 13], [1, 10], [3, 7], [5, 13]]\r\n\r\n// let V = [[0,0],[10,0],[10,10],[0,10], [100,100],[110,100],[110,110],[100,110], [5,0], [5,10]]\r\n// let V = [[0,0.5],[12,-0.7],[14,14],[-2,10], [103,106],[117,98],[96,112],[104,109], [5.5,0.8], [4.8,10.5]]\r\n// let EV = [[3,9],[9,2],[2,1],[1,8],[8,0],[0,3],[8,9]] // IT WORKS\r\n// let EV = [[3,9],[9,2],[2,1],[1,8],[8,0],[0,3],[8,9], [5,6], [6,7], [2,5]] // IT DOESN'T WORK\r\n// let EV = [[3,2],[2,1],[1,0],[0,3]] // IT WORKS\r\n// let EV = [[2,3],[1,2],[0,1],[3,0]] // IT WORKS\r\n// let EV = [[2,3],[1,2],[0,1],[3,0],[6,7],[5,6],[4,5],[7,4]] // IT WORKS\r\n// let EV = [[3,2],[2,1],[1,0],[0,3],[7,6],[6,5],[5,4],[4,7]] // IT WORKS\r\n\r\n// let V = [[2,5],[5,6],[10,6.8],[23,8],[9.6,11.3],[20,15],[25,16],[29,18],[30,22],[4,11],[6,10],[24,25],[18,20],[27,7]]\r\n// let EV = [[0,1],[10,0],[9,10],[9,1],[1,2],[4,2],[3,13],[2,3],[4,5],[5,6],[6,7],[12,5],[12,11],[11,6],[11,8],[7,8],[9,4]]\r\n\r\n/**\r\n* MAIN\r\n*/\r\n\r\n// let cycles_data = find_inner_cycles(V, EV)\r\n// console.log('############## OUTPUT')\r\n// console.log('EDGES:')\r\n// console.log(cycles_data.e_cycles)\r\n// console.log('\\n')\r\n// console.log('VERTICES:')\r\n// console.log(cycles_data.v_cycles)\r\n// console.log('\\n')\r\n// console.log(cycles_data.ev_mapping.every(m => m.color === 2))\r\n\r\n","import {\r\n  SNAP_POINT,\r\n  SNAP_LINE,\r\n  SNAP_SEGMENT,\r\n  SNAP_GRID,\r\n  SNAP_GUIDE,\r\n  addPointSnap,\r\n  addLineSnap,\r\n  addLineSegmentSnap,\r\n  addGridSnap\r\n} from './snap';\r\nimport { GeometryUtils } from './export';\r\nimport { Map, List } from 'immutable';\r\n\r\nexport function sceneSnapElements(scene, snapElements = new List(), snapMask = new Map()) {\r\n\r\n  let { width, height } = scene;\r\n\r\n  let a, b, c;\r\n  return snapElements.withMutations(snapElements => {\r\n    scene.layers.forEach(layer => {\r\n\r\n      let { lines, vertices } = layer;\r\n\r\n      vertices.forEach(({ id: vertexID, x, y }) => {\r\n\r\n        if (snapMask.get(SNAP_POINT)) {\r\n          addPointSnap(snapElements, x, y, 10, 10, vertexID);\r\n        }\r\n\r\n        if (snapMask.get(SNAP_LINE)) {\r\n          ({ a, b, c } = GeometryUtils.horizontalLine(y));\r\n          addLineSnap(snapElements, a, b, c, 10, 1, vertexID);\r\n          ({ a, b, c } = GeometryUtils.verticalLine(x));\r\n          addLineSnap(snapElements, a, b, c, 10, 1, vertexID);\r\n        }\r\n\r\n      });\r\n\r\n      if (snapMask.get(SNAP_SEGMENT)) {\r\n        lines.forEach(({ id: lineID, vertices: [v0, v1] }) => {\r\n          let { x: x1, y: y1 } = vertices.get(v0);\r\n          let { x: x2, y: y2 } = vertices.get(v1);\r\n\r\n          addLineSegmentSnap(snapElements, x1, y1, x2, y2, 20, 1, lineID);\r\n        });\r\n      }\r\n\r\n    });\r\n\r\n    if (snapMask.get(SNAP_GRID)) {\r\n      let divider = 5;\r\n      let gridCellSize = 100 / divider;\r\n      let xCycle = width / gridCellSize;\r\n      let yCycle = height / gridCellSize;\r\n\r\n      for (let x = 0; x < xCycle; x++) {\r\n        let xMul = x * gridCellSize;\r\n\r\n        for (let y = 0; y < yCycle; y++) {\r\n          let yMul = y * gridCellSize;\r\n\r\n          let onXCross = !(x % divider) ? true : false;\r\n          let onYCross = !(y % divider) ? true : false;\r\n\r\n          addGridSnap(snapElements, xMul, yMul, 10, onXCross && onYCross ? 15 : 10, null);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (snapMask.get(SNAP_GUIDE)) {\r\n\r\n      let horizontal = scene.getIn(['guides', 'horizontal']);\r\n      let vertical = scene.getIn(['guides', 'vertical']);\r\n\r\n      let hValues = horizontal.valueSeq();\r\n      let vValues = vertical.valueSeq();\r\n\r\n      hValues.forEach(hVal => {\r\n        vValues.forEach(vVal => {\r\n          addPointSnap(snapElements, vVal, hVal, 10, 10);\r\n        });\r\n      });\r\n\r\n      hValues.forEach(hVal => addLineSegmentSnap(snapElements, 0, hVal, width, hVal, 20, 1));\r\n      vValues.forEach(vVal => addLineSegmentSnap(snapElements, vVal, 0, vVal, height, 20, 1));\r\n\r\n    }\r\n\r\n  })\r\n}\r\n","import { Map } from 'immutable';\r\nimport diff from 'immutablediff';\r\nimport patch from 'immutablepatch';\r\n\r\nexport const historyPush = (historyStructure, item) => {\r\n  if (historyStructure.last) {\r\n    if (historyStructure.last.hashCode() !== item.hashCode()) {\r\n      let toPush = new Map({\r\n        time: Date.now(),\r\n        diff: diff(historyStructure.last, item)\r\n      });\r\n\r\n      historyStructure = historyStructure\r\n        .set('last', item)\r\n        .set('list', historyStructure.list.push(toPush));\r\n    }\r\n  }\r\n  else {\r\n    historyStructure = historyStructure.set('last', item);\r\n  }\r\n  return historyStructure;\r\n};\r\n\r\nexport const historyPop = (historyStructure) => {\r\n  if (historyStructure.last) {\r\n    if (historyStructure.list.size) {\r\n      let last = historyStructure.first;\r\n      for (let x = 0; x < historyStructure.list.size - 1; x++) {\r\n        last = patch(last, historyStructure.list.get(x).get('diff'));\r\n      }\r\n\r\n      historyStructure = historyStructure\r\n        .set('last', last)\r\n        .set('list', historyStructure.list.pop());\r\n    }\r\n  }\r\n  return historyStructure;\r\n};\r\n","let shortid = require('shortid');\r\n\r\nexport class IDBroker {\r\n  static acquireID() {\r\n    return shortid.generate();\r\n  }\r\n}\r\n\r\nexport default IDBroker;\r\n","export default class NameGenerator {\r\n  static generateName(prototype, type) {\r\n    if (type == undefined) {\r\n      return \"\";\r\n    }\r\n    return type.substr(0, 1).toUpperCase() + type.substr(1);\r\n  }\r\n}\r\n","import {\r\n  Project,\r\n  Line,\r\n  Hole,\r\n  Item,\r\n  Area,\r\n  Layer,\r\n  Vertex\r\n} from './export';\r\nimport { Map, List } from 'immutable';\r\nimport { Group as GroupModel } from '../models';\r\nimport { IDBroker, MathUtils, GeometryUtils } from '../utils/export';\r\n\r\nclass Group {\r\n\r\n  static select(state, groupID) {\r\n    let layerList = state.getIn(['scene', 'groups', groupID, 'elements']);\r\n\r\n    state = Project.setAlterate(state).updatedState;\r\n\r\n    layerList.entrySeq().forEach(([groupLayerID, groupLayerElements]) => {\r\n      state = Layer.unselectAll(state, groupLayerID).updatedState;\r\n\r\n      let lines = groupLayerElements.get('lines');\r\n      let holes = groupLayerElements.get('holes');\r\n      let items = groupLayerElements.get('items');\r\n      let areas = groupLayerElements.get('areas');\r\n\r\n      if (lines) lines.forEach(lineID => { state = Line.select(state, groupLayerID, lineID).updatedState; });\r\n      if (holes) holes.forEach(holeID => { state = Hole.select(state, groupLayerID, holeID).updatedState; });\r\n      if (items) items.forEach(itemID => { state = Item.select(state, groupLayerID, itemID).updatedState; });\r\n      if (areas) areas.forEach(areaID => { state = Area.select(state, groupLayerID, areaID).updatedState; });\r\n    });\r\n\r\n    state = Project.setAlterate(state).updatedState;\r\n\r\n    let groups = state.getIn(['scene', 'groups']).map(g => g.set('selected', false));\r\n\r\n    state = state.setIn(['scene', 'groups'], groups).setIn(['scene', 'groups', groupID, 'selected'], true);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static unselect(state, groupID) {\r\n    let layerList = state.getIn(['scene', 'groups', groupID, 'elements']);\r\n    let reduced = layerList.reduce((newState, layer, layerID) => Layer.unselectAll(newState, layerID).updatedState, state);\r\n    state = reduced.setIn(['scene', 'groups', groupID, 'selected'], false);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static create(state) {\r\n    let groupID = IDBroker.acquireID();\r\n\r\n    state = state.setIn(['scene', 'groups', groupID], new GroupModel({ id: groupID, name: groupID }));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static createFromSelectedElements(state) {\r\n    let groupID = IDBroker.acquireID();\r\n\r\n    state = state.setIn(['scene', 'groups', groupID], new GroupModel({ id: groupID, name: groupID }));\r\n\r\n    state.getIn(['scene', 'layers']).forEach((layer) => {\r\n\r\n      let layerID = layer.get('id');\r\n      let layerElements = {\r\n        'lines': layer.get('lines').filter(el => el.get('selected')),\r\n        'items': layer.get('items').filter(el => el.get('selected')),\r\n        'holes': layer.get('holes').filter(el => el.get('selected')),\r\n        'areas': layer.get('areas').filter(el => el.get('selected'))\r\n      };\r\n\r\n      for (let elementPrototype in layerElements) {\r\n        layerElements[elementPrototype].forEach(el => state = this.addElement(state, groupID, layerID, elementPrototype, el.get('id')).updatedState);\r\n      }\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static addElement(state, groupID, layerID, elementPrototype, elementID) {\r\n    let actualList = state.getIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype]) || new List();\r\n\r\n    if (!actualList.contains(elementID)) {\r\n      state = state.setIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype], actualList.push(elementID));\r\n\r\n      state = this.reloadBaricenter(state, groupID).updatedState;\r\n    }\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setBarycenter(state, groupID, x, y) {\r\n    if (typeof x !== 'undefined') state = state.setIn(['scene', 'groups', groupID, 'x'], x);\r\n    if (typeof y !== 'undefined') state = state.setIn(['scene', 'groups', groupID, 'y'], y);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static reloadBaricenter(state, groupID) {\r\n    let layerList = state.getIn(['scene', 'groups', groupID, 'elements']);\r\n\r\n    let { a, b, c, d, e, f, SVGHeight } = state.get('viewer2D').toJS();\r\n\r\n    let m1 = [\r\n      [a, b, c],\r\n      [d, e, f],\r\n      [0, 0, 1]\r\n    ];\r\n\r\n    let xBar = 0;\r\n    let yBar = 0;\r\n    let elementCount = 0;\r\n\r\n    layerList.entrySeq().forEach(([groupLayerID, groupLayerElements]) => {\r\n      state = Layer.unselectAll(state, groupLayerID).updatedState;\r\n\r\n      let lines = groupLayerElements.get('lines');\r\n      let holes = groupLayerElements.get('holes');\r\n      let items = groupLayerElements.get('items');\r\n      let areas = groupLayerElements.get('areas');\r\n\r\n      if (lines) lines.forEach((lineID) => {\r\n        let vertices = state.getIn(['scene', 'layers', groupLayerID, 'lines', lineID, 'vertices'])\r\n          .map(vID => state.getIn(['scene', 'layers', groupLayerID, 'vertices', vID]));\r\n\r\n        let { x: x1, y: y1 } = vertices.get(0);\r\n        let { x: x2, y: y2 } = vertices.get(1);\r\n        let { x: xM, y: yM } = GeometryUtils.midPoint(x1, y1, x2, y2);\r\n\r\n        xBar += xM;\r\n        yBar += yM;\r\n        elementCount++;\r\n      });\r\n\r\n      if (holes) holes.forEach(holeID => {\r\n        let hole = state.getIn(['scene', 'layers', groupLayerID, 'holes', holeID]);\r\n        let lineVertices = state.getIn(['scene', 'layers', groupLayerID, 'lines', hole.line, 'vertices'])\r\n          .map(vID => state.getIn(['scene', 'layers', groupLayerID, 'vertices', vID]));\r\n        let { x: x1, y: y1 } = lineVertices.get(0);\r\n        let { x: x2, y: y2 } = lineVertices.get(1);\r\n        let { x, y } = GeometryUtils.extendLine(x1, y1, x2, y2, hole.offset * GeometryUtils.pointsDistance(x1, y1, x2, y2));\r\n\r\n        xBar += x;\r\n        yBar += y;\r\n        elementCount++;\r\n      });\r\n\r\n      if (items) items.forEach(itemID => {\r\n        let { x, y } = state.getIn(['scene', 'layers', groupLayerID, 'items', itemID]);\r\n\r\n        xBar += x;\r\n        yBar += y;\r\n        elementCount++;\r\n      });\r\n\r\n      if (areas) areas.forEach(areaID => {\r\n        let areaVertices = state.getIn(['scene', 'layers', groupLayerID, 'areas', areaID, 'vertices'])\r\n          .map(vID => state.getIn(['scene', 'layers', groupLayerID, 'vertices', vID])).toJS();\r\n        let { x, y } = GeometryUtils.verticesMidPoint(areaVertices);\r\n\r\n        xBar += x;\r\n        yBar += y;\r\n        elementCount++;\r\n      });\r\n    });\r\n\r\n    if (elementCount) {\r\n      state = this.setBarycenter(state, groupID, xBar / elementCount, yBar / elementCount).updatedState;\r\n    }\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeElement(state, groupID, layerID, elementPrototype, elementID) {\r\n    let actualList = state.getIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype]);\r\n\r\n    if (!actualList || !actualList.contains(elementID)) {\r\n      return { updatedState: state };\r\n    }\r\n\r\n    state = state.setIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype], actualList.filterNot(el => el === elementID));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setAttributes(state, groupID, attributes) {\r\n    state = state.mergeIn(['scene', 'groups', groupID], attributes);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setProperties(state, groupID, properties) {\r\n    state = state.mergeIn(['scene', 'groups', groupID, 'properties'], properties);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove(state, groupID) {\r\n    state = state.removeIn(['scene', 'groups', groupID]);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeAndDeleteElements(state, groupID) {\r\n    let layerList = state.getIn(['scene', 'groups', groupID, 'elements']);\r\n\r\n    layerList.entrySeq().forEach(([groupLayerID, groupLayerElements]) => {\r\n      state = Layer.unselectAll(state, groupLayerID).updatedState;\r\n\r\n      let lines = groupLayerElements.get('lines');\r\n      let holes = groupLayerElements.get('holes');\r\n      let items = groupLayerElements.get('items');\r\n      let areas = groupLayerElements.get('areas');\r\n\r\n      if (lines) {\r\n        lines.forEach(lineID => {\r\n          state = Line.remove(state, groupLayerID, lineID).updatedState;\r\n          state = Layer.detectAndUpdateAreas(state, groupLayerID).updatedState;\r\n        });\r\n      }\r\n\r\n      if (holes) holes.forEach(holeID => { state = Hole.remove(state, groupLayerID, holeID).updatedState; });\r\n      if (items) items.forEach(itemID => { state = Item.remove(state, groupLayerID, itemID).updatedState; });\r\n      //( actually ) no effect by area's destruction\r\n      if (false && areas) areas.forEach(areaID => { state = Area.remove(state, groupLayerID, areaID).updatedState; });\r\n    });\r\n\r\n    state = state.deleteIn(['scene', 'groups', groupID]);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static translate(state, groupID, x, y) {\r\n    let deltaX = x - state.getIn(['scene', 'groups', groupID, 'x']);\r\n    let deltaY = y - state.getIn(['scene', 'groups', groupID, 'y']);\r\n\r\n    let layerList = state.getIn(['scene', 'groups', groupID, 'elements']);\r\n\r\n    layerList.entrySeq().forEach(([groupLayerID, groupLayerElements]) => {\r\n      let lines = groupLayerElements.get('lines');\r\n      //let holes = groupLayerElements.get('holes');\r\n      let items = groupLayerElements.get('items');\r\n      //let areas = groupLayerElements.get('areas');\r\n\r\n      //move vertices instead lines avoiding multiple vertex translation\r\n      if (lines) {\r\n        let vertices = {};\r\n        lines.forEach(lineID => {\r\n          let line = state.getIn(['scene', 'layers', groupLayerID, 'lines', lineID]);\r\n          if (!vertices[line.vertices.get(0)]) vertices[line.vertices.get(0)] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(0)])\r\n          if (!vertices[line.vertices.get(1)]) vertices[line.vertices.get(1)] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(1)])\r\n        });\r\n\r\n        for (let vertexID in vertices) {\r\n          let { x: xV, y: yV } = vertices[vertexID];\r\n          state = Vertex.setAttributes(state, groupLayerID, vertexID, new Map({ x: xV + deltaX, y: yV + deltaY })).updatedState;\r\n        }\r\n\r\n        //need to be separated from setAttributes cycle\r\n        for (let vertexID in vertices) {\r\n          state = Vertex.beginDraggingVertex(state, groupLayerID, vertexID).updatedState;\r\n          state = Vertex.endDraggingVertex(state).updatedState;\r\n        }\r\n      }\r\n\r\n      if (items) state = items\r\n        .map(itemID => state.getIn(['scene', 'layers', groupLayerID, 'items', itemID]))\r\n        .reduce((newState, item) => {\r\n          let { x: xI, y: yI } = item;\r\n          return Item.setAttributes(newState, groupLayerID, item.id, new Map({ x: xI + deltaX, y: yI + deltaY })).updatedState;\r\n        }, state);\r\n\r\n      //translation of holes and areas should not take any effect\r\n      //if( holes ) holes.forEach( holeID => { state = Hole.select( state, groupLayerID, holeID ).updatedState; });\r\n      //if( areas ) areas.forEach( areaID => { state = Area.select( state, groupLayerID, areaID ).updatedState; });\r\n\r\n      state = Layer.detectAndUpdateAreas(state, groupLayerID).updatedState;\r\n    });\r\n\r\n    state = this.setBarycenter(state, groupID, x, y).updatedState;\r\n\r\n    state = Group.select(state, groupID).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static rotate(state, groupID, newAlpha) {\r\n\r\n\r\n    let { x: barX, y: barY, rotation } = state.getIn(['scene', 'groups', groupID]);\r\n\r\n    let alpha = newAlpha - rotation;\r\n\r\n    state = Group.setAttributes(state, groupID, new Map({ rotation: newAlpha })).updatedState;\r\n\r\n    let layerList = state.getIn(['scene', 'groups', groupID, 'elements']);\r\n\r\n    layerList.entrySeq().forEach(([groupLayerID, groupLayerElements]) => {\r\n      let lines = groupLayerElements.get('lines');\r\n      let holes = groupLayerElements.get('holes');\r\n      let items = groupLayerElements.get('items');\r\n      let areas = groupLayerElements.get('areas');\r\n\r\n      //move vertices instead lines avoiding multiple vertex translation\r\n      if (lines) {\r\n        let vertices = {};\r\n        lines.forEach(lineID => {\r\n          let line = state.getIn(['scene', 'layers', groupLayerID, 'lines', lineID]);\r\n          if (!vertices[line.vertices.get(0)]) vertices[line.vertices.get(0)] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(0)])\r\n          if (!vertices[line.vertices.get(1)]) vertices[line.vertices.get(1)] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(1)])\r\n        });\r\n\r\n        for (let vertexID in vertices) {\r\n          let { x: xV, y: yV } = vertices[vertexID];\r\n          let { x: newX, y: newY } = GeometryUtils.rotatePointAroundPoint(xV, yV, barX, barY, alpha);\r\n          state = Vertex.setAttributes(state, groupLayerID, vertexID, new Map({ x: newX, y: newY })).updatedState;\r\n        }\r\n        //need to be separated from setAttributes cycle\r\n        for (let vertexID in vertices) {\r\n          state = Vertex.beginDraggingVertex(state, groupLayerID, vertexID).updatedState;\r\n          state = Vertex.endDraggingVertex(state).updatedState;\r\n        }\r\n      }\r\n\r\n      if (items) state = items\r\n        .map(itemID => state.getIn(['scene', 'layers', groupLayerID, 'items', itemID]))\r\n        .reduce((newState, item) => {\r\n          let { x: xI, y: yI, rotation: rI } = item;\r\n\r\n          let { x: newX, y: newY } = GeometryUtils.rotatePointAroundPoint(xI, yI, barX, barY, alpha);\r\n\r\n          return Item.setAttributes(newState, groupLayerID, item.id, new Map({ x: newX, y: newY, rotation: rI + alpha })).updatedState;\r\n        }, state);\r\n\r\n      //rotation of holes and areas should not take any effect\r\n      //if( holes ) holes.forEach( holeID => { state = Hole.select( state, groupLayerID, holeID ).updatedState; });\r\n      //if( areas ) areas.forEach( areaID => { state = Area.select( state, groupLayerID, areaID ).updatedState; });\r\n\r\n      state = Layer.detectAndUpdateAreas(state, groupLayerID).updatedState;\r\n    });\r\n\r\n    state = Group.select(state, groupID).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n}\r\n\r\nexport { Group as default };\r\n","import { List } from \"immutable\";\r\nimport { Project, Area, Line, Hole, Item, Vertex } from \"./export\";\r\nimport { GraphInnerCycles, GeometryUtils, IDBroker } from \"../utils/export\";\r\nimport { Layer as LayerModel } from \"../models\";\r\n\r\nconst sameSet = (set1, set2) =>\r\n  set1.size === set2.size && set1.isSuperset(set2) && set1.isSubset(set2);\r\n\r\nclass Layer {\r\n  static create(state, name, altitude) {\r\n    let layerID = IDBroker.acquireID();\r\n    name = name || `layer ${layerID}`;\r\n    altitude = altitude || 0;\r\n\r\n    let layer = new LayerModel({ id: layerID, name, altitude });\r\n\r\n    state = state.setIn([\"scene\", \"selectedLayer\"], layerID);\r\n    state = state.setIn([\"scene\", \"layers\", layerID], layer);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static select(state, layerID) {\r\n    if (!state.get(\"alterate\")) state = Project.unselectAll(state).updatedState;\r\n    state = state.setIn([\"scene\", \"selectedLayer\"], layerID);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static selectElement(state, layerID, elementPrototype, elementID) {\r\n    state = state.setIn(\r\n      [\"scene\", \"layers\", layerID, elementPrototype, elementID, \"selected\"],\r\n      true\r\n    );\r\n    state = state.updateIn(\r\n      [\"scene\", \"layers\", layerID, \"selected\", elementPrototype],\r\n      (elems) => elems.push(elementID)\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static unselect(state, layerID, elementPrototype, elementID) {\r\n    state = state.setIn(\r\n      [\"scene\", \"layers\", layerID, elementPrototype, elementID, \"selected\"],\r\n      false\r\n    );\r\n    state = state.updateIn(\r\n      [\"scene\", \"layers\", layerID, \"selected\", elementPrototype],\r\n      (elems) => elems.filter((el) => el.id === elementID)\r\n    );\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static unselectAll(state, layerID) {\r\n    let { lines, holes, items, areas } = state.getIn([\r\n      \"scene\",\r\n      \"layers\",\r\n      layerID,\r\n    ]);\r\n\r\n    if (lines)\r\n      lines.forEach((line) => {\r\n        state = Line.unselect(state, layerID, line.id).updatedState;\r\n      });\r\n    if (holes)\r\n      holes.forEach((hole) => {\r\n        if (hole.type.split('-')[1] != \"cursor\")\r\n          state = Hole.unselect(state, layerID, hole.id).updatedState;\r\n      });\r\n    if (items)\r\n      items.forEach((item) => {\r\n        state = Item.unselect(state, layerID, item.id).updatedState;\r\n      });\r\n    if (areas)\r\n      areas.forEach((area) => {\r\n        state = Area.unselect(state, layerID, area.id).updatedState;\r\n      });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setProperties(state, layerID, properties) {\r\n    state = state.mergeIn([\"scene\", \"layers\", layerID], properties);\r\n    state = state.updateIn([\"scene\", \"layers\"], (layers) =>\r\n      layers.sort((a, b) =>\r\n        a.altitude !== b.altitude ? a.altitude - b.altitude : a.order - b.order\r\n      )\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove(state, layerID) {\r\n    state = state.removeIn([\"scene\", \"layers\", layerID]);\r\n\r\n    state = state.setIn(\r\n      [\"scene\", \"selectedLayer\"],\r\n      state.scene.selectedLayer !== layerID\r\n        ? state.scene.selectedLayer\r\n        : state.scene.layers.first().id\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeElement(state, layerID, elementPrototype, elementID) {\r\n    state = state.deleteIn([\r\n      \"scene\",\r\n      \"layers\",\r\n      layerID,\r\n      elementPrototype,\r\n      elementID,\r\n    ]);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static detectAndUpdateAreas(state, layerID) {\r\n    let verticesArray = []; //array with vertices coords\r\n    let linesArray; //array with edges\r\n\r\n    let vertexID_to_verticesArrayIndex = {};\r\n    let verticesArrayIndex_to_vertexID = {};\r\n\r\n    state.getIn([\"scene\", \"layers\", layerID, \"vertices\"]).forEach((vertex) => {\r\n      let verticesCount = verticesArray.push([vertex.x, vertex.y]);\r\n      let latestVertexIndex = verticesCount - 1;\r\n      vertexID_to_verticesArrayIndex[vertex.id] = latestVertexIndex;\r\n      verticesArrayIndex_to_vertexID[latestVertexIndex] = vertex.id;\r\n    });\r\n\r\n    linesArray = state\r\n      .getIn([\"scene\", \"layers\", layerID, \"lines\"])\r\n      .map((line) =>\r\n        line.vertices\r\n          .map((vertexID) => vertexID_to_verticesArrayIndex[vertexID])\r\n          .toArray()\r\n      );\r\n\r\n    let innerCyclesByVerticesArrayIndex = GraphInnerCycles.calculateInnerCycles(\r\n      verticesArray,\r\n      linesArray\r\n    );\r\n\r\n    let innerCyclesByVerticesID = new List(innerCyclesByVerticesArrayIndex).map(\r\n      (cycle) =>\r\n        new List(\r\n          cycle.map(\r\n            (vertexIndex) => verticesArrayIndex_to_vertexID[vertexIndex]\r\n          )\r\n        )\r\n    );\r\n\r\n    // All area vertices should be ordered in counterclockwise order\r\n    innerCyclesByVerticesID = innerCyclesByVerticesID.map((area) =>\r\n      GraphInnerCycles.isClockWiseOrder(\r\n        area.map((vertexID) =>\r\n          state.getIn([\"scene\", \"layers\", layerID, \"vertices\", vertexID])\r\n        )\r\n      )\r\n        ? area.reverse()\r\n        : area\r\n    );\r\n\r\n    let areaIDs = [];\r\n\r\n    //remove areas\r\n    state.getIn([\"scene\", \"layers\", layerID, \"areas\"]).forEach((area) => {\r\n      let areaInUse = innerCyclesByVerticesID.some((vertices) =>\r\n        sameSet(vertices, area.vertices)\r\n      );\r\n      if (!areaInUse) {\r\n        state = Area.remove(state, layerID, area.id).updatedState;\r\n      }\r\n    });\r\n\r\n    //add new areas\r\n    innerCyclesByVerticesID.forEach((cycle, ind) => {\r\n      let areaInUse = state\r\n        .getIn([\"scene\", \"layers\", layerID, \"areas\"])\r\n        .find((area) => sameSet(area.vertices, cycle));\r\n\r\n      if (areaInUse) {\r\n        areaIDs[ind] = areaInUse.id;\r\n        state = state.setIn(\r\n          [\"scene\", \"layers\", layerID, \"areas\", areaIDs[ind], \"holes\"],\r\n          new List()\r\n        );\r\n      } else {\r\n        let areaVerticesCoords = cycle.map((vertexID) =>\r\n          state.getIn([\"scene\", \"layers\", layerID, \"vertices\", vertexID])\r\n        );\r\n        let resultAdd = Area.add(\r\n          state,\r\n          layerID,\r\n          \"area\",\r\n          areaVerticesCoords,\r\n          state.catalog\r\n        );\r\n\r\n        areaIDs[ind] = resultAdd.area.id;\r\n        state = resultAdd.updatedState;\r\n      }\r\n    });\r\n\r\n    // Build a relationship between areas and their coordinates\r\n    let verticesCoordsForArea = areaIDs.map((id) => {\r\n      let vertices = state\r\n        .getIn([\"scene\", \"layers\", layerID, \"areas\", id])\r\n        .vertices.map((vertexID) => {\r\n          let { x, y } = state.getIn([\r\n            \"scene\",\r\n            \"layers\",\r\n            layerID,\r\n            \"vertices\",\r\n            vertexID,\r\n          ]);\r\n          return new List([x, y]);\r\n        });\r\n      return { id, vertices };\r\n    });\r\n\r\n    // Find all holes for an area\r\n    let i, j;\r\n    for (i = 0; i < verticesCoordsForArea.length; i++) {\r\n      let holesList = new List(); // The holes for this area\r\n      let areaVerticesList = verticesCoordsForArea[i].vertices\r\n        .flatten()\r\n        .toArray();\r\n      for (j = 0; j < verticesCoordsForArea.length; j++) {\r\n        if (i !== j) {\r\n          let isHole = GeometryUtils.ContainsPoint(\r\n            areaVerticesList,\r\n            verticesCoordsForArea[j].vertices.get(0).get(0),\r\n            verticesCoordsForArea[j].vertices.get(0).get(1)\r\n          );\r\n          if (isHole) {\r\n            holesList = holesList.push(verticesCoordsForArea[j].id);\r\n          }\r\n        }\r\n      }\r\n      state = state.setIn(\r\n        [\r\n          \"scene\",\r\n          \"layers\",\r\n          layerID,\r\n          \"areas\",\r\n          verticesCoordsForArea[i].id,\r\n          \"holes\",\r\n        ],\r\n        holesList\r\n      );\r\n    }\r\n\r\n    // Remove holes which are already holes for other areas\r\n    areaIDs.forEach((areaID) => {\r\n      let doubleHoles = new Set();\r\n      let areaHoles = state.getIn([\r\n        \"scene\",\r\n        \"layers\",\r\n        layerID,\r\n        \"areas\",\r\n        areaID,\r\n        \"holes\",\r\n      ]);\r\n      areaHoles.forEach((areaHoleID) => {\r\n        let holesOfholes = state.getIn([\r\n          \"scene\",\r\n          \"layers\",\r\n          layerID,\r\n          \"areas\",\r\n          areaHoleID,\r\n          \"holes\",\r\n        ]);\r\n        holesOfholes.forEach((holeID) => {\r\n          if (areaHoles.indexOf(holeID) !== -1) doubleHoles.add(holeID);\r\n        });\r\n      });\r\n      doubleHoles.forEach((doubleHoleID) => {\r\n        areaHoles = areaHoles.remove(areaHoles.indexOf(doubleHoleID));\r\n      });\r\n      state = state.setIn(\r\n        [\"scene\", \"layers\", layerID, \"areas\", areaID, \"holes\"],\r\n        areaHoles\r\n      );\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeZeroLengthLines(state, layerID) {\r\n    let updatedState = state\r\n      .getIn([\"scene\", \"layers\", layerID, \"lines\"])\r\n      .reduce((newState, line) => {\r\n        let v_id0 = line.getIn([\"vertices\", 0]);\r\n        let v_id1 = line.getIn([\"vertices\", 1]);\r\n\r\n        let v0 = newState.getIn([\r\n          \"scene\",\r\n          \"layers\",\r\n          layerID,\r\n          \"vertices\",\r\n          v_id0,\r\n        ]);\r\n        let v1 = newState.getIn([\r\n          \"scene\",\r\n          \"layers\",\r\n          layerID,\r\n          \"vertices\",\r\n          v_id1,\r\n        ]);\r\n\r\n        if (GeometryUtils.verticesDistance(v0, v1) === 0) {\r\n          newState = Line.remove(newState, layerID, line.id).updatedState;\r\n        }\r\n\r\n        return newState;\r\n      }, state);\r\n\r\n    return { updatedState };\r\n  }\r\n\r\n  static mergeEqualsVertices(state, layerID, vertexID) {\r\n    //1. find vertices to remove\r\n    let vertex = state.getIn([\r\n      \"scene\",\r\n      \"layers\",\r\n      layerID,\r\n      \"vertices\",\r\n      vertexID,\r\n    ]);\r\n\r\n    let doubleVertices = state\r\n      .getIn([\"scene\", \"layers\", layerID, \"vertices\"])\r\n      .filter((v) => {\r\n        return (\r\n          v.id !== vertexID && GeometryUtils.samePoints(vertex, v) // &&\r\n          //!v.lines.contains( vertexID ) &&\r\n          //!v.areas.contains( vertexID )\r\n        );\r\n      });\r\n\r\n    if (doubleVertices.isEmpty()) return { updatedState: state };\r\n\r\n    doubleVertices.forEach((doubleVertex) => {\r\n      let reduced = doubleVertex.lines.reduce((reducedState, lineID) => {\r\n        reducedState = reducedState.updateIn(\r\n          [\"scene\", \"layers\", layerID, \"lines\", lineID, \"vertices\"],\r\n          (vertices) => {\r\n            if (vertices) {\r\n              return vertices.map((v) =>\r\n                v === doubleVertex.id ? vertexID : v\r\n              );\r\n            }\r\n          }\r\n        );\r\n        reducedState = Vertex.addElement(\r\n          reducedState,\r\n          layerID,\r\n          vertexID,\r\n          \"lines\",\r\n          lineID\r\n        ).updatedState;\r\n\r\n        return reducedState;\r\n      }, state);\r\n\r\n      let biReduced = doubleVertex.areas.reduce((reducedState, areaID) => {\r\n        reducedState = reducedState.updateIn(\r\n          [\"scene\", \"layers\", layerID, \"areas\", areaID, \"vertices\"],\r\n          (vertices) => {\r\n            if (vertices)\r\n              return vertices.map((v) =>\r\n                v === doubleVertex.id ? vertexID : v\r\n              );\r\n          }\r\n        );\r\n        reducedState = Vertex.addElement(\r\n          reducedState,\r\n          layerID,\r\n          vertexID,\r\n          \"areas\",\r\n          areaID\r\n        ).updatedState;\r\n\r\n        return reducedState;\r\n      }, reduced);\r\n\r\n      state = Vertex.remove(\r\n        biReduced,\r\n        layerID,\r\n        doubleVertex.id,\r\n        null,\r\n        null,\r\n        true\r\n      ).updatedState;\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setPropertiesOnSelected(state, layerID, properties) {\r\n    let selected = state.getIn([\"scene\", \"layers\", layerID, \"selected\"]);\r\n\r\n    selected.lines.forEach(\r\n      (lineID) =>\r\n        (state = Line.setProperties(\r\n          state,\r\n          layerID,\r\n          lineID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n    selected.holes.forEach(\r\n      (holeID) =>\r\n        (state = Hole.setProperties(\r\n          state,\r\n          layerID,\r\n          holeID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n    selected.areas.forEach(\r\n      (areaID) =>\r\n        (state = Area.setProperties(\r\n          state,\r\n          layerID,\r\n          areaID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n    selected.items.forEach(\r\n      (itemID) =>\r\n        (state = Item.setProperties(\r\n          state,\r\n          layerID,\r\n          itemID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updatePropertiesOnSelected(state, layerID, properties) {\r\n    let selected = state.getIn([\"scene\", \"layers\", layerID, \"selected\"]);\r\n\r\n    selected.lines.forEach(\r\n      (lineID) =>\r\n        (state = Line.updateProperties(\r\n          state,\r\n          layerID,\r\n          lineID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n    selected.holes.forEach(\r\n      (holeID) =>\r\n        (state = Hole.updateProperties(\r\n          state,\r\n          layerID,\r\n          holeID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n    selected.areas.forEach(\r\n      (areaID) =>\r\n        (state = Area.updateProperties(\r\n          state,\r\n          layerID,\r\n          areaID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n    selected.items.forEach(\r\n      (itemID) =>\r\n        (state = Item.updateProperties(\r\n          state,\r\n          layerID,\r\n          itemID,\r\n          properties\r\n        ).updatedState)\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setAttributesOnSelected(state, layerID, attributes) {\r\n    let selected = state.getIn([\"scene\", \"layers\", layerID, \"selected\"]);\r\n\r\n    selected.lines.forEach(\r\n      (lineID) =>\r\n        (state = Line.setAttributes(\r\n          state,\r\n          layerID,\r\n          lineID,\r\n          attributes\r\n        ).updatedState)\r\n    );\r\n    selected.holes.forEach(\r\n      (holeID) =>\r\n        (state = Hole.setAttributes(\r\n          state,\r\n          layerID,\r\n          holeID,\r\n          attributes\r\n        ).updatedState)\r\n    );\r\n    selected.items.forEach(\r\n      (itemID) =>\r\n        (state = Item.setAttributes(\r\n          state,\r\n          layerID,\r\n          itemID,\r\n          attributes\r\n        ).updatedState)\r\n    );\r\n    //selected.areas.forEach(areaID => state = Area.setAttributes( state, layerID, areaID, attributes ).updatedState);\r\n\r\n    return { updatedState: state };\r\n  }\r\n}\r\n\r\nexport { Layer as default };\r\n","import { Map, List, fromJS } from \"immutable\";\r\nimport { Group, Layer, Hole, Vertex } from \"./export\";\r\nimport {\r\n  IDBroker,\r\n  NameGenerator,\r\n  GeometryUtils,\r\n  SnapUtils,\r\n  SnapSceneUtils,\r\n} from \"../utils/export\";\r\nimport {\r\n  MODE_IDLE,\r\n  MODE_WAITING_DRAWING_LINE,\r\n  MODE_DRAWING_LINE,\r\n  MODE_DRAGGING_LINE,\r\n} from \"../constants\";\r\n\r\nclass Line {\r\n  static create(state, layerID, type, x0, y0, x1, y1, properties) {\r\n    let lineID = IDBroker.acquireID();\r\n\r\n    let { updatedState: stateV0, vertex: v0 } = Vertex.add(\r\n      state,\r\n      layerID,\r\n      x0,\r\n      y0,\r\n      \"lines\",\r\n      lineID\r\n    );\r\n    let { updatedState: stateV1, vertex: v1 } = Vertex.add(\r\n      stateV0,\r\n      layerID,\r\n      x1,\r\n      y1,\r\n      \"lines\",\r\n      lineID\r\n    );\r\n    state = stateV1;\r\n\r\n    let line = state.catalog.factoryElement(\r\n      type,\r\n      {\r\n        id: lineID,\r\n        name: NameGenerator.generateName(\r\n          \"lines\",\r\n          state.catalog.getIn([\"elements\", type, \"info\", \"title\"])\r\n        ),\r\n        vertices: new List([v0.id, v1.id]),\r\n        type,\r\n      },\r\n      properties\r\n    );\r\n\r\n    state = state.setIn([\"scene\", \"layers\", layerID, \"lines\", lineID], line);\r\n\r\n    return { updatedState: state, line };\r\n  }\r\n\r\n  static select(state, layerID, lineID) {\r\n    state = Layer.select(state, layerID).updatedState;\r\n\r\n    let line = state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID]);\r\n\r\n    state = Layer.selectElement(state, layerID, \"lines\", lineID).updatedState;\r\n    state = Layer.selectElement(\r\n      state,\r\n      layerID,\r\n      \"vertices\",\r\n      line.vertices.get(0)\r\n    ).updatedState;\r\n    state = Layer.selectElement(\r\n      state,\r\n      layerID,\r\n      \"vertices\",\r\n      line.vertices.get(1)\r\n    ).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove(state, layerID, lineID) {\r\n    let line = state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID]);\r\n\r\n    if (line) {\r\n      state = this.unselect(state, layerID, lineID).updatedState;\r\n      line.holes.forEach(\r\n        (holeID) => (state = Hole.remove(state, layerID, holeID).updatedState)\r\n      );\r\n      state = Layer.removeElement(state, layerID, \"lines\", lineID).updatedState;\r\n\r\n      line.vertices.forEach(\r\n        (vertexID) =>\r\n          (state = Vertex.remove(\r\n            state,\r\n            layerID,\r\n            vertexID,\r\n            \"lines\",\r\n            lineID\r\n          ).updatedState)\r\n      );\r\n\r\n      state\r\n        .getIn([\"scene\", \"groups\"])\r\n        .forEach(\r\n          (group) =>\r\n            (state = Group.removeElement(\r\n              state,\r\n              group.id,\r\n              layerID,\r\n              \"lines\",\r\n              lineID\r\n            ).updatedState)\r\n        );\r\n    }\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static unselect(state, layerID, lineID) {\r\n    let line = state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID]);\r\n\r\n    if (line) {\r\n      state = Layer.unselect(\r\n        state,\r\n        layerID,\r\n        \"vertices\",\r\n        line.vertices.get(0)\r\n      ).updatedState;\r\n      state = Layer.unselect(\r\n        state,\r\n        layerID,\r\n        \"vertices\",\r\n        line.vertices.get(1)\r\n      ).updatedState;\r\n      state = Layer.unselect(state, layerID, \"lines\", lineID).updatedState;\r\n    }\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static split(state, layerID, lineID, x, y) {\r\n    let line = state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID]);\r\n    let v0 = state.getIn([\r\n      \"scene\",\r\n      \"layers\",\r\n      layerID,\r\n      \"vertices\",\r\n      line.vertices.get(0),\r\n    ]);\r\n    let v1 = state.getIn([\r\n      \"scene\",\r\n      \"layers\",\r\n      layerID,\r\n      \"vertices\",\r\n      line.vertices.get(1),\r\n    ]);\r\n    let { x: x0, y: y0 } = v0;\r\n    let { x: x1, y: y1 } = v1;\r\n\r\n    let { updatedState: stateL1, line: line0 } = Line.create(\r\n      state,\r\n      layerID,\r\n      line.type,\r\n      x0,\r\n      y0,\r\n      x,\r\n      y,\r\n      line.get(\"properties\")\r\n    );\r\n    let { updatedState: stateL2, line: line1 } = Line.create(\r\n      stateL1,\r\n      layerID,\r\n      line.type,\r\n      x1,\r\n      y1,\r\n      x,\r\n      y,\r\n      line.get(\"properties\")\r\n    );\r\n    state = stateL2;\r\n\r\n    let splitPointOffset = GeometryUtils.pointPositionOnLineSegment(\r\n      x0,\r\n      y0,\r\n      x1,\r\n      y1,\r\n      x,\r\n      y\r\n    );\r\n    let minVertex = GeometryUtils.minVertex(v0, v1);\r\n\r\n    line.holes.forEach((holeID) => {\r\n      let hole = state.getIn([\"scene\", \"layers\", layerID, \"holes\", holeID]);\r\n\r\n      let holeOffset = hole.offset;\r\n      if (minVertex.x === x1 && minVertex.y === y1) {\r\n        splitPointOffset = 1 - splitPointOffset;\r\n        holeOffset = 1 - hole.offset;\r\n      }\r\n\r\n      if (holeOffset < splitPointOffset) {\r\n        let offset = holeOffset / splitPointOffset;\r\n        if (minVertex.x === x1 && minVertex.y === y1) {\r\n          offset = 1 - offset;\r\n        }\r\n        state = Hole.create(\r\n          state,\r\n          layerID,\r\n          hole.type,\r\n          line0.id,\r\n          offset,\r\n          hole.properties\r\n        ).updatedState;\r\n      } else {\r\n        let offset = (holeOffset - splitPointOffset) / (1 - splitPointOffset);\r\n        if (minVertex.x === x1 && minVertex.y === y1) {\r\n          offset = 1 - offset;\r\n        }\r\n        state = Hole.create(\r\n          state,\r\n          layerID,\r\n          hole.type,\r\n          line1.id,\r\n          offset,\r\n          hole.properties\r\n        ).updatedState;\r\n      }\r\n    });\r\n\r\n    //add splitted lines to the original line's group\r\n    let lineGroups = state.getIn([\"scene\", \"groups\"]).filter((group) => {\r\n      const lines = group.getIn([\"elements\", layerID, \"lines\"]);\r\n      return lines && lines.contains(lineID);\r\n    });\r\n\r\n    lineGroups.forEach((group) => {\r\n      state = Group.addElement(\r\n        state,\r\n        group.id,\r\n        layerID,\r\n        \"lines\",\r\n        line0.id\r\n      ).updatedState;\r\n      state = Group.addElement(\r\n        state,\r\n        group.id,\r\n        layerID,\r\n        \"lines\",\r\n        line1.id\r\n      ).updatedState;\r\n    });\r\n\r\n    state = Line.remove(state, layerID, lineID).updatedState;\r\n\r\n    return { updatedState: state, lines: new List([line0, line1]) };\r\n  }\r\n\r\n  static addFromPoints(state, layerID, type, points, properties, holes) {\r\n    points = new List(points).sort(({ x: x1, y: y1 }, { x: x2, y: y2 }) =>\r\n      x1 === x2 ? y1 - y2 : x1 - x2\r\n    );\r\n\r\n    let pointsPair = points\r\n      .zip(points.skip(1))\r\n      .filterNot(\r\n        ([{ x: x1, y: y1 }, { x: x2, y: y2 }]) => x1 === x2 && y1 === y2\r\n      );\r\n\r\n    let lines = [];\r\n\r\n    pointsPair.forEach(([{ x: x1, y: y1 }, { x: x2, y: y2 }]) => {\r\n      let { updatedState: stateL, line } = this.create(\r\n        state,\r\n        layerID,\r\n        type,\r\n        x1,\r\n        y1,\r\n        x2,\r\n        y2,\r\n        properties\r\n      );\r\n      state = stateL;\r\n\r\n      if (holes) {\r\n        holes.forEach((holeWithOffsetPoint) => {\r\n          let { x: xp, y: yp } = holeWithOffsetPoint.offsetPosition;\r\n\r\n          if (GeometryUtils.isPointOnLineSegment(x1, y1, x2, y2, xp, yp)) {\r\n            let newOffset = GeometryUtils.pointPositionOnLineSegment(\r\n              x1,\r\n              y1,\r\n              x2,\r\n              y2,\r\n              xp,\r\n              yp\r\n            );\r\n\r\n            if (newOffset >= 0 && newOffset <= 1) {\r\n              state = Hole.create(\r\n                state,\r\n                layerID,\r\n                holeWithOffsetPoint.hole.type,\r\n                line.id,\r\n                newOffset,\r\n                holeWithOffsetPoint.hole.properties\r\n              ).updatedState;\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      lines.push(line);\r\n    });\r\n\r\n    return { updatedState: state, lines: new List(lines) };\r\n  }\r\n\r\n  static createAvoidingIntersections(\r\n    state,\r\n    layerID,\r\n    type,\r\n    x0,\r\n    y0,\r\n    x1,\r\n    y1,\r\n    oldProperties,\r\n    oldHoles\r\n  ) {\r\n    let points = [\r\n      { x: x0, y: y0 },\r\n      { x: x1, y: y1 },\r\n    ];\r\n\r\n    state = state\r\n      .getIn([\"scene\", \"layers\", layerID, \"lines\"])\r\n      .reduce((reducedState, line) => {\r\n        let [v0, v1] = line.vertices\r\n          .map((vertexID) =>\r\n            reducedState\r\n              .getIn([\"scene\", \"layers\", layerID, \"vertices\"])\r\n              .get(vertexID)\r\n          )\r\n          .toArray();\r\n\r\n        let hasCommonEndpoint =\r\n          GeometryUtils.samePoints(v0, points[0]) ||\r\n          GeometryUtils.samePoints(v0, points[1]) ||\r\n          GeometryUtils.samePoints(v1, points[0]) ||\r\n          GeometryUtils.samePoints(v1, points[1]);\r\n\r\n        let intersection = GeometryUtils.twoLineSegmentsIntersection(\r\n          points[0],\r\n          points[1],\r\n          v0,\r\n          v1\r\n        );\r\n\r\n        if (intersection.type === \"colinear\") {\r\n          if (!oldHoles) {\r\n            oldHoles = [];\r\n          }\r\n\r\n          let orderedVertices = GeometryUtils.orderVertices(points);\r\n\r\n          reducedState\r\n            .getIn([\"scene\", \"layers\", layerID, \"lines\", line.id, \"holes\"])\r\n            .forEach((holeID) => {\r\n              let hole = reducedState.getIn([\r\n                \"scene\",\r\n                \"layers\",\r\n                layerID,\r\n                \"holes\",\r\n                holeID,\r\n              ]);\r\n              let oldLineLength = GeometryUtils.pointsDistance(\r\n                v0.x,\r\n                v0.y,\r\n                v1.x,\r\n                v1.y\r\n              );\r\n              let offset = GeometryUtils.samePoints(\r\n                orderedVertices[1],\r\n                line.vertices.get(1)\r\n              )\r\n                ? 1 - hole.offset\r\n                : hole.offset;\r\n              let offsetPosition = GeometryUtils.extendLine(\r\n                v0.x,\r\n                v0.y,\r\n                v1.x,\r\n                v1.y,\r\n                oldLineLength * offset\r\n              );\r\n\r\n              oldHoles.push({ hole, offsetPosition });\r\n            });\r\n\r\n          reducedState = this.remove(\r\n            reducedState,\r\n            layerID,\r\n            line.id\r\n          ).updatedState;\r\n\r\n          points.push(v0, v1);\r\n        }\r\n\r\n        if (intersection.type === \"intersecting\" && !hasCommonEndpoint) {\r\n          reducedState = this.split(\r\n            reducedState,\r\n            layerID,\r\n            line.id,\r\n            intersection.point.x,\r\n            intersection.point.y\r\n          ).updatedState;\r\n          points.push(intersection.point);\r\n        }\r\n\r\n        return reducedState;\r\n      }, state);\r\n\r\n    let { updatedState, lines } = Line.addFromPoints(\r\n      state,\r\n      layerID,\r\n      type,\r\n      points,\r\n      oldProperties,\r\n      oldHoles\r\n    );\r\n\r\n    return { updatedState, lines };\r\n  }\r\n\r\n  static replaceVertex(state, layerID, lineID, vertexIndex, x, y) {\r\n    let vertexID = state.getIn([\r\n      \"scene\",\r\n      \"layers\",\r\n      layerID,\r\n      \"lines\",\r\n      lineID,\r\n      \"vertices\",\r\n      vertexIndex,\r\n    ]);\r\n\r\n    state = Vertex.remove(\r\n      state,\r\n      layerID,\r\n      vertexID,\r\n      \"lines\",\r\n      lineID\r\n    ).updatedState;\r\n    let { updatedState: stateV, vertex } = Vertex.add(\r\n      state,\r\n      layerID,\r\n      x,\r\n      y,\r\n      \"lines\",\r\n      lineID\r\n    );\r\n    state = stateV;\r\n\r\n    state = state.setIn(\r\n      [\"scene\", \"layers\", layerID, \"lines\", lineID, \"vertices\", vertexIndex],\r\n      vertex.id\r\n    );\r\n    state = state.setIn(\r\n      [\"scene\", \"layers\", layerID, \"lines\", lineID],\r\n      state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID])\r\n    );\r\n\r\n    return {\r\n      updatedState: state,\r\n      line: state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID]),\r\n      vertex,\r\n    };\r\n  }\r\n\r\n  static selectToolDrawingLine(state, sceneComponentType) {\r\n    \r\n    state = state.merge({\r\n      mode: MODE_WAITING_DRAWING_LINE,\r\n      drawingSupport: new Map({\r\n        type: sceneComponentType,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginDrawingLine(state, layerID, x, y) {\r\n    let snapElements = SnapSceneUtils.sceneSnapElements(\r\n      state.scene,\r\n      new List(),\r\n      state.snapMask\r\n    );\r\n    let snap = null;\r\n\r\n    if (state.snapMask && !state.snapMask.isEmpty()) {\r\n      snap = SnapUtils.nearestSnap(snapElements, x, y, state.snapMask);\r\n      if (snap) ({ x, y } = snap.point);\r\n\r\n      snapElements = snapElements.withMutations((snapElements) => {\r\n        let a, b, c;\r\n        ({ a, b, c } = GeometryUtils.horizontalLine(y));\r\n        SnapUtils.addLineSnap(snapElements, a, b, c, 10, 3, null);\r\n        ({ a, b, c } = GeometryUtils.verticalLine(x));\r\n        SnapUtils.addLineSnap(snapElements, a, b, c, 10, 3, null);\r\n      });\r\n    }\r\n\r\n    let drawingSupport = state.get(\"drawingSupport\").set(\"layerID\", layerID);\r\n\r\n    state = Layer.unselectAll(state, layerID).updatedState;\r\n\r\n    let { updatedState: stateL, line } = Line.create(\r\n      state,\r\n      layerID,\r\n      drawingSupport.get(\"type\"),\r\n      x,\r\n      y,\r\n      x,\r\n      y\r\n    );\r\n    state = Line.select(stateL, layerID, line.id).updatedState;\r\n\r\n    state = state.merge({\r\n      mode: MODE_DRAWING_LINE,\r\n      snapElements,\r\n      activeSnapElement: snap ? snap.snap : null,\r\n      drawingSupport,\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateDrawingLine(state, x, y) {\r\n    let snap = null;\r\n    if (state.snapMask && !state.snapMask.isEmpty()) {\r\n      snap = SnapUtils.nearestSnap(state.snapElements, x, y, state.snapMask);\r\n      if (snap) ({ x, y } = snap.point);\r\n    }\r\n\r\n    let layerID = state.getIn([\"drawingSupport\", \"layerID\"]);\r\n    let lineID = state\r\n      .getIn([\"scene\", \"layers\", layerID, \"selected\", \"lines\"])\r\n      .first();\r\n\r\n    let { updatedState: stateLV, vertex } = Line.replaceVertex(\r\n      state,\r\n      layerID,\r\n      lineID,\r\n      1,\r\n      x,\r\n      y\r\n    );\r\n    state = stateLV;\r\n\r\n    state = this.select(state, layerID, lineID).updatedState;\r\n    state = state.merge({ activeSnapElement: snap ? snap.snap : null });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endDrawingLine(state, x, y) {\r\n    if (state.snapMask && !state.snapMask.isEmpty()) {\r\n      let snap = SnapUtils.nearestSnap(\r\n        state.snapElements,\r\n        x,\r\n        y,\r\n        state.snapMask\r\n      );\r\n      if (snap) ({ x, y } = snap.point);\r\n    }\r\n\r\n    let layerID = state.getIn([\"drawingSupport\", \"layerID\"]);\r\n    let layer = state.getIn([\"scene\", \"layers\", layerID]);\r\n\r\n    let lineID = state\r\n      .getIn([\"scene\", \"layers\", layerID, \"selected\", \"lines\"])\r\n      .first();\r\n    let line = state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID]);\r\n\r\n    let v0 = layer.vertices.get(line.vertices.get(0));\r\n\r\n    state = Line.remove(state, layerID, lineID).updatedState;\r\n    state = Line.createAvoidingIntersections(\r\n      state,\r\n      layerID,\r\n      line.type,\r\n      v0.x,\r\n      v0.y,\r\n      x,\r\n      y\r\n    ).updatedState;\r\n    state = Layer.detectAndUpdateAreas(state, layerID).updatedState;\r\n\r\n    state = state.merge({\r\n      mode: MODE_WAITING_DRAWING_LINE,\r\n      snapElements: new List(),\r\n      activeSnapElement: null,\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginDraggingLine(state, layerID, lineID, x, y) {\r\n    let snapElements = SnapSceneUtils.sceneSnapElements(\r\n      state.scene,\r\n      new List(),\r\n      state.snapMask\r\n    );\r\n\r\n    let layer = state.scene.layers.get(layerID);\r\n    let line = layer.lines.get(lineID);\r\n\r\n    let vertex0 = layer.vertices.get(line.vertices.get(0));\r\n    let vertex1 = layer.vertices.get(line.vertices.get(1));\r\n\r\n    state = state.merge({\r\n      mode: MODE_DRAGGING_LINE,\r\n      snapElements,\r\n      draggingSupport: Map({\r\n        layerID,\r\n        lineID,\r\n        startPointX: x,\r\n        startPointY: y,\r\n        startVertex0X: vertex0.x,\r\n        startVertex0Y: vertex0.y,\r\n        startVertex1X: vertex1.x,\r\n        startVertex1Y: vertex1.y,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateDraggingLine(state, x, y) {\r\n    let draggingSupport = state.draggingSupport;\r\n    let snapElements = state.snapElements;\r\n\r\n    let layerID = draggingSupport.get(\"layerID\");\r\n    let lineID = draggingSupport.get(\"lineID\");\r\n    let diffX = x - draggingSupport.get(\"startPointX\");\r\n    let diffY = y - draggingSupport.get(\"startPointY\");\r\n    let newVertex0X = draggingSupport.get(\"startVertex0X\") + diffX;\r\n    let newVertex0Y = draggingSupport.get(\"startVertex0Y\") + diffY;\r\n    let newVertex1X = draggingSupport.get(\"startVertex1X\") + diffX;\r\n    let newVertex1Y = draggingSupport.get(\"startVertex1Y\") + diffY;\r\n\r\n    let activeSnapElement = null;\r\n    let curSnap0 = null,\r\n      curSnap1 = null;\r\n    if (state.snapMask && !state.snapMask.isEmpty()) {\r\n      curSnap0 = SnapUtils.nearestSnap(\r\n        snapElements,\r\n        newVertex0X,\r\n        newVertex0Y,\r\n        state.snapMask\r\n      );\r\n      curSnap1 = SnapUtils.nearestSnap(\r\n        snapElements,\r\n        newVertex1X,\r\n        newVertex1Y,\r\n        state.snapMask\r\n      );\r\n    }\r\n\r\n    let deltaX = 0,\r\n      deltaY = 0;\r\n    if (curSnap0 && curSnap1) {\r\n      if (curSnap0.point.distance < curSnap1.point.distance) {\r\n        deltaX = curSnap0.point.x - newVertex0X;\r\n        deltaY = curSnap0.point.y - newVertex0Y;\r\n        activeSnapElement = curSnap0.snap;\r\n      } else {\r\n        deltaX = curSnap1.point.x - newVertex1X;\r\n        deltaY = curSnap1.point.y - newVertex1Y;\r\n        activeSnapElement = curSnap1.snap;\r\n      }\r\n    } else {\r\n      if (curSnap0) {\r\n        deltaX = curSnap0.point.x - newVertex0X;\r\n        deltaY = curSnap0.point.y - newVertex0Y;\r\n        activeSnapElement = curSnap0.snap;\r\n      }\r\n      if (curSnap1) {\r\n        deltaX = curSnap1.point.x - newVertex1X;\r\n        deltaY = curSnap1.point.y - newVertex1Y;\r\n        activeSnapElement = curSnap1.snap;\r\n      }\r\n    }\r\n\r\n    newVertex0X += deltaX;\r\n    newVertex0Y += deltaY;\r\n    newVertex1X += deltaX;\r\n    newVertex1Y += deltaY;\r\n\r\n    state = state.merge({\r\n      activeSnapElement,\r\n      scene: state.scene.updateIn([\"layers\", layerID], (layer) =>\r\n        layer.withMutations((layer) => {\r\n          let lineVertices = layer.getIn([\"lines\", lineID, \"vertices\"]);\r\n          layer.updateIn([\"vertices\", lineVertices.get(0)], (vertex) =>\r\n            vertex.merge({ x: newVertex0X, y: newVertex0Y })\r\n          );\r\n          layer.updateIn([\"vertices\", lineVertices.get(1)], (vertex) =>\r\n            vertex.merge({ x: newVertex1X, y: newVertex1Y })\r\n          );\r\n          return layer;\r\n        })\r\n      ),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endDraggingLine(state, x, y) {\r\n    let { draggingSupport } = state;\r\n    let layerID = draggingSupport.get(\"layerID\");\r\n    let layer = state.scene.layers.get(layerID);\r\n    let lineID = draggingSupport.get(\"lineID\");\r\n    let line = layer.lines.get(lineID);\r\n\r\n    let vertex0 = layer.vertices.get(line.vertices.get(0));\r\n    let vertex1 = layer.vertices.get(line.vertices.get(1));\r\n\r\n    let maxV = GeometryUtils.maxVertex(vertex0, vertex1);\r\n    let minV = GeometryUtils.minVertex(vertex0, vertex1);\r\n\r\n    let lineLength = GeometryUtils.verticesDistance(minV, maxV);\r\n    let alpha = Math.atan2(maxV.y - minV.y, maxV.x - minV.x);\r\n\r\n    let holesWithOffsetPosition = [];\r\n    layer.lines.get(lineID).holes.forEach((holeID) => {\r\n      let hole = layer.holes.get(holeID);\r\n      let pointOnLine = lineLength * hole.offset;\r\n\r\n      let offsetPosition = {\r\n        x: pointOnLine * Math.cos(alpha) + minV.x,\r\n        y: pointOnLine * Math.sin(alpha) + minV.y,\r\n      };\r\n\r\n      holesWithOffsetPosition.push({ hole, offsetPosition });\r\n    });\r\n\r\n    let diffX = x - draggingSupport.get(\"startPointX\");\r\n    let diffY = y - draggingSupport.get(\"startPointY\");\r\n    let newVertex0X = draggingSupport.get(\"startVertex0X\") + diffX;\r\n    let newVertex0Y = draggingSupport.get(\"startVertex0Y\") + diffY;\r\n    let newVertex1X = draggingSupport.get(\"startVertex1X\") + diffX;\r\n    let newVertex1Y = draggingSupport.get(\"startVertex1Y\") + diffY;\r\n\r\n    if (state.snapMask && !state.snapMask.isEmpty()) {\r\n      let curSnap0 = SnapUtils.nearestSnap(\r\n        state.snapElements,\r\n        newVertex0X,\r\n        newVertex0Y,\r\n        state.snapMask\r\n      );\r\n      let curSnap1 = SnapUtils.nearestSnap(\r\n        state.snapElements,\r\n        newVertex1X,\r\n        newVertex1Y,\r\n        state.snapMask\r\n      );\r\n\r\n      let deltaX = 0,\r\n        deltaY = 0;\r\n      if (curSnap0 && curSnap1) {\r\n        if (curSnap0.point.distance < curSnap1.point.distance) {\r\n          deltaX = curSnap0.point.x - newVertex0X;\r\n          deltaY = curSnap0.point.y - newVertex0Y;\r\n        } else {\r\n          deltaX = curSnap1.point.x - newVertex1X;\r\n          deltaY = curSnap1.point.y - newVertex1Y;\r\n        }\r\n      } else {\r\n        if (curSnap0) {\r\n          deltaX = curSnap0.point.x - newVertex0X;\r\n          deltaY = curSnap0.point.y - newVertex0Y;\r\n        }\r\n        if (curSnap1) {\r\n          deltaX = curSnap1.point.x - newVertex1X;\r\n          deltaY = curSnap1.point.y - newVertex1Y;\r\n        }\r\n      }\r\n\r\n      newVertex0X += deltaX;\r\n      newVertex0Y += deltaY;\r\n      newVertex1X += deltaX;\r\n      newVertex1Y += deltaY;\r\n    }\r\n\r\n    let lineGroups = state //get groups membership if present\r\n      .getIn([\"scene\", \"groups\"])\r\n      .filter((group) => {\r\n        const lines = group.getIn([\"elements\", layerID, \"lines\"]);\r\n        return lines && lines.contains(lineID);\r\n      });\r\n\r\n    state = Layer.mergeEqualsVertices(\r\n      state,\r\n      layerID,\r\n      line.vertices.get(0)\r\n    ).updatedState;\r\n    state = Layer.mergeEqualsVertices(\r\n      state,\r\n      layerID,\r\n      line.vertices.get(1)\r\n    ).updatedState;\r\n\r\n    state = Line.remove(state, layerID, lineID).updatedState;\r\n\r\n    if (\r\n      !GeometryUtils.samePoints(\r\n        { newVertex0X, newVertex0Y },\r\n        { newVertex1X, newVertex1Y }\r\n      )\r\n    ) {\r\n      let ret = Line.createAvoidingIntersections(\r\n        state,\r\n        layerID,\r\n        line.type,\r\n        newVertex0X,\r\n        newVertex0Y,\r\n        newVertex1X,\r\n        newVertex1Y,\r\n        line.properties,\r\n        holesWithOffsetPosition\r\n      );\r\n\r\n      state = ret.updatedState;\r\n\r\n      //re-add to old line's groups if present\r\n      ret.lines.forEach((addedLine) => {\r\n        lineGroups.forEach((oldLineGroup) => {\r\n          state = Group.addElement(\r\n            state,\r\n            oldLineGroup.id,\r\n            layerID,\r\n            \"lines\",\r\n            addedLine.id\r\n          ).updatedState;\r\n        });\r\n      });\r\n    }\r\n\r\n    state = Layer.detectAndUpdateAreas(state, layerID).updatedState;\r\n\r\n    state = state.merge({\r\n      mode: MODE_IDLE,\r\n      draggingSupport: null,\r\n      activeSnapElement: null,\r\n      snapElements: new List(),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setProperties(state, layerID, lineID, properties) {\r\n    state = state.mergeIn(\r\n      [\"scene\", \"layers\", layerID, \"lines\", lineID, \"properties\"],\r\n      properties\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setJsProperties(state, layerID, lineID, properties) {\r\n    return this.setProperties(state, layerID, lineID, fromJS(properties));\r\n  }\r\n\r\n  static updateProperties(state, layerID, lineID, properties) {\r\n    properties.forEach((v, k) => {\r\n      if (\r\n        state.hasIn([\r\n          \"scene\",\r\n          \"layers\",\r\n          layerID,\r\n          \"lines\",\r\n          lineID,\r\n          \"properties\",\r\n          k,\r\n        ])\r\n      )\r\n        state = state.mergeIn(\r\n          [\"scene\", \"layers\", layerID, \"lines\", lineID, \"properties\", k],\r\n          v\r\n        );\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateJsProperties(state, layerID, lineID, properties) {\r\n    return this.updateProperties(state, layerID, lineID, fromJS(properties));\r\n  }\r\n\r\n  static setAttributes(state, layerID, lineID, lineAttributes) {\r\n    let lAttr = lineAttributes.toJS();\r\n    let { vertexOne, vertexTwo, lineLength } = lAttr;\r\n\r\n    delete lAttr[\"vertexOne\"];\r\n    delete lAttr[\"vertexTwo\"];\r\n    delete lAttr[\"lineLength\"];\r\n\r\n    state = state\r\n      .mergeIn([\"scene\", \"layers\", layerID, \"lines\", lineID], fromJS(lAttr))\r\n      .mergeIn([\"scene\", \"layers\", layerID, \"vertices\", vertexOne.id], {\r\n        x: vertexOne.x,\r\n        y: vertexOne.y,\r\n      })\r\n      .mergeIn([\"scene\", \"layers\", layerID, \"vertices\", vertexTwo.id], {\r\n        x: vertexTwo.x,\r\n        y: vertexTwo.y,\r\n      })\r\n      .mergeIn(\r\n        [\"scene\", \"layers\", layerID, \"lines\", lineID, \"misc\"],\r\n        new Map({ _unitLength: lineLength._unit })\r\n      );\r\n\r\n    state = Layer.mergeEqualsVertices(\r\n      state,\r\n      layerID,\r\n      vertexOne.id\r\n    ).updatedState;\r\n\r\n    if (vertexOne.x != vertexTwo.x && vertexOne.y != vertexTwo.y) {\r\n      state = Layer.mergeEqualsVertices(\r\n        state,\r\n        layerID,\r\n        vertexTwo.id\r\n      ).updatedState;\r\n    }\r\n\r\n    state = Layer.detectAndUpdateAreas(state, layerID).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setVerticesCoords(state, layerID, lineID, x1, y1, x2, y2) {\r\n    let line = state.getIn([\"scene\", \"layers\", layerID, \"lines\", lineID]);\r\n    state = Vertex.setAttributes(\r\n      state,\r\n      layerID,\r\n      line.vertices.get(0),\r\n      new Map({ x: x1, y: y1 })\r\n    ).updatedState;\r\n    state = Vertex.setAttributes(\r\n      state,\r\n      layerID,\r\n      line.vertices.get(1),\r\n      new Map({ x: x2, y: y2 })\r\n    ).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n}\r\n\r\nexport { Line as default };\r\n","import {Map, List, fromJS} from 'immutable';\r\nimport {Layer, Group} from './export';\r\n\r\nimport {\r\n  IDBroker,\r\n  NameGenerator\r\n} from '../utils/export';\r\n\r\nimport {\r\n  nearestSnap,\r\n  addLineSegmentSnap,\r\n} from '../utils/snap';\r\n\r\nimport {\r\n  MODE_IDLE,\r\n  MODE_DRAWING_HOLE,\r\n  MODE_DRAGGING_HOLE,\r\n} from '../constants';\r\n\r\nimport {\r\n  GeometryUtils\r\n} from '../utils/export';\r\n\r\nclass Hole {\r\n\r\n  static create(state, layerID, type, lineID, offset, properties) {\r\n\r\n    let holeID = IDBroker.acquireID();\r\n\r\n    let hole = state.catalog.factoryElement(type, {\r\n      id: holeID,\r\n      name: NameGenerator.generateName('holes', state.catalog.getIn(['elements', type, 'info', 'title'])),\r\n      type,\r\n      offset,\r\n      line: lineID\r\n    }, properties);\r\n\r\n    state = state.setIn(['scene', 'layers', layerID, 'holes', holeID], hole);\r\n    state = state.updateIn(['scene', 'layers', layerID, 'lines', lineID, 'holes'],\r\n      holes => holes.push(holeID));\r\n\r\n    return {updatedState: state, hole};\r\n  }\r\n\r\n  static createCursor(state, layerID, type, x, y) {\r\n    let cursor = state.catalog.factoryElement(type, {\r\n      id: IDBroker.acquireID(),\r\n      name: NameGenerator.generateName('holes', state.catalog.getIn(['elements', type, 'info', 'title'])),\r\n      type,\r\n      x, y\r\n    }, null);\r\n\r\n    state = state.setIn(['scene', 'layers', layerID, 'holes', type], cursor);\r\n\r\n\r\n    return {updatedState: state, cursor};\r\n  }\r\n\r\n  static select(state, layerID, holeID) {\r\n    state = Layer.select(state, layerID).updatedState;\r\n    state = Layer.selectElement(state, layerID, 'holes', holeID).updatedState;\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static remove(state, layerID, holeID) {\r\n    let hole = state.getIn(['scene', 'layers', layerID, 'holes', holeID]);\r\n    state = this.unselect(state, layerID, holeID).updatedState;\r\n    state = Layer.removeElement(state, layerID, 'holes', holeID).updatedState;\r\n\r\n    state = state.updateIn(['scene', 'layers', layerID, 'lines', hole.line, 'holes'], holes => {\r\n      let index = holes.findIndex(ID => holeID === ID);\r\n      return index !== -1 ? holes.remove(index) : holes;\r\n    });\r\n\r\n    state.getIn(['scene', 'groups']).forEach(group => state = Group.removeElement(state, group.id, layerID, 'holes', holeID).updatedState);\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static removeCursor(state, layerID, type) {\r\n    console.log('removeCursor')\r\n    state = Layer.removeElement(state, layerID, 'holes', type).updatedState;\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static unselect(state, layerID, holeID) {\r\n    state = Layer.unselect(state, layerID, 'holes', holeID).updatedState;\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static selectToolDrawingHole(state, sceneComponentType) {\r\n    console.log('sceneComponentType ->', sceneComponentType)\r\n    let snapElements = (new List()).withMutations(snapElements => {\r\n      let {lines, vertices} = state.getIn(['scene', 'layers', state.scene.selectedLayer]);\r\n\r\n      lines.forEach(line => {\r\n        let {x: x1, y: y1} = vertices.get(line.vertices.get(0));\r\n        let {x: x2, y: y2} = vertices.get(line.vertices.get(1));\r\n\r\n        addLineSegmentSnap(snapElements, x1, y1, x2, y2, 20, 1, line.id);\r\n      });\r\n    });\r\n\r\n    state = state.merge({\r\n      mode: MODE_DRAWING_HOLE,\r\n      snapElements,\r\n      drawingSupport: Map({\r\n        type: sceneComponentType\r\n      })\r\n    });\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static updateDrawingHole(state, layerID, x, y) {\r\n    let catalog = state.catalog;\r\n    \r\n    //calculate snap and overwrite coords if needed\r\n    //force snap to segment\r\n    let snap = nearestSnap(state.snapElements, x, y, state.snapMask.merge({SNAP_SEGMENT: true}));\r\n    if (snap) ({x, y} = snap.point);\r\n\r\n    let selectedHole = state.getIn(['scene', 'layers', layerID, 'selected', 'holes']).first();\r\n\r\n    if (snap) {\r\n      let lineID = snap.snap.related.get(0);\r\n\r\n      let vertices = state.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices']);\r\n      let {x: x1, y: y1} = state.getIn(['scene', 'layers', layerID, 'vertices', vertices.get(0)]);\r\n      let {x: x2, y: y2} = state.getIn(['scene', 'layers', layerID, 'vertices', vertices.get(1)]);\r\n\r\n      // I need min and max vertices on this line segment\r\n      let minVertex = GeometryUtils.minVertex({x: x1, y: y1}, {x: x2, y: y2});\r\n      let maxVertex = GeometryUtils.maxVertex({x: x1, y: y1}, {x: x2, y: y2});\r\n      let width = catalog.factoryElement(state.drawingSupport.get('type')).properties.getIn(['width', 'length']);\r\n\r\n      // Now I need min and max possible coordinates for the hole on the line. They depend on the width of the hole\r\n      let lineLength = GeometryUtils.pointsDistance(x1, y1, x2, y2);\r\n      let alpha = GeometryUtils.absAngleBetweenTwoPoints(x1, y1, x2, y2);\r\n\r\n      let cosAlpha = GeometryUtils.cosWithThreshold(alpha, 0.0000001);\r\n      let sinAlpha = GeometryUtils.sinWithThreshold(alpha, 0.0000001);\r\n\r\n      let minLeftVertexHole = {\r\n        x: minVertex.x + width / 2 * cosAlpha,\r\n        y: minVertex.y + width / 2 * sinAlpha\r\n      };\r\n\r\n      let maxRightVertexHole = {\r\n        x: minVertex.x + lineLength * cosAlpha - width / 2 * cosAlpha,\r\n        y: minVertex.y + lineLength * sinAlpha - width / 2 * sinAlpha\r\n      };\r\n\r\n      let offset;\r\n      if (x < minLeftVertexHole.x) {\r\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n          maxVertex.x, maxVertex.y,\r\n          minLeftVertexHole.x, minLeftVertexHole.y);\r\n      } else if (x > maxRightVertexHole.x) {\r\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n          maxVertex.x, maxVertex.y,\r\n          maxRightVertexHole.x, maxRightVertexHole.y);\r\n      } else {\r\n\r\n        if (x === minLeftVertexHole.x && x === maxRightVertexHole.x) {\r\n          if (y < minLeftVertexHole.y) {\r\n            offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n              maxVertex.x, maxVertex.y,\r\n              minLeftVertexHole.x, minLeftVertexHole.y);\r\n            offset = minVertex.x === x1 && minVertex.y === y1 ? offset : 1 - offset;\r\n          } else if (y > maxRightVertexHole.y) {\r\n            offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n              maxVertex.x, maxVertex.y,\r\n              maxRightVertexHole.x, maxRightVertexHole.y);\r\n            offset = minVertex.x === x1 && minVertex.y === y1 ? offset : 1 - offset;\r\n          } else {\r\n            offset = GeometryUtils.pointPositionOnLineSegment(x1, y1, x2, y2, x, y);\r\n          }\r\n        } else {\r\n          offset = GeometryUtils.pointPositionOnLineSegment(x1, y1, x2, y2, x, y);\r\n        }\r\n      }\r\n\r\n      //if hole does exist, update\r\n      if (selectedHole && snap) {\r\n        state = state.mergeIn(['scene', 'layers', layerID, 'holes', selectedHole], {offset, line: lineID});\r\n\r\n        //remove from old line ( if present )\r\n        let index = state.getIn(['scene', 'layers', layerID, 'lines']).findEntry(line => {\r\n          return line.id !== lineID && line.get('holes').contains(selectedHole);\r\n        });\r\n\r\n        if (index) {\r\n          let removed = index[1].get('holes').filter(hl => hl !== selectedHole);\r\n          state = state.setIn(['scene', 'layers', layerID, 'lines', index[0], 'holes'], removed);\r\n        }\r\n\r\n        //add to line\r\n        let line_holes = state.getIn(['scene', 'layers', layerID, 'lines', lineID, 'holes']);\r\n        if (!line_holes.contains(selectedHole)) {\r\n          state = state.setIn(['scene', 'layers', layerID, 'lines', lineID, 'holes'], line_holes.push(selectedHole));\r\n        }\r\n\r\n      } else if (!selectedHole && snap) {\r\n        //if hole does not exist, create\r\n        let {updatedState: stateH, hole} = this.create(state, layerID, state.drawingSupport.get('type'), lineID, offset);\r\n        state = Hole.select(stateH, layerID, hole.id).updatedState;\r\n      } \r\n\r\n      let cursorObj = state.getIn(['scene', 'layers', layerID, 'holes', state.drawingSupport.get('type')  + '-cursor']);\r\n\r\n      if(cursorObj != undefined)\r\n        state = Hole.removeCursor(state, layerID, state.drawingSupport.get('type')  + '-cursor').updatedState\r\n    }\r\n    //i've lost the snap while trying to drop the hole\r\n    else if (selectedHole)  //think if enable\r\n    {\r\n      state = Hole.remove(state, layerID, selectedHole).updatedState;\r\n    } else {\r\n        let {updatedState: stateH, cursor} = this.createCursor(state, layerID, state.drawingSupport.get('type')  + '-cursor', x, y)\r\n        state = stateH;\r\n    }\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static endDrawingHole(state, layerID, x, y) {\r\n    state = this.updateDrawingHole(state, layerID, x, y).updatedState;\r\n    state = Layer.unselectAll(state, layerID).updatedState;\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static beginDraggingHole(state, layerID, holeID, x, y) {\r\n    let layer = state.getIn(['scene', 'layers', layerID]);\r\n    let hole = layer.getIn(['holes', holeID]);\r\n    let line = layer.getIn(['lines', hole.line]);\r\n    let v0 = layer.getIn(['vertices', line.vertices.get(0)]);\r\n    let v1 = layer.getIn(['vertices', line.vertices.get(1)]);\r\n\r\n    let snapElements = addLineSegmentSnap(List(), v0.x, v0.y, v1.x, v1.y, 9999999, 1, null);\r\n\r\n    state = state.merge({\r\n      mode: MODE_DRAGGING_HOLE,\r\n      snapElements,\r\n      draggingSupport: Map({\r\n        layerID,\r\n        holeID,\r\n        startPointX: x,\r\n        startPointY: y,\r\n      })\r\n    });\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static updateDraggingHole(state, x, y) {\r\n\r\n    //calculate snap and overwrite coords if needed\r\n    //force snap to segment\r\n    let snap = nearestSnap(state.snapElements, x, y, state.snapMask.merge({SNAP_SEGMENT: true}));\r\n    if (!snap) return state;\r\n\r\n    let {draggingSupport, scene} = state;\r\n\r\n    let layerID = draggingSupport.get('layerID');\r\n    let holeID = draggingSupport.get('holeID');\r\n    let startPointX = draggingSupport.get('startPointX');\r\n    let startPointY = draggingSupport.get('startPointY');\r\n\r\n    let layer = state.getIn(['scene', 'layers', layerID]);\r\n    let hole = layer.getIn(['holes', holeID]);\r\n    let line = layer.getIn(['lines', hole.line]);\r\n    let v0 = layer.getIn(['vertices', line.vertices.get(0)]);\r\n    let v1 = layer.getIn(['vertices', line.vertices.get(1)]);\r\n\r\n    ({x, y} = snap.point);\r\n\r\n    // I need min and max vertices on this line segment\r\n    let minVertex = GeometryUtils.minVertex(v0, v1);\r\n    let maxVertex = GeometryUtils.maxVertex(v0, v1);\r\n\r\n    // Now I need min and max possible coordinates for the hole on the line. They depend on the width of the hole\r\n\r\n    let width = hole.properties.get('width').get('length');\r\n    let lineLength = GeometryUtils.pointsDistance(v0.x, v0.y, v1.x, v1.y);\r\n    let alpha = Math.atan2(Math.abs(v1.y - v0.y), Math.abs(v1.x - v0.x));\r\n\r\n    let cosWithThreshold = (alpha) => {\r\n      let cos = Math.cos(alpha);\r\n      return cos < 0.0000001 ? 0 : cos;\r\n    };\r\n\r\n    let sinWithThreshold = (alpha) => {\r\n      let sin = Math.sin(alpha);\r\n      return sin < 0.0000001 ? 0 : sin;\r\n    };\r\n\r\n    let cosAlpha = cosWithThreshold(alpha);\r\n    let sinAlpha = sinWithThreshold(alpha);\r\n\r\n    let minLeftVertexHole = {\r\n      x: minVertex.x + width / 2 * cosAlpha,\r\n      y: minVertex.y + width / 2 * sinAlpha\r\n    };\r\n\r\n    let maxRightVertexHole = {\r\n      x: minVertex.x + lineLength * cosAlpha - width / 2 * cosAlpha,\r\n      y: minVertex.y + lineLength * sinAlpha - width / 2 * sinAlpha\r\n    };\r\n\r\n    // Now I need to verify if the snap vertex (with coordinates x and y) is on the line segment\r\n\r\n    let offset;\r\n\r\n    if (x < minLeftVertexHole.x) {\r\n      // Snap point is previous the the line\r\n      offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n        maxVertex.x, maxVertex.y,\r\n        minLeftVertexHole.x, minLeftVertexHole.y);\r\n    } else {\r\n      // Snap point is after the line or on the line\r\n      if (x > maxRightVertexHole.x) {\r\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n          maxVertex.x, maxVertex.y,\r\n          maxRightVertexHole.x, maxRightVertexHole.y);\r\n      } else if (x === minLeftVertexHole.x && x === maxRightVertexHole.x) {\r\n        // I am on a vertical line, I need to check y coordinates\r\n        if (y < minLeftVertexHole.y) {\r\n          offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n            maxVertex.x, maxVertex.y,\r\n            minLeftVertexHole.x, minLeftVertexHole.y);\r\n\r\n          offset = minVertex === v0 ? offset : 1 - offset;\r\n\r\n        } else if (y > maxRightVertexHole.y) {\r\n          offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n            maxVertex.x, maxVertex.y,\r\n            maxRightVertexHole.x, maxRightVertexHole.y);\r\n\r\n          offset = minVertex === v0 ? offset : 1 - offset;\r\n\r\n        } else {\r\n          offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n            maxVertex.x, maxVertex.y,\r\n            x, y);\r\n\r\n          offset = minVertex === v0 ? offset : 1 - offset;\r\n        }\r\n      } else {\r\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\r\n          maxVertex.x, maxVertex.y,\r\n          x, y);\r\n      }\r\n    }\r\n\r\n    hole = hole.set('offset', offset);\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn(['layers', layerID, 'holes', holeID], hole)\r\n    });\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static endDraggingHole(state, x, y) {\r\n    state = this.updateDraggingHole(state, x, y).updatedState;\r\n    state = state.merge({mode: MODE_IDLE});\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static setProperties(state, layerID, holeID, properties) {\r\n    state = state.setIn(['scene', 'layers', layerID, 'holes', holeID, 'properties'], properties);\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static setJsProperties(state, layerID, holeID, properties) {\r\n    return this.setProperties(state, layerID, holeID, fromJS(properties));\r\n  }\r\n\r\n  static updateProperties(state, layerID, holeID, properties) {\r\n    properties.forEach((v, k) => {\r\n      if (state.hasIn(['scene', 'layers', layerID, 'holes', holeID, 'properties', k]))\r\n        state = state.mergeIn(['scene', 'layers', layerID, 'holes', holeID, 'properties', k], v);\r\n    });\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static updateJsProperties(state, layerID, holeID, properties) {\r\n    return this.updateProperties(state, layerID, holeID, fromJS(properties));\r\n  }\r\n\r\n  static setAttributes(state, layerID, holeID, holesAttributes) {\r\n\r\n    let hAttr = holesAttributes.toJS();\r\n    let {offsetA, offsetB, offset} = hAttr;\r\n\r\n    delete hAttr['offsetA'];\r\n    delete hAttr['offsetB'];\r\n    delete hAttr['offset'];\r\n\r\n    let misc = new Map({_unitA: offsetA._unit, _unitB: offsetB._unit});\r\n\r\n    state = state\r\n      .mergeIn(['scene', 'layers', layerID, 'holes', holeID], fromJS(hAttr))\r\n      .mergeDeepIn(['scene', 'layers', layerID, 'holes', holeID], new Map({offset, misc}));\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n}\r\n\r\nexport {Hole as default};\r\n","import { Map, List } from 'immutable';\r\nimport { Vertex as VertexModel } from '../models';\r\nimport {\r\n  IDBroker,\r\n  GeometryUtils,\r\n  SnapSceneUtils,\r\n  SnapUtils\r\n} from '../utils/export';\r\nimport {\r\n  MODE_DRAGGING_VERTEX,\r\n  MODE_IDLE\r\n} from '../constants';\r\nimport { Layer, Line, Group } from '../class/export';\r\n\r\nclass Vertex{\r\n\r\n  static add( state, layerID, x, y, relatedPrototype, relatedID ) {\r\n\r\n    let vertex = state.getIn(['scene', 'layers', layerID, 'vertices']).find(vertex => GeometryUtils.samePoints(vertex, {x, y}));\r\n\r\n    if (vertex) {\r\n      vertex = vertex.update(relatedPrototype, related => related.push(relatedID));\r\n    }\r\n    else {\r\n      vertex = new VertexModel({\r\n        id: IDBroker.acquireID(),\r\n        name: 'Vertex',\r\n        x, y,\r\n        [relatedPrototype]: new List([relatedID])\r\n      });\r\n    }\r\n\r\n    state = state.setIn(['scene', 'layers', layerID, 'vertices', vertex.id], vertex);\r\n\r\n    return { updatedState: state, vertex };\r\n  }\r\n\r\n  static setAttributes(state, layerID, vertexID, vertexAttributes) {\r\n    state = state.mergeIn(['scene', 'layers', layerID, 'vertices', vertexID ], vertexAttributes)\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static addElement( state, layerID, vertexID, elementPrototype, elementID ) {\r\n    state = state.updateIn(['scene', 'layers', layerID, 'vertices', vertexID, elementPrototype], list => list.push( elementID ) );\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static removeElement( state, layerID, vertexID, elementPrototype, elementID ) {\r\n    let elementIndex = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID, elementPrototype]).findIndex( el => el === elementID );\r\n    if( elementIndex !== -1 ) {\r\n      state = state.updateIn(['scene', 'layers', layerID, 'vertices', vertexID, elementPrototype], list => list.remove( elementIndex ) );\r\n    }\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static select( state, layerID, vertexID ){\r\n    state = state.setIn(['scene', 'layers', layerID, 'vertices', vertexID, 'selected'], true);\r\n    state = state.updateIn(['scene', 'layers', layerID, 'selected', 'vertices'], elems => elems.push(vertexID));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static unselect( state, layerID, vertexID ){\r\n    state = state.setIn(['scene', 'layers', layerID, 'vertices', vertexID, 'selected'], false);\r\n    state = state.updateIn(['scene', 'layers', layerID, 'selected', 'vertices'], elems => elems.filter( el => el.id !== vertexID ));\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove( state, layerID, vertexID, relatedPrototype, relatedID, forceRemove ) {\r\n    let vertex = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID]);\r\n\r\n\r\n    if( vertex ) {\r\n      if( relatedPrototype && relatedID ) vertex = vertex.update(relatedPrototype, related => {\r\n        let index = related.findIndex(ID => relatedID === ID);\r\n        return related.delete(index);\r\n      });\r\n\r\n      let inUse = vertex.areas.size || vertex.lines.size;\r\n\r\n      if( inUse && !forceRemove ) {\r\n        state = state.setIn(['scene', 'layers', layerID, 'vertices', vertexID], vertex);\r\n      }\r\n      else {\r\n        state = state.deleteIn(['scene', 'layers', layerID, 'vertices', vertexID]);\r\n      }\r\n    }\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginDraggingVertex(state, layerID, vertexID, x, y) {\r\n\r\n    let snapElements = SnapSceneUtils.sceneSnapElements(state.scene, new List(), state.snapMask);\r\n\r\n    state = state.merge({\r\n      mode: MODE_DRAGGING_VERTEX,\r\n      snapElements,\r\n      draggingSupport: Map({\r\n        layerID,\r\n        vertexID,\r\n        previousMode: state.get('mode')\r\n      })\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateDraggingVertex(state, x, y) {\r\n    let { draggingSupport, snapElements, scene } = state;\r\n\r\n    let snap = null;\r\n    if (state.snapMask && !state.snapMask.isEmpty()) {\r\n      snap = SnapUtils.nearestSnap(snapElements, x, y, state.snapMask);\r\n      if (snap) ({ x, y } = snap.point);\r\n    }\r\n\r\n    let layerID = draggingSupport.get('layerID');\r\n    let vertexID = draggingSupport.get('vertexID');\r\n    state =  state.merge({\r\n      activeSnapElement: snap ? snap.snap : null,\r\n      scene: scene.mergeIn(['layers', layerID, 'vertices', vertexID], { x, y })\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endDraggingVertex(state, x, y) {\r\n    let { draggingSupport } = state;\r\n    let layerID = draggingSupport.get('layerID');\r\n    let vertexID = draggingSupport.get('vertexID');\r\n    let lines = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID, 'lines']);\r\n\r\n    if( lines ) {\r\n      state = lines.reduce(\r\n        ( reducedState, lineID ) =>\r\n        {\r\n          if( !reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID])) return reducedState;\r\n\r\n          let v_id0 = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', 0]);\r\n          let v_id1 = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', 1]);\r\n          let oldVertexID = v_id0 === vertexID ? v_id1 : v_id0;\r\n\r\n          let oldVertex = reducedState.getIn(['scene', 'layers', layerID, 'vertices', oldVertexID]);\r\n          let vertex = reducedState.getIn(['scene', 'layers', layerID, 'vertices', vertexID]);\r\n\r\n          let oldHoles = [];\r\n\r\n          let orderedVertices = GeometryUtils.orderVertices([oldVertex, vertex]);\r\n\r\n          let holes = reducedState\r\n            .getIn(['scene', 'layers', layerID, 'lines', lineID, 'holes'])\r\n            .forEach(holeID => {\r\n              let hole = reducedState.getIn(['scene', 'layers', layerID, 'holes', holeID]);\r\n              let oldLineLength = GeometryUtils.pointsDistance(oldVertex.x, oldVertex.y, vertex.x, vertex.y);\r\n              let offset = GeometryUtils.samePoints( orderedVertices[1], reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', 1]) ) ? ( 1 - hole.offset ) : hole.offset;\r\n              let offsetPosition = GeometryUtils.extendLine( oldVertex.x, oldVertex.y, vertex.x, vertex.y, oldLineLength * offset );\r\n\r\n              oldHoles.push({hole, offsetPosition});\r\n            });\r\n\r\n          let lineType = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'type']);\r\n          let lineProps = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'properties']);\r\n          let lineGroups = reducedState   //get groups membership if present\r\n            .getIn(['scene', 'groups'])\r\n            .filter( group => {\r\n              const lines = group.getIn(['elements', layerID, 'lines']);\r\n              return lines && lines.contains(lineID);\r\n            });\r\n\r\n          reducedState = Layer.removeZeroLengthLines( reducedState, layerID ).updatedState;\r\n          reducedState = Layer.mergeEqualsVertices( reducedState, layerID, vertexID ).updatedState;\r\n          reducedState = Line.remove( reducedState, layerID, lineID ).updatedState;\r\n\r\n          if (!GeometryUtils.samePoints(oldVertex, vertex)) {\r\n            let ret = Line.createAvoidingIntersections(\r\n              reducedState,\r\n              layerID,\r\n              lineType,\r\n              oldVertex.x,\r\n              oldVertex.y,\r\n              vertex.x,\r\n              vertex.y,\r\n              lineProps,\r\n              oldHoles\r\n            );\r\n\r\n            reducedState = ret.updatedState;\r\n\r\n            //re-add to old line's groups if present\r\n            ret.lines.forEach( addedLine => {\r\n              lineGroups.forEach( oldLineGroup => {\r\n                reducedState = Group.addElement( reducedState, oldLineGroup.id, layerID, 'lines', addedLine.id ).updatedState;\r\n              });\r\n            });\r\n          }\r\n\r\n          return reducedState;\r\n        },\r\n        state\r\n      );\r\n    }\r\n\r\n    state = Layer.detectAndUpdateAreas( state, layerID ).updatedState;\r\n\r\n    state = state.merge({\r\n      mode: draggingSupport.get('previousMode'),\r\n      draggingSupport: null,\r\n      activeSnapElement: null,\r\n      snapElements: new List()\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n}\r\n\r\nexport { Vertex as default };\r\n","import { fromJS } from 'immutable';\r\nimport { Layer, Vertex, Group } from './export';\r\nimport {\r\n  IDBroker,\r\n  NameGenerator\r\n} from '../utils/export';\r\n\r\nclass Area{\r\n\r\n  static add( state, layerID, type, verticesCoords, catalog ) {\r\n\r\n    let area;\r\n\r\n    let layer = state.getIn(['scene', 'layers', layerID]);\r\n\r\n    layer = layer.withMutations(layer => {\r\n      let areaID = IDBroker.acquireID();\r\n\r\n      let vertices = verticesCoords.map( ( v ) => Vertex.add( state, layerID, v.x, v.y, 'areas', areaID).vertex.id );\r\n\r\n      area = catalog.factoryElement(type, {\r\n        id: areaID,\r\n        name: NameGenerator.generateName('areas', catalog.getIn(['elements', type, 'info', 'title'])),\r\n        type,\r\n        prototype: 'areas',\r\n        vertices\r\n      });\r\n\r\n      layer.setIn(['areas', areaID], area);\r\n    });\r\n\r\n    state = state.setIn(['scene', 'layers', layerID], layer);\r\n\r\n    return { updatedState: state, area };\r\n  }\r\n\r\n  static select( state, layerID, areaID ){\r\n    state = Layer.select( state, layerID ).updatedState;\r\n    state = Layer.selectElement( state, layerID, 'areas', areaID ).updatedState;\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static remove( state, layerID, areaID ) {\r\n\r\n    let area = state.getIn(['scene', 'layers', layerID, 'areas', areaID]);\r\n\r\n    if( area.get('selected') === true ) state = this.unselect( state, layerID, areaID ).updatedState;\r\n\r\n    area.vertices.forEach(vertexID => { state = Vertex.remove( state, layerID, vertexID, 'areas', areaID).updatedState; });\r\n\r\n    state = state.deleteIn(['scene', 'layers', layerID, 'areas', areaID]);\r\n\r\n    state.getIn(['scene', 'groups']).forEach( group => state = Group.removeElement(state, group.id, layerID, 'areas', areaID).updatedState );\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static unselect( state, layerID, areaID ) {\r\n    state = Layer.unselect( state, layerID, 'areas', areaID ).updatedState;\r\n\r\n    return {updatedState: state};\r\n  }\r\n\r\n  static setProperties( state, layerID, areaID, properties ) {\r\n    state = state.mergeIn(['scene', 'layers', layerID, 'areas', areaID, 'properties'], properties);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setJsProperties( state, layerID, areaID, properties ) {\r\n    return this.setProperties( state, layerID, areaID, fromJS(properties) );\r\n  }\r\n\r\n  static updateProperties( state, layerID, areaID, properties) {\r\n    properties.forEach( ( v, k ) => {\r\n      if( state.hasIn(['scene', 'layers', layerID, 'areas', areaID, 'properties', k]) )\r\n        state = state.mergeIn(['scene', 'layers', layerID, 'areas', areaID, 'properties', k], v);\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateJsProperties( state, layerID, areaID, properties) {\r\n    return this.updateProperties( state, layerID, areaID, fromJS(properties) );\r\n  }\r\n\r\n  static setAttributes( state ) {\r\n    return { updatedState: state };\r\n  }\r\n\r\n}\r\n\r\nexport { Area as default };\r\n","import { Layer, Group } from \"./export\";\r\nimport { IDBroker, NameGenerator } from \"../utils/export\";\r\nimport { Map, fromJS } from \"immutable\";\r\n\r\nimport {\r\n  MODE_IDLE,\r\n  MODE_DRAWING_ITEM,\r\n  MODE_DRAGGING_ITEM,\r\n  MODE_ROTATING_ITEM,\r\n  MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  MODE_RESIZE_ITEM_RIGHT_TOP,\r\n  MODE_RESIZE_ITEM_LEFT_TOP,\r\n  MODE_RESIZE_ITEM_LEFT_BOTTOM,\r\n} from \"../constants\";\r\n\r\nclass Item {\r\n  static create(state, layerID, type, x, y, width, height, rotation) {\r\n    let itemID = IDBroker.acquireID();\r\n\r\n    let item = state.catalog.factoryElement(type, {\r\n      id: itemID,\r\n      name: NameGenerator.generateName(\r\n        \"items\",\r\n        state.catalog.getIn([\"elements\", type, \"info\", \"title\"])\r\n      ),\r\n      type,\r\n      height,\r\n      width,\r\n      x,\r\n      y,\r\n      rotation,\r\n    });\r\n\r\n    state = state.setIn([\"scene\", \"layers\", layerID, \"items\", itemID], item);\r\n\r\n    return { updatedState: state, item };\r\n  }\r\n\r\n  static select(state, layerID, itemID) {\r\n    state = Layer.select(state, layerID).updatedState;\r\n    state = Layer.selectElement(state, layerID, \"items\", itemID).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove(state, layerID, itemID) {\r\n    state = this.unselect(state, layerID, itemID).updatedState;\r\n    state = Layer.removeElement(state, layerID, \"items\", itemID).updatedState;\r\n\r\n    state\r\n      .getIn([\"scene\", \"groups\"])\r\n      .forEach(\r\n        (group) =>\r\n        (state = Group.removeElement(\r\n          state,\r\n          group.id,\r\n          layerID,\r\n          \"items\",\r\n          itemID\r\n        ).updatedState)\r\n      );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static unselect(state, layerID, itemID) {\r\n    state = Layer.unselect(state, layerID, \"items\", itemID).updatedState;\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static selectToolDrawingItem(state, sceneComponentType) {\r\n    state = state.merge({\r\n      mode: MODE_DRAWING_ITEM,\r\n      drawingSupport: new Map({\r\n        type: sceneComponentType,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateDrawingItem(state, layerID, x, y) {\r\n    if (state.hasIn([\"drawingSupport\", \"currentID\"])) {\r\n      state = state.updateIn(\r\n        [\r\n          \"scene\",\r\n          \"layers\",\r\n          layerID,\r\n          \"items\",\r\n          state.getIn([\"drawingSupport\", \"currentID\"]),\r\n        ],\r\n        (item) => item.merge({ x, y })\r\n      );\r\n    } else {\r\n      let { updatedState: stateI, item } = this.create(\r\n        state,\r\n        layerID,\r\n        state.getIn([\"drawingSupport\", \"type\"]),\r\n        x,\r\n        y,\r\n        200,\r\n        100,\r\n        0\r\n      );\r\n      state = Item.select(stateI, layerID, item.id).updatedState;\r\n      state = state.setIn([\"drawingSupport\", \"currentID\"], item.id);\r\n    }\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endDrawingItem(state, layerID, x, y) {\r\n    let catalog = state.catalog;\r\n\r\n    // let lines = state.getIn(['scene', 'layers', layerID, 'lines'])\r\n\r\n    // let disable = false;\r\n    // lines.map(line => {\r\n    //   let { x: x1, y: y1 } = state.getIn(['scene', 'layers', layerID, 'vertices', line.get('vertices').get(0)]);\r\n    //   let { x: x2, y: y2 } = state.getIn(['scene', 'layers', layerID, 'vertices', line.get('vertices').get(1)]);\r\n\r\n    //   if (((x1 <= x - 75 && x2 >= x - 75)\r\n    //     || (x1 <= x + 75 && x2 >= x + 75)\r\n    //     || (x2 <= x - 75 && x1 >= x - 75)\r\n    //     || (x2 <= x + 75 && x1 >= x + 75))\r\n    //     && ((y1 <= y - 75 && y2 >= y - 75)\r\n    //       || (y1 <= y + 75 && y2 >= y + 75)\r\n    //       || (y2 <= y - 75 && y1 >= y - 75)\r\n    //       || (y2 <= y + 75 && y1 >= y + 75))) {\r\n    //     disable = true\r\n    //   }\r\n    // })\r\n\r\n    // console.log('disable', disable)\r\n\r\n    // if (disable) {\r\n    //   return { updatedState: state };\r\n    // }\r\n\r\n    state = this.updateDrawingItem(state, layerID, x, y, catalog).updatedState;\r\n    state = Layer.unselectAll(state, layerID).updatedState;\r\n    state = state.merge({\r\n      drawingSupport: Map({\r\n        type: state.drawingSupport.get(\"type\"),\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginDraggingItem(state, layerID, itemID, x, y) {\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n    state = state.merge({\r\n      mode: MODE_DRAGGING_ITEM,\r\n      draggingSupport: Map({\r\n        layerID,\r\n        itemID,\r\n        startPointX: x,\r\n        startPointY: y,\r\n        originalX: item.x,\r\n        originalY: item.y,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateDraggingItem(state, x, y) {\r\n    let { draggingSupport, scene } = state;\r\n\r\n    let layerID = draggingSupport.get(\"layerID\");\r\n    let itemID = draggingSupport.get(\"itemID\");\r\n    let startPointX = draggingSupport.get(\"startPointX\");\r\n    let startPointY = draggingSupport.get(\"startPointY\");\r\n    let originalX = draggingSupport.get(\"originalX\");\r\n    let originalY = draggingSupport.get(\"originalY\");\r\n\r\n    let diffX = startPointX - x;\r\n    let diffY = startPointY - y;\r\n\r\n    let item = scene.getIn([\"layers\", layerID, \"items\", itemID]);\r\n    item = item.merge({\r\n      x: originalX - diffX,\r\n      y: originalY - diffY,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endDraggingItem(state, x, y) {\r\n    state = this.updateDraggingItem(state, x, y).updatedState;\r\n    state = state.merge({ mode: MODE_IDLE });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginResizingItemRB(state, layerID, itemID, x, y) {\r\n    state = state.merge({\r\n      mode: MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n      resizeSupport: Map({\r\n        layerID,\r\n        itemID,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateResizingItemRB(state, x, y) {\r\n    let { resizeSupport, scene } = state;\r\n\r\n    let layerID = resizeSupport.get(\"layerID\");\r\n    let itemID = resizeSupport.get(\"itemID\");\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n    let deltaX = x - item.x;\r\n\r\n    console.log(\"deltaX\", deltaX);\r\n\r\n    item = item.merge({\r\n      zoom: deltaX,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endResizingItemRB(state, x, y) {\r\n    state = this.updateResizingItemRB(state, x, y).updatedState;\r\n    state = state.merge({ mode: MODE_IDLE });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginResizingItemRT(state, layerID, itemID, x, y) {\r\n    state = state.merge({\r\n      mode: MODE_RESIZE_ITEM_RIGHT_TOP,\r\n      resizeSupport: Map({\r\n        layerID,\r\n        itemID,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateResizingItemRT(state, x, y) {\r\n    let { resizeSupport, scene } = state;\r\n\r\n    let layerID = resizeSupport.get(\"layerID\");\r\n    let itemID = resizeSupport.get(\"itemID\");\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n    let deltaX = x - item.x;\r\n\r\n    console.log(\"deltaX\", deltaX);\r\n\r\n    item = item.merge({\r\n      zoom: deltaX,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endResizingItemRT(state, x, y) {\r\n    state = this.updateResizingItemRT(state, x, y).updatedState;\r\n    state = state.merge({ mode: MODE_IDLE });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginResizingItemLT(state, layerID, itemID, x, y) {\r\n    state = state.merge({\r\n      mode: MODE_RESIZE_ITEM_LEFT_TOP,\r\n      resizeSupport: Map({\r\n        layerID,\r\n        itemID,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static resizingItem(state, layerID, itemID, deltaX) {\r\n    try {\r\n      let { scene } = state;\r\n      let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n      item = item.merge({\r\n        zoom: deltaX,\r\n      });\r\n\r\n      state = state.merge({\r\n        scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n      });\r\n    } catch (e) {\r\n\r\n    }\r\n    return { updatedState: state };\r\n\r\n  }\r\n\r\n  static updateResizingItemLT(state, x, y) {\r\n    let { resizeSupport, scene } = state;\r\n\r\n    let layerID = resizeSupport.get(\"layerID\");\r\n    let itemID = resizeSupport.get(\"itemID\");\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n    let deltaX = x - item.x;\r\n\r\n    console.log(\"deltaX\", deltaX);\r\n\r\n    item = item.merge({\r\n      zoom: deltaX,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endResizingItemLT(state, x, y) {\r\n    state = this.updateResizingItemRT(state, x, y).updatedState;\r\n    state = state.merge({ mode: MODE_IDLE });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginResizingItemLB(state, layerID, itemID, x, y) {\r\n    state = state.merge({\r\n      mode: MODE_RESIZE_ITEM_LEFT_BOTTOM,\r\n      resizeSupport: Map({\r\n        layerID,\r\n        itemID,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateResizingItemLB(state, x, y) {\r\n    let { resizeSupport, scene } = state;\r\n\r\n    let layerID = resizeSupport.get(\"layerID\");\r\n    let itemID = resizeSupport.get(\"itemID\");\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n    let deltaX = x - item.x;\r\n\r\n    console.log(\"deltaX\", deltaX);\r\n\r\n    item = item.merge({\r\n      zoom: deltaX,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endResizingItemLB(state, x, y) {\r\n    state = this.updateResizingItemRT(state, x, y).updatedState;\r\n    state = state.merge({ mode: MODE_IDLE });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static beginRotatingItem(state, layerID, itemID, x, y) {\r\n    state = state.merge({\r\n      mode: MODE_ROTATING_ITEM,\r\n      rotatingSupport: Map({\r\n        layerID,\r\n        itemID,\r\n      }),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateVerticalItem(state, layerID, itemID) {\r\n    let { scene } = state;\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n    item = item.merge({\r\n      verticalFlip: !item.verticalFlip,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n\r\n  static updateHorizontalItem(state, layerID, itemID) {\r\n    let { scene } = state;\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n    item = item.merge({\r\n      horizontalFlip: !item.horizontalFlip,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateRotatingItem(state, x, y) {\r\n    let { rotatingSupport, scene } = state;\r\n\r\n    let layerID = rotatingSupport.get(\"layerID\");\r\n    let itemID = rotatingSupport.get(\"itemID\");\r\n    let item = state.getIn([\"scene\", \"layers\", layerID, \"items\", itemID]);\r\n\r\n    let deltaX = x - item.x;\r\n    let deltaY = y - item.y;\r\n    let rotation = (Math.atan2(deltaY, deltaX) * 180) / Math.PI - 90;\r\n\r\n    if (-5 < rotation && rotation < 5) rotation = 0;\r\n    if (-95 < rotation && rotation < -85) rotation = -90;\r\n    if (-185 < rotation && rotation < -175) rotation = -180;\r\n    if (85 < rotation && rotation < 90) rotation = 90;\r\n    if (-270 < rotation && rotation < -265) rotation = 90;\r\n\r\n    item = item.merge({\r\n      rotation,\r\n    });\r\n\r\n    state = state.merge({\r\n      scene: scene.mergeIn([\"layers\", layerID, \"items\", itemID], item),\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static endRotatingItem(state, x, y) {\r\n    state = this.updateRotatingItem(state, x, y).updatedState;\r\n    state = state.merge({ mode: MODE_IDLE });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setProperties(state, layerID, itemID, properties) {\r\n    state = state.mergeIn(\r\n      [\"scene\", \"layers\", layerID, \"items\", itemID, \"properties\"],\r\n      properties\r\n    );\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setJsProperties(state, layerID, itemID, properties) {\r\n    return this.setProperties(state, layerID, itemID, fromJS(properties));\r\n  }\r\n\r\n  static updateProperties(state, layerID, itemID, properties) {\r\n    properties.forEach((v, k) => {\r\n      if (\r\n        state.hasIn([\r\n          \"scene\",\r\n          \"layers\",\r\n          layerID,\r\n          \"items\",\r\n          itemID,\r\n          \"properties\",\r\n          k,\r\n        ])\r\n      )\r\n        state = state.mergeIn(\r\n          [\"scene\", \"layers\", layerID, \"items\", itemID, \"properties\", k],\r\n          v\r\n        );\r\n    });\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static updateJsProperties(state, layerID, itemID, properties) {\r\n    return this.updateProperties(state, layerID, itemID, fromJS(properties));\r\n  }\r\n\r\n  static setAttributes(state, layerID, itemID, itemAttributes) {\r\n    state = state.mergeIn(\r\n      [\"scene\", \"layers\", layerID, \"items\", itemID],\r\n      itemAttributes\r\n    );\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static setJsAttributes(state, layerID, itemID, itemAttributes) {\r\n    itemAttributes = fromJS(itemAttributes);\r\n    return this.setAttributes(state, layerID, itemID, itemAttributes);\r\n  }\r\n}\r\n\r\nexport { Item as default };\r\n","import { IDBroker } from '../utils/export';\r\n\r\nclass HorizontalGuide {\r\n  static create(state, coordinate) {\r\n    let hGuideID = IDBroker.acquireID();\r\n    state = state.setIn(['scene', 'guides', 'horizontal', hGuideID], coordinate);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove(state, hGuideID) {\r\n    state = state.deleteIn(['scene', 'guides', 'horizontal', hGuideID]);\r\n\r\n    return { updatedState: state };\r\n  }\r\n};\r\n\r\nclass VerticalGuide {\r\n  static create(state, coordinate) {\r\n    let vGuideID = IDBroker.acquireID();\r\n    state = state.setIn(['scene', 'guides', 'vertical', vGuideID], coordinate);\r\n\r\n    return { updatedState: state };\r\n  }\r\n\r\n  static remove(state, vGuideID) {\r\n    state = state.deleteIn(['scene', 'guides', 'vertical', vGuideID]);\r\n\r\n    return { updatedState: state };\r\n  }\r\n};\r\n\r\nclass CircularGuide {\r\n};\r\n\r\nexport {\r\n  HorizontalGuide,\r\n  VerticalGuide,\r\n  CircularGuide\r\n};\r\n\r\nexport default {\r\n  HorizontalGuide,\r\n  VerticalGuide,\r\n  CircularGuide\r\n};\r\n","import { Hole } from '../class/export';\r\nimport { history } from '../utils/export';\r\nimport {\r\n  SELECT_TOOL_DRAWING_HOLE,\r\n  UPDATE_DRAWING_HOLE,\r\n  END_DRAWING_HOLE,\r\n  BEGIN_DRAGGING_HOLE,\r\n  UPDATE_DRAGGING_HOLE,\r\n  END_DRAGGING_HOLE,\r\n  SELECT_HOLE,\r\n} from '../constants';\r\n\r\nexport default function (state, action) {\r\n  switch (action.type) {\r\n    case SELECT_TOOL_DRAWING_HOLE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Hole.selectToolDrawingHole(state, action.sceneComponentType).updatedState;\r\n\r\n    case UPDATE_DRAWING_HOLE:\r\n      return Hole.updateDrawingHole(state, action.layerID, action.x, action.y).updatedState;\r\n\r\n    case END_DRAWING_HOLE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Hole.endDrawingHole(state, action.layerID, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_DRAGGING_HOLE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Hole.beginDraggingHole(state, action.layerID, action.holeID, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_DRAGGING_HOLE:\r\n      return Hole.updateDraggingHole(state, action.x, action.y).updatedState;\r\n\r\n    case END_DRAGGING_HOLE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Hole.endDraggingHole(state, action.x, action.y).updatedState;\r\n\r\n    case SELECT_HOLE:\r\n      return Hole.select( state, action.layerID, action.holeID ).updatedState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { Item } from '../class/export';\r\nimport { history } from '../utils/export';\r\nimport {\r\n  SELECT_TOOL_DRAWING_ITEM,\r\n  UPDATE_DRAWING_ITEM,\r\n  END_DRAWING_ITEM,\r\n  BEGIN_DRAGGING_ITEM,\r\n  UPDATE_DRAGGING_ITEM,\r\n  END_DRAGGING_ITEM,\r\n  BEGIN_ROTATING_ITEM,\r\n  UPDATE_ROTATING_ITEM,\r\n  END_ROTATING_ITEM,\r\n  SELECT_ITEM,\r\n  BEGIN_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  UPDATE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  END_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  BEGIN_RESIZE_ITEM_RIGHT_TOP,\r\n  UPDATE_RESIZE_ITEM_RIGHT_TOP,\r\n  END_RESIZE_ITEM_RIGHT_TOP,\r\n  BEGIN_RESIZE_ITEM_LEFT_BOTTOM,\r\n  UPDATE_RESIZE_ITEM_LEFT_BOTTOM,\r\n  END_RESIZE_ITEM_LEFT_BOTTOM,\r\n  BEGIN_RESIZE_ITEM_LEFT_TOP,\r\n  UPDATE_RESIZE_ITEM_LEFT_TOP,\r\n  END_RESIZE_ITEM_LEFT_TOP,\r\n  RESIZE_ITEM,\r\n  UPDATE_HORIZONTAL_FLIP_ITEM,\r\n  UPDATE_VERTICAL_FLIP_ITEM\r\n} from '../constants';\r\n\r\nexport default function (state, action) {\r\n  switch (action.type) {\r\n    case SELECT_ITEM:\r\n      return Item.select(state, action.layerID, action.itemID).updatedState;\r\n\r\n    case SELECT_TOOL_DRAWING_ITEM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.selectToolDrawingItem(state, action.sceneComponentType).updatedState;\r\n\r\n    case UPDATE_DRAWING_ITEM:\r\n      return Item.updateDrawingItem(state, action.layerID, action.x, action.y).updatedState;\r\n\r\n    case END_DRAWING_ITEM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.endDrawingItem(state, action.layerID, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_DRAGGING_ITEM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.beginDraggingItem(state, action.layerID, action.itemID, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_DRAGGING_ITEM:\r\n      return Item.updateDraggingItem(state, action.x, action.y).updatedState;\r\n\r\n    case END_DRAGGING_ITEM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.endDraggingItem(state, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_ROTATING_ITEM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.beginRotatingItem(state, action.layerID, action.itemID, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_RESIZE_ITEM_RIGHT_BOTTOM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.beginResizingItemRB(state, action.layerID, action.itemID, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_RESIZE_ITEM_RIGHT_BOTTOM:\r\n      return Item.updateResizingItemRB(state, action.x, action.y).updatedState;\r\n\r\n    case END_RESIZE_ITEM_RIGHT_BOTTOM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.endResizingItemRB(state, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_RESIZE_ITEM_RIGHT_TOP:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.beginResizingItemRT(state, action.layerID, action.itemID, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_RESIZE_ITEM_RIGHT_TOP:\r\n      return Item.updateResizingItemRT(state, action.x, action.y).updatedState;\r\n\r\n    case END_RESIZE_ITEM_RIGHT_TOP:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.endResizingItemRT(state, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_RESIZE_ITEM_LEFT_TOP:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.beginResizingItemLT(state, action.layerID, action.itemID, action.x, action.y).updatedState;\r\n\r\n    case RESIZE_ITEM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.resizingItem(state, action.layerID, action.itemID, action.deltaX).updatedState;\r\n\r\n    case UPDATE_RESIZE_ITEM_LEFT_TOP:\r\n      return Item.updateResizingItemLT(state, action.x, action.y).updatedState;\r\n\r\n    case END_RESIZE_ITEM_LEFT_TOP:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.endResizingItemLT(state, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_RESIZE_ITEM_LEFT_BOTTOM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.beginResizingItemLB(state, action.layerID, action.itemID, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_RESIZE_ITEM_LEFT_BOTTOM:\r\n      return Item.updateResizingItemLB(state, action.x, action.y).updatedState;\r\n\r\n    case END_RESIZE_ITEM_LEFT_BOTTOM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.endResizingItemLB(state, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_ROTATING_ITEM:\r\n      return Item.updateRotatingItem(state, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_VERTICAL_FLIP_ITEM:\r\n      return Item.updateVerticalItem(state, action.layerID, action.itemID).updatedState;\r\n\r\n    case UPDATE_HORIZONTAL_FLIP_ITEM:\r\n      return Item.updateHorizontalItem(state, action.layerID, action.itemID).updatedState;\r\n\r\n    case END_ROTATING_ITEM:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Item.endRotatingItem(state, action.x, action.y).updatedState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { Line } from '../class/export';\r\nimport { history } from '../utils/export';\r\nimport {\r\n  SELECT_TOOL_DRAWING_LINE,\r\n  BEGIN_DRAWING_LINE,\r\n  UPDATE_DRAWING_LINE,\r\n  END_DRAWING_LINE,\r\n  BEGIN_DRAGGING_LINE,\r\n  UPDATE_DRAGGING_LINE,\r\n  END_DRAGGING_LINE,\r\n  SELECT_LINE\r\n} from '../constants';\r\n\r\nexport default function (state, action) {\r\n\r\n  switch (action.type) {\r\n    case SELECT_TOOL_DRAWING_LINE:\r\n      return Line.selectToolDrawingLine(state, action.sceneComponentType).updatedState;\r\n\r\n    case BEGIN_DRAWING_LINE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Line.beginDrawingLine(state, action.layerID, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_DRAWING_LINE:\r\n      return Line.updateDrawingLine(state, action.x, action.y).updatedState;\r\n\r\n    case END_DRAWING_LINE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Line.endDrawingLine(state, action.x, action.y).updatedState;\r\n\r\n    case BEGIN_DRAGGING_LINE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Line.beginDraggingLine(state, action.layerID, action.lineID, action.x, action.y).updatedState;\r\n\r\n    case UPDATE_DRAGGING_LINE:\r\n      return Line.updateDraggingLine(state, action.x, action.y).updatedState;\r\n\r\n    case END_DRAGGING_LINE:\r\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n      return Line.endDraggingLine(state, action.x, action.y).updatedState;\r\n\r\n    case SELECT_LINE:\r\n      return Line.select(state, action.layerID, action.lineID).updatedState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { GROUP_ACTIONS } from '../constants';\r\nimport { Group } from '../class/export';\r\nimport { history } from '../utils/export';\r\n\r\nexport default function (state, action) {\r\n\r\n  state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n\r\n  switch (action.type) {\r\n    case GROUP_ACTIONS.ADD_GROUP:\r\n      return Group.create(state).updatedState;\r\n\r\n    case GROUP_ACTIONS.ADD_GROUP_FROM_SELECTED:\r\n      return Group.createFromSelectedElements(state).updatedState;\r\n\r\n    case GROUP_ACTIONS.SELECT_GROUP:\r\n      return Group.select(state, action.groupID).updatedState;\r\n\r\n    case GROUP_ACTIONS.UNSELECT_GROUP:\r\n      return Group.unselect(state, action.groupID).updatedState;\r\n\r\n    case GROUP_ACTIONS.ADD_TO_GROUP:\r\n      return Group.addElement(state, action.groupID, action.layerID, action.elementPrototype, action.elementID).updatedState;\r\n\r\n    case GROUP_ACTIONS.REMOVE_FROM_GROUP:\r\n      return Group.removeElement(state, action.groupID, action.layerID, action.elementPrototype, action.elementID).updatedState;\r\n\r\n    case GROUP_ACTIONS.SET_GROUP_ATTRIBUTES:\r\n      return Group.setAttributes(state, action.groupID, action.attributes).updatedState;\r\n\r\n    case GROUP_ACTIONS.SET_GROUP_PROPERTIES:\r\n      return Group.setProperties(state, action.groupID, action.properties).updatedState;\r\n\r\n    case GROUP_ACTIONS.SET_GROUP_BARYCENTER:\r\n      return Group.setBarycenter(state, action.groupID, action.barycenter.get('x'), action.barycenter.get('y')).updatedState;\r\n\r\n    case GROUP_ACTIONS.REMOVE_GROUP:\r\n      return Group.remove(state, action.groupID).updatedState;\r\n\r\n    case GROUP_ACTIONS.REMOVE_GROUP_AND_DELETE_ELEMENTS:\r\n      return Group.removeAndDeleteElements(state, action.groupID).updatedState;\r\n\r\n    case GROUP_ACTIONS.GROUP_TRANSLATE:\r\n      return Group.translate(state, action.groupID, action.x, action.y).updatedState;\r\n\r\n    case GROUP_ACTIONS.GROUP_ROTATE:\r\n      return Group.rotate(state, action.groupID, action.rotation).updatedState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n","import { history } from \"../utils/export\";\r\nimport {\r\n  LOAD_PROJECT,\r\n  NEW_PROJECT,\r\n  OPEN_CATALOG,\r\n  SELECT_TOOL_EDIT,\r\n  MODE_IDLE,\r\n  UNSELECT_ALL,\r\n  SET_PROPERTIES,\r\n  SET_ITEMS_ATTRIBUTES,\r\n  SET_LINES_ATTRIBUTES,\r\n  SET_HOLES_ATTRIBUTES,\r\n  REMOVE,\r\n  UNDO,\r\n  ROLLBACK,\r\n  SET_PROJECT_PROPERTIES,\r\n  OPEN_PROJECT_CONFIGURATOR,\r\n  INIT_CATALOG,\r\n  UPDATE_MOUSE_COORDS,\r\n  UPDATE_ZOOM_SCALE,\r\n  TOGGLE_SNAP,\r\n  CHANGE_CATALOG_PAGE,\r\n  GO_BACK_TO_CATALOG_PAGE,\r\n  THROW_ERROR,\r\n  THROW_WARNING,\r\n  COPY_PROPERTIES,\r\n  PASTE_PROPERTIES,\r\n  PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\r\n  ALTERATE_STATE,\r\n  SET_MODE,\r\n  ADD_HORIZONTAL_GUIDE,\r\n  ADD_VERTICAL_GUIDE,\r\n  ADD_CIRCULAR_GUIDE,\r\n  REMOVE_HORIZONTAL_GUIDE,\r\n  REMOVE_VERTICAL_GUIDE,\r\n  REMOVE_CIRCULAR_GUIDE,\r\n} from \"../constants\";\r\n\r\nimport { Project } from \"../class/export\";\r\n\r\nexport default function (state, action) {\r\n  switch (action.type) {\r\n    case NEW_PROJECT:\r\n      return Project.newProject(state).updatedState;\r\n\r\n    case LOAD_PROJECT:\r\n      return Project.loadProject(state, action.sceneJSON).updatedState;\r\n\r\n    case OPEN_CATALOG:\r\n      return Project.openCatalog(state).updatedState;\r\n\r\n    case CHANGE_CATALOG_PAGE:\r\n      return Project.changeCatalogPage(state, action.oldPage, action.newPage)\r\n        .updatedState;\r\n\r\n    case GO_BACK_TO_CATALOG_PAGE:\r\n      return Project.goBackToCatalogPage(state, action.newPage).updatedState;\r\n\r\n    case SELECT_TOOL_EDIT:\r\n      return Project.setMode(state, MODE_IDLE).updatedState;\r\n\r\n    case UNSELECT_ALL:\r\n      return Project.unselectAll(state).updatedState;\r\n\r\n    case SET_PROPERTIES:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.setProperties(\r\n        state,\r\n        state.getIn([\"scene\", \"selectedLayer\"]),\r\n        action.properties\r\n      ).updatedState;\r\n\r\n    case SET_ITEMS_ATTRIBUTES:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.setItemsAttributes(state, action.itemsAttributes)\r\n        .updatedState;\r\n\r\n    case SET_LINES_ATTRIBUTES:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.setLinesAttributes(state, action.linesAttributes)\r\n        .updatedState;\r\n\r\n    case SET_HOLES_ATTRIBUTES:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.setHolesAttributes(state, action.holesAttributes)\r\n        .updatedState;\r\n\r\n    case REMOVE:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.remove(state).updatedState;\r\n\r\n    case UNDO:\r\n      return Project.undo(state).updatedState;\r\n\r\n    case ROLLBACK:\r\n      return Project.rollback(state).updatedState;\r\n\r\n    case SET_PROJECT_PROPERTIES:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.setProjectProperties(state, action.properties)\r\n        .updatedState;\r\n\r\n    case OPEN_PROJECT_CONFIGURATOR:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.openProjectConfigurator(state).updatedState;\r\n\r\n    case INIT_CATALOG:\r\n      return Project.initCatalog(state, action.catalog).updatedState;\r\n\r\n    case UPDATE_MOUSE_COORDS:\r\n      return Project.updateMouseCoord(state, action.coords).updatedState;\r\n\r\n    case UPDATE_ZOOM_SCALE:\r\n      return Project.updateZoomScale(state, action.scale).updatedState;\r\n\r\n    case TOGGLE_SNAP:\r\n      return Project.toggleSnap(state, action.mask).updatedState;\r\n\r\n    case THROW_ERROR:\r\n      return Project.throwError(state, action.error).updatedState;\r\n\r\n    case THROW_WARNING:\r\n      return Project.throwWarning(state, action.warning).updatedState;\r\n\r\n    case COPY_PROPERTIES:\r\n      return Project.copyProperties(state, action.properties).updatedState;\r\n\r\n    case PASTE_PROPERTIES:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.pasteProperties(state).updatedState;\r\n\r\n    case PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY:\r\n      return Project.pushLastSelectedCatalogElementToHistory(\r\n        state,\r\n        action.element\r\n      ).updatedState;\r\n\r\n    case ALTERATE_STATE:\r\n      return Project.setAlterate(state).updatedState;\r\n\r\n    case SET_MODE:\r\n      return Project.setMode(state, action.mode).updatedState;\r\n\r\n    case ADD_HORIZONTAL_GUIDE:\r\n      state = state.merge({\r\n        sceneHistory: history.historyPush(state.sceneHistory, state.scene),\r\n      });\r\n      return Project.addHorizontalGuide(state, action.coordinate).updatedState;\r\n\r\n    case ADD_VERTICAL_GUIDE:\r\n      return Project.addVerticalGuide(state, action.coordinate).updatedState;\r\n\r\n    case ADD_CIRCULAR_GUIDE:\r\n      return Project.addCircularGuide(state, action.x, action.y, action.radius)\r\n        .updatedState;\r\n\r\n    case REMOVE_HORIZONTAL_GUIDE:\r\n      return Project.removeHorizontalGuide(state, action.guideID).updatedState;\r\n\r\n    case REMOVE_VERTICAL_GUIDE:\r\n      return Project.removeVerticalGuide(state, action.guideID).updatedState;\r\n\r\n    case REMOVE_CIRCULAR_GUIDE:\r\n      return Project.removeCircularGuide(state, action.guideID).updatedState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { Layer } from '../class/export';\r\nimport { history } from '../utils/export';\r\nimport {\r\n  ADD_LAYER,\r\n  SELECT_LAYER,\r\n  SET_LAYER_PROPERTIES,\r\n  REMOVE_LAYER\r\n} from '../constants';\r\n\r\nexport default function (state, action) {\r\n\r\n  state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n\r\n  switch (action.type) {\r\n    case ADD_LAYER:\r\n      return Layer.create( state, action.name, action.altitude).updatedState;\r\n\r\n    case SELECT_LAYER:\r\n      return Layer.select( state, action.layerID ).updatedState;\r\n\r\n    case SET_LAYER_PROPERTIES:\r\n      return Layer.setProperties( state, action.layerID, action.properties ).updatedState;\r\n\r\n    case REMOVE_LAYER:\r\n      return Layer.remove( state, action.layerID ).updatedState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  BEGIN_DRAGGING_VERTEX,\r\n  UPDATE_DRAGGING_VERTEX,\r\n  END_DRAGGING_VERTEX\r\n} from '../constants';\r\nimport { Vertex } from '../class/export';\r\n\r\nexport default function (state, action) {\r\n  switch (action.type) {\r\n    case BEGIN_DRAGGING_VERTEX:\r\n      return Vertex.beginDraggingVertex( state, action.layerID, action.vertexID, action.x, action.y ).updatedState;\r\n\r\n    case UPDATE_DRAGGING_VERTEX:\r\n      return Vertex.updateDraggingVertex( state, action.x, action.y ).updatedState;\r\n\r\n    case END_DRAGGING_VERTEX:\r\n      return Vertex.endDraggingVertex( state, action.x, action.y ).updatedState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  UPDATE_2D_CAMERA,\r\n  SELECT_TOOL_PAN,\r\n  SELECT_TOOL_ZOOM_IN,\r\n  SELECT_TOOL_ZOOM_OUT,\r\n  MODE_2D_PAN,\r\n  MODE_2D_ZOOM_IN,\r\n  MODE_2D_ZOOM_OUT,\r\n} from \"../constants\";\r\n\r\nexport default function (state, action) {\r\n  switch (action.type) {\r\n    case UPDATE_2D_CAMERA:\r\n      return state.merge({ viewer2D: action.value });\r\n\r\n    case SELECT_TOOL_PAN:\r\n      return state.set(\"mode\", MODE_2D_PAN);\r\n\r\n    case SELECT_TOOL_ZOOM_IN:\r\n      return state.set(\"mode\", MODE_2D_ZOOM_IN);\r\n\r\n    case SELECT_TOOL_ZOOM_OUT:\r\n      return state.set(\"mode\", MODE_2D_ZOOM_OUT);\r\n  }\r\n}\r\n","import {\r\n  MODE_3D_VIEW,\r\n  MODE_3D_FIRST_PERSON,\r\n  SELECT_TOOL_3D_VIEW,\r\n  SELECT_TOOL_3D_FIRST_PERSON\r\n} from '../constants';\r\nimport { Project } from '../class/export';\r\nimport { history } from '../utils/export';\r\n\r\nexport default function (state, action) {\r\n\r\n  state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\r\n\r\n  switch (action.type) {\r\n    case SELECT_TOOL_3D_VIEW:\r\n      state = Project.rollback( state ).updatedState;\r\n      state = Project.setMode( state, MODE_3D_VIEW ).updatedState;\r\n      return state;\r\n\r\n    case SELECT_TOOL_3D_FIRST_PERSON:\r\n      state = Project.rollback( state ).updatedState;\r\n      state = Project.setMode( state, MODE_3D_FIRST_PERSON ).updatedState;\r\n      return state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport Translator from \"./translator/translator\";\r\nimport Catalog from \"./catalog/catalog\";\r\nimport actions from \"./actions/export\";\r\nimport { objectsMap } from \"./utils/objects-utils\";\r\nimport {\r\n  ToolbarComponents,\r\n  Content,\r\n  SidebarComponents,\r\n  FooterBarComponents,\r\n} from \"./components/export\";\r\nimport { VERSION } from \"./version\";\r\nimport \"./styles/export\";\r\nimport Topbar from \"./components/Topbar\";\r\nimport FooterBar from \"./components/Footerbar\";\r\n\r\nconst { Toolbar } = ToolbarComponents;\r\nconst { Sidebar } = SidebarComponents;\r\n// const { FooterBar } = FooterBarComponents;\r\n\r\nconst toolbarW = 52;\r\nconst sidebarW = 300;\r\nconst footerBarH = 20;\r\n\r\nconst wrapperStyle = {\r\n  display: \"flex\",\r\n  flexFlow: \"row nowrap\",\r\n};\r\n\r\nclass ReactPlanner extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tab: 0,\r\n    };\r\n  }\r\n  getChildContext() {\r\n    return {\r\n      ...objectsMap(actions, (actionNamespace) => this.props[actionNamespace]),\r\n      translator: this.props.translator,\r\n      catalog: this.props.catalog,\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    let { store } = this.context;\r\n    let { projectActions, catalog, stateExtractor, plugins } = this.props;\r\n\r\n    plugins.forEach((plugin) => plugin(store, stateExtractor));\r\n    projectActions.initCatalog(catalog);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    let { stateExtractor, state, projectActions, catalog } = nextProps;\r\n    let plannerState = stateExtractor(state);\r\n    let catalogReady = plannerState.getIn([\"catalog\", \"ready\"]);\r\n    if (!catalogReady) {\r\n      projectActions.initCatalog(catalog);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { width, height, state, stateExtractor, dispatch, catalog, ...props } =\r\n      this.props;\r\n\r\n    let { viewer2D, mode, scene } = state;\r\n\r\n    // let contentW = width - toolbarW - sidebarW;\r\n    let contentW = width - toolbarW;\r\n    let heightTopBar = 52;\r\n    // let toolbarH = height - footerBarH - heightTopBar;\r\n    // let contentH = height - footerBarH - heightTopBar;\r\n    // let sidebarH = height - footerBarH - heightTopBar;\r\n    let toolbarH = height - heightTopBar;\r\n    let contentH = height - heightTopBar;\r\n    let sidebarH = height - heightTopBar;\r\n    let wrapHeight = height - heightTopBar;\r\n\r\n    let extractedState = stateExtractor(state);\r\n\r\n    return (\r\n      <div style={{ position: \"relative\" }}>\r\n        <Topbar\r\n          dispatch={dispatch}\r\n          catalog={catalog}\r\n          tab={this.state.tab}\r\n          setTab={(tab) => {\r\n            this.setState({\r\n              tab: tab,\r\n            });\r\n          }}\r\n        />\r\n        <div style={{ ...wrapperStyle, wrapHeight }}>\r\n          <Toolbar\r\n            width={toolbarW}\r\n            height={toolbarH}\r\n            state={extractedState}\r\n            dispatch={dispatch}\r\n            {...props}\r\n          />\r\n          <Content\r\n            width={contentW}\r\n            height={contentH}\r\n            state={extractedState}\r\n            {...props}\r\n            onWheel={(event) => event.preventDefault()}\r\n          />\r\n          {/* <Sidebar\r\n            width={sidebarW}\r\n            height={sidebarH}\r\n            state={extractedState}\r\n            {...props}\r\n            disable={true}\r\n            /> */}\r\n          {/* <FooterBar\r\n            width={width}\r\n            height={footerBarH}\r\n            state={extractedState}\r\n            {...props}\r\n          /> */}\r\n        </div>\r\n        <FooterBar\r\n          dispatch={dispatch}\r\n          catalog={catalog}\r\n          tab={this.state.tab}\r\n          setTab={(tab) => {\r\n            this.setState({\r\n              tab: tab,\r\n            });\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nReactPlanner.propTypes = {\r\n  translator: PropTypes.instanceOf(Translator),\r\n  catalog: PropTypes.instanceOf(Catalog),\r\n  allowProjectFileSupport: PropTypes.bool,\r\n  plugins: PropTypes.arrayOf(PropTypes.func),\r\n  autosaveKey: PropTypes.string,\r\n  autosaveDelay: PropTypes.number,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  stateExtractor: PropTypes.func.isRequired,\r\n  toolbarButtons: PropTypes.array,\r\n  sidebarComponents: PropTypes.array,\r\n  footerbarComponents: PropTypes.array,\r\n  customContents: PropTypes.object,\r\n  softwareSignature: PropTypes.string,\r\n};\r\n\r\nReactPlanner.contextTypes = {\r\n  store: PropTypes.object.isRequired,\r\n};\r\n\r\nReactPlanner.childContextTypes = {\r\n  ...objectsMap(actions, () => PropTypes.object),\r\n  translator: PropTypes.object,\r\n  catalog: PropTypes.object,\r\n};\r\n\r\nReactPlanner.defaultProps = {\r\n  translator: new Translator(),\r\n  catalog: new Catalog(),\r\n  plugins: [],\r\n  allowProjectFileSupport: true,\r\n  softwareSignature: `FloorPlan-3D ${VERSION}`,\r\n  toolbarButtons: [],\r\n  sidebarComponents: [],\r\n  footerbarComponents: [],\r\n  customContents: {},\r\n};\r\n\r\n//redux connect\r\nfunction mapStateToProps(reduxState) {\r\n  return {\r\n    state: reduxState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return objectsMap(actions, (actionNamespace) =>\r\n    bindActionCreators(actions[actionNamespace], dispatch)\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReactPlanner);\r\n","import {\r\n  UPDATE_2D_CAMERA,\r\n  SELECT_TOOL_PAN,\r\n  SELECT_TOOL_ZOOM_IN,\r\n  SELECT_TOOL_ZOOM_OUT,\r\n} from \"../constants\";\r\n\r\nexport function updateCameraView(value) {\r\n  return {\r\n    type: UPDATE_2D_CAMERA,\r\n    value,\r\n  };\r\n}\r\n\r\nexport function selectToolPan() {\r\n  return {\r\n    type: SELECT_TOOL_PAN,\r\n  };\r\n}\r\n\r\nexport function selectToolZoomOut() {\r\n  return {\r\n    type: SELECT_TOOL_ZOOM_OUT,\r\n  };\r\n}\r\n\r\nexport function selectToolZoomIn() {\r\n  return {\r\n    type: SELECT_TOOL_ZOOM_IN,\r\n  };\r\n}\r\n","import {SELECT_TOOL_3D_VIEW, SELECT_TOOL_3D_FIRST_PERSON} from '../constants';\r\n\r\nexport function selectTool3DView() {\r\n  return {\r\n    type: SELECT_TOOL_3D_VIEW\r\n  }\r\n}\r\n\r\n\r\nexport function selectTool3DFirstPerson() {\r\n  return {\r\n    type: SELECT_TOOL_3D_FIRST_PERSON\r\n  }\r\n}\r\n\r\n\r\n","import {\r\n  SELECT_LINE,\r\n  SELECT_TOOL_DRAWING_LINE,\r\n  BEGIN_DRAWING_LINE,\r\n  UPDATE_DRAWING_LINE,\r\n  END_DRAWING_LINE,\r\n  BEGIN_DRAGGING_LINE,\r\n  UPDATE_DRAGGING_LINE,\r\n  END_DRAGGING_LINE,\r\n} from \"../constants\";\r\n\r\nexport function selectLine(layerID, lineID) {\r\n  return {\r\n    type: SELECT_LINE,\r\n    layerID,\r\n    lineID,\r\n  };\r\n}\r\n\r\nexport function selectToolDrawingLine(sceneComponentType) {\r\n  return {\r\n    type: SELECT_TOOL_DRAWING_LINE,\r\n    sceneComponentType,\r\n  };\r\n}\r\n\r\nexport function beginDrawingLine(layerID, x, y, snapMask) {\r\n  return {\r\n    type: BEGIN_DRAWING_LINE,\r\n    layerID,\r\n    x,\r\n    y,\r\n    snapMask,\r\n  };\r\n}\r\n\r\nexport function updateDrawingLine(x, y, snapMask) {\r\n  return {\r\n    type: UPDATE_DRAWING_LINE,\r\n    x,\r\n    y,\r\n    snapMask,\r\n  };\r\n}\r\n\r\nexport function endDrawingLine(x, y, snapMask) {\r\n  return {\r\n    type: END_DRAWING_LINE,\r\n    x,\r\n    y,\r\n    snapMask,\r\n  };\r\n}\r\n\r\nexport function beginDraggingLine(layerID, lineID, x, y, snapMask) {\r\n  return {\r\n    type: BEGIN_DRAGGING_LINE,\r\n    layerID,\r\n    lineID,\r\n    x,\r\n    y,\r\n    snapMask,\r\n  };\r\n}\r\n\r\nexport function updateDraggingLine(x, y, snapMask) {\r\n  return {\r\n    type: UPDATE_DRAGGING_LINE,\r\n    x,\r\n    y,\r\n    snapMask,\r\n  };\r\n}\r\n\r\nexport function endDraggingLine(x, y, snapMask) {\r\n  return {\r\n    type: END_DRAGGING_LINE,\r\n    x,\r\n    y,\r\n    snapMask,\r\n  };\r\n}\r\n","import {\r\n  SELECT_HOLE,\r\n  SELECT_TOOL_DRAWING_HOLE,\r\n  UPDATE_DRAWING_HOLE,\r\n  END_DRAWING_HOLE,\r\n  BEGIN_DRAGGING_HOLE,\r\n  UPDATE_DRAGGING_HOLE,\r\n  END_DRAGGING_HOLE\r\n} from '../constants';\r\n\r\nexport function selectHole(layerID, holeID) {\r\n  return {\r\n    type: SELECT_HOLE,\r\n    layerID,\r\n    holeID\r\n  }\r\n}\r\n\r\nexport function selectToolDrawingHole(sceneComponentType) {\r\n  \r\n  return {\r\n    type: SELECT_TOOL_DRAWING_HOLE,\r\n    sceneComponentType\r\n  }\r\n}\r\n\r\nexport function updateDrawingHole(layerID, x, y) {\r\n  return {\r\n    type: UPDATE_DRAWING_HOLE,\r\n    layerID, x, y\r\n  }\r\n}\r\n\r\nexport function endDrawingHole(layerID, x, y) {\r\n  return {\r\n    type: END_DRAWING_HOLE,\r\n    layerID, x, y\r\n  }\r\n}\r\n\r\n\r\nexport function beginDraggingHole(layerID, holeID, x, y) {\r\n  return {\r\n    type: BEGIN_DRAGGING_HOLE,\r\n    layerID, holeID, x, y\r\n  };\r\n}\r\n\r\nexport function updateDraggingHole(x, y) {\r\n  return {\r\n    type: UPDATE_DRAGGING_HOLE,\r\n    x, y\r\n  }\r\n}\r\n\r\nexport function endDraggingHole(x, y) {\r\n  return {\r\n    type: END_DRAGGING_HOLE,\r\n    x, y\r\n  }\r\n}\r\n","import {SELECT_LAYER, ADD_LAYER, SET_LAYER_PROPERTIES, REMOVE_LAYER} from '../constants';\r\n\r\nexport function selectLayer(layerID) {\r\n  return {\r\n    type: SELECT_LAYER,\r\n    layerID\r\n  }\r\n}\r\n\r\nexport function addLayer(name, altitude) {\r\n  return {\r\n    type: ADD_LAYER,\r\n    name, altitude\r\n  }\r\n}\r\n\r\nexport function setLayerProperties(layerID, properties) {\r\n  return {\r\n    type: SET_LAYER_PROPERTIES,\r\n    layerID,\r\n    properties\r\n  }\r\n}\r\n\r\nexport function removeLayer(layerID) {\r\n  return {\r\n    type: REMOVE_LAYER,\r\n    layerID,\r\n  }\r\n}\r\n","import {BEGIN_DRAGGING_VERTEX, UPDATE_DRAGGING_VERTEX, END_DRAGGING_VERTEX} from '../constants'\r\n\r\nexport function beginDraggingVertex(layerID, vertexID, x, y, snapMask) {\r\n  return {\r\n    type: BEGIN_DRAGGING_VERTEX,\r\n    layerID, vertexID, x, y, snapMask\r\n  }\r\n}\r\n\r\nexport function updateDraggingVertex(x, y, snapMask) {\r\n  return {\r\n    type: UPDATE_DRAGGING_VERTEX,\r\n    x, y, snapMask\r\n  }\r\n}\r\n\r\nexport function endDraggingVertex(x, y, snapMask) {\r\n  return {\r\n    type: END_DRAGGING_VERTEX,\r\n    x, y, snapMask\r\n\r\n  }\r\n}\r\n","import {\r\n  SELECT_ITEM,\r\n  SELECT_TOOL_DRAWING_ITEM,\r\n  UPDATE_DRAWING_ITEM,\r\n  END_DRAWING_ITEM,\r\n  BEGIN_DRAGGING_ITEM,\r\n  UPDATE_DRAGGING_ITEM,\r\n  END_DRAGGING_ITEM,\r\n  BEGIN_ROTATING_ITEM,\r\n  UPDATE_ROTATING_ITEM,\r\n  END_ROTATING_ITEM,\r\n  BEGIN_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  UPDATE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  END_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  BEGIN_RESIZE_ITEM_RIGHT_TOP,\r\n  UPDATE_RESIZE_ITEM_RIGHT_TOP,\r\n  END_RESIZE_ITEM_RIGHT_TOP,\r\n  BEGIN_RESIZE_ITEM_LEFT_TOP,\r\n  UPDATE_RESIZE_ITEM_LEFT_TOP,\r\n  END_RESIZE_ITEM_LEFT_TOP,\r\n  BEGIN_RESIZE_ITEM_LEFT_BOTTOM,\r\n  UPDATE_RESIZE_ITEM_LEFT_BOTTOM,\r\n  END_RESIZE_ITEM_LEFT_BOTTOM,\r\n  RESIZE_ITEM,\r\n  UPDATE_HORIZONTAL_FLIP_ITEM,\r\n  UPDATE_VERTICAL_FLIP_ITEM\r\n} from \"../constants\";\r\n\r\nexport function selectItem(layerID, itemID) {\r\n  return {\r\n    type: SELECT_ITEM,\r\n    layerID,\r\n    itemID,\r\n  };\r\n}\r\n\r\nexport function selectToolDrawingItem(sceneComponentType) {\r\n  return {\r\n    type: SELECT_TOOL_DRAWING_ITEM,\r\n    sceneComponentType,\r\n  };\r\n}\r\n\r\nexport function updateDrawingItem(layerID, x, y) {\r\n  return {\r\n    type: UPDATE_DRAWING_ITEM,\r\n    layerID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function endDrawingItem(layerID, x, y) {\r\n  return {\r\n    type: END_DRAWING_ITEM,\r\n    layerID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function beginDraggingItem(layerID, itemID, x, y) {\r\n  return {\r\n    type: BEGIN_DRAGGING_ITEM,\r\n    layerID,\r\n    itemID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function updateDraggingItem(x, y) {\r\n  return {\r\n    type: UPDATE_DRAGGING_ITEM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function endDraggingItem(x, y) {\r\n  return {\r\n    type: END_DRAGGING_ITEM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function beginRotatingItem(layerID, itemID, x, y) {\r\n  return {\r\n    type: BEGIN_ROTATING_ITEM,\r\n    layerID,\r\n    itemID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function updateRotatingItem(x, y) {\r\n  return {\r\n    type: UPDATE_ROTATING_ITEM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function updateHorizontalItem(layerID, itemID) {\r\n  return {\r\n    type: UPDATE_HORIZONTAL_FLIP_ITEM,\r\n    layerID,\r\n    itemID\r\n  };\r\n}\r\n\r\nexport function updateVerticalItem(layerID, itemID) {\r\n  return {\r\n    type: UPDATE_VERTICAL_FLIP_ITEM,\r\n    layerID,\r\n    itemID\r\n  };\r\n}\r\n\r\nexport function endRotatingItem(x, y) {\r\n  return {\r\n    type: END_ROTATING_ITEM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function beginResizingItemRB(layerID, itemID, x, y) {\r\n  return {\r\n    type: BEGIN_RESIZE_ITEM_RIGHT_BOTTOM,\r\n    layerID,\r\n    itemID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function updateResizingItemRB(x, y) {\r\n  return {\r\n    type: UPDATE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function endResizingItemRB(x, y) {\r\n  return {\r\n    type: END_RESIZE_ITEM_RIGHT_BOTTOM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function beginResizingItemRT(layerID, itemID, x, y) {\r\n  return {\r\n    type: BEGIN_RESIZE_ITEM_RIGHT_TOP,\r\n    layerID,\r\n    itemID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function updateResizingItemRT(x, y) {\r\n  return {\r\n    type: UPDATE_RESIZE_ITEM_RIGHT_TOP,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function endResizingItemRT(x, y) {\r\n  return {\r\n    type: END_RESIZE_ITEM_RIGHT_TOP,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function resizingItem(layerID, itemID, deltaX) {\r\n  return {\r\n    type: RESIZE_ITEM,\r\n    layerID,\r\n    itemID,\r\n    deltaX\r\n  };\r\n}\r\n\r\nexport function beginResizingItemLT(layerID, itemID, x, y) {\r\n  return {\r\n    type: BEGIN_RESIZE_ITEM_LEFT_TOP,\r\n    layerID,\r\n    itemID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function updateResizingItemLT(x, y) {\r\n  return {\r\n    type: UPDATE_RESIZE_ITEM_LEFT_TOP,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function endResizingItemLT(x, y) {\r\n  return {\r\n    type: END_RESIZE_ITEM_LEFT_TOP,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function beginResizingItemLB(layerID, itemID, x, y) {\r\n  return {\r\n    type: BEGIN_RESIZE_ITEM_LEFT_BOTTOM,\r\n    layerID,\r\n    itemID,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function updateResizingItemLB(x, y) {\r\n  return {\r\n    type: UPDATE_RESIZE_ITEM_LEFT_BOTTOM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n\r\nexport function endResizingItemLB(x, y) {\r\n  return {\r\n    type: END_RESIZE_ITEM_LEFT_BOTTOM,\r\n    x,\r\n    y,\r\n  };\r\n}\r\n","import {SELECT_AREA} from '../constants';\r\n\r\nexport function selectArea(layerID, areaID) {\r\n  return {\r\n    type: SELECT_AREA,\r\n    layerID,\r\n    areaID\r\n  }\r\n}\r\n","import { GROUP_ACTIONS } from '../constants';\r\n\r\nexport function addGroup() {\r\n  return {\r\n    type: GROUP_ACTIONS.ADD_GROUP\r\n  };\r\n}\r\n\r\nexport function addGroupFromSelected() {\r\n  return {\r\n    type: GROUP_ACTIONS.ADD_GROUP_FROM_SELECTED\r\n  };\r\n}\r\n\r\nexport function selectGroup(groupID) {\r\n  return {\r\n    type: GROUP_ACTIONS.SELECT_GROUP,\r\n    groupID\r\n  };\r\n}\r\n\r\nexport function unselectGroup(groupID) {\r\n  return {\r\n    type: GROUP_ACTIONS.UNSELECT_GROUP,\r\n    groupID\r\n  };\r\n}\r\n\r\nexport function addToGroup( groupID, layerID, elementPrototype, elementID ) {\r\n  return {\r\n    type: GROUP_ACTIONS.ADD_TO_GROUP,\r\n    groupID,\r\n    layerID,\r\n    elementPrototype,\r\n    elementID\r\n  };\r\n}\r\n\r\nexport function removeFromGroup( groupID, layerID, elementPrototype, elementID ) {\r\n  return {\r\n    type: GROUP_ACTIONS.REMOVE_FROM_GROUP,\r\n    groupID,\r\n    layerID,\r\n    elementPrototype,\r\n    elementID\r\n  };\r\n}\r\n\r\nexport function setGroupAttributes( groupID, attributes ) {\r\n  return {\r\n    type: GROUP_ACTIONS.SET_GROUP_ATTRIBUTES,\r\n    groupID,\r\n    attributes\r\n  };\r\n}\r\n\r\nexport function setGroupProperties( groupID, properties ) {\r\n  return {\r\n    type: GROUP_ACTIONS.SET_GROUP_PROPERTIES,\r\n    groupID,\r\n    properties\r\n  };\r\n}\r\n\r\nexport function setGroupBarycenter( groupID, barycenter ) {\r\n  return {\r\n    type: GROUP_ACTIONS.SET_GROUP_BARYCENTER,\r\n    groupID,\r\n    barycenter\r\n  };\r\n}\r\n\r\nexport function removeGroup( groupID ) {\r\n  return {\r\n    type: GROUP_ACTIONS.REMOVE_GROUP,\r\n    groupID\r\n  };\r\n}\r\n\r\nexport function removeGroupAndDeleteElements( groupID ) {\r\n  return {\r\n    type: GROUP_ACTIONS.REMOVE_GROUP_AND_DELETE_ELEMENTS,\r\n    groupID\r\n  };\r\n}\r\n\r\nexport function groupTranslate( groupID, x, y ) {\r\n  return {\r\n    type: GROUP_ACTIONS.GROUP_TRANSLATE,\r\n    groupID,\r\n    x,\r\n    y\r\n  };\r\n}\r\n\r\nexport function groupRotate( groupID, rotation ) {\r\n  return {\r\n    type: GROUP_ACTIONS.GROUP_ROTATE,\r\n    groupID,\r\n    rotation\r\n  };\r\n}\r\n","import ToolbarButton from \"./toolbar-button\";\r\nimport ToolbarSaveButton from \"./toolbar-save-button\";\r\nimport ToolbarLoadButton from \"./toolbar-load-button\";\r\nimport ToolbarLoadSVGButton from \"./toolbar-load-svg-button\";\r\nimport Toolbar from \"./toolbar\";\r\n\r\nexport {\r\n  ToolbarButton,\r\n  ToolbarSaveButton,\r\n  ToolbarLoadButton,\r\n  ToolbarLoadSVGButton,\r\n  Toolbar,\r\n};\r\n\r\nexport default {\r\n  ToolbarButton,\r\n  ToolbarSaveButton,\r\n  ToolbarLoadButton,\r\n  ToolbarLoadSVGButton,\r\n  Toolbar,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {FaSave as IconSave} from 'react-icons/fa';\r\nimport ToolbarButton from './toolbar-button';\r\nimport {browserDownload}  from '../../utils/browser';\r\nimport { Project } from '../../class/export';\r\n\r\nexport default function ToolbarSaveButton({state}, {translator}) {\r\n\r\n  let saveProjectToFile = e => {\r\n    e.preventDefault();\r\n    state = Project.unselectAll( state ).updatedState;\r\n    browserDownload(state.get('scene').toJS());\r\n  };\r\n\r\n  return (\r\n    <ToolbarButton active={false} tooltip={translator.t('Save project')} onClick={saveProjectToFile}>\r\n      <IconSave />\r\n    </ToolbarButton>\r\n  );\r\n}\r\n\r\nToolbarSaveButton.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nToolbarSaveButton.contextTypes = {\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { FaFolderOpen as IconLoad } from \"react-icons/fa\";\r\nimport ToolbarButton from \"./toolbar-button\";\r\nimport { browserUpload } from \"../../utils/browser\";\r\nexport default function ToolbarLoadButton(\r\n  { state },\r\n  { translator, projectActions }\r\n) {\r\n  let loadProjectFromFile = (event) => {\r\n    event.preventDefault();\r\n    browserUpload().then((data) => {\r\n      let sampleJSON = JSON.parse(data);\r\n      projectActions.loadProject(sampleJSON);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <ToolbarButton\r\n      active={false}\r\n      tooltip={translator.t(\"Load project\")}\r\n      onClick={loadProjectFromFile}\r\n    >\r\n      <IconLoad />\r\n    </ToolbarButton>\r\n  );\r\n}\r\n\r\nToolbarLoadButton.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nToolbarLoadButton.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { FaFileImport } from \"react-icons/fa\";\r\nimport ToolbarButton from \"./toolbar-button\";\r\nimport { browserUpload } from \"../../utils/browser\";\r\nimport { IDBroker } from \"../../utils/export\";\r\n\r\nexport default function ToolbarLoadSVGButton(\r\n  { state },\r\n  { translator, projectActions }\r\n) {\r\n  const RULER_LENGTH = 1000;\r\n  const SCENE_WIDTH = 3000;\r\n  const SCENE_HEIGHT = 2000;\r\n  const WALL_HEIGHT = 259;\r\n  const WALL_THICKNESS = 10;\r\n  const WINDOWS_HEIGHT = 150;\r\n\r\n  let loadProjectFromFile = (event) => {\r\n    event.preventDefault();\r\n    browserUpload().then((data) => {\r\n      var parser = new DOMParser();\r\n      var doc = parser.parseFromString(data, \"image/svg+xml\");\r\n\r\n      var rulerObj = doc.querySelectorAll(\"#ruler line\")[0];\r\n\r\n      const rulerPixel =\r\n        RULER_LENGTH /\r\n        Math.sqrt(\r\n          Math.pow(\r\n            rulerObj.getAttribute(\"x1\") - rulerObj.getAttribute(\"x2\"),\r\n            2\r\n          ) +\r\n            Math.pow(\r\n              rulerObj.getAttribute(\"y1\") - rulerObj.getAttribute(\"y2\"),\r\n              2\r\n            )\r\n        );\r\n\r\n      var facadeDomObj = Array.prototype.slice.call(\r\n        doc.querySelectorAll(\"#facade_x5F_sagamore line.st1\")\r\n      );\r\n\r\n      var internalDomObj = Array.prototype.slice.call(\r\n        doc.querySelectorAll(\"#internals_x5F_sagamore line.st11\")\r\n      );\r\n\r\n      var internalYellowDomObj = Array.prototype.slice.call(\r\n        doc.querySelectorAll(\"#internals_x5F_sagamore line.st15\")\r\n      );\r\n\r\n      let facadeParsingData = getParsingData(rulerPixel, facadeDomObj);\r\n      let internalParsingData = getParsingData(rulerPixel, internalDomObj);\r\n      let internalYellowParsingData = getParsingData(\r\n        rulerPixel,\r\n        internalYellowDomObj\r\n      );\r\n\r\n      // Remove the break lines\r\n      facadeParsingData = combineBreakLines(facadeParsingData);\r\n      internalParsingData = combineBreakLines(internalParsingData);\r\n      internalYellowParsingData = combineBreakLines(internalYellowParsingData);\r\n      // //\r\n\r\n      // Move facade to internal walls\r\n      facadeParsingData = moveToInternalWalls(\r\n        facadeParsingData,\r\n        internalParsingData\r\n      );\r\n      // // // //\r\n\r\n      // Get the windows and doors position and remove the intern unnessary walls.\r\n      const windowsPos = getWindowsPos(\r\n        facadeParsingData,\r\n        internalParsingData,\r\n        internalYellowParsingData\r\n      );\r\n      // //\r\n\r\n      //// Add the hole data to facade.\r\n      let facadeLines = facadeParsingData.lines;\r\n\r\n      for (let i = 0; i < facadeLines.length; i++) {\r\n        for (let j = 0; j < windowsPos.holesArr.length; j++) {\r\n          if (windowsPos.holesArr[j].line == facadeLines[i].id) {\r\n            let holes = facadeLines[i].holes;\r\n            holes.push(windowsPos.holesArr[j].id);\r\n            facadeLines[i] = {\r\n              id: facadeLines[i].id,\r\n              type: \"wall\",\r\n              prototype: \"lines\",\r\n              name: \"Wall\",\r\n              misc: {},\r\n              selected: false,\r\n              properties: {\r\n                height: {\r\n                  length: WALL_HEIGHT,\r\n                },\r\n                thickness: {\r\n                  length: WALL_THICKNESS,\r\n                },\r\n                textureA: \"bricks\",\r\n                textureB: \"bricks\",\r\n              },\r\n              visible: true,\r\n              vertices: facadeLines[i].vertices,\r\n              holes: holes,\r\n            };\r\n          }\r\n        }\r\n      }\r\n      ////\r\n\r\n      let vertices = facadeParsingData.vertices.concat(\r\n        internalParsingData.vertices\r\n      );\r\n      let lines = facadeLines.concat(windowsPos.internalLines);\r\n\r\n      let verticesJson = {};\r\n      for (let i = 0; i < vertices.length; i++) {\r\n        verticesJson[vertices[i].id] = vertices[i];\r\n      }\r\n      lines = arrangeLines(lines, verticesJson);\r\n      let linesJson = {};\r\n      for (let i = 0; i < lines.length; i++) {\r\n        linesJson[lines[i].id] = lines[i];\r\n      }\r\n\r\n      const jsonData = {\r\n        unit: \"cm\",\r\n        layers: {\r\n          \"layer-1\": {\r\n            id: \"layer-1\",\r\n            altitude: 0,\r\n            order: 0,\r\n            opacity: 1,\r\n            name: \"default\",\r\n            visible: true,\r\n            vertices: verticesJson,\r\n            lines: linesJson,\r\n            holes: windowsPos.holes,\r\n            areas: {},\r\n            items: {},\r\n            selected: {\r\n              vertices: [],\r\n              lines: [],\r\n              holes: [],\r\n              areas: [],\r\n              items: [],\r\n            },\r\n          },\r\n        },\r\n        grids: {\r\n          h1: {\r\n            id: \"h1\",\r\n            type: \"horizontal-streak\",\r\n            properties: {\r\n              step: 20,\r\n              colors: [\"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\"],\r\n            },\r\n          },\r\n          v1: {\r\n            id: \"v1\",\r\n            type: \"vertical-streak\",\r\n            properties: {\r\n              step: 20,\r\n              colors: [\"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\", \"#F6F6F6\"],\r\n            },\r\n          },\r\n        },\r\n        selectedLayer: \"layer-1\",\r\n        groups: {},\r\n        width: SCENE_WIDTH,\r\n        height: SCENE_HEIGHT,\r\n        meta: {},\r\n        guides: { horizontal: {}, vertical: {}, circular: {} },\r\n      };\r\n\r\n      console.log(\"jsonData\", jsonData);\r\n\r\n      projectActions.loadProject(jsonData);\r\n    });\r\n  };\r\n\r\n  const arrangeLines = (lines, verticesJson) => {\r\n    let resLines = [];\r\n    for (let i = 0; i < lines.length; i++) {\r\n      let vertise1 = verticesJson[lines[i].vertices[0]];\r\n      let vertise2 = verticesJson[lines[i].vertices[1]];\r\n\r\n      if (vertise1.x == vertise2.x && vertise1.y > vertise2.y) {\r\n        const temp = vertise1;\r\n        vertise1 = vertise2;\r\n        vertise2 = temp;\r\n      } else if (vertise1.y == vertise2.y && vertise1.x > vertise2.x) {\r\n        const temp = vertise1;\r\n        vertise1 = vertise2;\r\n        vertise2 = temp;\r\n      }\r\n\r\n      resLines.push({\r\n        id: lines[i].id,\r\n        type: lines[i].type,\r\n        prototype: lines[i].prototype,\r\n        name: lines[i].name,\r\n        misc: {},\r\n        selected: false,\r\n        properties: {\r\n          height: {\r\n            length: WALL_HEIGHT,\r\n          },\r\n          thickness: {\r\n            length: WALL_THICKNESS,\r\n          },\r\n          textureA: \"bricks\",\r\n          textureB: \"bricks\",\r\n        },\r\n        visible: true,\r\n        vertices: [vertise1.id, vertise2.id],\r\n        holes: lines[i].holes,\r\n      });\r\n    }\r\n\r\n    return resLines;\r\n  };\r\n\r\n  const checkDoor = (vertise1, vertise2, parsingData) => {\r\n    let verticesJson = [];\r\n    for (let i = 0; i < parsingData.vertices.length; i++) {\r\n      verticesJson[parsingData.vertices[i].id] = parsingData.vertices[i];\r\n    }\r\n\r\n    for (let i = 0; i < parsingData.lines.length; i++) {\r\n      const parseVer1 = verticesJson[parsingData.lines[i].vertices[0]];\r\n      const parseVer2 = verticesJson[parsingData.lines[i].vertices[1]];\r\n      const distance11 = Math.sqrt(\r\n        Math.pow(parseVer1.x - vertise1.x, 2) +\r\n          Math.pow(parseVer1.y - vertise1.y, 2)\r\n      );\r\n      const distance12 = Math.sqrt(\r\n        Math.pow(parseVer1.x - vertise2.x, 2) +\r\n          Math.pow(parseVer1.y - vertise2.y, 2)\r\n      );\r\n      const distance21 = Math.sqrt(\r\n        Math.pow(parseVer2.x - vertise1.x, 2) +\r\n          Math.pow(parseVer2.y - vertise1.y, 2)\r\n      );\r\n      const distance22 = Math.sqrt(\r\n        Math.pow(parseVer2.x - vertise2.x, 2) +\r\n          Math.pow(parseVer2.y - vertise2.y, 2)\r\n      );\r\n\r\n      if (\r\n        distance11 <= 15 ||\r\n        distance12 <= 15 ||\r\n        distance21 <= 15 ||\r\n        distance22 <= 15\r\n      ) {\r\n        return 1;\r\n      }\r\n    }\r\n\r\n    return 0;\r\n  };\r\n\r\n  const checkDupliVertices = (vertices, x, y) => {\r\n    for (let i = 0; i < vertices.length; i++) {\r\n      if (x == vertices[i].x && y == vertices[i].y) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  const checkDupliLines = (lineArr, verID1, verID2) => {\r\n    for (let i = 0; i < lineArr.length; i++) {\r\n      if (\r\n        lineArr[i].vertices[0] + lineArr[i].vertices[1] == verID1 + verID2 ||\r\n        lineArr[i].vertices[1] + lineArr[i].vertices[0] == verID1 + verID2\r\n      ) {\r\n        return 1;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  const getParsingData = (rulerPixel, domObj) => {\r\n    var vertices = [];\r\n    var lines = {};\r\n    var lineArr = [];\r\n    // var room = \"\";\r\n\r\n    for (var i = 0; i < domObj.length; i++) {\r\n      let verticesID = IDBroker.acquireID();\r\n      let verticesIndex = checkDupliVertices(\r\n        vertices,\r\n        Math.floor(domObj[i].getAttribute(\"x1\") * rulerPixel),\r\n        Math.floor(SCENE_HEIGHT - domObj[i].getAttribute(\"y1\") * rulerPixel)\r\n      );\r\n\r\n      let vertice1, vertice2;\r\n      if (verticesIndex != -1) {\r\n        // duplicated\r\n        vertice1 = vertices[verticesIndex];\r\n      } else {\r\n        // not duplicated\r\n        vertice1 = {\r\n          id: verticesID,\r\n          type: \"\",\r\n          prototype: \"vertices\",\r\n          name: \"Vertex\",\r\n          misc: {},\r\n          selected: false,\r\n          properties: {},\r\n          visible: true,\r\n          x: Math.floor(domObj[i].getAttribute(\"x1\") * rulerPixel),\r\n          y: Math.floor(\r\n            SCENE_HEIGHT - domObj[i].getAttribute(\"y1\") * rulerPixel\r\n          ),\r\n          lines: [\"maIUMKnv7l\", \"nhQAdYl8q\"],\r\n          areas: [],\r\n        };\r\n        vertices.push(vertice1);\r\n      }\r\n\r\n      verticesID = IDBroker.acquireID();\r\n      verticesIndex = checkDupliVertices(\r\n        vertices,\r\n        Math.floor(domObj[i].getAttribute(\"x2\") * rulerPixel),\r\n        Math.floor(SCENE_HEIGHT - domObj[i].getAttribute(\"y2\") * rulerPixel)\r\n      );\r\n      if (verticesIndex != -1) {\r\n        // duplicated\r\n        vertice2 = vertices[verticesIndex];\r\n      } else {\r\n        vertice2 = {\r\n          id: verticesID,\r\n          type: \"\",\r\n          prototype: \"vertices\",\r\n          name: \"Vertex\",\r\n          misc: {},\r\n          selected: false,\r\n          properties: {},\r\n          visible: true,\r\n          x: Math.floor(domObj[i].getAttribute(\"x2\") * rulerPixel),\r\n          y: Math.floor(\r\n            SCENE_HEIGHT - domObj[i].getAttribute(\"y2\") * rulerPixel\r\n          ),\r\n          lines: [\"maIUMKnv7l\", \"nhQAdYl8q\"],\r\n          areas: [],\r\n        };\r\n        vertices.push(vertice2);\r\n      }\r\n\r\n      const checkLine = checkDupliLines(lineArr, vertice1.id, vertice2.id);\r\n\r\n      if (checkLine == -1) {\r\n        const lineID = IDBroker.acquireID();\r\n\r\n        lineArr.push({\r\n          id: lineID,\r\n          type: \"wall\",\r\n          prototype: \"lines\",\r\n          name: \"Wall\",\r\n          misc: {},\r\n          selected: false,\r\n          properties: {\r\n            height: { length: WALL_HEIGHT },\r\n            thickness: { length: WALL_THICKNESS },\r\n            textureA: \"bricks\",\r\n            textureB: \"bricks\",\r\n          },\r\n          visible: true,\r\n          vertices: [vertice1.id, vertice2.id],\r\n          holes: [],\r\n        });\r\n      }\r\n    }\r\n\r\n    return {\r\n      vertices: vertices,\r\n      lines: lineArr,\r\n    };\r\n  };\r\n\r\n  const getMoveSize = (line, externalData, internalData) => {\r\n    let externalVerticesJson = [];\r\n    for (let i = 0; i < externalData.vertices.length; i++) {\r\n      externalVerticesJson[externalData.vertices[i].id] =\r\n        externalData.vertices[i];\r\n    }\r\n    const vertice1 = externalVerticesJson[line.vertices[0]];\r\n    const vertice2 = externalVerticesJson[line.vertices[1]];\r\n\r\n    let distance = 99999999;\r\n    let result = { direction: -1, position: -1 };\r\n    for (let i = 0; i < internalData.vertices.length; i++) {\r\n      if (vertice1.x == vertice2.x) {\r\n        // x move\r\n        let rest = Math.abs(internalData.vertices[i].y - vertice1.y);\r\n        if (\r\n          Math.abs(internalData.vertices[i].y - vertice1.y) >=\r\n          Math.abs(internalData.vertices[i].y - vertice2.y)\r\n        ) {\r\n          rest = Math.abs(internalData.vertices[i].y - vertice2.y);\r\n        }\r\n        if (\r\n          Math.abs(internalData.vertices[i].x - vertice1.x) + rest < distance &&\r\n          vertice1.x != internalData.vertices[i].x &&\r\n          checkWindowWall(internalData, internalData.vertices[i].x, 0)\r\n        ) {\r\n          distance = Math.abs(internalData.vertices[i].x - vertice1.x) + rest;\r\n          result = {\r\n            direction: 0,\r\n            position: internalData.vertices[i].x,\r\n          };\r\n        }\r\n      } else if (vertice1.y == vertice2.y) {\r\n        // y move\r\n        let rest = Math.abs(internalData.vertices[i].x - vertice1.x);\r\n        if (\r\n          Math.abs(internalData.vertices[i].x - vertice1.x) >=\r\n          Math.abs(internalData.vertices[i].x - vertice2.x)\r\n        ) {\r\n          rest = Math.abs(internalData.vertices[i].x - vertice2.x);\r\n        }\r\n        if (\r\n          Math.abs(internalData.vertices[i].y - vertice1.y) + rest < distance &&\r\n          vertice1.y != internalData.vertices[i].y &&\r\n          checkWindowWall(internalData, internalData.vertices[i].y, 1)\r\n        ) {\r\n          distance = Math.abs(internalData.vertices[i].y - vertice1.y) + rest;\r\n          result = {\r\n            direction: 1,\r\n            position: internalData.vertices[i].y,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  const checkWindowWall = (internalData, position, direction) => {\r\n    let count = 0;\r\n    for (let i = 0; i < internalData.vertices.length; i++) {\r\n      if (direction == 0) {\r\n        // x axios\r\n        if (internalData.vertices[i].x == position) {\r\n          count++;\r\n        }\r\n      } else {\r\n        // y axios\r\n        if (internalData.vertices[i].y == position) {\r\n          count++;\r\n        }\r\n      }\r\n    }\r\n    return count > 1 ? 1 : 0;\r\n  };\r\n\r\n  const getIndexVertice = (parseData, id) => {\r\n    for (let i = 0; i < parseData.vertices.length; i++) {\r\n      if (parseData.vertices[i].id == id) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  };\r\n\r\n  const checkBreakLine = (externalLines, externalVertices, line) => {\r\n    let verticesJson = {};\r\n    for (let i = 0; i < externalVertices.length; i++) {\r\n      verticesJson[externalVertices[i].id] = externalVertices[i];\r\n    }\r\n\r\n    let count = 0;\r\n    for (let i = 0; i < externalLines.length; i++) {\r\n      if (\r\n        externalLines[i].vertices[0] == line.vertices[0] &&\r\n        externalLines[i].id != line.id\r\n      ) {\r\n        if (\r\n          verticesJson[externalLines[i].vertices[1]].y ==\r\n            verticesJson[line.vertices[1]].y ||\r\n          verticesJson[externalLines[i].vertices[1]].x ==\r\n            verticesJson[line.vertices[1]].x\r\n        ) {\r\n          return {\r\n            externalNo: i,\r\n            externalOrder: 0,\r\n            lineOrder: 0,\r\n          };\r\n        }\r\n      } else if (\r\n        externalLines[i].vertices[0] == line.vertices[1] &&\r\n        externalLines[i].id != line.id\r\n      ) {\r\n        if (\r\n          verticesJson[externalLines[i].vertices[1]].y ==\r\n            verticesJson[line.vertices[0]].y ||\r\n          verticesJson[externalLines[i].vertices[1]].x ==\r\n            verticesJson[line.vertices[0]].x\r\n        ) {\r\n          return {\r\n            externalNo: i,\r\n            externalOrder: 0,\r\n            lineOrder: 1,\r\n          };\r\n        }\r\n      } else if (\r\n        externalLines[i].vertices[1] == line.vertices[0] &&\r\n        externalLines[i].id != line.id\r\n      ) {\r\n        if (\r\n          verticesJson[externalLines[i].vertices[0]].y ==\r\n            verticesJson[line.vertices[1]].y ||\r\n          verticesJson[externalLines[i].vertices[0]].x ==\r\n            verticesJson[line.vertices[1]].x\r\n        ) {\r\n          return {\r\n            externalNo: i,\r\n            externalOrder: 1,\r\n            lineOrder: 0,\r\n          };\r\n        }\r\n      } else if (\r\n        externalLines[i].vertices[1] == line.vertices[1] &&\r\n        externalLines[i].id != line.id\r\n      ) {\r\n        if (\r\n          verticesJson[externalLines[i].vertices[0]].y ==\r\n            verticesJson[line.vertices[0]].y ||\r\n          verticesJson[externalLines[i].vertices[0]].x ==\r\n            verticesJson[line.vertices[0]].x\r\n        ) {\r\n          return {\r\n            externalNo: i,\r\n            externalOrder: 1,\r\n            lineOrder: 1,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      externalNo: -1,\r\n      externalOrder: -1,\r\n      lineOrder: -1,\r\n    };\r\n  };\r\n\r\n  const combineBreakLines = (parsingData) => {\r\n    let facadeVertices = parsingData.vertices;\r\n    let facadeLines = parsingData.lines;\r\n\r\n    let tempLines = [];\r\n\r\n    for (let i = 0; i < facadeLines.length; i++) {\r\n      const res = checkBreakLine(facadeLines, facadeVertices, facadeLines[i]);\r\n      if (res.externalNo != -1) {\r\n        if (\r\n          checkDupliLines(\r\n            tempLines,\r\n            res.lineOrder == 0\r\n              ? facadeLines[i].vertices[1]\r\n              : facadeLines[i].vertices[0],\r\n            res.externalOrder == 0\r\n              ? facadeLines[res.externalNo].vertices[1]\r\n              : facadeLines[res.externalNo].vertices[0]\r\n          ) == -1\r\n        ) {\r\n          tempLines.push({\r\n            id: facadeLines[i].id,\r\n            type: \"wall\",\r\n            prototype: \"lines\",\r\n            name: \"Wall\",\r\n            misc: {},\r\n            selected: false,\r\n            properties: {\r\n              height: { length: WALL_HEIGHT },\r\n              thickness: { length: WALL_THICKNESS },\r\n              textureA: \"bricks\",\r\n              textureB: \"bricks\",\r\n            },\r\n            visible: true,\r\n            vertices: [\r\n              res.lineOrder == 0\r\n                ? facadeLines[i].vertices[1]\r\n                : facadeLines[i].vertices[0],\r\n              res.externalOrder == 0\r\n                ? facadeLines[res.externalNo].vertices[1]\r\n                : facadeLines[res.externalNo].vertices[0],\r\n            ],\r\n            holes: [],\r\n          });\r\n        }\r\n      } else {\r\n        tempLines.push(facadeLines[i]);\r\n      }\r\n    }\r\n\r\n    facadeLines = tempLines;\r\n    return {\r\n      vertices: facadeVertices,\r\n      lines: facadeLines,\r\n    };\r\n  };\r\n\r\n  const moveToInternalWalls = (facadeParsingData, internalParsingData) => {\r\n    let facadeVertices = facadeParsingData.vertices;\r\n    for (let i = 0; i < facadeParsingData.lines.length; i++) {\r\n      const moveSize = getMoveSize(\r\n        facadeParsingData.lines[i],\r\n        facadeParsingData,\r\n        internalParsingData\r\n      );\r\n\r\n      const inx1 = getIndexVertice(\r\n        facadeParsingData,\r\n        facadeParsingData.lines[i].vertices[0]\r\n      );\r\n      const inx2 = getIndexVertice(\r\n        facadeParsingData,\r\n        facadeParsingData.lines[i].vertices[1]\r\n      );\r\n\r\n      facadeVertices[inx1] = {\r\n        id: facadeVertices[inx1].id,\r\n        type: \"\",\r\n        prototype: \"vertices\",\r\n        name: \"Vertex\",\r\n        misc: {},\r\n        selected: false,\r\n        properties: {},\r\n        visible: true,\r\n        x: moveSize.direction == 0 ? moveSize.position : facadeVertices[inx1].x,\r\n        y: moveSize.direction == 1 ? moveSize.position : facadeVertices[inx1].y,\r\n        lines: facadeVertices[inx1].lines,\r\n        areas: [],\r\n      };\r\n      facadeVertices[inx2] = {\r\n        id: facadeVertices[inx2].id,\r\n        type: \"\",\r\n        prototype: \"vertices\",\r\n        name: \"Vertex\",\r\n        misc: {},\r\n        selected: false,\r\n        properties: {},\r\n        visible: true,\r\n        x: moveSize.direction == 0 ? moveSize.position : facadeVertices[inx2].x,\r\n        y: moveSize.direction == 1 ? moveSize.position : facadeVertices[inx2].y,\r\n        lines: facadeVertices[inx2].lines,\r\n        areas: [],\r\n      };\r\n    }\r\n\r\n    return {\r\n      vertices: facadeVertices,\r\n      lines: facadeParsingData.lines,\r\n    };\r\n  };\r\n\r\n  const getRightPos = (vertices1, vertices2) => {\r\n    if (vertices1.x == vertices2.x) {\r\n      // X axios\r\n      if (vertices1.y <= vertices2.y) {\r\n        return {\r\n          vertices1: vertices1,\r\n          vertices2: vertices2,\r\n        };\r\n      }\r\n      return {\r\n        vertices1: vertices2,\r\n        vertices2: vertices1,\r\n      };\r\n    } else if (vertices1.y == vertices2.y) {\r\n      // Y axios\r\n      if (vertices1.x <= vertices2.x) {\r\n        return {\r\n          vertices1: vertices1,\r\n          vertices2: vertices2,\r\n        };\r\n      }\r\n      return {\r\n        vertices1: vertices2,\r\n        vertices2: vertices1,\r\n      };\r\n    }\r\n  };\r\n\r\n  const getWindowsPos = (\r\n    facadeParsingData,\r\n    internalParsingData,\r\n    internalYellowParsingData\r\n  ) => {\r\n    internalYellowParsingData;\r\n    let verticesfacaceTempJson = {};\r\n    for (let i = 0; i < facadeParsingData.vertices.length; i++) {\r\n      verticesfacaceTempJson[facadeParsingData.vertices[i].id] =\r\n        facadeParsingData.vertices[i];\r\n    }\r\n    let verticesInternTempJson = {};\r\n    for (let i = 0; i < internalParsingData.vertices.length; i++) {\r\n      verticesInternTempJson[internalParsingData.vertices[i].id] =\r\n        internalParsingData.vertices[i];\r\n    }\r\n    let internTempLines = internalParsingData.lines;\r\n\r\n    let result = [];\r\n    let unnecessayLines = [];\r\n\r\n    for (let i = 0; i < facadeParsingData.lines.length; i++) {\r\n      let tempLines = [];\r\n      let direction = 0; // X axio\r\n      for (let j = 0; j < internTempLines.length; j++) {\r\n        if (\r\n          verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].x ==\r\n          verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]].x\r\n        ) {\r\n          // X axio\r\n          direction = 0;\r\n          if (\r\n            verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].x ==\r\n              verticesInternTempJson[internTempLines[j].vertices[0]].x &&\r\n            verticesInternTempJson[internTempLines[j].vertices[0]].x ==\r\n              verticesInternTempJson[internTempLines[j].vertices[1]].x\r\n          ) {\r\n            const extern = getRightPos(\r\n              verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]],\r\n              verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]]\r\n            );\r\n            const intern = getRightPos(\r\n              verticesInternTempJson[internTempLines[j].vertices[0]],\r\n              verticesInternTempJson[internTempLines[j].vertices[1]]\r\n            );\r\n            if (\r\n              intern.vertices1.y >= extern.vertices1.y ||\r\n              intern.vertices2.y <= extern.vertices2.y\r\n            ) {\r\n              tempLines.push({\r\n                vertices1: intern.vertices1,\r\n                vertices2: intern.vertices2,\r\n                id: facadeParsingData.lines[i].id,\r\n                facade1: extern.vertices1,\r\n                facade2: extern.vertices2,\r\n              });\r\n              if (\r\n                intern.vertices1.y >= extern.vertices1.y &&\r\n                intern.vertices2.y <= extern.vertices2.y\r\n              )\r\n                unnecessayLines.push(internTempLines[j].id);\r\n            }\r\n          }\r\n        } else if (\r\n          verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].y ==\r\n          verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]].y\r\n        ) {\r\n          // Y axio\r\n          direction = 1;\r\n          if (\r\n            verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]].y ==\r\n              verticesInternTempJson[internTempLines[j].vertices[0]].y &&\r\n            verticesInternTempJson[internTempLines[j].vertices[0]].y ==\r\n              verticesInternTempJson[internTempLines[j].vertices[1]].y\r\n          ) {\r\n            const extern = getRightPos(\r\n              verticesfacaceTempJson[facadeParsingData.lines[i].vertices[0]],\r\n              verticesfacaceTempJson[facadeParsingData.lines[i].vertices[1]]\r\n            );\r\n            const intern = getRightPos(\r\n              verticesInternTempJson[internTempLines[j].vertices[0]],\r\n              verticesInternTempJson[internTempLines[j].vertices[1]]\r\n            );\r\n            if (\r\n              intern.vertices1.x >= extern.vertices1.x ||\r\n              intern.vertices2.x <= extern.vertices2.x\r\n            ) {\r\n              tempLines.push({\r\n                vertices1: intern.vertices1,\r\n                vertices2: intern.vertices2,\r\n                id: facadeParsingData.lines[i].id,\r\n                facade1: extern.vertices1,\r\n                facade2: extern.vertices2,\r\n              });\r\n              if (\r\n                intern.vertices1.x >= extern.vertices1.x &&\r\n                intern.vertices2.x <= extern.vertices2.x\r\n              )\r\n                unnecessayLines.push(internTempLines[j].id);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (tempLines.length > 1) {\r\n        // sort tempLines\r\n        tempLines = tempLines.sort((a, b) => {\r\n          if (direction == 0) {\r\n            // X axios\r\n            return a.vertices1.y - b.vertices1.y;\r\n          } else if (direction == 1) {\r\n            // Y axios\r\n            return a.vertices1.x - b.vertices1.x;\r\n          }\r\n        });\r\n        // extract the windows or doors position\r\n        for (let i = 0; i < tempLines.length - 1; i++) {\r\n          if (tempLines[i].facade1.x == tempLines[i].facade2.x) {\r\n            // X Axios\r\n            let holeID = IDBroker.acquireID();\r\n\r\n            const offset =\r\n              ((tempLines[i].vertices2.y + tempLines[i + 1].vertices1.y) / 2 -\r\n                tempLines[i].facade1.y) /\r\n              (tempLines[i].facade2.y - tempLines[i].facade1.y);\r\n\r\n            if (\r\n              !Number.isNaN(offset) &&\r\n              Math.abs(\r\n                tempLines[i].vertices2.y - tempLines[i + 1].vertices1.y\r\n              ) <= Math.abs(tempLines[i].facade2.y - tempLines[i + 1].facade1.y)\r\n            ) {\r\n              const isDoor = checkDoor(\r\n                tempLines[i].vertices2,\r\n                tempLines[i + 1].vertices1,\r\n                internalYellowParsingData\r\n              );\r\n\r\n              if (isDoor == 0) {\r\n                result.push({\r\n                  id: holeID,\r\n                  type: \"window\",\r\n                  prototype: \"holes\",\r\n                  name: \"Window\",\r\n                  misc: {},\r\n                  selected: false,\r\n                  properties: {\r\n                    width: {\r\n                      length: Math.abs(\r\n                        tempLines[i].vertices2.y - tempLines[i + 1].vertices1.y\r\n                      ),\r\n                    },\r\n                    height: {\r\n                      length: WINDOWS_HEIGHT,\r\n                    },\r\n                    altitude: {\r\n                      length: 40,\r\n                    },\r\n                    thickness: {\r\n                      length: 5,\r\n                    },\r\n                    flip: \"false\",\r\n                  },\r\n                  visible: true,\r\n                  offset: offset,\r\n                  line: tempLines[i].id,\r\n                });\r\n              } else if (isDoor == 1) {\r\n                result.push({\r\n                  id: holeID,\r\n                  type: \"door\",\r\n                  prototype: \"holes\",\r\n                  name: \"Door\",\r\n                  misc: {},\r\n                  selected: false,\r\n                  properties: {\r\n                    width: {\r\n                      length: Math.abs(\r\n                        tempLines[i].vertices2.y - tempLines[i + 1].vertices1.y\r\n                      ),\r\n                    },\r\n                    height: {\r\n                      length: WINDOWS_HEIGHT,\r\n                    },\r\n                    altitude: {\r\n                      length: 40,\r\n                    },\r\n                    thickness: {\r\n                      length: 5,\r\n                    },\r\n                    flip: \"false\",\r\n                  },\r\n                  visible: true,\r\n                  offset: offset,\r\n                  line: tempLines[i].id,\r\n                });\r\n              }\r\n            }\r\n          } else {\r\n            // Y Axios\r\n            let holeID = IDBroker.acquireID();\r\n\r\n            const offset =\r\n              ((tempLines[i].vertices2.x + tempLines[i + 1].vertices1.x) / 2 -\r\n                tempLines[i].facade1.x) /\r\n              (tempLines[i].facade2.x - tempLines[i].facade1.x);\r\n\r\n            if (\r\n              !Number.isNaN(offset) &&\r\n              Math.abs(\r\n                tempLines[i].vertices2.x - tempLines[i + 1].vertices1.x\r\n              ) <= Math.abs(tempLines[i].facade2.x - tempLines[i + 1].facade1.x)\r\n            ) {\r\n              const isDoor = checkDoor(\r\n                tempLines[i].vertices2,\r\n                tempLines[i + 1].vertices1,\r\n                internalYellowParsingData\r\n              );\r\n\r\n              if (isDoor == 0) {\r\n                result.push({\r\n                  id: holeID,\r\n                  type: \"window\",\r\n                  prototype: \"holes\",\r\n                  name: \"Window\",\r\n                  misc: {},\r\n                  selected: false,\r\n                  properties: {\r\n                    width: {\r\n                      length: Math.abs(\r\n                        tempLines[i].vertices2.x - tempLines[i + 1].vertices1.x\r\n                      ),\r\n                    },\r\n                    height: {\r\n                      length: WINDOWS_HEIGHT,\r\n                    },\r\n                    altitude: {\r\n                      length: 40,\r\n                    },\r\n                    thickness: {\r\n                      length: 5,\r\n                    },\r\n                  },\r\n                  visible: true,\r\n                  offset: offset,\r\n                  line: tempLines[i].id,\r\n                });\r\n              } else if (isDoor == 1) {\r\n                sult.push({\r\n                  id: holeID,\r\n                  type: \"door\",\r\n                  prototype: \"holes\",\r\n                  name: \"Door\",\r\n                  misc: {},\r\n                  selected: false,\r\n                  properties: {\r\n                    width: {\r\n                      length: Math.abs(\r\n                        tempLines[i].vertices2.x - tempLines[i + 1].vertices1.x\r\n                      ),\r\n                    },\r\n                    height: {\r\n                      length: WINDOWS_HEIGHT,\r\n                    },\r\n                    altitude: {\r\n                      length: 40,\r\n                    },\r\n                    thickness: {\r\n                      length: 5,\r\n                    },\r\n                  },\r\n                  visible: true,\r\n                  offset: offset,\r\n                  line: tempLines[i].id,\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let json = {};\r\n    for (let i = 0; i < result.length; i++) {\r\n      json[result[i].id] = result[i];\r\n    }\r\n\r\n    // remove the unnessary internal lines\r\n\r\n    let internalLines = [];\r\n    for (let i = 0; i < internTempLines.length; i++) {\r\n      let passedObject = true;\r\n      for (let j = 0; j < unnecessayLines.length; j++) {\r\n        if (unnecessayLines[j] == internTempLines[i].id) {\r\n          passedObject = false;\r\n          break;\r\n        }\r\n      }\r\n      if (passedObject) internalLines.push(internTempLines[i]);\r\n    }\r\n\r\n    return {\r\n      holes: json,\r\n      holesArr: result,\r\n      internalLines: internalLines,\r\n    };\r\n  };\r\n\r\n  return (\r\n    <ToolbarButton\r\n      active={false}\r\n      tooltip=\"Load project from SVG\"\r\n      onClick={loadProjectFromFile}\r\n    >\r\n      <FaFileImport />\r\n    </ToolbarButton>\r\n  );\r\n}\r\n\r\nToolbarLoadSVGButton.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nToolbarLoadSVGButton.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport ItemsBox from \"./ItemsBox\";\r\nimport LinesBox from \"./LinesBox\";\r\nimport RectangleBox from \"./RectangleBox\";\r\nimport RoomBox from \"./RoomBox\";\r\n\r\nimport If from \"../../utils/react-if\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\n\r\nconst iconTextStyle = {\r\n  fontSize: \"19px\",\r\n  textDecoration: \"none\",\r\n  fontWeight: \"bold\",\r\n  margin: \"0px\",\r\n  userSelect: \"none\",\r\n};\r\nconst ASIDE_STYLE = {\r\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\r\n  borderRight: SharedStyle.PRIMARY_COLOR.border,\r\n  position: \"relative\",\r\n};\r\n\r\nconst styles = (theme) => ({\r\n  box: {\r\n    width: \"52px\",\r\n    height: \"52px\",\r\n    position: \"relative\",\r\n    background: \"#FFFFFF\",\r\n    borderBottom: \"1px solid #E4E8EE\",\r\n    cursor: \"pointer\",\r\n    borderRight: \"1px solid #E4E8EE\",\r\n  },\r\n  boxH: {\r\n    width: \"52px\",\r\n    height: \"52px\",\r\n    position: \"relative\",\r\n    background: \"#FFFFFF\",\r\n    borderBottom: \"1px solid #E4E8EE\",\r\n    borderRight: \"1px solid #E4E8EE\",\r\n    background: \"#407AEC\",\r\n    cursor: \"pointer\",\r\n  },\r\n  icon: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    right: \"50%\",\r\n    transform: \"translate(50%,-50%)\",\r\n  },\r\n  snap: {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    right: \"20%\",\r\n    transform: \"translate(50%,-50%)\",\r\n  },\r\n  btmbox: {\r\n    width: \"52px\",\r\n    height: \"52px\",\r\n    position: \"relative\",\r\n    background: \"#FFFFFF\",\r\n    borderTop: \"1px solid #E4E8EE\",\r\n    cursor: \"pointer\",\r\n    borderRight: \"1px solid #E4E8EE\",\r\n    \"&:active\": {\r\n      background: \"#407AEC\",\r\n    },\r\n  },\r\n  sub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 500,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    letterSpacing: \"2px\",\r\n    textTransform: \"uppercase\",\r\n    color: \"#9199A7\",\r\n    marginTop: \"24px\",\r\n  },\r\n  subtype: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"14px\",\r\n    lineHeight: \"20px\",\r\n    color: \"#1F2735\",\r\n    marginLeft: \"15.15px\",\r\n  },\r\n  wrap: {\r\n    marginTop: \"24px\",\r\n    cursor: \"pointer\",\r\n    paddingBottom: \"5px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    \"&:hover\": {\r\n      // borderBottom: \"1px solid #407AEC33\",\r\n      \"& $subtype\": {\r\n        color: \"#4e83e1\",\r\n        // fontSize: \"15px\",\r\n      },\r\n    },\r\n  },\r\n});\r\nclass Toolbar extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = { cursor: 0, hover: 0, selectedCursor: 0, click: false };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return (\r\n      this.props.state.mode !== nextProps.state.mode ||\r\n      this.props.height !== nextProps.height ||\r\n      this.props.width !== nextProps.width ||\r\n      this.props.state.alterate !== nextProps.state.alterate ||\r\n      nextState.cursor != this.state.cursor ||\r\n      nextState.selectedCursor != this.state.selectedCursor ||\r\n      nextState.click != this.state.click ||\r\n      this.props.state.viewer2D != nextProps.state.viewer2D\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      props: { state, width, height, dispatch },\r\n      context: { viewer2DActions, projectActions, viewer3DActions, translator },\r\n    } = this;\r\n\r\n    const { classes } = this.props;\r\n    let { viewer2D, mode, scene } = state;\r\n\r\n    // Load 3D model forcely\r\n    // viewer3DActions.selectTool3DView();\r\n\r\n    return (\r\n      <aside\r\n        style={{ ...ASIDE_STYLE, width: width, maxHeight: height }}\r\n        className=\"toolbar\"\r\n      >\r\n        <Box\r\n          className={\r\n            this.state.selectedCursor == 0\r\n              ? classes.boxH\r\n              : this.state.cursor == 0\r\n              ? classes.boxH\r\n              : classes.box\r\n          }\r\n          onMouseOver={() => {\r\n            this.setState({\r\n              cursor: 0,\r\n              selectedCursor: this.state.selectedCursor,\r\n            });\r\n          }}\r\n          onMouseLeave={() => {\r\n            this.setState({ cursor: -1, hover: -1 });\r\n          }}\r\n          onClick={() => {\r\n            this.setState({ cursor: 0, selectedCursor: 0, click: 1 });\r\n            projectActions.rollback();\r\n            viewer2DActions.selectToolPan();\r\n          }}\r\n        >\r\n          <img\r\n            src={\r\n              this.state.selectedCursor == 0\r\n                ? \"/assets/cursor-hover.png\"\r\n                : this.state.cursor == 0\r\n                ? \"/assets/cursor-hover.png\"\r\n                : \"/assets/cursor.png\"\r\n            }\r\n            className={classes.icon}\r\n          />\r\n        </Box>\r\n        <Box\r\n          className={\r\n            this.state.selectedCursor == 1\r\n              ? classes.boxH\r\n              : this.state.cursor == 1\r\n              ? classes.boxH\r\n              : classes.box\r\n          }\r\n          onMouseOver={() => {\r\n            this.setState({\r\n              cursor: 1,\r\n              selectedCursor: this.state.selectedCursor,\r\n            });\r\n          }}\r\n          onMouseLeave={() => {\r\n            this.setState({ cursor: -1, hover: -1 });\r\n          }}\r\n          onClick={() => {\r\n            if (this.state.selectedCursor == 1)\r\n              this.setState({\r\n                cursor: 1,\r\n                selectedCursor: 1,\r\n                click: !this.state.click,\r\n              });\r\n            else\r\n              this.setState({\r\n                cursor: 1,\r\n                selectedCursor: 1,\r\n                click: true,\r\n              });\r\n          }}\r\n        >\r\n          <img\r\n            src={\r\n              this.state.selectedCursor == 1\r\n                ? \"/assets/line-hover.png\"\r\n                : this.state.cursor == 1\r\n                ? \"/assets/line-hover.png\"\r\n                : \"/assets/line.png\"\r\n            }\r\n            className={classes.icon}\r\n          />\r\n          {this.state.selectedCursor == 1 && this.state.click == true && (\r\n            <img src=\"/assets/right.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor == 1 && this.state.click == false && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 1 && this.state.cursor == 1 && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 1 && this.state.cursor != 1 && (\r\n            <img src=\"/assets/down.png\" className={classes.snap} />\r\n          )}\r\n        </Box>\r\n        {/* <Box\r\n          className={\r\n            this.state.selectedCursor == 2\r\n              ? classes.boxH\r\n              : this.state.cursor == 2\r\n              ? classes.boxH\r\n              : classes.box\r\n          }\r\n          onMouseOver={() => {\r\n            this.setState({\r\n              cursor: 2,\r\n\r\n              selectedCursor: this.state.selectedCursor,\r\n            });\r\n          }}\r\n          onMouseLeave={() => {\r\n            this.setState({ cursor: -1, hover: -1 });\r\n          }}\r\n          onClick={() => {\r\n            if (this.state.selectedCursor == 2)\r\n              this.setState({\r\n                cursor: 2,\r\n                selectedCursor: 2,\r\n                click: !this.state.click,\r\n              });\r\n            else\r\n              this.setState({\r\n                cursor: 2,\r\n                selectedCursor: 2,\r\n                click: true,\r\n              });\r\n          }}\r\n        >\r\n          <img\r\n            src={\r\n              this.state.selectedCursor == 2\r\n                ? \"/assets/rectangle-hover.png\"\r\n                : this.state.cursor == 2\r\n                ? \"/assets/rectangle-hover.png\"\r\n                : \"/assets/rectangle.png\"\r\n            }\r\n            className={classes.icon}\r\n          />\r\n          {this.state.selectedCursor == 2 && this.state.click == true && (\r\n            <img src=\"/assets/right.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor == 2 && this.state.click == false && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 2 && this.state.cursor == 2 && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 2 && this.state.cursor != 2 && (\r\n            <img src=\"/assets/down.png\" className={classes.snap} />\r\n          )}\r\n        </Box> */}\r\n        <Box\r\n          className={\r\n            this.state.selectedCursor == 3\r\n              ? classes.boxH\r\n              : this.state.cursor == 3\r\n              ? classes.boxH\r\n              : classes.box\r\n          }\r\n          onMouseOver={() => {\r\n            this.setState({\r\n              cursor: 3,\r\n\r\n              selectedCursor: this.state.selectedCursor,\r\n            });\r\n          }}\r\n          onMouseLeave={() => {\r\n            this.setState({ cursor: -1, hover: -1 });\r\n          }}\r\n          onClick={() => {\r\n            if (this.state.selectedCursor == 3)\r\n              this.setState({\r\n                cursor: 3,\r\n                selectedCursor: 3,\r\n                click: !this.state.click,\r\n              });\r\n            else\r\n              this.setState({\r\n                cursor: 3,\r\n                selectedCursor: 3,\r\n                click: true,\r\n              });\r\n          }}\r\n        >\r\n          <img\r\n            src={\r\n              this.state.selectedCursor == 3\r\n                ? \"/assets/grid-hover.png\"\r\n                : this.state.cursor == 3\r\n                ? \"/assets/grid-hover.png\"\r\n                : \"/assets/grid.png\"\r\n            }\r\n            className={classes.icon}\r\n          />\r\n          {this.state.selectedCursor == 3 && this.state.click == true && (\r\n            <img src=\"/assets/right.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor == 3 && this.state.click == false && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 3 && this.state.cursor == 3 && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 3 && this.state.cursor != 3 && (\r\n            <img src=\"/assets/down.png\" className={classes.snap} />\r\n          )}\r\n        </Box>\r\n        <Box\r\n          className={\r\n            this.state.selectedCursor == 4\r\n              ? classes.boxH\r\n              : this.state.cursor == 4\r\n              ? classes.boxH\r\n              : classes.box\r\n          }\r\n          onMouseOver={() => {\r\n            this.setState({\r\n              cursor: 4,\r\n\r\n              selectedCursor: this.state.selectedCursor,\r\n            });\r\n          }}\r\n          onMouseLeave={() => {\r\n            this.setState({ cursor: -1, hover: -1 });\r\n          }}\r\n          onClick={() => {\r\n            if (this.state.selectedCursor == 4)\r\n              this.setState({\r\n                cursor: 4,\r\n                selectedCursor: 4,\r\n                click: !this.state.click,\r\n              });\r\n            else\r\n              this.setState({\r\n                cursor: 4,\r\n                selectedCursor: 4,\r\n                click: true,\r\n              });\r\n          }}\r\n        >\r\n          <img\r\n            src={\r\n              this.state.selectedCursor == 4\r\n                ? \"/assets/items-hover.png\"\r\n                : this.state.cursor == 4\r\n                ? \"/assets/items-hover.png\"\r\n                : \"/assets/items.png\"\r\n            }\r\n            className={classes.icon}\r\n          />\r\n          {this.state.selectedCursor == 4 && this.state.click == true && (\r\n            <img src=\"/assets/right.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor == 4 && this.state.click == false && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 4 && this.state.cursor == 4 && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 4 && this.state.cursor != 4 && (\r\n            <img src=\"/assets/down.png\" className={classes.snap} />\r\n          )}\r\n        </Box>\r\n        <Box\r\n          className={\r\n            this.state.selectedCursor == 5\r\n              ? classes.boxH\r\n              : this.state.cursor == 5\r\n              ? classes.boxH\r\n              : classes.box\r\n          }\r\n          onMouseOver={() => {\r\n            this.setState({\r\n              cursor: 5,\r\n              selectedCursor: this.state.selectedCursor,\r\n            });\r\n          }}\r\n          onMouseLeave={() => {\r\n            this.setState({ cursor: -1, hover: -1 });\r\n          }}\r\n          onClick={() => {\r\n            if (this.state.selectedCursor == 1)\r\n              this.setState({\r\n                cursor: 5,\r\n                selectedCursor: 5,\r\n                click: !this.state.click,\r\n              });\r\n            else\r\n              this.setState({\r\n                cursor: 5,\r\n                selectedCursor: 5,\r\n                click: true,\r\n              });\r\n          }}\r\n        >\r\n          <img\r\n            src={\r\n              this.state.selectedCursor == 5\r\n                ? \"/assets/comb-hover.png\"\r\n                : this.state.cursor == 5\r\n                ? \"/assets/comb-hover.png\"\r\n                : \"/assets/comb.png\"\r\n            }\r\n            className={classes.icon}\r\n          />\r\n          {this.state.selectedCursor == 5 && this.state.click == true && (\r\n            <img src=\"/assets/right.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor == 5 && this.state.click == false && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 5 && this.state.cursor == 5 && (\r\n            <img src=\"/assets/down-hover.png\" className={classes.snap} />\r\n          )}\r\n          {this.state.selectedCursor != 5 && this.state.cursor != 5 && (\r\n            <img src=\"/assets/down.png\" className={classes.snap} />\r\n          )}\r\n        </Box>\r\n        <Box sx={{ position: \"absolute\", bottom: 0 }}>\r\n          <Box\r\n            className={classes.btmbox}\r\n            onClick={() => {\r\n              const scenseValue = viewer2D.toJS();\r\n              const newVal = {\r\n                a: scenseValue.a * 1.06,\r\n                b: 0,\r\n                SVGWidth: scenseValue.SVGWidth,\r\n                c: 0,\r\n                mode: \"idle\",\r\n                d: scenseValue.d * 1.06,\r\n                e: scenseValue.e - scenseValue.SVGWidth * scenseValue.a * 0.03,\r\n                f: scenseValue.f - scenseValue.SVGHeight * scenseValue.d * 0.03,\r\n                miniatureOpen: true,\r\n                SVGHeight: scenseValue.SVGHeight,\r\n                pinchPointDistance: null,\r\n                lastAction: null,\r\n                viewerWidth: scenseValue.viewerWidth,\r\n                startX: null,\r\n                startY: null,\r\n                version: 2,\r\n                focus: false,\r\n                viewerHeight: scenseValue.viewerHeight,\r\n                prePinchMode: null,\r\n                endX: null,\r\n                endY: null,\r\n              };\r\n              viewer2DActions.updateCameraView(newVal);\r\n            }}\r\n          >\r\n            <img src=\"/assets/plus.png\" className={classes.icon} />\r\n          </Box>\r\n          <Box\r\n            className={classes.btmbox}\r\n            onClick={() => {\r\n              const scenseValue = viewer2D.toJS();\r\n              const newVal = {\r\n                a: scenseValue.a / 1.06,\r\n                b: 0,\r\n                SVGWidth: scenseValue.SVGWidth,\r\n                c: 0,\r\n                mode: \"idle\",\r\n                d: scenseValue.d / 1.06,\r\n                e:\r\n                  scenseValue.e +\r\n                  (scenseValue.SVGWidth * scenseValue.a * 0.03) / 1.06,\r\n                f:\r\n                  scenseValue.f +\r\n                  (scenseValue.SVGHeight * scenseValue.d * 0.03) / 1.06,\r\n                miniatureOpen: true,\r\n                SVGHeight: scenseValue.SVGHeight,\r\n                pinchPointDistance: null,\r\n                lastAction: null,\r\n                viewerWidth: scenseValue.viewerWidth,\r\n                startX: null,\r\n                startY: null,\r\n                version: 2,\r\n                focus: false,\r\n                viewerHeight: scenseValue.viewerHeight,\r\n                prePinchMode: null,\r\n                endX: null,\r\n                endY: null,\r\n              };\r\n              viewer2DActions.updateCameraView(newVal);\r\n            }}\r\n          >\r\n            <img src=\"/assets/minus.png\" className={classes.icon} />\r\n          </Box>\r\n          <Box\r\n            className={classes.btmbox}\r\n            onClick={() => {\r\n              const scenseValue = viewer2D.toJS();\r\n              const newVal = {\r\n                a: 1,\r\n                b: 0,\r\n                SVGWidth: scenseValue.SVGWidth,\r\n                c: 0,\r\n                mode: \"idle\",\r\n                d: 1,\r\n                e: 0,\r\n                f: 0,\r\n                miniatureOpen: true,\r\n                SVGHeight: scenseValue.SVGHeight,\r\n                pinchPointDistance: null,\r\n                lastAction: null,\r\n                viewerWidth: scenseValue.viewerWidth,\r\n                startX: null,\r\n                startY: null,\r\n                version: 2,\r\n                focus: false,\r\n                viewerHeight: scenseValue.viewerHeight,\r\n                prePinchMode: null,\r\n                endX: null,\r\n                endY: null,\r\n              };\r\n              viewer2DActions.updateCameraView(newVal);\r\n            }}\r\n          >\r\n            <img src=\"/assets/refresh.png\" className={classes.icon} />\r\n          </Box>\r\n        </Box>\r\n        {this.state.selectedCursor == 1 && this.state.click == true && (\r\n          <LinesBox dispatch={dispatch} />\r\n        )}\r\n        {/* {this.state.selectedCursor == 2 && this.state.click == true && (\r\n          <RoomBox dispatch={dispatch} />\r\n        )} */}\r\n        {this.state.selectedCursor == 3 && this.state.click == true && (\r\n          <RectangleBox dispatch={dispatch} />\r\n        )}\r\n        {this.state.selectedCursor == 4 && this.state.click == true && (\r\n          <ItemsBox dispatch={dispatch} />\r\n        )}\r\n      </aside>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Toolbar);\r\n\r\nToolbar.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  allowProjectFileSupport: PropTypes.bool.isRequired,\r\n  toolbarButtons: PropTypes.array,\r\n  dispatch: PropTypes.func,\r\n};\r\n\r\nToolbar.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  viewer2DActions: PropTypes.object.isRequired,\r\n  viewer3DActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport actions from \"../../actions/export\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    flexGrow: 1,\r\n    position: \"absolute\",\r\n    width: \"264px\",\r\n    height: \"calc(100vh - 52px)\",\r\n    left: \"52px\",\r\n    top: \"0px\",\r\n    background: \"#FFFFFF\",\r\n    borderRight: \"1px solid #E4E8EE\",\r\n    zIndex: 2,\r\n    padding: \"20px\",\r\n    overflowY: \"auto\",\r\n    \"&::-webkit-scrollbar\": {\r\n      width: \"5px\",\r\n    },\r\n\r\n    /* Track */\r\n    \"&::-webkit-scrollbar-track\": {\r\n      background: \"transparent\",\r\n    },\r\n\r\n    /* Handle */\r\n    \"&::-webkit-scrollbar-thumb\": {\r\n      background: \"#afa9a944\",\r\n      borderRadius: \"5px\",\r\n      \"&:hover\": {\r\n        background: \"#555\",\r\n      },\r\n    },\r\n    \"&::-webkit-scrollbar-thumb:hover\": {\r\n      background: \"#555\",\r\n    },\r\n  },\r\n  container: {\r\n    width: \"961px\",\r\n    height: \"457px\",\r\n    margin: \"auto\",\r\n    background: \"#FFFFFF\",\r\n    border: \"1px dashed #A7A7A7\",\r\n    borderRadius: \"18px\",\r\n    padding: \"124px 135px\",\r\n  },\r\n  inputText: {\r\n    \"&:hover .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline\": {\r\n      borderColor: \"#0CA9EB\",\r\n    },\r\n    \"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline\": {\r\n      borderColor: \"#0CA9EB\",\r\n    },\r\n    \"& .MuiOutlinedInput-input\": {\r\n      color: \"#000\",\r\n      padding: \"11.5px 14px\",\r\n      fontFamily: \"DM Sans\",\r\n      fontStyle: \"normal\",\r\n      fontWeight: 400,\r\n      fontSize: \"13px\",\r\n      lineHeight: \"20px\",\r\n      color: \"#9199A7\",\r\n    },\r\n    \"& .MuiInputLabel-outlined.Mui-focused\": {\r\n      color: \"#000\",\r\n    },\r\n    \"& .MuiOutlinedInput-root\": {\r\n      backgroundColor: \"#fff\",\r\n      borderRadius: \"6px\",\r\n      padding: \"offset\",\r\n    },\r\n  },\r\n  sub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 500,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    letterSpacing: \"2px\",\r\n    textTransform: \"uppercase\",\r\n    color: \"#9199A7\",\r\n    marginTop: \"24px\",\r\n  },\r\n  subtype: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"14px\",\r\n    lineHeight: \"20px\",\r\n    color: \"#1F2735\",\r\n    marginLeft: \"15.15px\",\r\n  },\r\n  wrap: {\r\n    marginTop: \"24px\",\r\n    cursor: \"pointer\",\r\n    paddingBottom: \"5px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    \"&:hover\": {\r\n      // borderBottom: \"1px solid #407AEC33\",\r\n      \"& $subtype\": {\r\n        color: \"#4e83e1\",\r\n        // fontSize: \"15px\",\r\n      },\r\n    },\r\n  },\r\n}));\r\nconst menus = [\r\n  {\r\n    type: \"title\",\r\n    name: \"TABLE\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/roundtable.png\",\r\n    name: \"Round table\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/squaretable.png\",\r\n    name: \"Square table\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/rectangletable.png\",\r\n    name: \"Rectangle table\",\r\n  },\r\n  {\r\n    type: \"title\",\r\n    name: \"SOFA\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/sofa.png\",\r\n    name: \"Sofa\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/sofaL.png\",\r\n    name: \"Sofa - L shape\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/sofaU.png\",\r\n    name: \"Sofa - U shape\",\r\n  },\r\n  {\r\n    type: \"title\",\r\n    name: \"BED\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/bed1x.png\",\r\n    name: \"Bed - 1x\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/bed2x.png\",\r\n    name: \"Bed - 2x\",\r\n  },\r\n  {\r\n    type: \"title\",\r\n    name: \"WORDROBE\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/wordrob.png\",\r\n    name: \"Wordrobe\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/dresser.png\",\r\n    name: \"Dresser\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/nightstand.png\",\r\n    name: \"Nightstand\",\r\n  },\r\n  {\r\n    type: \"title\",\r\n    name: \"BATHROOM\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/bathtub.png\",\r\n    name: \"Bathtub\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/shower.png\",\r\n    name: \"Shower\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/sink.png\",\r\n    name: \"Sink\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/toilet.png\",\r\n    name: \"Toilet\",\r\n  },\r\n  {\r\n    type: \"title\",\r\n    name: \"Kitchen\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/washingmachine.png\",\r\n    name: \"Washing machine\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/oven.png\",\r\n    name: \"Oven\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/cooktop2x.png\",\r\n    name: \"Cooktop - 2x\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/cooktop4x.png\",\r\n    name: \"Cooktop - 4x\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/rangehood.png\",\r\n    name: \"Range hood\",\r\n  },\r\n];\r\n\r\nexport default function ItemsBox(props) {\r\n  const classes = useStyles();\r\n\r\n  const [menuItems, setmenuItems] = useState(menus);\r\n  const onChangeSearchInput = (e) => {\r\n    if (e.target.value == \"\") {\r\n      setmenuItems(menus);\r\n    } else {\r\n      let searchedMenus = [];\r\n      menus.map((menu, id) => {\r\n        if (\r\n          menu.type == \"menu\" &&\r\n          menu.name.toLowerCase().includes(e.target.value)\r\n        )\r\n          searchedMenus.push(menu);\r\n      });\r\n      setmenuItems(searchedMenus);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let { catalog } = props;\r\n    props.dispatch(actions.projectActions.initCatalog(catalog));\r\n  }, [props]);\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <TextField\r\n        className={classes.inputText}\r\n        fullWidth\r\n        autoComplete=\"username\"\r\n        type=\"email\"\r\n        placeholder=\"Search...\"\r\n        label=\"\"\r\n        sx={{ mb: 1 }}\r\n        variant=\"outlined\"\r\n        onChange={onChangeSearchInput}\r\n      />\r\n      {menuItems.map((menu, idx) => {\r\n        if (menu.type == \"title\") {\r\n          return (\r\n            <Typography key={idx} className={classes.sub}>\r\n              {menu.name}\r\n            </Typography>\r\n          );\r\n        } else if (menu.type == \"menu\") {\r\n          return (\r\n            <Box key={idx} className={classes.wrap} onClick={() => {\r\n              if(menu.name == \"Sofa\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"sofa\"));\r\n              } else if(menu.name == \"Sofa - L shape\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"sofa-L\"));\r\n              } else if(menu.name == \"Sofa - U shape\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"sofa-U\"));\r\n              } else if(menu.name == \"Bed - 1x\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"bed-1\"));\r\n              } else if(menu.name == \"Bed - 2x\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"bed-2\"));\r\n              } else if(menu.name == \"Nightstand\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"nightstand\"));\r\n              } else if(menu.name == \"Round table\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"round-table\"));\r\n              } else if(menu.name == \"Square table\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"square-table\"));\r\n              } else if(menu.name == \"Rectangle table\") {\r\n                console.log('rectangle-table')\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"rectangle-table\"));\r\n              } else if(menu.name == \"Wordrobe\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"wordrobe\"));\r\n              } else if(menu.name == \"Dresser\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"dresser\"));\r\n              } else if(menu.name == \"Bathtub\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"bathtub\"));\r\n              } else if(menu.name == \"Shower\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"shower\"));\r\n              } else if(menu.name == \"Sink\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"sink\"));\r\n              } else if(menu.name == \"Toilet\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"toilet\"));\r\n              } else if(menu.name == \"Washing machine\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"washing-machine\"));\r\n              } else if(menu.name == \"Oven\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"oven\"));\r\n              } else if(menu.name == \"Cooktop - 2x\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"cooktop-2x\"));\r\n              } else if(menu.name == \"Cooktop - 4x\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"cooktop-4x\"));\r\n              } else if(menu.name == \"Range hood\") {\r\n                props.dispatch(actions.itemsActions.selectToolDrawingItem(\"rangehood\"));\r\n              }\r\n            }}>\r\n              <img src={menu.icon} />\r\n              <Typography className={classes.subtype}>{menu.name}</Typography>\r\n            </Box>\r\n          );\r\n        }\r\n      })}\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport actions from \"../../actions/export\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    flexGrow: 1,\r\n    position: \"absolute\",\r\n    width: \"144px\",\r\n    left: \"63px\",\r\n    top: \"52px\",\r\n    background: \"#020916\",\r\n    borderRadius: \"4px\",\r\n    zIndex: 2,\r\n    paddingBottom: \"20px\",\r\n    paddingLeft: \"18px\",\r\n    \"&::-webkit-scrollbar\": {\r\n      width: \"5px\",\r\n    },\r\n\r\n    /* Track */\r\n    \"&::-webkit-scrollbar-track\": {\r\n      background: \"transparent\",\r\n    },\r\n\r\n    /* Handle */\r\n    \"&::-webkit-scrollbar-thumb\": {\r\n      background: \"#afa9a944\",\r\n      borderRadius: \"5px\",\r\n      \"&:hover\": {\r\n        background: \"#555\",\r\n      },\r\n    },\r\n    \"&::-webkit-scrollbar-thumb:hover\": {\r\n      background: \"#555\",\r\n    },\r\n    \"&:after\": {\r\n      content: \"\",\r\n      width: \"10px\",\r\n      height: \"10px\",\r\n      background: \"red\",\r\n    },\r\n  },\r\n  container: {\r\n    width: \"961px\",\r\n    height: \"457px\",\r\n    margin: \"auto\",\r\n    background: \"#FFFFFF\",\r\n    border: \"1px dashed #A7A7A7\",\r\n    borderRadius: \"18px\",\r\n    padding: \"124px 135px\",\r\n  },\r\n  sub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 500,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    letterSpacing: \"2px\",\r\n    textTransform: \"uppercase\",\r\n    color: \"#9199A7\",\r\n    marginTop: \"18px\",\r\n  },\r\n  subtype: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    color: \"#FFFFFF\",\r\n    marginLeft: \"15.15px\",\r\n  },\r\n  wrap: {\r\n    marginTop: \"24px\",\r\n    cursor: \"pointer\",\r\n    paddingBottom: \"5px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    \"&:hover\": {\r\n      // borderBottom: \"1px solid #407AEC33\",\r\n      \"& $subtype\": {\r\n        color: \"#4e83e1\",\r\n        // fontSize: \"15px\",\r\n      },\r\n    },\r\n  },\r\n}));\r\nconst menus = [\r\n  {\r\n    type: \"menu\",\r\n    icon: \"assets/externalline.png\",\r\n    name: \"Exterior walls\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/interiorline.png\",\r\n    name: \"Interior walls\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/dividerline.png\",\r\n    name: \"Divider lines\",\r\n  },\r\n];\r\n\r\nexport default function LinesBox(props) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n\r\n  const [menuItems, setmenuItems] = useState(menus);\r\n\r\n  useEffect(() => {\r\n    let { catalog } = props;\r\n    props.dispatch(actions.projectActions.initCatalog(catalog));\r\n  }, [props]);\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <img\r\n        src=\"/assets/arrow.png\"\r\n        style={{\r\n          position: \"absolute\",\r\n          left: \"-6px\",\r\n          top: \"21px\",\r\n          zIndex: \"33\",\r\n        }}\r\n      />\r\n      {menuItems.map((menu, idx) => {\r\n        if (menu.type == \"title\") {\r\n          return (\r\n            <Typography key={idx} className={classes.sub}>\r\n              {menu.name}\r\n            </Typography>\r\n          );\r\n        } else if (menu.type == \"menu\") {\r\n          return (\r\n            <Box\r\n              key={idx}\r\n              className={classes.wrap}\r\n              onClick={() => {\r\n                if (menu.name == \"Interior walls\") {\r\n                  props.dispatch(actions.projectActions.unselectAll());\r\n                  props.dispatch(actions.projectActions.selectToolEdit());\r\n                  props.dispatch(actions.projectActions.rollback());\r\n                  props.dispatch(\r\n                    actions.linesActions.selectToolDrawingLine(\"internalwall\")\r\n                  );\r\n                } else if (menu.name == \"Exterior walls\") {\r\n                  props.dispatch(actions.projectActions.unselectAll());\r\n                  props.dispatch(actions.projectActions.selectToolEdit());\r\n                  props.dispatch(actions.projectActions.rollback());\r\n                  props.dispatch(\r\n                    actions.linesActions.selectToolDrawingLine(\"externalwall\")\r\n                  );\r\n                } else if (menu.name == \"Divider lines\") {\r\n                  props.dispatch(actions.projectActions.unselectAll());\r\n                  props.dispatch(actions.projectActions.selectToolEdit());\r\n                  props.dispatch(actions.projectActions.rollback());\r\n                  props.dispatch(\r\n                    actions.linesActions.selectToolDrawingLine(\"dividerwall\")\r\n                  );\r\n                }\r\n                // else props.dispatch(actions.projectActions.openCatalog());\r\n              }}\r\n            >\r\n              <img src={menu.icon} />\r\n              <Typography className={classes.subtype}>{menu.name}</Typography>\r\n            </Box>\r\n          );\r\n        }\r\n      })}\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport actions from \"../../actions/export\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    flexGrow: 1,\r\n    position: \"absolute\",\r\n    width: \"144px\",\r\n    left: \"63px\",\r\n    top: \"104px\",\r\n    background: \"#020916\",\r\n    borderRadius: \"4px\",\r\n    zIndex: 2,\r\n    paddingBottom: \"20px\",\r\n    paddingLeft: \"18px\",\r\n    \"&::-webkit-scrollbar\": {\r\n      width: \"5px\",\r\n    },\r\n\r\n    /* Track */\r\n    \"&::-webkit-scrollbar-track\": {\r\n      background: \"transparent\",\r\n    },\r\n\r\n    /* Handle */\r\n    \"&::-webkit-scrollbar-thumb\": {\r\n      background: \"#afa9a944\",\r\n      borderRadius: \"5px\",\r\n      \"&:hover\": {\r\n        background: \"#555\",\r\n      },\r\n    },\r\n    \"&::-webkit-scrollbar-thumb:hover\": {\r\n      background: \"#555\",\r\n    },\r\n    \"&:after\": {\r\n      content: \"\",\r\n      width: \"10px\",\r\n      height: \"10px\",\r\n      background: \"red\",\r\n    },\r\n  },\r\n  container: {\r\n    width: \"961px\",\r\n    height: \"457px\",\r\n    margin: \"auto\",\r\n    background: \"#FFFFFF\",\r\n    border: \"1px dashed #A7A7A7\",\r\n    borderRadius: \"18px\",\r\n    padding: \"124px 135px\",\r\n  },\r\n  sub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 500,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    letterSpacing: \"2px\",\r\n    textTransform: \"uppercase\",\r\n    color: \"#9199A7\",\r\n    marginTop: \"18px\",\r\n  },\r\n  subtype: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    color: \"#FFFFFF\",\r\n    marginLeft: \"15.15px\",\r\n  },\r\n  wrap: {\r\n    marginTop: \"24px\",\r\n    cursor: \"pointer\",\r\n    paddingBottom: \"5px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    \"&:hover\": {\r\n      // borderBottom: \"1px solid #407AEC33\",\r\n      \"& $subtype\": {\r\n        color: \"#4e83e1\",\r\n        // fontSize: \"15px\",\r\n      },\r\n    },\r\n  },\r\n}));\r\nconst menus = [\r\n  {\r\n    type: \"menu\",\r\n    icon: \"assets/windowmenu.png\",\r\n    name: \"Insert window\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/door.png\",\r\n    name: \"Insert door\",\r\n  },\r\n];\r\n\r\nexport default function RectangleBox(props) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n\r\n  const [menuItems, setmenuItems] = useState(menus);\r\n\r\n  useEffect(() => {\r\n    let { catalog } = props;\r\n    props.dispatch(actions.projectActions.initCatalog(catalog));\r\n  }, [props]);\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <img\r\n        src=\"/assets/arrow.png\"\r\n        style={{\r\n          position: \"absolute\",\r\n          left: \"-6px\",\r\n          top: \"21px\",\r\n          zIndex: \"33\",\r\n        }}\r\n      />\r\n      {menuItems.map((menu, idx) => {\r\n        if (menu.type == \"title\") {\r\n          return (\r\n            <Typography key={idx} className={classes.sub}>\r\n              {menu.name}\r\n            </Typography>\r\n          );\r\n        } else if (menu.type == \"menu\") {\r\n          return (\r\n            <Box\r\n              key={idx}\r\n              className={classes.wrap}\r\n              onClick={() => {\r\n                if (menu.name == \"Insert window\") {\r\n                  props.dispatch(actions.projectActions.rollback());\r\n                  props.dispatch(actions.projectActions.unselectAll());\r\n                  props.dispatch(actions.projectActions.selectToolEdit());\r\n                  props.dispatch(\r\n                    actions.holesActions.selectToolDrawingHole(\"window\")\r\n                  );\r\n                } else if (menu.name == \"Insert door\") {\r\n                  props.dispatch(actions.projectActions.rollback());\r\n                  props.dispatch(actions.projectActions.unselectAll());\r\n                  props.dispatch(actions.projectActions.selectToolEdit());\r\n                  props.dispatch(\r\n                    actions.holesActions.selectToolDrawingHole(\"door\")\r\n                  );\r\n                }\r\n              }}\r\n            >\r\n              <img src={menu.icon} />\r\n              <Typography className={classes.subtype}>{menu.name}</Typography>\r\n            </Box>\r\n          );\r\n        }\r\n      })}\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport actions from \"../../actions/export\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    flexGrow: 1,\r\n    position: \"absolute\",\r\n    width: \"150px\",\r\n    left: \"63px\",\r\n    top: \"102px\",\r\n    background: \"#020916\",\r\n    borderRadius: \"4px\",\r\n    zIndex: 2,\r\n    paddingBottom: \"20px\",\r\n    paddingLeft: \"18px\",\r\n    \"&::-webkit-scrollbar\": {\r\n      width: \"5px\",\r\n    },\r\n\r\n    /* Track */\r\n    \"&::-webkit-scrollbar-track\": {\r\n      background: \"transparent\",\r\n    },\r\n\r\n    /* Handle */\r\n    \"&::-webkit-scrollbar-thumb\": {\r\n      background: \"#afa9a944\",\r\n      borderRadius: \"5px\",\r\n      \"&:hover\": {\r\n        background: \"#555\",\r\n      },\r\n    },\r\n    \"&::-webkit-scrollbar-thumb:hover\": {\r\n      background: \"#555\",\r\n    },\r\n    \"&:after\": {\r\n      content: \"\",\r\n      width: \"10px\",\r\n      height: \"10px\",\r\n      background: \"red\",\r\n    },\r\n  },\r\n  container: {\r\n    width: \"961px\",\r\n    height: \"457px\",\r\n    margin: \"auto\",\r\n    background: \"#FFFFFF\",\r\n    border: \"1px dashed #A7A7A7\",\r\n    borderRadius: \"18px\",\r\n    padding: \"124px 135px\",\r\n  },\r\n  sub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 500,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    letterSpacing: \"2px\",\r\n    textTransform: \"uppercase\",\r\n    color: \"#9199A7\",\r\n    marginTop: \"18px\",\r\n  },\r\n  subtype: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"16px\",\r\n    color: \"#FFFFFF\",\r\n    marginLeft: \"15.15px\",\r\n  },\r\n  wrap: {\r\n    marginTop: \"24px\",\r\n    cursor: \"pointer\",\r\n    paddingBottom: \"5px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    \"&:hover\": {\r\n      // borderBottom: \"1px solid #407AEC33\",\r\n      \"& $subtype\": {\r\n        color: \"#4e83e1\",\r\n        // fontSize: \"15px\",\r\n      },\r\n    },\r\n  },\r\n}));\r\nconst menus = [\r\n  {\r\n    type: \"menu\",\r\n    icon: \"assets/roommenu.png\",\r\n    name: \"Insert room\",\r\n  },\r\n  {\r\n    type: \"menu\",\r\n    icon: \"/assets/extension.png\",\r\n    name: \"Insert extension\",\r\n  },\r\n];\r\n\r\nexport default function RoomBox(props) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n\r\n  const [menuItems, setmenuItems] = useState(menus);\r\n\r\n  useEffect(() => {\r\n    let { catalog } = props;\r\n    props.dispatch(actions.projectActions.initCatalog(catalog));\r\n  }, [props]);\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <img\r\n        src=\"/assets/arrow.png\"\r\n        style={{\r\n          position: \"absolute\",\r\n          left: \"-6px\",\r\n          top: \"21px\",\r\n          zIndex: \"33\",\r\n        }}\r\n      />\r\n      {menuItems.map((menu, idx) => {\r\n        if (menu.type == \"title\") {\r\n          return (\r\n            <Typography key={idx} className={classes.sub}>\r\n              {menu.name}\r\n            </Typography>\r\n          );\r\n        } else if (menu.type == \"menu\") {\r\n          return (\r\n            <Box\r\n              key={idx}\r\n              className={classes.wrap}\r\n              onClick={() => {\r\n                if(menu.name == \"Insert room\") {\r\n                  props.dispatch(actions.itemsActions.selectToolDrawingItem(\"room\"));\r\n                }\r\n              }}\r\n            >\r\n              <img src={menu.icon} />\r\n              <Typography className={classes.subtype}>{menu.name}</Typography>\r\n            </Box>\r\n          );\r\n        }\r\n      })}\r\n    </Box>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Viewer2D from './viewer2d/viewer2d';\r\nimport Viewer3D from './viewer3d/viewer3d';\r\nimport Viewer3DFirstPerson from './viewer3d/viewer3d-first-person';\r\nimport CatalogList from './catalog-view/catalog-list';\r\nimport ProjectConfigurator from './configurator/project-configurator';\r\n\r\nimport * as constants from '../constants';\r\n\r\nexport default function Content({width, height, state, customContents}) {\r\n  let mode = state.get('mode');\r\n\r\n  switch (mode) {\r\n    case constants.MODE_3D_VIEW:\r\n      return <Viewer3D state={state} width={width} height={height}/>;\r\n\r\n    case constants.MODE_3D_FIRST_PERSON:\r\n      return <Viewer3DFirstPerson state={state} width={width} height={height}/>;\r\n\r\n    case constants.MODE_VIEWING_CATALOG:\r\n      return <CatalogList state={state} width={width} height={height}/>;\r\n\r\n    case constants.MODE_IDLE:\r\n    case constants.MODE_2D_ZOOM_IN:\r\n    case constants.MODE_2D_ZOOM_OUT:\r\n    case constants.MODE_2D_PAN:\r\n    case constants.MODE_WAITING_DRAWING_LINE:\r\n    case constants.MODE_DRAGGING_LINE:\r\n    case constants.MODE_DRAGGING_VERTEX:\r\n    case constants.MODE_DRAGGING_ITEM:\r\n    case constants.MODE_DRAWING_LINE:\r\n    case constants.MODE_DRAWING_HOLE:\r\n    case constants.MODE_DRAWING_ITEM:\r\n    case constants.MODE_DRAGGING_HOLE:\r\n    case constants.MODE_ROTATING_ITEM:\r\n    case constants.MODE_RESIZE_ITEM_RIGHT_BOTTOM:\r\n    case constants.MODE_RESIZE_ITEM_RIGHT_TOP:  \r\n    case constants.MODE_RESIZE_ITEM_LEFT_BOTTOM:\r\n    case constants.MODE_RESIZE_ITEM_LEFT_TOP:  \r\n      return <Viewer2D state={state} width={width} height={height}/>;\r\n\r\n    case constants.MODE_CONFIGURING_PROJECT:\r\n      return <ProjectConfigurator width={width} height={height} state={state}/>;\r\n\r\n    default:\r\n      if (customContents.hasOwnProperty(mode)) {\r\n        let CustomContent = customContents[mode];\r\n        return <CustomContent width={width} height={height} state={state}/>\r\n      } else {\r\n        throw new Error(`Mode ${mode} doesn't have a mapped content`);\r\n      }\r\n  }\r\n}\r\n\r\nContent.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst STYLE = {fill: \"#0096fd\", stroke: SharedStyle.COLORS.white, cursor: \"move\"};\r\n\r\nexport default function Vertex({vertex, layer}) {\r\n\r\n  let {x, y} = vertex;\r\n\r\n  return (\r\n    <g\r\n      transform={`translate(${x}, ${y})`}\r\n      data-element-root\r\n      data-prototype={vertex.prototype}\r\n      data-id={vertex.id}\r\n      data-selected={vertex.selected}\r\n      data-layer={layer.id}\r\n    >\r\n      <circle cx=\"0\" cy=\"0\" r=\"7\" style={STYLE}/>\r\n    </g>\r\n  );\r\n}\r\n\r\nVertex.propTypes = {\r\n  vertex: PropTypes.object.isRequired,\r\n  layer: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { GeometryUtils } from \"../../utils/export\";\r\nimport Ruler from \"./ruler\";\r\nimport RulerLeft from \"./rulerLeft\";\r\nimport RulerRight from \"./rulerRight\"\r\n\r\nexport default function Line({ line, layer, scene, catalog }) {\r\n  let vertex0 = layer.vertices.get(line.vertices.get(0));\r\n  let vertex1 = layer.vertices.get(line.vertices.get(1));\r\n\r\n  if (vertex0.id === vertex1.id || GeometryUtils.samePoints(vertex0, vertex1))\r\n    return null; //avoid 0-length lines\r\n\r\n  let { x: x1, y: y1 } = vertex0;\r\n  let { x: x2, y: y2 } = vertex1;\r\n\r\n  if (x1 > x2) {\r\n    ({ x: x1, y: y1 } = vertex1);\r\n    ({ x: x2, y: y2 } = vertex0);\r\n  }\r\n\r\n  let length = GeometryUtils.pointsDistance(x1, y1, x2, y2);\r\n  let angle = GeometryUtils.angleBetweenTwoPointsAndOrigin(x1, y1, x2, y2);\r\n\r\n  let renderedHoles = line.holes.map((holeID) => {\r\n    let hole = layer.holes.get(holeID);\r\n    let startAt = length * hole.offset;\r\n    let renderedHole = catalog\r\n      .getElement(hole.type)\r\n      .render2D(hole, layer, scene);\r\n\r\n    const elementWidth = hole.properties.get(\"width\").get(\"length\");\r\n\r\n    return (\r\n      <g\r\n        key={holeID}\r\n        transform={`translate(${startAt}, 0)`}\r\n        data-element-root\r\n        data-prototype={hole.prototype}\r\n        data-id={hole.id}\r\n        data-selected={hole.selected}\r\n        data-layer={layer.id}\r\n      >\r\n        {renderedHole}\r\n      </g>\r\n    );\r\n  });\r\n\r\n  let renderedHolesRuler = line.holes.map((holeID) => {\r\n    let hole = layer.holes.get(holeID);\r\n    let startAt = length * hole.offset;\r\n\r\n    const elementWidth = hole.properties.get(\"width\").get(\"length\");\r\n    const leftlength = startAt - elementWidth / 2\r\n    const rightlength = length - startAt - elementWidth / 2\r\n\r\n    let renderedRulerLeft = hole.selected ? (\r\n      <RulerLeft\r\n        margin={startAt}\r\n        length={leftlength}\r\n        half_thickness={5}\r\n        mode={0}\r\n      />\r\n    ) : null;\r\n    let renderedRulerRight = hole.selected ? (\r\n      <RulerRight\r\n        margin={elementWidth / 2}\r\n        length={rightlength}\r\n        half_thickness={5}\r\n        mode={0}\r\n      />\r\n    ) : null;\r\n\r\n    return (\r\n      <g\r\n        key={holeID}\r\n        transform={`translate(${startAt}, 0)`}\r\n        data-element-root\r\n        data-prototype={hole.prototype}\r\n        data-id={hole.id}\r\n        data-selected={hole.selected}\r\n        data-layer={layer.id}\r\n      >\r\n        {renderedRulerLeft}\r\n        {renderedRulerRight}\r\n      </g>\r\n    );\r\n  });\r\n\r\n  let thickness = line.getIn([\"properties\", \"thickness\", \"length\"]);\r\n  let half_thickness = thickness / 2;\r\n\r\n  let renderedLine = catalog.getElement(line.type).render2D(line, layer);\r\n  let renderedRulerUp = line.selected ? (\r\n    <Ruler\r\n      unit={scene.unit}\r\n      length={length}\r\n      half_thickness={half_thickness}\r\n      mode={0}\r\n    />\r\n  ) : null;\r\n\r\n  let renderedRulerDown = line.selected ? (\r\n    <Ruler\r\n      unit={scene.unit}\r\n      length={length}\r\n      half_thickness={half_thickness}\r\n      mode={1}\r\n    />\r\n  ) : null;\r\n\r\n  return (\r\n    <g\r\n      transform={`translate(${x1}, ${y1}) rotate(${angle}, 0, 0)`}\r\n      data-element-root\r\n      data-prototype={line.prototype}\r\n      data-id={line.id}\r\n      data-selected={line.selected}\r\n      data-layer={layer.id}\r\n      style={line.selected ? { cursor: \"move\" } : {}}\r\n    >\r\n      {renderedRulerUp}\r\n      {renderedRulerDown}\r\n      {renderedLine}\r\n      {renderedHoles}\r\n      {renderedHolesRuler}\r\n    </g>\r\n  );\r\n}\r\n\r\nLine.propTypes = {\r\n  line: PropTypes.object.isRequired,\r\n  layer: PropTypes.object.isRequired,\r\n  scene: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default function RulerLeft({\r\n  length,\r\n  margin,\r\n  half_thickness,\r\n  mode = 0,\r\n}) {\r\n  let distanceText = `${(length / 100).toFixed(2)}`;\r\n  return (\r\n    <g transform={`translate(${-margin}, 0 )`}>\r\n      <defs>\r\n        <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n          <feFlood floodColor=\"#407AEC\" />\r\n          <feGaussianBlur stdDeviation=\"2\" />\r\n          <feComponentTransfer>\r\n            <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n          </feComponentTransfer>\r\n\r\n          <feComponentTransfer>\r\n            <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n          </feComponentTransfer>\r\n          <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n        </filter>\r\n      </defs>\r\n      <text\r\n        x={length / 2}\r\n        y=\"-10\"\r\n        transform={`scale(1, -1)`}\r\n        style={STYLE_TEXT}\r\n        filter=\"url(#rounded-corners)\"\r\n      >\r\n        {distanceText}\r\n      </text>\r\n      <line x1={length} y1=\"-5\" x2={length} y2=\"5\" style={STYLE} />\r\n      <line x1=\"0\" y1=\"0\" x2={length} y2=\"0\" style={STYLE} />\r\n    </g>\r\n  );\r\n}\r\n\r\nRulerLeft.propTypes = {\r\n  length: PropTypes.number.isRequired,\r\n  margin: PropTypes.number.isRequired,\r\n  half_thickness: PropTypes.number.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default function RulerRight({\r\n  length,\r\n  margin,\r\n  half_thickness,\r\n  mode = 0,\r\n}) {\r\n  let distanceText = `${(length / 100).toFixed(2)}`;\r\n  return (\r\n    <g transform={`translate(${margin}, 0 )`}>\r\n      <defs>\r\n        <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n          <feFlood floodColor=\"#407AEC\" />\r\n          <feGaussianBlur stdDeviation=\"2\" />\r\n          <feComponentTransfer>\r\n            <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n          </feComponentTransfer>\r\n\r\n          <feComponentTransfer>\r\n            <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n          </feComponentTransfer>\r\n          <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n        </filter>\r\n      </defs>\r\n      <text\r\n        x={length / 2}\r\n        y=\"-10\"\r\n        transform={`scale(1, -1)`}\r\n        style={STYLE_TEXT}\r\n        filter=\"url(#rounded-corners)\"\r\n      >\r\n        {distanceText}\r\n      </text>\r\n      <line x1=\"0\" y1=\"0\" x2={length} y2=\"0\" style={STYLE} />\r\n    </g>\r\n  );\r\n}\r\n\r\nRulerRight.propTypes = {\r\n  length: PropTypes.number.isRequired,\r\n  margin: PropTypes.number.isRequired,\r\n  half_thickness: PropTypes.number.isRequired,\r\n};\r\n","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Line,\r\n  Area,\r\n  Vertex,\r\n  Item,\r\n  Group,\r\n  Cursor\r\n} from './export';\r\n\r\nexport default function Layer({ layer, scene, catalog }) {\r\n\r\n  let { unit, groups } = scene;\r\n  let { lines, areas, vertices, holes, id: layerID, items, opacity } = layer;\r\n\r\n  \r\n  useEffect(() => {\r\n    // console.log('holes', holes)\r\n\r\n  }, [holes]);\r\n\r\n  return (\r\n    <g opacity={opacity}>\r\n      {\r\n        areas.valueSeq().map(area =>\r\n          <Area key={area.id} layer={layer} area={area} unit={unit} catalog={catalog} />)\r\n      }\r\n      {\r\n        lines.valueSeq().map(line =>\r\n          <Line key={line.id} layer={layer} line={line} scene={scene} catalog={catalog} />)\r\n      }\r\n      {\r\n        items.valueSeq().map(item =>\r\n          <Item key={item.id} layer={layer} item={item} scene={scene} catalog={catalog} />)\r\n      }\r\n      {\r\n        vertices\r\n          .valueSeq()\r\n          .filter(v => v.selected)\r\n          .map(vertex => <Vertex key={vertex.id} layer={layer} vertex={vertex} />)\r\n      }\r\n      {\r\n        groups\r\n          .valueSeq()\r\n          .filter(g => g.hasIn(['elements', layerID]) && g.get('selected'))\r\n          .map(group => <Group key={group.get('id')} layer={layer} group={group} scene={scene} catalog={catalog} />)\r\n      }\r\n      {\r\n        holes.valueSeq().map(hole => {\r\n          if (hole.type.split('-')[1] == \"cursor\") {\r\n            return <Cursor key={hole.id} layer={layer} hole={hole} scene={scene} catalog={catalog} />\r\n          }\r\n        })\r\n      }\r\n    </g>\r\n  );\r\n\r\n}\r\n\r\nLayer.propTypes = {\r\n  layer: PropTypes.object.isRequired,\r\n  scene: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport If from \"../../utils/react-if\";\r\nimport ItemDlg from \"./ItemDlg\";\r\nimport { Fragment } from \"react\";\r\n\r\nconst STYLE_LINE = {\r\n  fill: \"#0096fd\",\r\n  stroke: \"#0096fd\",\r\n};\r\n\r\nconst STYLE_CIRCLE = {\r\n  fill: \"#0096fd\",\r\n  stroke: \"#0096fd\",\r\n  cursor: \"ew-resize\",\r\n};\r\n\r\nconst STYLE_CIRCLE2 = {\r\n  fill: \"none\",\r\n  stroke: \"#0096fd\",\r\n  cursor: \"ew-resize\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#A0BEF7\",\r\n  strokeWidth: 1,\r\n  stroke: \"#A0BEF7\",\r\n};\r\n\r\nexport default function Item({ layer, item, scene, catalog }) {\r\n  let { x, y, rotation, zoom, horizontalFlip, verticalFlip } = item;\r\n\r\n  const [scale, setScale] = useState(1);\r\n\r\n  let renderedItem = catalog.getElement(item.type).render2D(item, layer, scene);\r\n\r\n  const WIDTH = renderedItem.props.width;\r\n  const DEPTH = renderedItem.props.height;\r\n  const half_thickness = 1;\r\n  const margin = 5;\r\n  const CIRCLE_RADIUS = 4;\r\n  const STROKE_WIDTH = 3;\r\n\r\n  let poly11 = `${-WIDTH / 2 - margin},${half_thickness - DEPTH / 2 - margin}`,\r\n    poly12 = `${WIDTH / 2 + margin},${half_thickness - DEPTH / 2 - margin}`,\r\n    poly13 = `${WIDTH / 2 + margin},${-half_thickness - DEPTH / 2 - margin}`,\r\n    poly14 = `${-WIDTH / 2 - margin},${-half_thickness - DEPTH / 2 - margin}`;\r\n  let poly21 = `${-WIDTH / 2 - half_thickness - margin},${DEPTH / 2 + margin}`,\r\n    poly22 = `${-WIDTH / 2 + half_thickness - margin},${DEPTH / 2 + margin}`,\r\n    poly23 = `${-WIDTH / 2 + half_thickness - margin},${-DEPTH / 2 - margin}`,\r\n    poly24 = `${-WIDTH / 2 - half_thickness - margin},${-DEPTH / 2 - margin}`;\r\n  let poly31 = `${WIDTH / 2 - half_thickness + margin},${DEPTH / 2 + margin}`,\r\n    poly32 = `${WIDTH / 2 + half_thickness + margin},${DEPTH / 2 + margin}`,\r\n    poly33 = `${WIDTH / 2 + half_thickness + margin},${-DEPTH / 2 - margin}`,\r\n    poly34 = `${WIDTH / 2 - half_thickness + margin},${-DEPTH / 2 - margin}`;\r\n  let poly41 = `${-WIDTH / 2 - margin},${DEPTH / 2 + half_thickness + margin}`,\r\n    poly42 = `${WIDTH / 2 + margin},${DEPTH / 2 + half_thickness + margin}`,\r\n    poly43 = `${WIDTH / 2 + margin},${DEPTH / 2 - half_thickness + margin}`,\r\n    poly44 = `${-WIDTH / 2 - margin},${DEPTH / 2 - half_thickness + margin}`;\r\n\r\n  useEffect(() => {\r\n    if (WIDTH != undefined && zoom != 0 && zoom != 'NaN') {\r\n      const currentWidth = Math.abs(zoom) - margin;\r\n\r\n      console.log('item', {zoom, WIDTH})\r\n\r\n      const nextScale = (currentWidth / WIDTH) * 2;\r\n\r\n      if(nextScale != NaN) {\r\n        setScale(nextScale);\r\n      }\r\n    }\r\n  }, [item, catalog]);\r\n\r\n  console.log('scale', scale)\r\n  return (\r\n    <Fragment>\r\n      <g\r\n        data-element-root\r\n        data-prototype={item.prototype}\r\n        data-id={item.id}\r\n        data-selected={item.selected}\r\n        data-layer={layer.id}\r\n        style={item.selected ? { cursor: \"move\" } : {}}\r\n        transform={`translate(${x},${y}) rotate(${rotation}) scale(${scale * (verticalFlip? -1: 1)}, ${scale * (horizontalFlip? -1: 1)})`}\r\n      >\r\n        {renderedItem}\r\n\r\n        <If condition={item.selected}>\r\n          <g\r\n            data-element-root\r\n            data-prototype={item.prototype}\r\n            data-id={item.id}\r\n            data-selected={item.selected}\r\n            data-layer={layer.id}\r\n            data-part=\"rotation-anchor\"\r\n          >\r\n            <circle cx=\"0\" cy=\"150\" r=\"10\" style={STYLE_CIRCLE} />\r\n            <circle cx=\"0\" cy=\"0\" r=\"150\" style={STYLE_CIRCLE2} />\r\n          </g>\r\n        </If>\r\n        <If condition={item.selected}>\r\n          <g\r\n            data-element-root\r\n            data-prototype={item.prototype}\r\n            data-id={item.id}\r\n            data-selected={item.selected}\r\n            data-layer={layer.id}\r\n            data-part=\"outline-item\"\r\n            data-width={WIDTH}\r\n            data-height={DEPTH}\r\n            data-scale={scale}\r\n          >\r\n            <polygon\r\n              points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`}\r\n              style={STYLE_RECT_SELECTED}\r\n            />\r\n            <polygon\r\n              points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`}\r\n              style={STYLE_RECT_SELECTED}\r\n            />\r\n            <polygon\r\n              points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`}\r\n              style={STYLE_RECT_SELECTED}\r\n            />\r\n            <polygon\r\n              points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`}\r\n              style={STYLE_RECT_SELECTED}\r\n            />\r\n          </g>\r\n        </If>\r\n        <If condition={item.selected}>\r\n          <g\r\n            data-element-root\r\n            data-prototype={item.prototype}\r\n            data-id={item.id}\r\n            data-selected={item.selected}\r\n            data-layer={layer.id}\r\n            data-part=\"resize-points-rb\"\r\n          >\r\n            <circle\r\n              cx={WIDTH / 2 + margin}\r\n              cy={-DEPTH / 2 - margin}\r\n              r={CIRCLE_RADIUS}\r\n              stroke=\"#A0BEF7\"\r\n              strokeWidth={2}\r\n              fill=\"#A0BEF7\"\r\n              style={{ cursor: \"nwse-resize\" }}\r\n            />\r\n          </g>\r\n        </If>\r\n        <If condition={item.selected}>\r\n          <g\r\n            data-element-root\r\n            data-prototype={item.prototype}\r\n            data-id={item.id}\r\n            data-selected={item.selected}\r\n            data-layer={layer.id}\r\n            data-part=\"resize-points-rt\"\r\n          >\r\n            <circle\r\n              cx={WIDTH / 2 + margin}\r\n              cy={DEPTH / 2 + margin}\r\n              r={CIRCLE_RADIUS}\r\n              stroke=\"#A0BEF7\"\r\n              strokeWidth={2}\r\n              fill=\"#A0BEF7\"\r\n              style={{ cursor: \"nesw-resize\" }}\r\n            />\r\n          </g>\r\n        </If>\r\n        <If condition={item.selected}>\r\n          <g\r\n            data-element-root\r\n            data-prototype={item.prototype}\r\n            data-id={item.id}\r\n            data-selected={item.selected}\r\n            data-layer={layer.id}\r\n            data-part=\"resize-points-lt\"\r\n          >\r\n            <circle\r\n              cx={-WIDTH / 2 - margin}\r\n              cy={DEPTH / 2 + margin}\r\n              r={CIRCLE_RADIUS}\r\n              stroke=\"#A0BEF7\"\r\n              strokeWidth={2}\r\n              fill=\"#A0BEF7\"\r\n              style={{ cursor: \"nwse-resize\" }}\r\n            />\r\n          </g>\r\n        </If>\r\n        <If condition={item.selected}>\r\n          <g\r\n            data-element-root\r\n            data-prototype={item.prototype}\r\n            data-id={item.id}\r\n            data-selected={item.selected}\r\n            data-layer={layer.id}\r\n            data-part=\"resize-points-lb\"\r\n          >\r\n            <circle\r\n              cx={-WIDTH / 2 - margin}\r\n              cy={-DEPTH / 2 - margin}\r\n              r={CIRCLE_RADIUS}\r\n              stroke=\"#A0BEF7\"\r\n              strokeWidth={2}\r\n              fill=\"#A0BEF7\"\r\n              style={{ cursor: \"nesw-resize\" }}\r\n            />\r\n          </g>\r\n        </If>\r\n      </g>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nItem.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  layer: PropTypes.object.isRequired,\r\n  scene: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired,\r\n};\r\n","import React, {useState, useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport If from '../../utils/react-if';\r\n\r\nexport default function ItemDlg({item, layer, width, DEPTH, margin, half_thickness, scale, setScale}) {\r\n  let {x, y, rotation, zoom} = item;\r\n  useEffect(() => {\r\n    console.log('--')\r\n  }, []);\r\n\r\n  return (\r\n    <svg viewBox=\"0 0 240 80\">\r\n        <text>Width</text>\r\n    </svg>\r\n  )\r\n}\r\n\r\nItemDlg.propTypes = {\r\n};\r\n\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport polylabel from \"polylabel\";\r\nimport areapolygon from \"area-polygon\";\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 500,\r\n  fontSize: \"13px\",\r\n  lineHeight: \"17px\",\r\n  color: \"#9F9F9F\",\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default function Area({ layer, area, catalog }) {\r\n  let rendered = catalog.getElement(area.type).render2D(area, layer);\r\n\r\n  let renderedAreaSize = null;\r\n\r\n  // if (area.selected) {\r\n  let polygon = area.vertices.toArray().map((vertexID) => {\r\n    let { x, y } = layer.vertices.get(vertexID);\r\n    return [x, y];\r\n  });\r\n\r\n  let polygonWithHoles = polygon;\r\n\r\n  area.holes.forEach((holeID) => {\r\n    let polygonHole = layer.areas\r\n      .get(holeID)\r\n      .vertices.toArray()\r\n      .map((vertexID) => {\r\n        let { x, y } = layer.vertices.get(vertexID);\r\n        return [x, y];\r\n      });\r\n\r\n    polygonWithHoles = polygonWithHoles.concat(polygonHole.reverse());\r\n  });\r\n\r\n  let center = polylabel([polygonWithHoles], 1.0);\r\n  let areaSize = areapolygon(polygon, false);\r\n\r\n  //subtract holes area\r\n  area.holes.forEach((areaID) => {\r\n    let hole = layer.areas.get(areaID);\r\n    let holePolygon = hole.vertices.toArray().map((vertexID) => {\r\n      let { x, y } = layer.vertices.get(vertexID);\r\n      return [x, y];\r\n    });\r\n    areaSize -= areapolygon(holePolygon, false);\r\n  });\r\n\r\n  renderedAreaSize = (\r\n    <text\r\n      x=\"0\"\r\n      y=\"0\"\r\n      transform={`translate(${center[0]} ${center[1]}) scale(1, -1)`}\r\n      style={STYLE_TEXT}\r\n      fill=\"#9F9F9F\"\r\n    >\r\n      {(areaSize / 10000).toFixed(2)} m{String.fromCharCode(0xb2)}\r\n    </text>\r\n  );\r\n  // }\r\n\r\n  return (\r\n    <g\r\n      data-element-root\r\n      data-prototype={area.prototype}\r\n      data-id={area.id}\r\n      data-selected={area.selected}\r\n      data-layer={layer.id}\r\n    >\r\n      {rendered}\r\n      {renderedAreaSize}\r\n    </g>\r\n  );\r\n}\r\n\r\nArea.propTypes = {\r\n  area: PropTypes.object.isRequired,\r\n  layer: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport GridHorizontalStreak from \"./grid-horizontal-streak\";\r\nimport GridVerticalStreak from \"./grid-vertical-streak\";\r\n\r\nexport default function Grids({ scene }) {\r\n  let { width, height, grids } = scene;\r\n\r\n  let renderedGrids = grids\r\n    .entrySeq()\r\n    .map(([gridID, grid]) => {\r\n      switch (grid.type) {\r\n        case \"horizontal-streak\":\r\n          return (\r\n            <GridHorizontalStreak\r\n              key={gridID}\r\n              width={width}\r\n              height={height}\r\n              grid={grid}\r\n            />\r\n          );\r\n\r\n        case \"vertical-streak\":\r\n          return (\r\n            <GridVerticalStreak\r\n              key={gridID}\r\n              width={width}\r\n              height={height}\r\n              grid={grid}\r\n            />\r\n          );\r\n\r\n        default:\r\n          console.warn(`grid ${grid.type} not allowed`);\r\n      }\r\n    })\r\n    .toList();\r\n\r\n  return <g>{renderedGrids}</g>;\r\n}\r\n\r\nGrids.propTypes = {\r\n  scene: PropTypes.object.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {List} from 'immutable';\r\n\r\nexport default function GridHorizontalStreak({width, height, grid}) {\r\n  let step = grid.properties.get('step');\r\n  let colors;\r\n\r\n  if (grid.properties.has('color')) {\r\n    colors = new List([grid.properties.get('color')]);\r\n  } else {\r\n    colors = grid.properties.get('colors');\r\n  }\r\n\r\n  let rendered = [];\r\n  let i = 0;\r\n  for (let y = 0; y <= height; y += step) {\r\n    let color = colors.get(i % colors.size);\r\n    i++;\r\n    rendered.push(<line key={y} x1=\"0\" y1={y} x2={width} y2={y} strokeWidth=\"1\" stroke={color}/>);\r\n  }\r\n\r\n  return (<g>{rendered}</g>);\r\n}\r\n\r\nGridHorizontalStreak.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  grid: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {List} from 'immutable';\r\n\r\nexport default function GridVerticalStreak({width, height, grid}) {\r\n  let step = grid.properties.get('step');\r\n  let colors;\r\n\r\n  if (grid.properties.has('color')) {\r\n    colors = new List([grid.properties.get('color')]);\r\n  } else {\r\n    colors = grid.properties.get('colors');\r\n  }\r\n\r\n  let rendered = [];\r\n  let i = 0;\r\n  for (let x = 0; x <= width; x += step) {\r\n    let color = colors.get(i % colors.size);\r\n    i++;\r\n    rendered.push(<line key={x} x1={x} y1=\"0\" x2={x} y2={height} strokeWidth=\"1\" stroke={color}/>);\r\n  }\r\n\r\n  return (<g>{rendered}</g>);\r\n}\r\n\r\nGridVerticalStreak.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  grid: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport If from '../../utils/react-if';\r\nimport * as sharedStyles from '../../shared-style';\r\n\r\nconst cx = 0;\r\nconst cy = 0;\r\nconst radius = 5;\r\n\r\nconst STYLE_CIRCLE = {\r\n  fill: sharedStyles.MATERIAL_COLORS[500].orange,\r\n  stroke: sharedStyles.MATERIAL_COLORS[500].orange,\r\n  cursor: 'default'\r\n};\r\n\r\nexport default function Group({ layer, group, scene, catalog }, {translator}) {\r\n  return (\r\n    <g\r\n      data-element-root\r\n      data-prototype={group.prototype}\r\n      data-id={group.id}\r\n      data-selected={group.selected}\r\n      data-layer={layer.id}\r\n      style={group.selected ? { cursor: 'move' } : {}}\r\n      transform={`translate(${group.x},${group.y}) rotate(${group.rotation})`}\r\n    >\r\n      <If condition={group.selected}>\r\n        <g\r\n          data-element-root\r\n          data-prototype={group.prototype}\r\n          data-id={group.id}\r\n          data-selected={group.selected}\r\n          data-layer={layer.id}\r\n          data-part=\"rotation-anchor\"\r\n        >\r\n          <circle cx={cx} cy={cy} r={radius} style={STYLE_CIRCLE}>\r\n            <title>{translator.t('Group\\'s Barycenter')}</title>\r\n          </circle>\r\n        </g>\r\n      </If>\r\n    </g>\r\n  )\r\n}\r\n\r\nGroup.propTypes = {\r\n  group: PropTypes.object.isRequired,\r\n  layer: PropTypes.object.isRequired,\r\n  scene: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired\r\n};\r\n\r\nGroup.contextTypes = {\r\n  translator: PropTypes.object.isRequired\r\n};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nexport default class RulerX extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n  }\r\n\r\n  render() {\r\n\r\n    let elementW = this.props.unitPixelSize * this.props.zoom;\r\n\r\n    let elementStyle = {\r\n      display: 'inline-block',\r\n      width: elementW,\r\n      position: 'relative',\r\n      borderLeft: '1px solid ' + this.props.fontColor,\r\n      paddingLeft: '0.2em',\r\n      fontSize: '10px',\r\n      height: '100%'\r\n    };\r\n\r\n    let insideElementsStyle = {\r\n      width: '20%',\r\n      display: 'inline-block',\r\n      margin: 0,\r\n      padding: 0\r\n    };\r\n\r\n    let rulerStyle = {\r\n      backgroundColor: this.props.backgroundColor,\r\n      position: 'relative',\r\n      width: this.props.width,\r\n      height: '100%',\r\n      color: this.props.fontColor\r\n    }\r\n\r\n    let markerStyle = {\r\n      position: 'absolute',\r\n      left: this.props.zeroLeftPosition + (this.props.mouseX * this.props.zoom) - 6.5,\r\n      top: 8,\r\n      width: 0,\r\n      height: 0,\r\n      borderLeft: '5px solid transparent',\r\n      borderRight: '5px solid transparent',\r\n      borderTop: '8px solid ' + this.props.markerColor,\r\n      zIndex: 9001\r\n    };\r\n\r\n    let rulerContainer = {\r\n      position: 'absolute',\r\n      height: '10px',\r\n      top: '4px',\r\n      display: 'grid',\r\n      gridRowGap: '0',\r\n      gridColumnGap: '0',\r\n      gridTemplateRows: '100%',\r\n      grdAutoColumns: `${elementW}px`\r\n    };\r\n\r\n    let positiveRulerContainer = {\r\n      ...rulerContainer,\r\n      width: (this.props.positiveUnitsNumber * elementW),\r\n      left: this.props.zeroLeftPosition\r\n    };\r\n\r\n    let negativeRulerContainer = {\r\n      ...rulerContainer,\r\n      width: (this.props.negativeUnitsNumber * elementW),\r\n      left: this.props.zeroLeftPosition - (this.props.negativeUnitsNumber * elementW)\r\n    };\r\n\r\n    let positiveDomElements = [];\r\n\r\n    if (elementW <= 200) {\r\n      for (let x = 0; x < this.props.positiveUnitsNumber; x++) {\r\n        positiveDomElements.push(\r\n          <div key={x} style={{ ...elementStyle, gridColumn: (x + 1), gridRow: 1 }}>\r\n            {elementW > 30 ? (x * 100) : ''}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    else if (elementW > 200) {\r\n      for (let x = 0; x < this.props.positiveUnitsNumber; x++) {\r\n        let val = x * 100;\r\n        positiveDomElements.push(\r\n          <div key={x} style={{ ...elementStyle, gridColumn: (x + 1), gridRow: 1 }}>\r\n            <div style={insideElementsStyle}>{val}</div>\r\n            <div style={insideElementsStyle}>{val + (1 * 20)}</div>\r\n            <div style={insideElementsStyle}>{val + (2 * 20)}</div>\r\n            <div style={insideElementsStyle}>{val + (3 * 20)}</div>\r\n            <div style={insideElementsStyle}>{val + (4 * 20)}</div>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return <div style={rulerStyle}>\r\n      <div id=\"horizontalMarker\" style={markerStyle}></div>\r\n      <div id=\"negativeRuler\" style={negativeRulerContainer}></div>\r\n      <div id=\"positiveRuler\" style={positiveRulerContainer}>{positiveDomElements}</div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nRulerX.propTypes = {\r\n  unitPixelSize: PropTypes.number.isRequired,\r\n  positiveUnitsNumber: PropTypes.number,\r\n  negativeUnitsNumber: PropTypes.number,\r\n  zoom: PropTypes.number.isRequired,\r\n  mouseX: PropTypes.number.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  zeroLeftPosition: PropTypes.number.isRequired,\r\n  backgroundColor: PropTypes.string,\r\n  fontColor: PropTypes.string,\r\n  markerColor: PropTypes.string\r\n};\r\n\r\nRulerX.defaultProps = {\r\n  positiveUnitsNumber: 50,\r\n  negativeUnitsNumber: 50,\r\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\r\n  fontColor: SharedStyle.COLORS.white,\r\n  markerColor: SharedStyle.SECONDARY_COLOR.main\r\n}\r\n\r\nRulerX.contextTypes = {\r\n  translator: PropTypes.object.isRequired\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nexport default class RulerY extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n  }\r\n\r\n  render() {\r\n\r\n    let elementH = this.props.unitPixelSize * this.props.zoom;\r\n\r\n    let elementStyle = {\r\n      width: '8px',\r\n      borderBottom: '1px solid ' + this.props.fontColor,\r\n      paddingBottom: '0.2em',\r\n      fontSize: '10px',\r\n      height: elementH,\r\n      textOrientation: 'upright',\r\n      writingMode: 'vertical-lr',\r\n      letterSpacing: '-2px',\r\n      textAlign: 'right'\r\n    };\r\n\r\n    let insideElementsStyle = {\r\n      height: '20%',\r\n      width: '100%',\r\n      textOrientation: 'upright',\r\n      writingMode: 'vertical-lr',\r\n      display: 'inline-block',\r\n      letterSpacing: '-2px',\r\n      textAlign: 'right'\r\n    };\r\n\r\n    let rulerStyle = {\r\n      backgroundColor: this.props.backgroundColor,\r\n      height: this.props.height,\r\n      width: '100%',\r\n      color: this.props.fontColor\r\n    }\r\n\r\n    let markerStyle = {\r\n      position: 'absolute',\r\n      top: this.props.zeroTopPosition - (this.props.mouseY * this.props.zoom) - 6.5,\r\n      left: 8,\r\n      width: 0,\r\n      height: 0,\r\n      borderTop: '5px solid transparent',\r\n      borderBottom: '5px solid transparent',\r\n      borderLeft: '8px solid ' + this.props.markerColor,\r\n      zIndex: 9001\r\n    };\r\n\r\n    let rulerContainer = {\r\n      position: 'absolute',\r\n      width: '100%',\r\n      display: 'grid',\r\n      gridRowGap: '0',\r\n      gridColumnGap: '0',\r\n      gridTemplateColumns: '100%',\r\n      grdAutoRows: `${elementH}px`,\r\n      paddingLeft: '5px'\r\n    };\r\n\r\n    let positiveRulerContainer = {\r\n      ...rulerContainer,\r\n      top: this.props.zeroTopPosition - (this.props.positiveUnitsNumber * elementH),\r\n      height: (this.props.positiveUnitsNumber * elementH)\r\n    };\r\n\r\n    let negativeRulerContainer = {\r\n      ...rulerContainer,\r\n      top: this.props.zeroTopPosition + (this.props.negativeUnitsNumber * elementH),\r\n      height: (this.props.negativeUnitsNumber * elementH)\r\n    };\r\n\r\n    let positiveDomElements = [];\r\n\r\n    if (elementH <= 200) {\r\n      for (let x = 1; x <= this.props.positiveUnitsNumber; x++) {\r\n        positiveDomElements.push(\r\n          <div key={x} style={{ ...elementStyle, gridColumn: 1, gridRow: x }}>\r\n            {elementH > 30 ? ((this.props.positiveUnitsNumber - x) * 100) : ''}\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n    else if (elementH > 200) {\r\n      for (let x = 1; x <= this.props.positiveUnitsNumber; x++) {\r\n        let val = (this.props.positiveUnitsNumber - x) * 100;\r\n        positiveDomElements.push(\r\n          <div key={x} style={{ ...elementStyle, gridColumn: 1, gridRow: x }}>\r\n            <div style={insideElementsStyle}>{val + (4 * 20)}</div>\r\n            <div style={insideElementsStyle}>{val + (3 * 20)}</div>\r\n            <div style={insideElementsStyle}>{val + (2 * 20)}</div>\r\n            <div style={insideElementsStyle}>{val + (1 * 20)}</div>\r\n            <div style={insideElementsStyle}>{val}</div>\r\n          </div>\r\n        );\r\n      }\r\n    }\r\n\r\n    return <div style={rulerStyle}>\r\n      <div id=\"verticalMarker\" style={markerStyle}></div>\r\n      <div id=\"negativeRuler\" style={negativeRulerContainer}></div>\r\n      <div id=\"positiveRuler\" style={positiveRulerContainer}>{positiveDomElements}</div>\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nRulerY.propTypes = {\r\n  unitPixelSize: PropTypes.number.isRequired,\r\n  zoom: PropTypes.number.isRequired,\r\n  mouseY: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  zeroTopPosition: PropTypes.number.isRequired,\r\n  backgroundColor: PropTypes.string,\r\n  fontColor: PropTypes.string,\r\n  markerColor: PropTypes.string\r\n};\r\n\r\nRulerY.defaultProps = {\r\n  positiveUnitsNumber: 50,\r\n  negativeUnitsNumber: 50,\r\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\r\n  fontColor: SharedStyle.COLORS.white,\r\n  markerColor: SharedStyle.SECONDARY_COLOR.main\r\n}\r\n\r\nRulerY.contextTypes = {\r\n  translator: PropTypes.object.isRequired\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { GeometryUtils } from \"../../utils/export\";\r\nimport Ruler from \"./ruler\";\r\n\r\nexport default function Cursor({ layer, hole, scene, catalog }) {\r\n  let renderedCursor = (hole) => {\r\n      let renderedCursor = catalog\r\n        .getElement(hole.type)\r\n        .render2D(hole, layer, scene);\r\n\r\n      return (\r\n        <g\r\n          transform={`translate(${hole.x}, ${hole.y})`}\r\n          data-element-root\r\n          data-prototype={hole.prototype}\r\n          data-id={hole.id}\r\n          data-selected={hole.selected}\r\n          data-layer={layer.id}\r\n        >\r\n          <g\r\n            key={hole.id}\r\n            transform={`translate(${0}, 0)`}\r\n            data-element-root\r\n            data-prototype={hole.prototype}\r\n            data-id={hole.id}\r\n            data-selected={hole.selected}\r\n            data-layer={layer.id}\r\n          >\r\n            {renderedCursor}\r\n          </g>\r\n        </g>\r\n      );\r\n  };\r\n\r\n  return renderedCursor(hole);\r\n}\r\n\r\nCursor.propTypes = {\r\n  hole: PropTypes.object.isRequired,\r\n  layer: PropTypes.object.isRequired,\r\n  scene: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired,\r\n};\r\n","'use strict';\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Three from 'three';\r\nimport { parseData, updateScene } from './scene-creator';\r\nimport { disposeScene } from './three-memory-cleaner';\r\nimport OrbitControls from './libs/orbit-controls';\r\nimport diff from 'immutablediff';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nexport default class Scene3DViewer extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.lastMousePosition = {};\r\n    this.width = props.width;\r\n    this.height = props.height;\r\n    this.renderingID = 0;\r\n\r\n    this.renderer = window.__threeRenderer || new Three.WebGLRenderer({ preserveDrawingBuffer: true });\r\n    window.__threeRenderer = this.renderer;\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    let actions = {\r\n      areaActions: this.context.areaActions,\r\n      holesActions: this.context.holesActions,\r\n      itemsActions: this.context.itemsActions,\r\n      linesActions: this.context.linesActions,\r\n      projectActions: this.context.projectActions\r\n    };\r\n\r\n    let { state } = this.props;\r\n    let data = state.scene;\r\n    let canvasWrapper = ReactDOM.findDOMNode(this.refs.canvasWrapper);\r\n\r\n    let scene3D = new Three.Scene();\r\n\r\n    //RENDERER\r\n    this.renderer.setClearColor(new Three.Color(SharedStyle.COLORS.white));\r\n    this.renderer.setSize(this.width, this.height);\r\n\r\n    // LOAD DATA\r\n    let planData = parseData(data, actions, this.context.catalog);\r\n\r\n    scene3D.add(planData.plan);\r\n    scene3D.add(planData.grid);\r\n\r\n    let aspectRatio = this.width / this.height;\r\n    let camera = new Three.PerspectiveCamera(45, aspectRatio, 1, 300000);\r\n\r\n    scene3D.add(camera);\r\n\r\n    // Set position for the camera\r\n    let cameraPositionX = -(planData.boundingBox.max.x - planData.boundingBox.min.x) / 2;\r\n    let cameraPositionY = (planData.boundingBox.max.y - planData.boundingBox.min.y) / 2 * 10;\r\n    let cameraPositionZ = (planData.boundingBox.max.z - planData.boundingBox.min.z) / 2;\r\n\r\n    camera.position.set(cameraPositionX, cameraPositionY, cameraPositionZ);\r\n    camera.up = new Three.Vector3(0, 1, 0);\r\n\r\n    // HELPER AXIS\r\n    // let axisHelper = new Three.AxisHelper(100);\r\n    // scene3D.add(axisHelper);\r\n\r\n    // LIGHT\r\n    let light = new Three.AmbientLight(0xafafaf); // soft white light\r\n    scene3D.add(light);\r\n\r\n    // Add another light\r\n\r\n    let spotLight1 = new Three.SpotLight(SharedStyle.COLORS.white, 0.30);\r\n    spotLight1.position.set(cameraPositionX, cameraPositionY, cameraPositionZ);\r\n    scene3D.add(spotLight1);\r\n\r\n    // OBJECT PICKING\r\n    let toIntersect = [planData.plan];\r\n    let mouse = new Three.Vector2();\r\n    let raycaster = new Three.Raycaster();\r\n\r\n    this.mouseDownEvent = (event) => {\r\n      this.lastMousePosition.x = event.offsetX / this.width * 2 - 1;\r\n      this.lastMousePosition.y = -event.offsetY / this.height * 2 + 1;\r\n    };\r\n\r\n    this.mouseUpEvent = (event) => {\r\n      event.preventDefault();\r\n\r\n      mouse.x = (event.offsetX / this.width) * 2 - 1;\r\n      mouse.y = -(event.offsetY / this.height) * 2 + 1;\r\n\r\n      if (Math.abs(mouse.x - this.lastMousePosition.x) <= 0.02 && Math.abs(mouse.y - this.lastMousePosition.y) <= 0.02) {\r\n\r\n        raycaster.setFromCamera(mouse, camera);\r\n        let intersects = raycaster.intersectObjects(toIntersect, true);\r\n\r\n        if (intersects.length > 0 && !(isNaN(intersects[0].distance))) {\r\n          intersects[0].object.interact && intersects[0].object.interact();\r\n        } else {\r\n          this.context.projectActions.unselectAll();\r\n        }\r\n      }\r\n    };\r\n\r\n    this.renderer.domElement.addEventListener('mousedown', this.mouseDownEvent);\r\n    this.renderer.domElement.addEventListener('mouseup', this.mouseUpEvent);\r\n    this.renderer.domElement.style.display = 'block';\r\n\r\n    // add the output of the renderer to the html element\r\n    canvasWrapper.appendChild(this.renderer.domElement);\r\n\r\n    // create orbit controls\r\n    let orbitController = new OrbitControls(camera, this.renderer.domElement);\r\n    let spotLightTarget = new Three.Object3D();\r\n    spotLightTarget.name = 'spotLightTarget';\r\n    spotLightTarget.position.set(orbitController.target.x, orbitController.target.y, orbitController.target.z);\r\n    scene3D.add(spotLightTarget);\r\n    spotLight1.target = spotLightTarget;\r\n\r\n    let render = () => {\r\n      orbitController.update();\r\n      spotLight1.position.set(camera.position.x, camera.position.y, camera.position.z);\r\n      spotLightTarget.position.set(orbitController.target.x, orbitController.target.y, orbitController.target.z);\r\n      camera.updateMatrix();\r\n      camera.updateMatrixWorld();\r\n\r\n      for (let elemID in planData.sceneGraph.LODs) {\r\n        planData.sceneGraph.LODs[elemID].update(camera);\r\n      }\r\n\r\n      this.renderer.render(scene3D, camera);\r\n      this.renderingID = requestAnimationFrame(render);\r\n    };\r\n\r\n    render();\r\n\r\n    this.orbitControls = orbitController;\r\n    this.camera = camera;\r\n    this.scene3D = scene3D;\r\n    this.planData = planData;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    cancelAnimationFrame(this.renderingID);\r\n\r\n    this.orbitControls.dispose();\r\n\r\n    this.renderer.domElement.removeEventListener('mousedown', this.mouseDownEvent);\r\n    this.renderer.domElement.removeEventListener('mouseup', this.mouseUpEvent);\r\n\r\n    disposeScene(this.scene3D);\r\n    this.scene3D.remove(this.planData.plan);\r\n    this.scene3D.remove(this.planData.grid);\r\n\r\n    this.scene3D = null;\r\n    this.planData = null;\r\n    this.camera = null;\r\n    this.orbitControls = null;\r\n    this.renderer.renderLists.dispose();\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    let { width, height } = nextProps;\r\n\r\n    let actions = {\r\n      areaActions: this.context.areaActions,\r\n      holesActions: this.context.holesActions,\r\n      itemsActions: this.context.itemsActions,\r\n      linesActions: this.context.linesActions,\r\n      projectActions: this.context.projectActions\r\n    };\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.camera.aspect = width / height;\r\n\r\n    this.camera.updateProjectionMatrix();\r\n\r\n    if (nextProps.state.scene !== this.props.state.scene) {\r\n      let changedValues = diff(this.props.state.scene, nextProps.state.scene);\r\n      updateScene(this.planData, nextProps.state.scene, this.props.state.scene, changedValues.toJS(), actions, this.context.catalog);\r\n    }\r\n\r\n    this.renderer.setSize(width, height);\r\n  }\r\n\r\n  render() {\r\n    return React.createElement('div', { ref: 'canvasWrapper' });\r\n  }\r\n}\r\n\r\nScene3DViewer.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired\r\n};\r\n\r\nScene3DViewer.contextTypes = {\r\n  areaActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object\r\n};\r\n","import * as Three from 'three';\r\nimport { HELVETIKER } from './libs/helvetiker_regular.typeface.js';\r\nimport gridHorizontalStreak from './grids/grid-horizontal-streak';\r\nimport gridVerticalStreak from './grids/grid-vertical-streak';\r\n\r\nexport default function createGrid(scene) {\r\n\r\n  let gridMesh = new Three.Object3D();\r\n  gridMesh.name = 'grid';\r\n  let fontLoader = new Three.FontLoader();\r\n  let font = fontLoader.parse(HELVETIKER); // For measures\r\n  let { grids, width, height } = scene;\r\n\r\n  grids.forEach(grid => {\r\n    switch (grid.type) {\r\n      case 'horizontal-streak':\r\n        gridMesh.add(gridHorizontalStreak(width, height, grid, font));\r\n        break;\r\n      case 'vertical-streak':\r\n        gridMesh.add(gridVerticalStreak(width, height, grid, font));\r\n        break;\r\n    }\r\n  });\r\n\r\n  gridMesh.position.y = -1;\r\n  return gridMesh;\r\n}\r\n","export const HELVETIKER = {\"glyphs\":{\"\":{\"x_min\":0,\"x_max\":712,\"ha\":815,\"o\":\"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 \"},\"S\":{\"x_min\":0,\"x_max\":788,\"ha\":890,\"o\":\"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 \"},\"\":{\"x_min\":343,\"x_max\":449,\"ha\":792,\"o\":\"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 \"},\"/\":{\"x_min\":183.25,\"x_max\":608.328125,\"ha\":792,\"o\":\"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 \"},\"\":{\"x_min\":-0.4375,\"x_max\":777.453125,\"ha\":839,\"o\":\"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 \"},\"y\":{\"x_min\":0,\"x_max\":684.78125,\"ha\":771,\"o\":\"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 \"},\"\":{\"x_min\":0,\"x_max\":803,\"ha\":917,\"o\":\"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 \"},\"\":{\"x_min\":-111,\"x_max\":339,\"ha\":361,\"o\":\"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 \"},\"g\":{\"x_min\":0,\"x_max\":686,\"ha\":838,\"o\":\"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 \"},\"\":{\"x_min\":0,\"x_max\":442,\"ha\":539,\"o\":\"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 \"},\"\":{\"x_min\":0,\"x_max\":705.5625,\"ha\":803,\"o\":\"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 \"},\"\":{\"x_min\":0,\"x_max\":819.5625,\"ha\":893,\"o\":\"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 \"},\"\":{\"x_min\":-46.265625,\"x_max\":392,\"ha\":513,\"o\":\"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 \"},\"e\":{\"x_min\":0,\"x_max\":714,\"ha\":813,\"o\":\"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 \"},\"\":{\"x_min\":0,\"x_max\":712,\"ha\":815,\"o\":\"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 \"},\"J\":{\"x_min\":0,\"x_max\":588,\"ha\":699,\"o\":\"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 \"},\"\":{\"x_min\":-1,\"x_max\":503,\"ha\":601,\"o\":\"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 \"},\"\":{\"x_min\":-3,\"x_max\":1008,\"ha\":1106,\"o\":\"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 \"},\"\":{\"x_min\":0,\"x_max\":922,\"ha\":1030,\"o\":\"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 \"},\"^\":{\"x_min\":193.0625,\"x_max\":598.609375,\"ha\":792,\"o\":\"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 \"},\"\":{\"x_min\":0,\"x_max\":507.203125,\"ha\":604,\"o\":\"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 \"},\"D\":{\"x_min\":0,\"x_max\":828,\"ha\":935,\"o\":\"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 \"},\"\":{\"x_min\":0,\"x_max\":142,\"ha\":239,\"o\":\"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 \"},\"\":{\"x_min\":0,\"x_max\":47,\"ha\":125,\"o\":\"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 \"},\"w\":{\"x_min\":0,\"x_max\":1009.71875,\"ha\":1100,\"o\":\"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 \"},\"$\":{\"x_min\":0,\"x_max\":700,\"ha\":793,\"o\":\"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 \"},\"\\\\\":{\"x_min\":-0.015625,\"x_max\":425.0625,\"ha\":522,\"o\":\"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 \"},\"\":{\"x_min\":0,\"x_max\":697.21875,\"ha\":747,\"o\":\"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 \"},\"\":{\"x_min\":42,\"x_max\":181,\"ha\":297,\"o\":\"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 \"},\"\":{\"x_min\":0,\"x_max\":1144.5,\"ha\":1214,\"o\":\"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 \"},\"\":{\"x_min\":0,\"x_max\":139,\"ha\":236,\"o\":\"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 \"},\"\":{\"x_min\":0,\"x_max\":801,\"ha\":915,\"o\":\"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 \"},\"-\":{\"x_min\":8.71875,\"x_max\":350.390625,\"ha\":478,\"o\":\"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 \"},\"Q\":{\"x_min\":0,\"x_max\":968,\"ha\":1072,\"o\":\"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 \"},\"\":{\"x_min\":1,\"x_max\":676.28125,\"ha\":740,\"o\":\"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 \"},\"M\":{\"x_min\":0,\"x_max\":954,\"ha\":1067,\"o\":\"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 \"},\"\":{\"x_min\":0,\"x_max\":1006,\"ha\":1094,\"o\":\"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 \"},\"C\":{\"x_min\":0,\"x_max\":886,\"ha\":944,\"o\":\"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 \"},\"!\":{\"x_min\":0,\"x_max\":138,\"ha\":236,\"o\":\"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 \"},\"{\":{\"x_min\":0,\"x_max\":480.5625,\"ha\":578,\"o\":\"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 \"},\"X\":{\"x_min\":-0.015625,\"x_max\":854.15625,\"ha\":940,\"o\":\"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 \"},\"#\":{\"x_min\":0,\"x_max\":963.890625,\"ha\":1061,\"o\":\"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 \"},\"\":{\"x_min\":42,\"x_max\":284,\"ha\":361,\"o\":\"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 \"},\"\":{\"x_min\":0,\"x_max\":906.953125,\"ha\":982,\"o\":\"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 \"},\")\":{\"x_min\":0,\"x_max\":318,\"ha\":415,\"o\":\"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 \"},\"\":{\"x_min\":0,\"x_max\":634.71875,\"ha\":714,\"o\":\"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 \"},\"\":{\"x_min\":0,\"x_max\":952.78125,\"ha\":1028,\"o\":\"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 \"},\"}\":{\"x_min\":0,\"x_max\":481,\"ha\":578,\"o\":\"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 \"},\"\":{\"x_min\":-3,\"x_max\":1672,\"ha\":1821,\"o\":\"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 \"},\"a\":{\"x_min\":0,\"x_max\":698.609375,\"ha\":794,\"o\":\"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 \"},\"\":{\"x_min\":0,\"x_max\":941.671875,\"ha\":1039,\"o\":\"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 \"},\"=\":{\"x_min\":8.71875,\"x_max\":780.953125,\"ha\":792,\"o\":\"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 \"},\"N\":{\"x_min\":0,\"x_max\":801,\"ha\":914,\"o\":\"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 \"},\"\":{\"x_min\":0,\"x_max\":712,\"ha\":797,\"o\":\"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 \"},\"2\":{\"x_min\":59,\"x_max\":731,\"ha\":792,\"o\":\"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 \"},\"\":{\"x_min\":0,\"x_max\":941.671875,\"ha\":938,\"o\":\"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 \"},\"Z\":{\"x_min\":0,\"x_max\":779,\"ha\":849,\"o\":\"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 \"},\"u\":{\"x_min\":0,\"x_max\":617,\"ha\":729,\"o\":\"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 \"},\"k\":{\"x_min\":0,\"x_max\":612.484375,\"ha\":697,\"o\":\"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 \"},\"\":{\"x_min\":0,\"x_max\":803,\"ha\":917,\"o\":\"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 \"},\"\":{\"x_min\":0,\"x_max\":906.953125,\"ha\":985,\"o\":\"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 \"},\"s\":{\"x_min\":0,\"x_max\":604,\"ha\":697,\"o\":\"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 \"},\"B\":{\"x_min\":0,\"x_max\":778,\"ha\":876,\"o\":\"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 \"},\"\":{\"x_min\":0,\"x_max\":614,\"ha\":708,\"o\":\"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 \"},\"?\":{\"x_min\":0,\"x_max\":607,\"ha\":704,\"o\":\"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 \"},\"H\":{\"x_min\":0,\"x_max\":803,\"ha\":915,\"o\":\"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 \"},\"\":{\"x_min\":0,\"x_max\":675,\"ha\":761,\"o\":\"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 \"},\"c\":{\"x_min\":1,\"x_max\":701.390625,\"ha\":775,\"o\":\"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 \"},\"\":{\"x_min\":0,\"x_max\":566.671875,\"ha\":678,\"o\":\"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 \"},\"\":{\"x_min\":0,\"x_max\":660,\"ha\":745,\"o\":\"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 \"},\"\":{\"x_min\":0,\"x_max\":954,\"ha\":1068,\"o\":\"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 \"},\"\":{\"x_min\":0.109375,\"x_max\":1120,\"ha\":1217,\"o\":\"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 \"},\"\":{\"x_min\":0,\"x_max\":1158,\"ha\":1275,\"o\":\"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 \"},\"\":{\"x_min\":0,\"x_max\":663.890625,\"ha\":775,\"o\":\"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 \"},\"\":{\"x_min\":0.1875,\"x_max\":819.546875,\"ha\":886,\"o\":\"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 \"},\"(\":{\"x_min\":0,\"x_max\":318.0625,\"ha\":415,\"o\":\"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 \"},\"U\":{\"x_min\":0,\"x_max\":796,\"ha\":904,\"o\":\"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 \"},\"\":{\"x_min\":0.5,\"x_max\":744.953125,\"ha\":822,\"o\":\"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 \"},\"\":{\"x_min\":0,\"x_max\":765.5625,\"ha\":809,\"o\":\"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 \"},\"F\":{\"x_min\":0,\"x_max\":683.328125,\"ha\":717,\"o\":\"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 \"},\"\":{\"x_min\":0,\"x_max\":705.5625,\"ha\":803,\"o\":\"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 \"},\":\":{\"x_min\":0,\"x_max\":142,\"ha\":239,\"o\":\"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 \"},\"\":{\"x_min\":0,\"x_max\":854.171875,\"ha\":935,\"o\":\"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 \"},\"*\":{\"x_min\":116,\"x_max\":674,\"ha\":792,\"o\":\"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 \"},\"\":{\"x_min\":0,\"x_max\":777,\"ha\":835,\"o\":\"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 \"},\"\":{\"x_min\":0,\"x_max\":347,\"ha\":444,\"o\":\"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 \"},\"V\":{\"x_min\":0,\"x_max\":862.71875,\"ha\":940,\"o\":\"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 \"},\"\":{\"x_min\":0,\"x_max\":734.71875,\"ha\":763,\"o\":\"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 \"},\"\":{\"x_min\":0,\"x_max\":0,\"ha\":853},\"\":{\"x_min\":0.328125,\"x_max\":819.515625,\"ha\":889,\"o\":\"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 \"},\"0\":{\"x_min\":73,\"x_max\":715,\"ha\":792,\"o\":\"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 \"},\"\":{\"x_min\":0,\"x_max\":347,\"ha\":454,\"o\":\"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 \"},\"@\":{\"x_min\":0,\"x_max\":1260,\"ha\":1357,\"o\":\"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 \"},\"\":{\"x_min\":0,\"x_max\":499,\"ha\":613,\"o\":\"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 \"},\"i\":{\"x_min\":14,\"x_max\":136,\"ha\":275,\"o\":\"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 \"},\"\":{\"x_min\":0,\"x_max\":778,\"ha\":877,\"o\":\"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 \"},\"\":{\"x_min\":0,\"x_max\":617,\"ha\":725,\"o\":\"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 \"},\"]\":{\"x_min\":0,\"x_max\":275,\"ha\":372,\"o\":\"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 \"},\"m\":{\"x_min\":0,\"x_max\":1019,\"ha\":1128,\"o\":\"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 \"},\"\":{\"x_min\":8.328125,\"x_max\":780.5625,\"ha\":815,\"o\":\"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 \"},\"8\":{\"x_min\":55,\"x_max\":736,\"ha\":792,\"o\":\"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 \"},\"\":{\"x_min\":42,\"x_max\":326.71875,\"ha\":361,\"o\":\"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 \"},\"\":{\"x_min\":0,\"x_max\":779.171875,\"ha\":850,\"o\":\"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 \"},\"R\":{\"x_min\":0,\"x_max\":781.953125,\"ha\":907,\"o\":\"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 \"},\"o\":{\"x_min\":0,\"x_max\":713,\"ha\":821,\"o\":\"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 \"},\"5\":{\"x_min\":54.171875,\"x_max\":738,\"ha\":792,\"o\":\"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 \"},\"7\":{\"x_min\":58.71875,\"x_max\":730.953125,\"ha\":792,\"o\":\"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 \"},\"K\":{\"x_min\":0,\"x_max\":819.46875,\"ha\":906,\"o\":\"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 \"},\",\":{\"x_min\":0,\"x_max\":142,\"ha\":239,\"o\":\"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 \"},\"d\":{\"x_min\":0,\"x_max\":683,\"ha\":796,\"o\":\"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 \"},\"\":{\"x_min\":-109,\"x_max\":247,\"ha\":232,\"o\":\"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 \"},\"E\":{\"x_min\":0,\"x_max\":736.109375,\"ha\":789,\"o\":\"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 \"},\"Y\":{\"x_min\":0,\"x_max\":820,\"ha\":886,\"o\":\"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 \"},\"\\\"\":{\"x_min\":0,\"x_max\":299,\"ha\":396,\"o\":\"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 \"},\"\":{\"x_min\":17.984375,\"x_max\":773.609375,\"ha\":792,\"o\":\"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 \"},\"\":{\"x_min\":0,\"x_max\":364,\"ha\":467,\"o\":\"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 \"},\"\":{\"x_min\":1,\"x_max\":710,\"ha\":810,\"o\":\"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 \"},\"\":{\"x_min\":0,\"x_max\":634.71875,\"ha\":714,\"o\":\"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 \"},\"\":{\"x_min\":0,\"x_max\":922,\"ha\":1031,\"o\":\"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 \"},\"\":{\"x_min\":0,\"x_max\":96,\"ha\":251,\"o\":\"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 \"},\"\":{\"x_min\":11,\"x_max\":781,\"ha\":792,\"o\":\"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 \"},\"|\":{\"x_min\":343,\"x_max\":449,\"ha\":792,\"o\":\"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 \"},\"\":{\"x_min\":0,\"x_max\":617,\"ha\":725,\"o\":\"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 \"},\"\":{\"x_min\":0,\"x_max\":593,\"ha\":690,\"o\":\"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 \"},\"b\":{\"x_min\":0,\"x_max\":685,\"ha\":783,\"o\":\"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 \"},\"q\":{\"x_min\":0,\"x_max\":683,\"ha\":876,\"o\":\"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 \"},\"\":{\"x_min\":-0.171875,\"x_max\":969.5625,\"ha\":1068,\"o\":\"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 \"},\"\":{\"x_min\":0,\"x_max\":617,\"ha\":725,\"o\":\"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 \"},\"z\":{\"x_min\":-0.015625,\"x_max\":613.890625,\"ha\":697,\"o\":\"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 \"},\"\":{\"x_min\":0,\"x_max\":894,\"ha\":1000,\"o\":\"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 \"},\"\":{\"x_min\":0.78125,\"x_max\":697,\"ha\":810,\"o\":\"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 \"},\"\":{\"x_min\":0,\"x_max\":960,\"ha\":1056,\"o\":\"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 \"},\"\":{\"x_min\":-3,\"x_max\":1008,\"ha\":1106,\"o\":\"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 \"},\"~\":{\"x_min\":0,\"x_max\":833,\"ha\":931,\"o\":\"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 \"},\"\":{\"x_min\":0,\"x_max\":736.21875,\"ha\":778,\"o\":\"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 \"},\"\":{\"x_min\":0,\"x_max\":450,\"ha\":547,\"o\":\"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 \"},\"[\":{\"x_min\":0,\"x_max\":273.609375,\"ha\":371,\"o\":\"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 \"},\"L\":{\"x_min\":0,\"x_max\":645.828125,\"ha\":696,\"o\":\"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 \"},\"\":{\"x_min\":0,\"x_max\":803.390625,\"ha\":894,\"o\":\"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 \"},\"\":{\"x_min\":0,\"x_max\":573,\"ha\":642,\"o\":\"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 \"},\"\":{\"x_min\":0,\"x_max\":674,\"ha\":778,\"o\":\"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 \"},\"\":{\"x_min\":0,\"x_max\":958,\"ha\":1054,\"o\":\"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 \"},\"\":{\"x_min\":0,\"x_max\":705.28125,\"ha\":749,\"o\":\"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 \"},\" \":{\"x_min\":0,\"x_max\":0,\"ha\":375},\"%\":{\"x_min\":-3,\"x_max\":1089,\"ha\":1186,\"o\":\"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 \"},\"P\":{\"x_min\":0,\"x_max\":726,\"ha\":806,\"o\":\"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 \"},\"\":{\"x_min\":0,\"x_max\":1078.21875,\"ha\":1118,\"o\":\"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 \"},\"\":{\"x_min\":0.125,\"x_max\":1136.546875,\"ha\":1235,\"o\":\"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 \"},\"_\":{\"x_min\":0,\"x_max\":705.5625,\"ha\":803,\"o\":\"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 \"},\"\":{\"x_min\":-110,\"x_max\":246,\"ha\":275,\"o\":\"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 \"},\"+\":{\"x_min\":23,\"x_max\":768,\"ha\":792,\"o\":\"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 \"},\"\":{\"x_min\":0,\"x_max\":1050,\"ha\":1149,\"o\":\"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 \"},\"\":{\"x_min\":0,\"x_max\":720,\"ha\":783,\"o\":\"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 \"},\"'\":{\"x_min\":0,\"x_max\":139,\"ha\":236,\"o\":\"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 \"},\"\":{\"x_min\":0,\"x_max\":350,\"ha\":397,\"o\":\"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 \"},\"\":{\"x_min\":0,\"x_max\":450,\"ha\":553,\"o\":\"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 \"},\"T\":{\"x_min\":0,\"x_max\":777,\"ha\":835,\"o\":\"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 \"},\"\":{\"x_min\":0,\"x_max\":915,\"ha\":997,\"o\":\"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 \"},\"\":{\"x_min\":0,\"x_max\":0,\"ha\":694},\"j\":{\"x_min\":-77.78125,\"x_max\":167,\"ha\":349,\"o\":\"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 \"},\"\":{\"x_min\":0,\"x_max\":756.953125,\"ha\":819,\"o\":\"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 \"},\"1\":{\"x_min\":215.671875,\"x_max\":574,\"ha\":792,\"o\":\"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 \"},\"\":{\"x_min\":18.0625,\"x_max\":774,\"ha\":792,\"o\":\"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 \"},\"<\":{\"x_min\":17.984375,\"x_max\":773.609375,\"ha\":792,\"o\":\"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 \"},\"\":{\"x_min\":0,\"x_max\":704.484375,\"ha\":801,\"o\":\"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 \"},\"t\":{\"x_min\":0,\"x_max\":367,\"ha\":458,\"o\":\"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 \"},\"\":{\"x_min\":0,\"x_max\":706,\"ha\":803,\"o\":\"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 \"},\"\":{\"x_min\":0,\"x_max\":750,\"ha\":803,\"o\":\"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 \"},\"W\":{\"x_min\":0,\"x_max\":1263.890625,\"ha\":1351,\"o\":\"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 \"},\">\":{\"x_min\":18.0625,\"x_max\":774,\"ha\":792,\"o\":\"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 \"},\"v\":{\"x_min\":0,\"x_max\":675.15625,\"ha\":761,\"o\":\"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 \"},\"\":{\"x_min\":0.28125,\"x_max\":644.5,\"ha\":703,\"o\":\"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 \"},\"\":{\"x_min\":0,\"x_max\":624.9375,\"ha\":699,\"o\":\"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 \"},\"&\":{\"x_min\":-3,\"x_max\":894.25,\"ha\":992,\"o\":\"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 \"},\"\":{\"x_min\":0,\"x_max\":862.5,\"ha\":942,\"o\":\"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 \"},\"I\":{\"x_min\":41,\"x_max\":180,\"ha\":293,\"o\":\"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 \"},\"G\":{\"x_min\":0,\"x_max\":921,\"ha\":1011,\"o\":\"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 \"},\"\":{\"x_min\":0,\"x_max\":617,\"ha\":725,\"o\":\"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 \"},\"`\":{\"x_min\":0,\"x_max\":138.890625,\"ha\":236,\"o\":\"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 \"},\"\":{\"x_min\":0,\"x_max\":142,\"ha\":239,\"o\":\"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 \"},\"\":{\"x_min\":0.328125,\"x_max\":819.515625,\"ha\":889,\"o\":\"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 \"},\"r\":{\"x_min\":0,\"x_max\":355.5625,\"ha\":432,\"o\":\"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 \"},\"x\":{\"x_min\":0,\"x_max\":675,\"ha\":764,\"o\":\"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 \"},\"\":{\"x_min\":0,\"x_max\":696.609375,\"ha\":747,\"o\":\"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 \"},\"h\":{\"x_min\":0,\"x_max\":615,\"ha\":724,\"o\":\"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 \"},\".\":{\"x_min\":0,\"x_max\":142,\"ha\":239,\"o\":\"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 \"},\"\":{\"x_min\":-2,\"x_max\":878,\"ha\":974,\"o\":\"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 \"},\";\":{\"x_min\":0,\"x_max\":142,\"ha\":239,\"o\":\"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 \"},\"f\":{\"x_min\":0,\"x_max\":378,\"ha\":472,\"o\":\"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 \"},\"\":{\"x_min\":1,\"x_max\":348.21875,\"ha\":454,\"o\":\"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 \"},\"A\":{\"x_min\":0.03125,\"x_max\":906.953125,\"ha\":1008,\"o\":\"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 \"},\"6\":{\"x_min\":53,\"x_max\":739,\"ha\":792,\"o\":\"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 \"},\"\":{\"x_min\":1,\"x_max\":139.890625,\"ha\":236,\"o\":\"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 \"},\"\":{\"x_min\":-70,\"x_max\":283,\"ha\":361,\"o\":\"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 \"},\"\":{\"x_min\":-0.21875,\"x_max\":773.21875,\"ha\":857,\"o\":\"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 \"},\"\":{\"x_min\":0,\"x_max\":765.5625,\"ha\":809,\"o\":\"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 \"},\"O\":{\"x_min\":0,\"x_max\":958,\"ha\":1057,\"o\":\"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 \"},\"n\":{\"x_min\":0,\"x_max\":615,\"ha\":724,\"o\":\"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 \"},\"3\":{\"x_min\":54,\"x_max\":737,\"ha\":792,\"o\":\"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 \"},\"9\":{\"x_min\":53,\"x_max\":739,\"ha\":792,\"o\":\"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 \"},\"l\":{\"x_min\":41,\"x_max\":166,\"ha\":279,\"o\":\"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 \"},\"\":{\"x_min\":40.09375,\"x_max\":728.796875,\"ha\":825,\"o\":\"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 \"},\"\":{\"x_min\":0,\"x_max\":632.328125,\"ha\":679,\"o\":\"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 \"},\"4\":{\"x_min\":48,\"x_max\":742.453125,\"ha\":792,\"o\":\"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 \"},\"p\":{\"x_min\":0,\"x_max\":685,\"ha\":786,\"o\":\"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 \"},\"\":{\"x_min\":0,\"x_max\":777,\"ha\":835,\"o\":\"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 \"},\"\":{\"x_min\":0,\"x_max\":808,\"ha\":907,\"o\":\"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 \"},\"\":{\"x_min\":0.78125,\"x_max\":697,\"ha\":810,\"o\":\"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 \"}},\"cssFontWeight\":\"normal\",\"ascender\":1189,\"underlinePosition\":-100,\"cssFontStyle\":\"normal\",\"boundingBox\":{\"yMin\":-334,\"xMin\":-111,\"yMax\":1189,\"xMax\":1672},\"resolution\":1000,\"original_font_information\":{\"postscript_name\":\"Helvetiker-Regular\",\"version_string\":\"Version 1.00 2004 initial release\",\"vendor_url\":\"http://www.magenta.gr/\",\"full_font_name\":\"Helvetiker\",\"font_family_name\":\"Helvetiker\",\"copyright\":\"Copyright (c) agenta ltd, 2004\",\"description\":\"\",\"trademark\":\"\",\"designer\":\"\",\"designer_url\":\"\",\"unique_font_identifier\":\"agenta ltd:Helvetiker:22-10-104\",\"license_url\":\"http://www.ellak.gr/fonts/MgOpen/license.html\",\"license_description\":\"Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\\r\\n\\r\\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license (\\\"Fonts\\\") and associated documentation files (the \\\"Font Software\\\"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \\r\\n\\r\\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\\r\\n\\r\\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word \\\"MgOpen\\\", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\\r\\n\\r\\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the \\\"MgOpen\\\" name.\\r\\n\\r\\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \\r\\n\\r\\nTHE FONT SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.\",\"manufacturer_name\":\"agenta ltd\",\"font_sub_family_name\":\"Regular\"},\"descender\":-334,\"familyName\":\"Helvetiker\",\"lineHeight\":1522,\"underlineThickness\":50}\r\n","import * as Three from 'three';\r\nimport { List } from 'immutable';\r\nimport { COLORS } from '../../../shared-style';\r\n\r\nexport default function (width, height, grid, font) {\r\n  let step = grid.properties.get('step');\r\n  let colors = grid.properties.has('color') ? new List([grid.properties.get('color')]) : grid.properties.get('colors');\r\n\r\n  let streak = new Three.Object3D();\r\n  streak.name = 'streak';\r\n  let counter = 0;\r\n\r\n  for (let i = 0; i <= height; i += step) {\r\n\r\n    let geometry = new Three.Geometry();\r\n    geometry.vertices.push(new Three.Vector3(0, 0, -i));\r\n    geometry.vertices.push(new Three.Vector3(width, 0, -i));\r\n    let color = colors.get(counter % colors.size);\r\n    let material = new Three.LineBasicMaterial({ color });\r\n\r\n    if (counter % 5 == 0) {\r\n      let shape = new Three.TextGeometry(('' + (counter * step)), {\r\n        size: 16,\r\n        height: 1,\r\n        font\r\n      });\r\n\r\n      let wrapper = new Three.MeshBasicMaterial({ color: COLORS.black });\r\n      let words = new Three.Mesh(shape, wrapper);\r\n\r\n      words.rotation.x -= Math.PI / 2;\r\n      words.position.set(-90, 0, -i);\r\n      streak.add(words);\r\n    }\r\n\r\n    streak.add(new Three.LineSegments(geometry, material));\r\n    counter++;\r\n  }\r\n  return streak;\r\n}\r\n","import * as Three from 'three';\r\nimport { List } from 'immutable';\r\nimport { COLORS } from '../../../shared-style';\r\n\r\nexport default function (width, height, grid, font) {\r\n  let step = grid.properties.get('step');\r\n  let colors = grid.properties.has('color') ? new List([grid.properties.get('color')]) : grid.properties.get('colors');\r\n\r\n  let streak = new Three.Object3D();\r\n  streak.name = 'streak';\r\n\r\n  let counter = 0;\r\n\r\n  for (let i = 0; i <= width; i += step) {\r\n\r\n    let geometry = new Three.Geometry();\r\n    geometry.vertices.push(new Three.Vector3(i, 0, 0));\r\n    geometry.vertices.push(new Three.Vector3(i, 0, -height));\r\n    let color = colors.get(counter % colors.size);\r\n    let material = new Three.LineBasicMaterial({ color });\r\n\r\n    if (counter % 5 == 0) {\r\n      let shape = new Three.TextGeometry(('' + (counter * step)), {\r\n        size: 16,\r\n        height: 1,\r\n        font: font\r\n      });\r\n\r\n      let wrapper = new Three.MeshBasicMaterial({ color: COLORS.black });\r\n      let words = new Three.Mesh(shape, wrapper);\r\n\r\n      words.rotation.x -= Math.PI / 2;\r\n      words.position.set(i - 20, 0, 50);\r\n      streak.add(words);\r\n    }\r\n\r\n    streak.add(new Three.LineSegments(geometry, material));\r\n    counter++;\r\n  }\r\n  return streak;\r\n}\r\n","/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\r\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\r\n\r\nlet THREE = window.THREE || require('three');\r\nlet OrbitControls;\r\n\r\nmodule.exports = OrbitControls = function (object, domElement) {\r\n\r\n  this.object = object;\r\n\r\n  this.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n  // Set to false to disable this control\r\n  this.enabled = true;\r\n\r\n  // \"target\" sets the location of focus, where the object orbits around\r\n  this.target = new THREE.Vector3();\r\n\r\n  // How far you can dolly in and out ( PerspectiveCamera only )\r\n  this.minDistance = 0;\r\n  this.maxDistance = Infinity;\r\n\r\n  // How far you can zoom in and out ( OrthographicCamera only )\r\n  this.minZoom = 0;\r\n  this.maxZoom = Infinity;\r\n\r\n  // How far you can orbit vertically, upper and lower limits.\r\n  // Range is 0 to Math.PI radians.\r\n  this.minPolarAngle = 0; // radians\r\n  this.maxPolarAngle = Math.PI; // radians\r\n\r\n  // How far you can orbit horizontally, upper and lower limits.\r\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n  this.minAzimuthAngle = -Infinity; // radians\r\n  this.maxAzimuthAngle = Infinity; // radians\r\n\r\n  // Set to true to enable damping (inertia)\r\n  // If damping is enabled, you must call controls.update() in your animation loop\r\n  this.enableDamping = false;\r\n  this.dampingFactor = 0.25;\r\n\r\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n  // Set to false to disable zooming\r\n  this.enableZoom = true;\r\n  this.zoomSpeed = 1.0;\r\n\r\n  // Set to false to disable rotating\r\n  this.enableRotate = true;\r\n  this.rotateSpeed = 1.0;\r\n\r\n  // Set to false to disable panning\r\n  this.enablePan = true;\r\n  this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n  // Set to true to automatically rotate around the target\r\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n  this.autoRotate = false;\r\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n  // Set to false to disable use of the keys\r\n  this.enableKeys = true;\r\n\r\n  // The four arrow keys\r\n  this.keys = {LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40};\r\n\r\n  // Mouse buttons\r\n  this.mouseButtons = {ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT};\r\n\r\n  // for reset\r\n  this.target0 = this.target.clone();\r\n  this.position0 = this.object.position.clone();\r\n  this.zoom0 = this.object.zoom;\r\n\r\n  //\r\n  // public methods\r\n  //\r\n\r\n  this.getPolarAngle = function () {\r\n\r\n    return spherical.phi;\r\n\r\n  };\r\n\r\n  this.getAzimuthalAngle = function () {\r\n\r\n    return spherical.theta;\r\n\r\n  };\r\n\r\n  this.reset = function () {\r\n\r\n    scope.target.copy(scope.target0);\r\n    scope.object.position.copy(scope.position0);\r\n    scope.object.zoom = scope.zoom0;\r\n\r\n    scope.object.updateProjectionMatrix();\r\n    scope.dispatchEvent(changeEvent);\r\n\r\n    scope.update();\r\n\r\n    state = STATE.NONE;\r\n\r\n  };\r\n\r\n  // this method is exposed, but perhaps it would be better if we can make it private...\r\n  this.update = function () {\r\n\r\n    let offset = new THREE.Vector3();\r\n\r\n    // so camera.up is the orbit axis\r\n    let quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\r\n    let quatInverse = quat.clone().inverse();\r\n\r\n    let lastPosition = new THREE.Vector3();\r\n    let lastQuaternion = new THREE.Quaternion();\r\n\r\n    return function update() {\r\n\r\n      let position = scope.object.position;\r\n\r\n      offset.copy(position).sub(scope.target);\r\n\r\n      // rotate offset to \"y-axis-is-up\" space\r\n      offset.applyQuaternion(quat);\r\n\r\n      // angle from z-axis around y-axis\r\n      spherical.setFromVector3(offset);\r\n\r\n      if (scope.autoRotate && state === STATE.NONE) {\r\n\r\n        rotateLeft(getAutoRotationAngle());\r\n\r\n      }\r\n\r\n      spherical.theta += sphericalDelta.theta;\r\n      spherical.phi += sphericalDelta.phi;\r\n\r\n      // restrict theta to be between desired limits\r\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\r\n\r\n      // restrict phi to be between desired limits\r\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\r\n\r\n      spherical.makeSafe();\r\n\r\n\r\n      spherical.radius *= scale;\r\n\r\n      // restrict radius to be between desired limits\r\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\r\n\r\n      // move target to panned location\r\n      scope.target.add(panOffset);\r\n\r\n      offset.setFromSpherical(spherical);\r\n\r\n      // rotate offset back to \"camera-up-vector-is-up\" space\r\n      offset.applyQuaternion(quatInverse);\r\n\r\n      position.copy(scope.target).add(offset);\r\n\r\n      scope.object.lookAt(scope.target);\r\n\r\n      if (scope.enableDamping === true) {\r\n\r\n        sphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n        sphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n      } else {\r\n\r\n        sphericalDelta.set(0, 0, 0);\r\n\r\n      }\r\n\r\n      scale = 1;\r\n      panOffset.set(0, 0, 0);\r\n\r\n      // update condition is:\r\n      // min(camera displacement, camera rotation in radians)^2 > EPS\r\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n      if (zoomChanged ||\r\n        lastPosition.distanceToSquared(scope.object.position) > EPS ||\r\n        8 * ( 1 - lastQuaternion.dot(scope.object.quaternion) ) > EPS) {\r\n\r\n        scope.dispatchEvent(changeEvent);\r\n\r\n        lastPosition.copy(scope.object.position);\r\n        lastQuaternion.copy(scope.object.quaternion);\r\n        zoomChanged = false;\r\n\r\n        return true;\r\n\r\n      }\r\n\r\n      return false;\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  this.dispose = function () {\r\n\r\n    scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\r\n    scope.domElement.removeEventListener('mousedown', onMouseDown, false);\r\n    scope.domElement.removeEventListener('wheel', onMouseWheel, false);\r\n\r\n    scope.domElement.removeEventListener('touchstart', onTouchStart, false);\r\n    scope.domElement.removeEventListener('touchend', onTouchEnd, false);\r\n    scope.domElement.removeEventListener('touchmove', onTouchMove, false);\r\n\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n\r\n    window.removeEventListener('keydown', onKeyDown, false);\r\n\r\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n  };\r\n\r\n  //\r\n  // internals\r\n  //\r\n\r\n  let scope = this;\r\n\r\n  let changeEvent = {type: 'change'};\r\n  let startEvent = {type: 'start'};\r\n  let endEvent = {type: 'end'};\r\n\r\n  let STATE = {NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5};\r\n\r\n  let state = STATE.NONE;\r\n\r\n  let EPS = 0.000001;\r\n\r\n  // current position in spherical coordinates\r\n  let spherical = new THREE.Spherical();\r\n  let sphericalDelta = new THREE.Spherical();\r\n\r\n  let scale = 1;\r\n  let panOffset = new THREE.Vector3();\r\n  let zoomChanged = false;\r\n\r\n  let rotateStart = new THREE.Vector2();\r\n  let rotateEnd = new THREE.Vector2();\r\n  let rotateDelta = new THREE.Vector2();\r\n\r\n  let panStart = new THREE.Vector2();\r\n  let panEnd = new THREE.Vector2();\r\n  let panDelta = new THREE.Vector2();\r\n\r\n  let dollyStart = new THREE.Vector2();\r\n  let dollyEnd = new THREE.Vector2();\r\n  let dollyDelta = new THREE.Vector2();\r\n\r\n  function getAutoRotationAngle() {\r\n\r\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n  }\r\n\r\n  function getZoomScale() {\r\n\r\n    return Math.pow(0.95, scope.zoomSpeed);\r\n\r\n  }\r\n\r\n  function rotateLeft(angle) {\r\n\r\n    sphericalDelta.theta -= angle;\r\n\r\n  }\r\n\r\n  function rotateUp(angle) {\r\n\r\n    sphericalDelta.phi -= angle;\r\n\r\n  }\r\n\r\n  let panLeft = function () {\r\n\r\n    let v = new THREE.Vector3();\r\n\r\n    return function panLeft(distance, objectMatrix) {\r\n\r\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\r\n      v.multiplyScalar(-distance);\r\n\r\n      panOffset.add(v);\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  let panUp = function () {\r\n\r\n    let v = new THREE.Vector3();\r\n\r\n    return function panUp(distance, objectMatrix) {\r\n\r\n      v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\r\n      v.multiplyScalar(distance);\r\n\r\n      panOffset.add(v);\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  // deltaX and deltaY are in pixels; right and down are positive\r\n  let pan = function () {\r\n\r\n    let offset = new THREE.Vector3();\r\n\r\n    return function pan(deltaX, deltaY) {\r\n\r\n      let element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if (scope.object instanceof THREE.PerspectiveCamera) {\r\n\r\n        // perspective\r\n        let position = scope.object.position;\r\n        offset.copy(position).sub(scope.target);\r\n        let targetDistance = offset.length();\r\n\r\n        // half of the fov is center to top of screen\r\n        targetDistance *= Math.tan(( scope.object.fov / 2 ) * Math.PI / 180.0);\r\n\r\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\r\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\r\n\r\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\r\n\r\n        // orthographic\r\n        panLeft(deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix);\r\n        panUp(deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix);\r\n\r\n      } else {\r\n\r\n        // camera neither orthographic nor perspective\r\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\r\n        scope.enablePan = false;\r\n\r\n      }\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  function dollyIn(dollyScale) {\r\n\r\n    if (scope.object instanceof THREE.PerspectiveCamera) {\r\n\r\n      scale /= dollyScale;\r\n\r\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\r\n\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function dollyOut(dollyScale) {\r\n\r\n    if (scope.object instanceof THREE.PerspectiveCamera) {\r\n\r\n      scale *= dollyScale;\r\n\r\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\r\n\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  //\r\n  // event callbacks - update the object state\r\n  //\r\n\r\n  function handleMouseDownRotate(event) {\r\n\r\n    rotateStart.set(event.clientX, event.clientY);\r\n\r\n  }\r\n\r\n  function handleMouseDownDolly(event) {\r\n\r\n    dollyStart.set(event.clientX, event.clientY);\r\n\r\n  }\r\n\r\n  function handleMouseDownPan(event) {\r\n\r\n    panStart.set(event.clientX, event.clientY);\r\n\r\n  }\r\n\r\n  function handleMouseMoveRotate(event) {\r\n\r\n    rotateEnd.set(event.clientX, event.clientY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n    let element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    // rotating across whole screen goes 360 degrees around\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\r\n\r\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\r\n\r\n    rotateStart.copy(rotateEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMoveDolly(event) {\r\n\r\n    dollyEnd.set(event.clientX, event.clientY);\r\n\r\n    dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n    if (dollyDelta.y > 0) {\r\n\r\n      dollyIn(getZoomScale());\r\n\r\n    } else if (dollyDelta.y < 0) {\r\n\r\n      dollyOut(getZoomScale());\r\n\r\n    }\r\n\r\n    dollyStart.copy(dollyEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMovePan(event) {\r\n\r\n    panEnd.set(event.clientX, event.clientY);\r\n\r\n    panDelta.subVectors(panEnd, panStart);\r\n\r\n    pan(panDelta.x, panDelta.y);\r\n\r\n    panStart.copy(panEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseUp(event) {}\r\n\r\n  function handleMouseWheel(event) {\r\n\r\n    if (event.deltaY < 0) {\r\n\r\n      dollyOut(getZoomScale());\r\n\r\n    } else if (event.deltaY > 0) {\r\n\r\n      dollyIn(getZoomScale());\r\n\r\n    }\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleKeyDown(event) {\r\n\r\n    switch (event.keyCode) {\r\n\r\n      case scope.keys.UP:\r\n        pan(0, scope.keyPanSpeed);\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.BOTTOM:\r\n        pan(0, -scope.keyPanSpeed);\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.LEFT:\r\n        pan(scope.keyPanSpeed, 0);\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.RIGHT:\r\n        pan(-scope.keyPanSpeed, 0);\r\n        scope.update();\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function handleTouchStartRotate(event) {\r\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n  }\r\n\r\n  function handleTouchStartDolly(event) {\r\n    let dx = event.touches[0].pageX - event.touches[1].pageX;\r\n    let dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n    let distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    dollyStart.set(0, distance);\r\n  }\r\n\r\n  function handleTouchStartPan(event) {\r\n    panStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n  }\r\n\r\n  function handleTouchMoveRotate(event) {\r\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n    let element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    // rotating across whole screen goes 360 degrees around\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\r\n\r\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\r\n\r\n    rotateStart.copy(rotateEnd);\r\n\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchMoveDolly(event) {\r\n    let dx = event.touches[0].pageX - event.touches[1].pageX;\r\n    let dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n    let distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    dollyEnd.set(0, distance);\r\n\r\n    dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n    if (dollyDelta.y > 0) {\r\n\r\n      dollyOut(getZoomScale());\r\n\r\n    } else if (dollyDelta.y < 0) {\r\n\r\n      dollyIn(getZoomScale());\r\n\r\n    }\r\n\r\n    dollyStart.copy(dollyEnd);\r\n\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchMovePan(event) {\r\n    panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n    panDelta.subVectors(panEnd, panStart);\r\n\r\n    pan(panDelta.x, panDelta.y);\r\n\r\n    panStart.copy(panEnd);\r\n\r\n    scope.update();\r\n  }\r\n\r\n  function handleTouchEnd(event) {}\r\n\r\n  //\r\n  // event handlers - FSM: listen for events and reset state\r\n  //\r\n\r\n  function onMouseDown(event) {\r\n    if (scope.enabled === false) return;\r\n\r\n    event.preventDefault();\r\n\r\n    if (event.button === scope.mouseButtons.ORBIT) {\r\n\r\n      if (scope.enableRotate === false) return;\r\n\r\n      handleMouseDownRotate(event);\r\n\r\n      state = STATE.ROTATE;\r\n\r\n    } else if (event.button === scope.mouseButtons.ZOOM) {\r\n\r\n      if (scope.enableZoom === false) return;\r\n\r\n      handleMouseDownDolly(event);\r\n\r\n      state = STATE.DOLLY;\r\n\r\n    } else if (event.button === scope.mouseButtons.PAN) {\r\n\r\n      if (scope.enablePan === false) return;\r\n\r\n      handleMouseDownPan(event);\r\n\r\n      state = STATE.PAN;\r\n\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n\r\n      document.addEventListener('mousemove', onMouseMove, false);\r\n      document.addEventListener('mouseup', onMouseUp, false);\r\n\r\n      scope.dispatchEvent(startEvent);\r\n\r\n    }\r\n  }\r\n\r\n  function onMouseMove(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    if (state === STATE.ROTATE) {\r\n\r\n      if (scope.enableRotate === false) return;\r\n\r\n      handleMouseMoveRotate(event);\r\n\r\n    } else if (state === STATE.DOLLY) {\r\n\r\n      if (scope.enableZoom === false) return;\r\n\r\n      handleMouseMoveDolly(event);\r\n\r\n    } else if (state === STATE.PAN) {\r\n\r\n      if (scope.enablePan === false) return;\r\n\r\n      handleMouseMovePan(event);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onMouseUp(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    handleMouseUp(event);\r\n\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n\r\n    scope.dispatchEvent(endEvent);\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onMouseWheel(event) {\r\n\r\n    if (scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE )) return;\r\n\r\n    event.stopPropagation();\r\n\r\n    handleMouseWheel(event);\r\n\r\n    scope.dispatchEvent(startEvent); // not sure why these are here...\r\n    scope.dispatchEvent(endEvent);\r\n\r\n  }\r\n\r\n  function onKeyDown(event) {\r\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\r\n\r\n    handleKeyDown(event);\r\n\r\n  }\r\n\r\n  function onTouchStart(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    switch (event.touches.length) {\r\n\r\n      case 1:\t// one-fingered touch: rotate\r\n\r\n        if (scope.enableRotate === false) return;\r\n\r\n        handleTouchStartRotate(event);\r\n\r\n        state = STATE.TOUCH_ROTATE;\r\n\r\n        break;\r\n\r\n      case 2:\t// two-fingered touch: dolly\r\n\r\n        if (scope.enableZoom === false) return;\r\n\r\n        handleTouchStartDolly(event);\r\n\r\n        state = STATE.TOUCH_DOLLY;\r\n\r\n        break;\r\n\r\n      case 3: // three-fingered touch: pan\r\n\r\n        if (scope.enablePan === false) return;\r\n\r\n        handleTouchStartPan(event);\r\n\r\n        state = STATE.TOUCH_PAN;\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n\r\n      scope.dispatchEvent(startEvent);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onTouchMove(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    event.stopPropagation();\r\n\r\n    switch (event.touches.length) {\r\n\r\n      case 1: // one-fingered touch: rotate\r\n\r\n        if (scope.enableRotate === false) return;\r\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\r\n\r\n        handleTouchMoveRotate(event);\r\n\r\n        break;\r\n\r\n      case 2: // two-fingered touch: dolly\r\n\r\n        if (scope.enableZoom === false) return;\r\n        if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\r\n\r\n        handleTouchMoveDolly(event);\r\n\r\n        break;\r\n\r\n      case 3: // three-fingered touch: pan\r\n\r\n        if (scope.enablePan === false) return;\r\n        if (state !== STATE.TOUCH_PAN) return; // is this needed?...\r\n\r\n        handleTouchMovePan(event);\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onTouchEnd(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    handleTouchEnd(event);\r\n\r\n    scope.dispatchEvent(endEvent);\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onContextMenu(event) { event.preventDefault(); }\r\n\r\n  scope.domElement.addEventListener('contextmenu', onContextMenu, false);\r\n\r\n  scope.domElement.addEventListener('mousedown', onMouseDown, false);\r\n  scope.domElement.addEventListener('wheel', onMouseWheel, { passive: true });\r\n\r\n  scope.domElement.addEventListener('touchstart', onTouchStart, { passive: true });\r\n  scope.domElement.addEventListener('touchend', onTouchEnd, { passive: true });\r\n  scope.domElement.addEventListener('touchmove', onTouchMove, { passive: true });\r\n\r\n  window.addEventListener('keydown', onKeyDown, { passive: true });\r\n\r\n  // force an update at start\r\n\r\n  this.update();\r\n\r\n};\r\n\r\nOrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n\r\nObject.defineProperties(OrbitControls.prototype, {\r\n\r\n  center: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .center has been renamed to .target');\r\n      return this.target;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  // backward compatibility\r\n\r\n  noZoom: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      return !this.enableZoom;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      this.enableZoom = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noRotate: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      return !this.enableRotate;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      this.enableRotate = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noPan: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      return !this.enablePan;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      this.enablePan = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noKeys: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      return !this.enableKeys;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      this.enableKeys = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  staticMoving: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      return !this.enableDamping;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      this.enableDamping = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  dynamicDampingFactor: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      return this.dampingFactor;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      this.dampingFactor = value;\r\n\r\n    }\r\n\r\n  }\r\n\r\n});\r\n","\"use strict\";\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Three from 'three';\r\nimport {parseData, updateScene} from './scene-creator';\r\nimport {disposeScene} from './three-memory-cleaner';\r\nimport diff from 'immutablediff';\r\nimport {initPointerLock} from \"./pointer-lock-navigation\";\r\nimport {firstPersonOnKeyDown, firstPersonOnKeyUp} from \"./libs/first-person-controls\";\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nexport default class Viewer3DFirstPerson extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.width = props.width;\r\n    this.height = props.height;\r\n    this.stopRendering = false;\r\n    this.renderer = window.__threeRenderer || new Three.WebGLRenderer({preserveDrawingBuffer: true});\r\n    window.__threeRenderer = this.renderer;\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    /** Variables for movement control **/\r\n    let prevTime = performance.now();\r\n    let velocity = new Three.Vector3();\r\n    let direction = new Three.Vector3();\r\n    let moveForward = false;\r\n    let moveBackward = false;\r\n    let moveLeft = false;\r\n    let moveRight = false;\r\n    let canJump = false;\r\n\r\n    let {catalog} = this.context;\r\n\r\n    let actions = {\r\n      areaActions: this.context.areaActions,\r\n      holesActions: this.context.holesActions,\r\n      itemsActions: this.context.itemsActions,\r\n      linesActions: this.context.linesActions,\r\n      projectActions: this.context.projectActions\r\n    };\r\n\r\n    let {state} = this.props;\r\n    let data = state.scene;\r\n    let canvasWrapper = ReactDOM.findDOMNode(this.refs.canvasWrapper);\r\n\r\n    let scene3D = new Three.Scene();\r\n\r\n    // As I need to show the pointer above all scene objects, I use this workaround http://stackoverflow.com/a/13309722\r\n    let sceneOnTop = new Three.Scene();\r\n\r\n    //RENDERER\r\n    this.renderer.setClearColor(new Three.Color(SharedStyle.COLORS.white));\r\n    this.renderer.setSize(this.width, this.height);\r\n\r\n    // LOAD DATA\r\n    this.planData = parseData(data, actions, catalog);\r\n\r\n    scene3D.add(this.planData.plan);\r\n\r\n    // CAMERA\r\n    let aspectRatio = this.width / this.height;\r\n    let camera = new Three.PerspectiveCamera(45, aspectRatio, 0.1, 300000);\r\n\r\n    sceneOnTop.add(camera); // The pointer is on the camera so I show it above all\r\n\r\n    // Set position for the camera\r\n    camera.position.set(0, 0, 0);\r\n    camera.up = new Three.Vector3(0, 1, 0);\r\n\r\n    // HELPER AXIS\r\n    // let axisHelper = new Three.AxisHelper(100);\r\n    // scene3D.add(axisHelper);\r\n\r\n    // LIGHT\r\n    let light = new Three.AmbientLight(0xafafaf); // soft white light\r\n    scene3D.add(light);\r\n\r\n    // Add another light\r\n    let pointLight = new Three.PointLight(SharedStyle.COLORS.white, 0.4, 1000);\r\n    pointLight.position.set(0, 0, 0);\r\n    scene3D.add(pointLight);\r\n\r\n    // POINTER LOCK\r\n\r\n    document.body.requestPointerLock = document.body.requestPointerLock ||\r\n      document.body.mozRequestPointerLock ||\r\n      document.body.webkitRequestPointerLock;\r\n\r\n    document.body.requestPointerLock();\r\n\r\n    let {controls, pointerlockChangeEvent, requestPointerLockEvent} = initPointerLock(camera, this.renderer.domElement);\r\n    this.controls = controls;\r\n    this.pointerlockChangeListener = pointerlockChangeEvent;\r\n    this.requestPointerLockEvent = requestPointerLockEvent;\r\n\r\n    /* Set user initial position */\r\n    let humanHeight = 170; // 170 cm\r\n\r\n    let yInitialPosition = this.planData.boundingBox.min.y +\r\n      (this.planData.boundingBox.min.y - this.planData.boundingBox.max.y) / 2 + humanHeight;\r\n    this.controls.getObject().position.set(-50, yInitialPosition, -100);\r\n    sceneOnTop.add(this.controls.getObject()); // Add the pointer lock controls to the scene that will be rendered on top\r\n\r\n    // Add move controls on the page\r\n    this.keyDownEvent = (event) => {\r\n      let moveResult = firstPersonOnKeyDown(event, moveForward, moveLeft, moveBackward, moveRight, canJump, velocity);\r\n      moveForward = moveResult.moveForward;\r\n      moveLeft = moveResult.moveLeft;\r\n      moveBackward = moveResult.moveBackward;\r\n      moveRight = moveResult.moveRight;\r\n      canJump = moveResult.canJump;\r\n    };\r\n\r\n    this.keyUpEvent = (event) => {\r\n      let moveResult = firstPersonOnKeyUp(event, moveForward, moveLeft, moveBackward, moveRight, canJump);\r\n      moveForward = moveResult.moveForward;\r\n      moveLeft = moveResult.moveLeft;\r\n      moveBackward = moveResult.moveBackward;\r\n      moveRight = moveResult.moveRight;\r\n      canJump = moveResult.canJump;\r\n    };\r\n\r\n    document.addEventListener('keydown', this.keyDownEvent);\r\n    document.addEventListener('keyup', this.keyUpEvent);\r\n\r\n    // Add a pointer to the scene\r\n\r\n    let pointer = new Three.Object3D();\r\n    pointer.name = 'pointer';\r\n\r\n    let pointerMaterial = new Three.MeshBasicMaterial({depthTest: false, depthWrite: false, color: SharedStyle.COLORS.black});\r\n    let pointerGeometry1 = new Three.Geometry();\r\n    pointerGeometry1.vertices.push(new Three.Vector3(-10, 0, 0));\r\n    pointerGeometry1.vertices.push(new Three.Vector3(10, 0, 0));\r\n\r\n    let linePointer1 = new Three.Line(pointerGeometry1, pointerMaterial);\r\n    linePointer1.position.z -= 100;\r\n\r\n    let pointerGeometry2 = new Three.Geometry();\r\n    pointerGeometry2.vertices.push(new Three.Vector3(0, 10, 0));\r\n    pointerGeometry2.vertices.push(new Three.Vector3(0, -10, 0));\r\n\r\n    let linePointer2 = new Three.Line(pointerGeometry2, pointerMaterial);\r\n    linePointer2.renderDepth = 1e20;\r\n    linePointer2.position.z -= 100;\r\n\r\n    let pointerGeometry3 = new Three.Geometry();\r\n    pointerGeometry3.vertices.push(new Three.Vector3(-1, 1, 0));\r\n    pointerGeometry3.vertices.push(new Three.Vector3(1, 1, 0));\r\n    pointerGeometry3.vertices.push(new Three.Vector3(1, -1, 0));\r\n    pointerGeometry3.vertices.push(new Three.Vector3(-1, -1, 0));\r\n    pointerGeometry3.vertices.push(new Three.Vector3(-1, 1, 0));\r\n\r\n    let linePointer3 = new Three.Line(pointerGeometry3, pointerMaterial);\r\n    linePointer3.position.z -= 100;\r\n\r\n    pointer.add(linePointer1);\r\n    pointer.add(linePointer2);\r\n    pointer.add(linePointer3);\r\n\r\n    camera.add(pointer); // Add the pointer to the camera\r\n\r\n\r\n    // OBJECT PICKING\r\n    let toIntersect = [this.planData.plan];\r\n\r\n    let mouseVector = new Three.Vector2(0, 0);\r\n    let raycaster = new Three.Raycaster();\r\n\r\n    this.firstPersonMouseDown = (event) => {\r\n\r\n      // First of all I check if controls are enabled\r\n\r\n      if (this.controls.enabled) {\r\n        event.preventDefault();\r\n\r\n        /* Per avere la direzione da assegnare al raycaster, chiamo il metodo getDirection di PointerLockControls,\r\n         * che restituisce una funzione che a sua volta prende un vettore, vi scrive i valori degli oggetti\r\n         * pitch e yaw e lo restituisce */\r\n\r\n        raycaster.setFromCamera(mouseVector, camera);\r\n\r\n        let intersects = raycaster.intersectObjects(toIntersect, true);\r\n        if (intersects.length > 0 && !(isNaN(intersects[0].distance))) {\r\n          intersects[0].object.interact && intersects[0].object.interact();\r\n        } else {\r\n          this.context.projectActions.unselectAll();\r\n        }\r\n      }\r\n\r\n    };\r\n\r\n    document.addEventListener('mousedown', this.firstPersonMouseDown, false);\r\n\r\n    this.renderer.domElement.style.display = 'block';\r\n\r\n    // add the output of the renderer to the html element\r\n    canvasWrapper.appendChild(this.renderer.domElement);\r\n    this.renderer.autoClear = false;\r\n\r\n    let render = () => {\r\n\r\n      if (!this.stopRendering) {\r\n        yInitialPosition = this.planData.boundingBox.min.y + humanHeight;\r\n\r\n        let multiplier = 5;\r\n\r\n        let time = performance.now();\r\n        let delta = ( time - prevTime ) / 1000 * multiplier;\r\n\r\n        velocity.x -= velocity.x * 10.0 * delta;\r\n        velocity.z -= velocity.z * 10.0 * delta;\r\n        velocity.y -= 9.8 * 100.0 * delta / multiplier; // 100.0 = mass\r\n\r\n        direction.z = Number( moveForward ) - Number( moveBackward );\r\n        direction.x = Number( moveLeft ) - Number( moveRight );\r\n        direction.normalize(); // this ensures consistent movements in all directions\r\n\r\n        if ( moveForward || moveBackward ) velocity.z -= direction.z * 400.0 * delta;\r\n        if ( moveLeft || moveRight ) velocity.x -= direction.x * 400.0 * delta;\r\n\r\n        this.controls.getObject().translateX(velocity.x * delta);\r\n        this.controls.getObject().translateY(velocity.y * delta);\r\n        this.controls.getObject().translateZ(velocity.z * delta);\r\n\r\n        if ( this.controls.getObject().position.y < yInitialPosition ) {\r\n          velocity.y = 0;\r\n          this.controls.getObject().position.y = yInitialPosition;\r\n          canJump = true;\r\n        }\r\n\r\n        prevTime = time;\r\n\r\n        // Set light position\r\n        let controlObjectPosition = this.controls.getObject().position;\r\n        pointLight.position.set(controlObjectPosition.x, controlObjectPosition.y, controlObjectPosition.z);\r\n\r\n        for (let elemID in this.planData.sceneGraph.LODs) {\r\n          this.planData.sceneGraph.LODs[elemID].update(camera);\r\n        }\r\n\r\n        this.renderer.clear();                     // clear buffers\r\n        this.renderer.render(scene3D, camera);     // render scene 1\r\n        this.renderer.clearDepth();                // clear depth buffer\r\n        this.renderer.render(sceneOnTop, camera);  // render scene 2\r\n\r\n        requestAnimationFrame(render);\r\n      }\r\n    };\r\n\r\n    render();\r\n\r\n    this.camera = camera;\r\n    this.scene3D = scene3D;\r\n    this.sceneOnTop = sceneOnTop;\r\n    // this.planData = planData;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.stopRendering = true;\r\n    this.renderer.autoClear = true;\r\n    document.removeEventListener('mousedown', this.firstPersonMouseDown);\r\n    document.removeEventListener('keydown', this.keyDownEvent);\r\n    document.removeEventListener('keyup', this.keyUpEvent);\r\n    document.removeEventListener('pointerlockchange', this.pointerlockChangeEvent);\r\n    document.removeEventListener('mozpointerlockchange', this.pointerlockChangeEvent);\r\n    document.removeEventListener('webkitpointerlockchange', this.pointerlockChangeEvent);\r\n    this.renderer.domElement.removeEventListener('click', this.requestPointerLockEvent);\r\n\r\n    disposeScene(this.scene3D);\r\n\r\n    this.scene3D.remove(this.planData.plan);\r\n\r\n    this.scene3D = null;\r\n    this.planData = null;\r\n    this.renderer.renderLists.dispose();\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    let {width, height} = nextProps;\r\n    let {camera, renderer, scene3D, sceneOnTop, planData} = this;\r\n\r\n    let actions = {\r\n      areaActions: this.context.areaActions,\r\n      holesActions: this.context.holesActions,\r\n      itemsActions: this.context.itemsActions,\r\n      linesActions: this.context.linesActions,\r\n      projectActions: this.context.projectActions\r\n    };\r\n\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    camera.aspect = width / height;\r\n\r\n    camera.updateProjectionMatrix();\r\n\r\n    if (nextProps.scene !== this.props.state.scene) {\r\n      let changedValues = diff(this.props.state.scene, nextProps.state.scene);\r\n      updateScene(planData, nextProps.state.scene, this.props.state.scene, changedValues.toJS(), actions, this.context.catalog);\r\n    }\r\n\r\n    renderer.setSize(width, height);\r\n    renderer.clear();                     // clear buffers\r\n    renderer.render(scene3D, camera);     // render scene 1\r\n    renderer.clearDepth();                // clear depth buffer\r\n    renderer.render(sceneOnTop, camera);  // render scene 2\r\n\r\n  }\r\n\r\n  render() {\r\n    return React.createElement(\"div\", {\r\n      ref: \"canvasWrapper\"\r\n    });\r\n  }\r\n}\r\n\r\nViewer3DFirstPerson.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired\r\n};\r\n\r\nViewer3DFirstPerson.contextTypes = {\r\n  areaActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object\r\n};\r\n","import PointerLockControls from './libs/pointer-lock-controls';\r\n\r\nexport function initPointerLock(camera, rendererElement) {\r\n\r\n  let havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;\r\n\r\n  let pointerlockchange = event => {\r\n    controls.enabled = !controls.enabled;\r\n  };\r\n\r\n  let requestPointerLockEvent = event => {\r\n    document.body.requestPointerLock = document.body.requestPointerLock ||\r\n      document.body.mozRequestPointerLock ||\r\n      document.body.webkitRequestPointerLock;\r\n    document.body.requestPointerLock();\r\n  };\r\n\r\n  if (havePointerLock) {\r\n\r\n    document.addEventListener('pointerlockchange', pointerlockchange, false);\r\n    document.addEventListener('mozpointerlockchange', pointerlockchange, false);\r\n    document.addEventListener('webkitpointerlockchange', pointerlockchange, false);\r\n    rendererElement.addEventListener('click', requestPointerLockEvent);\r\n\r\n  } else {\r\n    console.log('Your browser doesn\\'t seem to support Pointer Lock API');\r\n  }\r\n\r\n  let controls = new PointerLockControls(camera);\r\n  return {controls, pointerlockChangeEvent: pointerlockchange, requestPointerLockEvent};\r\n}\r\n\r\n\r\n/* Funzione per il calcolo delle collisioni con gli oggetti contenuti all'interno di un array.\r\n * L'idea  quella di utilizzare il ray casting. Per tenere conto del fatto che ci possiamo\r\n * muovere nelle quattro direzioni, applico una matrice di rotazione alla direzione verso la\r\n * quale l'oggetto del pointer lock  orientato. */\r\n\r\nfunction collision(controls, collisionArray) {\r\n\r\n  let rotationMatrix;\r\n  let cameraDirection = controls.getDirection(new THREE.Vector3(0, 0, 0)).clone();\r\n\r\n  if (controls.moveForward()) {\r\n    // Nothing to do!\r\n  }\r\n  else if (controls.moveBackward()) {\r\n    rotationMatrix = new THREE.Matrix4();\r\n    rotationMatrix.makeRotationY(180 * Math.PI / 180);\r\n  }\r\n  else if (controls.moveLeft()) {\r\n    rotationMatrix = new THREE.Matrix4();\r\n    rotationMatrix.makeRotationY(90 * Math.PI / 180);\r\n  }\r\n  else if (controls.moveRight()) {\r\n    rotationMatrix = new THREE.Matrix4();\r\n    rotationMatrix.makeRotationY((360 - 90) * Math.PI / 180);\r\n  }\r\n  else return;\r\n\r\n  if (rotationMatrix !== undefined) {\r\n    cameraDirection.applyMatrix4(rotationMatrix);\r\n  }\r\n  let rayCaster = new THREE.Raycaster(controls.getObject().position, cameraDirection.normalize());\r\n  let intersects = rayCaster.intersectObjects(collisionArray, true);\r\n\r\n  if ((intersects.length > 0 && intersects[0].distance < 10)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n\r\n/* Funzione meno raffinata per il calcolo delle collisioni.\r\n * In pratica viene definita una bounding geometry (in questo caso la skymap) e poi vengono fatti\r\n * partire una serie di raggi dall'object del controller fino ai vertici di questa geometria. Se uno di questi interseca\r\n * uno degli oggetti dei quali vogliamo controllare la collisione, allora la funzione restituir il valore true */\r\n/*\r\n function collision(object, boundingGeometry, collisionArray ) {\r\n\r\n for (let vertexIndex = 0; vertexIndex < boundingGeometry.geometry.vertices.length; vertexIndex++)\t{\r\n let localVertex = boundingGeometry.geometry.vertices[vertexIndex].clone();\r\n let globalVertex = localVertex.applyMatrix4( object.matrix );\r\n let directionVector = globalVertex.sub( object.position );\r\n\r\n let ray = new THREE.Raycaster(object.position, directionVector.clone().normalize());\r\n let collisionResults = ray.intersectObjects(collisionArray, true);\r\n if (collisionResults.length > 0 && collisionResults[0].distance < directionVector.length() - 1293) {\r\n console.log(\"collisione: \",collisionResults[0].distance,\" \",directionVector.length()-1293);\r\n return true;\r\n }\r\n }\r\n return false;\r\n }\r\n */\r\n\r\n/* Questa funzione si occupa di determinare se il controllo si trova su un oggetto, in caso negativo cade verso il basso\r\n * (vedi esempio pointer lock) */\r\n\r\nfunction translateY(controls, ray, objects) {\r\n\r\n  controls.isOnObject(false);\r\n  ray.ray.origin.copy(controls.getObject().position);\r\n  ray.ray.origin.y -= 10;\r\n  let intersections = ray.intersectObjects(objects, true);\r\n  if (intersections.length > 0) {\r\n    let distance = intersections[0].distance;\r\n    if (distance > 0 && distance < 10) {\r\n      controls.isOnObject(true);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n/* Queste funzioni bloccano o sbloccano il movimento del controller (utili in caso di collisione) */\r\n\r\nfunction lockDirection(controls) {\r\n  if (controls.moveForward()) {\r\n    controls.lockMoveForward(true);\r\n  }\r\n  else if (controls.moveBackward()) {\r\n    controls.lockMoveBackward(true);\r\n  }\r\n  else if (controls.moveLeft()) {\r\n    controls.lockMoveLeft(true);\r\n  }\r\n  else if (controls.moveRight()) {\r\n    controls.lockMoveRight(true);\r\n  }\r\n}\r\n\r\nfunction unlockAllDirection(controls) {\r\n  controls.lockMoveForward(false);\r\n  controls.lockMoveBackward(false);\r\n  controls.lockMoveLeft(false);\r\n  controls.lockMoveRight(false);\r\n}\r\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nlet THREE = window.THREE || require('three');\r\nlet PointerLockControls;\r\n\r\nmodule.exports = PointerLockControls = function ( camera ) {\r\n\r\n  let scope = this;\r\n\r\n  camera.rotation.set( 0, 0, 0 );\r\n\r\n  let pitchObject = new THREE.Object3D();\r\n  pitchObject.name = 'pitchObject';\r\n  pitchObject.add( camera );\r\n\r\n  let yawObject = new THREE.Object3D();\r\n  yawObject.name = 'yawObject';\r\n  yawObject.position.y = 10;\r\n  yawObject.add( pitchObject );\r\n\r\n  let PI_2 = Math.PI / 2;\r\n\r\n  let onMouseMove = function ( event ) {\r\n\r\n    if ( scope.enabled === false ) return;\r\n\r\n    let movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n    let movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n\r\n    yawObject.rotation.y -= movementX * 0.002;\r\n    pitchObject.rotation.x -= movementY * 0.002;\r\n\r\n    pitchObject.rotation.x = Math.max( - PI_2, Math.min( PI_2, pitchObject.rotation.x ) );\r\n\r\n  };\r\n\r\n  this.dispose = function() {\r\n\r\n    document.removeEventListener( 'mousemove', onMouseMove, false );\r\n\r\n  };\r\n\r\n  document.addEventListener( 'mousemove', onMouseMove, false );\r\n\r\n  this.enabled = false;\r\n\r\n  this.getObject = function () {\r\n\r\n    return yawObject;\r\n\r\n  };\r\n\r\n  this.getDirection = function() {\r\n\r\n    // assumes the camera itself is not rotated\r\n\r\n    let direction = new THREE.Vector3( 0, 0, - 1 );\r\n    let rotation = new THREE.Euler( 0, 0, 0, \"YXZ\" );\r\n\r\n    return function( v ) {\r\n\r\n      rotation.set( pitchObject.rotation.x, yawObject.rotation.y, 0 );\r\n\r\n      v.copy( direction ).applyEuler( rotation );\r\n\r\n      return v;\r\n\r\n    };\r\n\r\n  }();\r\n\r\n};\r\n","export function firstPersonOnKeyDown(event, moveForward, moveLeft, moveBackward, moveRight, canJump, velocity) {\r\n\r\n  switch (event.keyCode) {\r\n\r\n    case 38: // up\r\n    case 87: // w\r\n      moveForward = true;\r\n      break;\r\n\r\n    case 37: // left\r\n    case 65: // a\r\n      moveLeft = true;\r\n      break;\r\n\r\n    case 40: // down\r\n    case 83: // s\r\n      moveBackward = true;\r\n      break;\r\n\r\n    case 39: // right\r\n    case 68: // d\r\n      moveRight = true;\r\n      break;\r\n\r\n    case 32: // space\r\n      if ( canJump === true ) velocity.y += 225;\r\n      canJump = false;\r\n      break;\r\n  }\r\n\r\n  return {moveForward, moveLeft, moveBackward, moveRight, canJump}\r\n}\r\n\r\nexport function firstPersonOnKeyUp(event, moveForward, moveLeft, moveBackward, moveRight, canJump) {\r\n\r\n  switch (event.keyCode) {\r\n    case 38: // up\r\n    case 87: // w\r\n      moveForward = false;\r\n      break;\r\n\r\n    case 37: // left\r\n    case 65: // a\r\n      moveLeft = false;\r\n      break;\r\n\r\n    case 40: // down\r\n    case 83: // s\r\n      moveBackward = false;\r\n      break;\r\n\r\n    case 39: // right\r\n    case 68: // d\r\n      moveRight = false;\r\n      break;\r\n  }\r\n  return {moveForward, moveLeft, moveBackward, moveRight, canJump}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport CatalogItem from \"./catalog-item\";\r\nimport CatalogBreadcrumb from \"./catalog-breadcrumb\";\r\nimport CatalogPageItem from \"./catalog-page-item\";\r\nimport CatalogTurnBackPageItem from \"./catalog-turn-back-page-item\";\r\nimport ContentContainer from \"../style/content-container\";\r\nimport ContentTitle from \"../style/content-title\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\n\r\nconst containerStyle = {\r\n  position: \"fixed\",\r\n  width: \"calc( 100% - 51px)\",\r\n  height: \"calc( 100% - 20px)\",\r\n  backgroundColor: \"#FFF\",\r\n  padding: \"1em\",\r\n  left: 50,\r\n  overflowY: \"auto\",\r\n  overflowX: \"hidden\",\r\n  zIndex: 10,\r\n};\r\n\r\nconst itemsStyle = {\r\n  display: \"grid\",\r\n  gridTemplateColumns: \"repeat(auto-fit, minmax(14em, 1fr))\",\r\n  gridGap: \"10px\",\r\n  marginTop: \"1em\",\r\n};\r\n\r\nconst searchContainer = {\r\n  width: \"100%\",\r\n  height: \"3em\",\r\n  padding: \"0.625em\",\r\n  background: \"#f7f7f9\",\r\n  border: \"1px solid #e1e1e8\",\r\n  cursor: \"pointer\",\r\n  position: \"relative\",\r\n  boxShadow: \"0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)\",\r\n  borderRadius: \"2px\",\r\n  transition: \"all .2s ease-in-out\",\r\n  WebkitTransition: \"all .2s ease-in-out\",\r\n  marginBottom: \"1em\",\r\n};\r\n\r\nconst searchText = {\r\n  width: \"8em\",\r\n  display: \"inline-block\",\r\n};\r\n\r\nconst searchInput = {\r\n  width: \"calc( 100% - 10em )\",\r\n  height: \"2em\",\r\n  margin: \"0\",\r\n  padding: \"0 1em\",\r\n  border: \"1px solid #EEE\",\r\n};\r\n\r\nconst historyContainer = {\r\n  ...searchContainer,\r\n  padding: \"0.2em 0.625em\",\r\n};\r\n\r\nconst historyElementStyle = {\r\n  width: \"auto\",\r\n  height: \"2em\",\r\n  lineHeight: \"2em\",\r\n  textAlign: \"center\",\r\n  borderRadius: \"1em\",\r\n  display: \"inline-block\",\r\n  cursor: \"pointer\",\r\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\r\n  color: SharedStyle.PRIMARY_COLOR.text_main,\r\n  textTransform: \"capitalize\",\r\n  margin: \"0.25em\",\r\n  padding: \"0 1em\",\r\n};\r\n\r\nexport default class CatalogList extends Component {\r\n  constructor(props, context) {\r\n    super(props);\r\n\r\n    let page = props.state.catalog.page;\r\n    let currentCategory = context.catalog.getCategory(page);\r\n    let categoriesToDisplay = currentCategory.categories;\r\n    let elementsToDisplay = currentCategory.elements.filter((element) =>\r\n      element.info.visibility ? element.info.visibility.catalog : true\r\n    );\r\n\r\n    this.state = {\r\n      categories: currentCategory.categories,\r\n      elements: elementsToDisplay,\r\n      matchString: \"\",\r\n      matchedElements: [],\r\n    };\r\n  }\r\n\r\n  flattenCategories(categories) {\r\n    let toRet = [];\r\n\r\n    for (let x = 0; x < categories.length; x++) {\r\n      let curr = categories[x];\r\n      toRet = toRet.concat(curr.elements);\r\n      if (curr.categories.length)\r\n        toRet = toRet.concat(this.flattenCategories(curr.categories));\r\n    }\r\n\r\n    return toRet;\r\n  }\r\n\r\n  matcharray(text) {\r\n    let array = this.state.elements.concat(\r\n      this.flattenCategories(this.state.categories)\r\n    );\r\n\r\n    let filtered = [];\r\n\r\n    if (text != \"\") {\r\n      let regexp = new RegExp(text, \"i\");\r\n      for (let i = 0; i < array.length; i++) {\r\n        if (regexp.test(array[i].info.title)) {\r\n          filtered.push(array[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      matchString: text,\r\n      matchedElements: filtered,\r\n    });\r\n  }\r\n\r\n  select(element) {\r\n    console.log(\"selsect\");\r\n    switch (element.prototype) {\r\n      case \"lines\":\r\n        this.context.linesActions.selectToolDrawingLine(element.name);\r\n        break;\r\n      case \"items\":\r\n        this.context.itemsActions.selectToolDrawingItem(element.name);\r\n        break;\r\n      case \"holes\":\r\n        this.context.holesActions.selectToolDrawingHole(element.name);\r\n        break;\r\n    }\r\n\r\n    this.context.projectActions.pushLastSelectedCatalogElementToHistory(\r\n      element\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let page = this.props.state.catalog.page;\r\n    let currentCategory = this.context.catalog.getCategory(page);\r\n    let categoriesToDisplay = currentCategory.categories;\r\n    let elementsToDisplay = currentCategory.elements.filter((element) =>\r\n      element.info.visibility ? element.info.visibility.catalog : true\r\n    );\r\n\r\n    let breadcrumbComponent = null;\r\n\r\n    if (page !== \"root\") {\r\n      let breadcrumbsNames = [];\r\n\r\n      this.props.state.catalog.path.forEach((pathName) => {\r\n        breadcrumbsNames.push({\r\n          name: this.context.catalog.getCategory(pathName).label,\r\n          action: () => projectActions.goBackToCatalogPage(pathName),\r\n        });\r\n      });\r\n\r\n      breadcrumbsNames.push({ name: currentCategory.label, action: \"\" });\r\n\r\n      breadcrumbComponent = <CatalogBreadcrumb names={breadcrumbsNames} />;\r\n    }\r\n\r\n    let pathSize = this.props.state.catalog.path.size;\r\n\r\n    let turnBackButton =\r\n      pathSize > 0 ? (\r\n        <CatalogTurnBackPageItem\r\n          key={pathSize}\r\n          page={\r\n            this.context.catalog.categories[\r\n              this.props.state.catalog.path.get(pathSize - 1)\r\n            ]\r\n          }\r\n        />\r\n      ) : null;\r\n\r\n    let selectedHistory = this.props.state.get(\"selectedElementsHistory\");\r\n    let selectedHistoryElements = selectedHistory.map((el, ind) => (\r\n      <div\r\n        key={ind}\r\n        style={historyElementStyle}\r\n        title={el.name}\r\n        onClick={() => this.select(el)}\r\n      >\r\n        {el.name}\r\n      </div>\r\n    ));\r\n\r\n    return (\r\n      <ContentContainer\r\n        width={this.props.width}\r\n        height={this.props.height}\r\n        style={{ ...containerStyle, ...this.props.style }}\r\n      >\r\n        <ContentTitle>{this.context.translator.t(\"Catalog\")}</ContentTitle>\r\n        {breadcrumbComponent}\r\n        <div style={searchContainer}>\r\n          <span style={searchText}>\r\n            {this.context.translator.t(\"Search Element\")}\r\n          </span>\r\n          <input\r\n            type=\"text\"\r\n            style={searchInput}\r\n            onChange={(e) => {\r\n              this.matcharray(e.target.value);\r\n            }}\r\n          />\r\n        </div>\r\n        {selectedHistory.size ? (\r\n          <div style={historyContainer}>\r\n            <span>{this.context.translator.t(\"Last Selected\")}</span>\r\n            {selectedHistoryElements}\r\n          </div>\r\n        ) : null}\r\n        <div style={itemsStyle}>\r\n          {this.state.matchString === \"\"\r\n            ? [\r\n                turnBackButton,\r\n                categoriesToDisplay.map((cat) => (\r\n                  <CatalogPageItem\r\n                    key={cat.name}\r\n                    page={cat}\r\n                    oldPage={currentCategory}\r\n                  />\r\n                )),\r\n                elementsToDisplay.map((elem) => (\r\n                  <CatalogItem key={elem.name} element={elem} />\r\n                )),\r\n              ]\r\n            : this.state.matchedElements.map((elem) => (\r\n                <CatalogItem key={elem.name} element={elem} />\r\n              ))}\r\n        </div>\r\n      </ContentContainer>\r\n    );\r\n  }\r\n}\r\n\r\nCatalogList.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  style: PropTypes.object,\r\n};\r\n\r\nCatalogList.contextTypes = {\r\n  catalog: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired,\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {FaPlusCircle as IconAdd} from 'react-icons/fa';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst STYLE_BOX = {\r\n  width: '14em',\r\n  height: '14em',\r\n  padding: '0.625em',\r\n  background: '#f7f7f9',\r\n  border: '1px solid #e1e1e8',\r\n  cursor: 'pointer',\r\n  position: 'relative',\r\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\r\n  borderRadius: '2px',\r\n  transition: 'all .15s ease-in-out',\r\n  WebkitTransition: 'all .15s ease-in-out',\r\n  alignSelf: 'center',\r\n  justifySelf: 'center',\r\n};\r\n\r\nconst STYLE_BOX_HOVER = {\r\n  ...STYLE_BOX,\r\n  background: SharedStyle.SECONDARY_COLOR.main\r\n};\r\n\r\nconst STYLE_TITLE = {\r\n  width:'100%',\r\n  textAlign:'center',\r\n  display:'block',\r\n  marginBottom:'.5em',\r\n  textTransform: 'capitalize'\r\n};\r\n\r\nconst STYLE_TITLE_HOVER = {\r\n  ...STYLE_TITLE,\r\n  color:SharedStyle.COLORS.white\r\n};\r\n\r\nconst STYLE_IMAGE_CONTAINER = {\r\n  width: '100%',\r\n  height: '8em',\r\n  position:'relative',\r\n  overflow:'hidden',\r\n  border: 'solid 1px #e6e6e6',\r\n  padding:0,\r\n  margin:0,\r\n  marginBottom: '5px'\r\n};\r\n\r\nconst STYLE_IMAGE = {\r\n  position:'absolute',\r\n  background: '#222',\r\n  width: '100%',\r\n  height: '100%',\r\n  backgroundSize: 'contain',\r\n  backgroundPosition:'50% 50%',\r\n  backgroundColor:SharedStyle.COLORS.white,\r\n  backgroundRepeat:'no-repeat',\r\n  transition: 'all .2s ease-in-out'\r\n};\r\n\r\nconst STYLE_IMAGE_HOVER = {\r\n  ...STYLE_IMAGE,\r\n  transform: 'scale(1.2)'\r\n};\r\n\r\nconst STYLE_PLUS_HOVER = {\r\n  marginTop:'1.5em',\r\n  color: SharedStyle.SECONDARY_COLOR.main,\r\n  fontSize: '2em',\r\n  opacity: '0.7',\r\n  width: '100%'\r\n};\r\n\r\nconst STYLE_DESCRIPTION = {\r\n  display: 'block',\r\n  display: '-webkit-box',\r\n  height: '2em',\r\n  margin: '0 auto',\r\n  fontSize: '0.75em',\r\n  fontStyle:'italic',\r\n  lineHeight: '1em',\r\n  WebkitLineClamp: '2',\r\n  WebkitBoxOrient: 'vertical',\r\n  overflow: 'hidden',\r\n  textOverflow: 'ellipsis',\r\n};\r\n\r\nconst STYLE_TAGS = {\r\n  listStyle: 'none',\r\n  margin: '0px',\r\n  padding: '0px',\r\n  fontSize: '11px',\r\n  marginBottom: '3px'\r\n};\r\n\r\nconst STYLE_TAG = {\r\n  display: 'inline-block',\r\n  background: '#337ab7',\r\n  color: SharedStyle.COLORS.white,\r\n  padding: '1px 4px',\r\n  marginRight: '3px',\r\n  borderRadius: '3px'\r\n};\r\n\r\nexport default class CatalogItem extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {hover: false};\r\n  }\r\n\r\n  select() {\r\n    let element = this.props.element;\r\n\r\n    switch (element.prototype) {\r\n      case 'lines':\r\n        this.context.linesActions.selectToolDrawingLine(element.name);\r\n        break;\r\n      case 'items':\r\n        this.context.itemsActions.selectToolDrawingItem(element.name);\r\n        break;\r\n      case 'holes':\r\n        this.context.holesActions.selectToolDrawingHole(element.name);\r\n        break;\r\n    }\r\n\r\n    this.context.projectActions.pushLastSelectedCatalogElementToHistory(element);\r\n  }\r\n\r\n  render() {\r\n    let element = this.props.element;\r\n    let hover = this.state.hover;\r\n\r\n    return (\r\n      <div\r\n        style={hover ? STYLE_BOX_HOVER : STYLE_BOX}\r\n        onClick={e => this.select()}\r\n        onMouseEnter={e => this.setState({hover: true})}\r\n        onMouseLeave={e => this.setState({hover: false})}\r\n      >\r\n        <b style={ !hover ? STYLE_TITLE : STYLE_TITLE_HOVER }>{element.info.title}</b>\r\n        <div style={ STYLE_IMAGE_CONTAINER }>\r\n          <div style={{...( !hover ? STYLE_IMAGE: STYLE_IMAGE_HOVER ), backgroundImage: 'url(' + element.info.image + ')'}}>\r\n            { hover ? <IconAdd style={STYLE_PLUS_HOVER} /> : null }\r\n          </div>\r\n        </div>\r\n        <ul style={STYLE_TAGS}>\r\n          {element.info.tag.map((tag, index) => <li style={STYLE_TAG} key={index}>{tag}</li>)}\r\n        </ul>\r\n        <div style={STYLE_DESCRIPTION}>{element.info.description}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCatalogItem.propTypes = {\r\n  element: PropTypes.object.isRequired,\r\n};\r\n\r\nCatalogItem.contextTypes = {\r\n  itemsActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {MdArrowBack as Arrow} from 'react-icons/md';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst breadcrumbStyle = {\r\n  margin: '1.5em',\r\n  display: 'flex'\r\n};\r\n\r\nconst breadcrumbTextStyle = {\r\n  fontSize: '20px',\r\n  cursor: 'pointer'\r\n};\r\n\r\nconst breadcrumbLastTextStyle = {\r\n  ...breadcrumbTextStyle,\r\n  fontWeight:'bolder',\r\n  color:SharedStyle.SECONDARY_COLOR.main\r\n};\r\n\r\nconst breadcrumbTabStyle = {\r\n  fill: SharedStyle.COLORS.black,\r\n  fontSize: '24px',\r\n  marginLeft: '10px',\r\n  marginRight: '10px'\r\n};\r\n\r\nconst CatalogBreadcrumb = ({ names }) => {\r\n\r\n  let labelNames = names.map((name, ind) => {\r\n\r\n    let lastElement = ind === names.length - 1;\r\n\r\n    return <div key={ind} style={{ display: 'flex' }}>\r\n        <div style={ !lastElement ? breadcrumbTextStyle : breadcrumbLastTextStyle } onClick={name.action || null}>{name.name}</div>\r\n        { !lastElement ? <Arrow style={breadcrumbTabStyle} /> : null }\r\n    </div>\r\n  });\r\n\r\n  return <div style={breadcrumbStyle}>{labelNames}</div>;\r\n};\r\n\r\nCatalogBreadcrumb.propTypes = {\r\n  names: PropTypes.arrayOf(PropTypes.object).isRequired\r\n};\r\n\r\nexport default CatalogBreadcrumb;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MdNavigateNext } from \"react-icons/md\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\n\r\nconst STYLE_BOX = {\r\n  width: \"14em\",\r\n  height: \"14em\",\r\n  padding: \"0.625em\",\r\n  background: \"#f7f7f9\",\r\n  border: \"1px solid #e1e1e8\",\r\n  cursor: \"pointer\",\r\n  position: \"relative\",\r\n  boxShadow: \"0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)\",\r\n  borderRadius: \"2px\",\r\n  transition: \"all .2s ease-in-out\",\r\n  WebkitTransition: \"all .2s ease-in-out\",\r\n  alignSelf: \"center\",\r\n  justifySelf: \"center\",\r\n};\r\n\r\nconst STYLE_BOX_HOVER = {\r\n  ...STYLE_BOX,\r\n  background: SharedStyle.SECONDARY_COLOR.main,\r\n};\r\n\r\nconst STYLE_TITLE = {\r\n  width: \"100%\",\r\n  position: \"absolute\",\r\n  textAlign: \"center\",\r\n  display: \"block\",\r\n  marginBottom: \".5em\",\r\n  padding: \"1em\",\r\n  textTransform: \"capitalize\",\r\n  WebkitTransition: \"all .15s ease-in-out\",\r\n};\r\n\r\nconst STYLE_TITLE_HOVERED = {\r\n  ...STYLE_TITLE,\r\n  fontSize: \"1.4em\",\r\n  transform: \"translateY(-60px)\",\r\n  color: \"rgb(28, 166, 252)\",\r\n  marginTop: \"0.5em\",\r\n};\r\n\r\nconst STYLE_NEXT_HOVER = {\r\n  position: \"absolute\",\r\n  color: SharedStyle.SECONDARY_COLOR.main,\r\n  fontSize: \"5em\",\r\n  width: \"100%\",\r\n};\r\n\r\nconst CONTAINER_DIV = {\r\n  background: SharedStyle.COLORS.white,\r\n  marginBottom: \"5px\",\r\n  border: \"solid 1px #EEE\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n};\r\n\r\nexport default class CatalogPageItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hover: false };\r\n  }\r\n\r\n  changePage(newPage) {\r\n    this.context.projectActions.changeCatalogPage(\r\n      newPage,\r\n      this.props.oldPage.name\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let page = this.props.page;\r\n    let hover = this.state.hover;\r\n\r\n    return (\r\n      <div\r\n        style={hover ? STYLE_BOX_HOVER : STYLE_BOX}\r\n        onClick={(e) => this.changePage(page.name)}\r\n        onMouseEnter={(e) => this.setState({ hover: true })}\r\n        onMouseLeave={(e) => this.setState({ hover: false })}\r\n      >\r\n        {hover ? (\r\n          <div style={CONTAINER_DIV}>\r\n            <b style={STYLE_TITLE_HOVERED}>{page.label}</b>\r\n            <MdNavigateNext style={STYLE_NEXT_HOVER} />\r\n          </div>\r\n        ) : (\r\n          <div style={CONTAINER_DIV}>\r\n            <b style={STYLE_TITLE}>{page.label}</b>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCatalogPageItem.propTypes = {\r\n  page: PropTypes.object.isRequired,\r\n  oldPage: PropTypes.object.isRequired,\r\n};\r\n\r\nCatalogPageItem.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {MdNavigateBefore} from 'react-icons/md';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst STYLE_BOX = {\r\n  width: '14em',\r\n  height: '14em',\r\n  padding: '0.625em',\r\n  background: '#f7f7f9',\r\n  border: '1px solid #e1e1e8',\r\n  margin: '0.3em',\r\n  cursor: 'pointer',\r\n  position: 'relative',\r\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\r\n  borderRadius: '2px',\r\n  transition: 'all .2s ease-in-out',\r\n  WebkitTransition: 'all .2s ease-in-out'\r\n};\r\n\r\nconst STYLE_BOX_HOVER = {\r\n  ...STYLE_BOX,\r\n  background: SharedStyle.SECONDARY_COLOR.main\r\n};\r\n\r\nconst STYLE_BACK = {\r\n  position: 'absolute',\r\n  color: SharedStyle.COLORS.black,\r\n  fontSize: '5em',\r\n  width: '100%'\r\n};\r\n\r\nconst STYLE_BACK_HOVER = {\r\n  ...STYLE_BACK,\r\n  color: SharedStyle.SECONDARY_COLOR.main\r\n};\r\n\r\nconst CONTAINER_DIV = {\r\n  background: SharedStyle.COLORS.white,\r\n  marginBottom: '5px',\r\n  border: 'solid 1px #e6e6e6',\r\n  width: '100%',\r\n  height: '100%',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center'\r\n};\r\n\r\nexport default class CatalogTurnBackPageItem extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {hover: false};\r\n  }\r\n\r\n  changePage(newPage) {\r\n    this.context.projectActions.goBackToCatalogPage(newPage)\r\n  }\r\n\r\n  render() {\r\n    let page = this.props.page;\r\n    let hover = this.state.hover;\r\n\r\n    return (\r\n      <div\r\n        style={hover ? STYLE_BOX_HOVER : STYLE_BOX}\r\n        onClick={e => this.changePage(page.name)}\r\n        onMouseEnter={e => this.setState({hover: true})}\r\n        onMouseLeave={e => this.setState({hover: false})}\r\n      >\r\n        <div style={CONTAINER_DIV}>\r\n          <MdNavigateBefore style={ !hover ? STYLE_BACK : STYLE_BACK_HOVER}/>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCatalogTurnBackPageItem.propTypes = {\r\n  page: PropTypes.object.isRequired\r\n};\r\n\r\nCatalogTurnBackPageItem.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  ContentTitle,\r\n  ContentContainer,\r\n  FormLabel,\r\n  FormBlock,\r\n  FormNumberInput,\r\n  FormSubmitButton,\r\n  CancelButton\r\n} from '../style/export';\r\n\r\nexport default class ProjectConfigurator extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    let scene = props.state.scene;\r\n\r\n    this.state = {\r\n      dataWidth: scene.width,\r\n      dataHeight: scene.height,\r\n    };\r\n  }\r\n\r\n  onSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    let {projectActions} = this.context;\r\n\r\n    let {dataWidth, dataHeight} = this.state;\r\n    dataWidth = parseInt(dataWidth);\r\n    dataHeight = parseInt(dataHeight);\r\n    if (dataWidth <= 100 || dataHeight <= 100) {\r\n      alert('Scene size too small');\r\n    } else {\r\n      projectActions.setProjectProperties({width: dataWidth, height: dataHeight});\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    let {width, height} = this.props;\r\n    let {dataWidth, dataHeight} = this.state;\r\n    let {projectActions, translator} = this.context;\r\n\r\n    return (\r\n      <ContentContainer width={width} height={height}>\r\n        <ContentTitle>{translator.t('Project config')}</ContentTitle>\r\n\r\n        <form onSubmit={e => this.onSubmit(e)}>\r\n          <FormBlock>\r\n            <FormLabel htmlFor='width'>{translator.t('width')}</FormLabel>\r\n            <FormNumberInput\r\n              id='width'\r\n              placeholder='width'\r\n              value={dataWidth}\r\n              onChange={e => this.setState({dataWidth: e.target.value})}\r\n            />\r\n          </FormBlock>\r\n\r\n          <FormBlock>\r\n            <FormLabel htmlFor='height'>{translator.t('height')}</FormLabel>\r\n            <FormNumberInput\r\n              id='height'\r\n              placeholder='height'\r\n              value={dataHeight}\r\n              onChange={e => this.setState({dataHeight: e.target.value})}\r\n            />\r\n          </FormBlock>\r\n\r\n          <table style={{float: 'right'}}>\r\n            <tbody>\r\n            <tr>\r\n              <td>\r\n                <CancelButton size='large'\r\n                              onClick={e => projectActions.rollback()}>{translator.t('Cancel')}</CancelButton>\r\n              </td>\r\n              <td>\r\n                <FormSubmitButton size='large'>{translator.t('Save')}</FormSubmitButton>\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </form>\r\n      </ContentContainer>\r\n    )\r\n  }\r\n}\r\n\r\nProjectConfigurator.propTypes = {\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nProjectConfigurator.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import Sidebar from './sidebar';\r\nimport Panel from './panel';\r\nimport PanelLayers from './panel-layers';\r\nimport PanelLayerElement from './panel-layer-elements';\r\nimport PanelGuides from './panel-guides';\r\n\r\nexport {\r\n  Sidebar,\r\n  Panel,\r\n  PanelLayers,\r\n  PanelLayerElement,\r\n  PanelGuides\r\n};\r\n\r\nexport default {\r\n  Sidebar,\r\n  Panel,\r\n  PanelLayers,\r\n  PanelLayerElement,\r\n  PanelGuides\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport PanelElementEditor from './panel-element-editor/panel-element-editor';\r\nimport PanelGroupEditor from './panel-group-editor';\r\nimport PanelMultiElementsEditor from './panel-element-editor/panel-multi-elements-editor';\r\nimport PanelLayers from './panel-layers';\r\nimport PanelGuides from './panel-guides';\r\nimport PanelGroups from './panel-groups';\r\nimport PanelLayerElements from './panel-layer-elements';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport If from '../../utils/react-if';\r\n\r\nconst STYLE = {\r\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\r\n  display: 'block',\r\n  overflowY: 'auto',\r\n  overflowX: 'hidden',\r\n  paddingBottom: '20px'\r\n};\r\n\r\nconst sortButtonsCb = (a, b) => {\r\n  if (a.index === undefined || a.index === null) {\r\n    a.index = Number.MAX_SAFE_INTEGER;\r\n  }\r\n\r\n  if (b.index === undefined || b.index === null) {\r\n    b.index = Number.MAX_SAFE_INTEGER;\r\n  }\r\n\r\n  return a.index - b.index;\r\n};\r\n\r\nconst mapButtonsCb = (el, ind) => <If key={ind} condition={el.condition} style={{ position: 'relative' }}>{el.dom}</If>;\r\n\r\nexport default function Sidebar({ state, width, height, sidebarComponents }) {\r\n\r\n  let selectedLayer = state.getIn(['scene', 'selectedLayer']);\r\n\r\n  //TODO change in multi-layer check\r\n  let selected = state.getIn(['scene', 'layers', selectedLayer, 'selected']);\r\n\r\n  let multiselected =\r\n    selected.lines.size > 1 ||\r\n    selected.items.size > 1 ||\r\n    selected.holes.size > 1 ||\r\n    selected.areas.size > 1 ||\r\n    selected.lines.size + selected.items.size + selected.holes.size + selected.areas.size > 1;\r\n\r\n  let selectedGroup = state.getIn(['scene', 'groups']).findEntry( g => g.get('selected') );\r\n\r\n  let sorter = [\r\n    { index: 0, condition: true, dom: <PanelGuides state={state}/> },\r\n    { index: 1, condition: true, dom: <PanelLayers state={state} /> },\r\n    { index: 2, condition: true, dom: <PanelLayerElements mode={state.mode} layers={state.scene.layers} selectedLayer={state.scene.selectedLayer} /> },\r\n    { index: 3, condition: true, dom: <PanelGroups mode={state.mode} groups={state.scene.groups} layers={state.scene.layers} /> },\r\n    { index: 4, condition: !multiselected, dom: <PanelElementEditor state={state} /> },\r\n    //{ index: 5, condition: multiselected, dom: <PanelMultiElementsEditor state={state} /> },\r\n    { index: 6, condition: !!selectedGroup, dom: <PanelGroupEditor state={state} groupID={selectedGroup ? selectedGroup[0] : null} /> }\r\n  ];\r\n\r\n  sorter = sorter.concat(sidebarComponents.map((Component, key) => {\r\n    return Component.prototype ? //if is a react component\r\n      {\r\n        condition: true,\r\n        dom: React.createElement(Component, { state, key })\r\n      } :\r\n      {                           //else is a sortable toolbar button\r\n        index: Component.index,\r\n        condition: Component.condition,\r\n        dom: React.createElement(Component.dom, { state, key })\r\n      };\r\n  }));\r\n\r\n  return (\r\n    <aside\r\n      style={{ width, height, ...STYLE }}\r\n      onKeyDown={event => event.stopPropagation()}\r\n      onKeyUp={event => event.stopPropagation()}\r\n      className=\"sidebar\"\r\n    >\r\n      {sorter.sort(sortButtonsCb).map(mapButtonsCb)}\r\n    </aside>\r\n  );\r\n}\r\n\r\nSidebar.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Panel from '../panel';\r\nimport {Seq} from 'immutable';\r\nimport {\r\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM,MODE_RESIZE_ITEM_RIGHT_TOP, MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP\r\n} from '../../../constants';\r\nimport ElementEditor from './element-editor';\r\n\r\nexport default function PanelElementEditor({state}, {projectActions, translator}) {\r\n\r\n  let {scene, mode} = state;\r\n\r\n  if (![MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN,\r\n      MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n      MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM,\r\n      MODE_DRAGGING_LINE, MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE,\r\n      MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM, MODE_RESIZE_ITEM_RIGHT_TOP, , MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP, MODE_UPLOADING_IMAGE, MODE_FITTING_IMAGE].includes(mode)) return null;\r\n\r\n  let componentRenderer = (element, layer) =>\r\n    <Panel key={element.id} name={translator.t('Properties: [{0}] {1}', element.type, element.id)} opened={true}>\r\n      <div style={{padding: '5px 15px'}}>\r\n        <ElementEditor element={element} layer={layer} state={state}/>\r\n      </div>\r\n    </Panel>;\r\n\r\n  let layerRenderer = layer => Seq()\r\n    .concat(layer.lines, layer.holes, layer.areas, layer.items)\r\n    .filter(element => element.selected)\r\n    .map(element => componentRenderer(element, layer))\r\n    .valueSeq();\r\n\r\n  return <div>{scene.layers.valueSeq().map(layerRenderer)}</div>\r\n\r\n}\r\n\r\nPanelElementEditor.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nPanelElementEditor.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Map, fromJS} from 'immutable';\r\nimport AttributesEditor from './attributes-editor/attributes-editor';\r\nimport { GeometryUtils, MathUtils } from '../../../utils/export';\r\nimport * as SharedStyle from '../../../shared-style';\r\nimport convert from 'convert-units';\r\nimport {MdContentCopy, MdContentPaste} from 'react-icons/md';\r\n\r\nconst PRECISION = 2;\r\n\r\nconst attrPorpSeparatorStyle = {\r\n  margin: '0.5em 0.25em 0.5em 0',\r\n  border: '2px solid ' + SharedStyle.SECONDARY_COLOR.alt,\r\n  position:'relative',\r\n  height:'2.5em',\r\n  borderRadius:'2px'\r\n};\r\n\r\nconst headActionStyle = {\r\n  position:'absolute',\r\n  right:'0.5em',\r\n  top:'0.5em'\r\n};\r\n\r\nconst iconHeadStyle = {\r\n  float:'right',\r\n  margin:'-3px 4px 0px 0px',\r\n  padding:0,\r\n  cursor:'pointer',\r\n  fontSize:'1.4em'\r\n};\r\n\r\nexport default class ElementEditor extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      attributesFormData: this.initAttrData(this.props.element, this.props.layer, this.props.state),\r\n      propertiesFormData: this.initPropData(this.props.element, this.props.layer, this.props.state)\r\n    };\r\n\r\n    this.updateAttribute = this.updateAttribute.bind(this);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if(\r\n      this.state.attributesFormData.hashCode() !== nextState.attributesFormData.hashCode() ||\r\n      this.state.propertiesFormData.hashCode() !== nextState.propertiesFormData.hashCode() ||\r\n      this.props.state.clipboardProperties.hashCode() !== nextProps.state.clipboardProperties.hashCode()\r\n    ) return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  componentWillReceiveProps({ element, layer, state }) {\r\n    let { prototype, id } = element;\r\n    let scene = this.props.state.get('scene');\r\n    let selectedLayer = scene.getIn(['layers', scene.get('selectedLayer')]);\r\n    let selected = selectedLayer.getIn([prototype, id]);\r\n\r\n    if( selectedLayer.hashCode() !== layer.hashCode() ) this.setState({\r\n      attributesFormData: this.initAttrData(element, layer, state),\r\n      propertiesFormData: this.initPropData(element, layer, state)\r\n    });\r\n  }\r\n\r\n  initAttrData(element, layer, state) {\r\n\r\n    element = typeof element.misc === 'object' ? element.set('misc', new Map(element.misc)) : element;\r\n\r\n    switch (element.prototype) {\r\n      case 'items': {\r\n        return new Map(element);\r\n      }\r\n      case 'lines': {\r\n        let v_a = layer.vertices.get(element.vertices.get(0));\r\n        let v_b = layer.vertices.get(element.vertices.get(1));\r\n\r\n        let distance = GeometryUtils.pointsDistance(v_a.x, v_a.y, v_b.x, v_b.y);\r\n        let _unit = element.misc.get('_unitLength') || this.context.catalog.unit;\r\n        let _length = convert(distance).from(this.context.catalog.unit).to(_unit);\r\n\r\n        return new Map({\r\n          vertexOne: v_a,\r\n          vertexTwo: v_b,\r\n          lineLength: new Map({length: distance, _length, _unit}),\r\n        });\r\n      }\r\n      case 'holes': {\r\n        let line = layer.lines.get(element.line);\r\n        let {x: x0, y: y0} = layer.vertices.get(line.vertices.get(0));\r\n        let {x: x1, y: y1} = layer.vertices.get(line.vertices.get(1));\r\n        let lineLength = GeometryUtils.pointsDistance(x0, y0, x1, y1);\r\n        let startAt = lineLength * element.offset - element.properties.get('width').get('length') / 2;\r\n\r\n        let _unitA = element.misc.get('_unitA') || this.context.catalog.unit;\r\n        let _lengthA = convert(startAt).from(this.context.catalog.unit).to(_unitA);\r\n\r\n        let endAt = lineLength - lineLength * element.offset - element.properties.get('width').get('length') / 2;\r\n        let _unitB = element.misc.get('_unitB') || this.context.catalog.unit;\r\n        let _lengthB = convert(endAt).from(this.context.catalog.unit).to(_unitB);\r\n\r\n        return new Map({\r\n          offset: element.offset,\r\n          offsetA: new Map({\r\n            length: MathUtils.toFixedFloat(startAt, PRECISION),\r\n            _length: MathUtils.toFixedFloat(_lengthA, PRECISION),\r\n            _unit: _unitA\r\n          }),\r\n          offsetB: new Map({\r\n            length: MathUtils.toFixedFloat(endAt, PRECISION),\r\n            _length: MathUtils.toFixedFloat(_lengthB, PRECISION),\r\n            _unit: _unitB\r\n          })\r\n        });\r\n      }\r\n      case 'areas': {\r\n        return new Map({});\r\n      }\r\n      default:\r\n        return null;\r\n    }\r\n\r\n\r\n  }\r\n\r\n  initPropData(element, layer, state) {\r\n    let {catalog} = this.context;\r\n    let catalogElement = catalog.getElement(element.type);\r\n\r\n    let mapped = {};\r\n    for (let name in catalogElement.properties) {\r\n      mapped[name] = new Map({\r\n        currentValue: element.properties.has(name) ? element.properties.get(name) : fromJS(catalogElement.properties[name].defaultValue),\r\n        configs: catalogElement.properties[name]\r\n      });\r\n    }\r\n\r\n    return new Map(mapped);\r\n  }\r\n\r\n  updateAttribute(attributeName, value) {\r\n\r\n    let {attributesFormData} = this.state;\r\n\r\n    switch (this.props.element.prototype) {\r\n      case 'items': {\r\n        attributesFormData = attributesFormData.set(attributeName, value);\r\n        break;\r\n      }\r\n      case 'lines': {\r\n        switch(attributeName)\r\n        {\r\n          case 'lineLength':\r\n          {\r\n            let v_0 = attributesFormData.get('vertexOne');\r\n            let v_1 = attributesFormData.get('vertexTwo');\r\n\r\n            let [v_a, v_b] = GeometryUtils.orderVertices([v_0, v_1]);\r\n\r\n            let v_b_new = GeometryUtils.extendLine(v_a.x, v_a.y, v_b.x, v_b.y, value.get('length'), PRECISION);\r\n\r\n            attributesFormData = attributesFormData.withMutations(attr => {\r\n              attr.set(v_0 === v_a ? 'vertexTwo' : 'vertexOne', v_b.merge(v_b_new));\r\n              attr.set('lineLength', value);\r\n            });\r\n            break;\r\n          }\r\n          case 'vertexOne':\r\n          case 'vertexTwo':\r\n          {\r\n            attributesFormData = attributesFormData.withMutations(attr => {\r\n              attr.set(attributeName, attr.get(attributeName).merge(value));\r\n\r\n              let newDistance = GeometryUtils.verticesDistance(attr.get('vertexOne'), attr.get('vertexTwo'));\r\n\r\n              attr.mergeIn(['lineLength'], attr.get('lineLength').merge({\r\n                'length': newDistance,\r\n                '_length': convert(newDistance).from(this.context.catalog.unit).to(attr.get('lineLength').get('_unit'))\r\n              }));\r\n            });\r\n            break;\r\n          }\r\n          default:\r\n          {\r\n            attributesFormData = attributesFormData.set(attributeName, value);\r\n            break;\r\n          }\r\n        }\r\n        break;\r\n      }\r\n      case 'holes': {\r\n        switch( attributeName )\r\n        {\r\n          case 'offsetA':\r\n          {\r\n            let line = this.props.layer.lines.get(this.props.element.line);\r\n\r\n            let orderedVertices = GeometryUtils.orderVertices([\r\n              this.props.layer.vertices.get(line.vertices.get(0)),\r\n              this.props.layer.vertices.get(line.vertices.get(1))\r\n            ]);\r\n\r\n            let [ {x: x0, y: y0}, {x: x1, y: y1} ] = orderedVertices;\r\n\r\n            let alpha = GeometryUtils.angleBetweenTwoPoints(x0, y0, x1, y1);\r\n            let lineLength = GeometryUtils.pointsDistance(x0, y0, x1, y1);\r\n            let widthLength = this.props.element.properties.get('width').get('length');\r\n            let halfWidthLength = widthLength / 2;\r\n\r\n            let lengthValue = value.get('length');\r\n            lengthValue = Math.max(lengthValue, 0);\r\n            lengthValue = Math.min(lengthValue, lineLength - widthLength);\r\n\r\n            let xp = (lengthValue + halfWidthLength) * Math.cos(alpha) + x0;\r\n            let yp = (lengthValue + halfWidthLength) * Math.sin(alpha) + y0;\r\n\r\n            let offset = GeometryUtils.pointPositionOnLineSegment(x0, y0, x1, y1, xp, yp);\r\n\r\n            let endAt = MathUtils.toFixedFloat(lineLength - (lineLength * offset) - halfWidthLength, PRECISION);\r\n            let offsetUnit = attributesFormData.getIn(['offsetB', '_unit']);\r\n\r\n            let offsetB = new Map({\r\n              length: endAt,\r\n              _length: convert(endAt).from(this.context.catalog.unit).to(offsetUnit),\r\n              _unit: offsetUnit\r\n            });\r\n\r\n            attributesFormData = attributesFormData.set('offsetB', offsetB).set('offset', offset);\r\n\r\n            let offsetAttribute = new Map({\r\n              length: MathUtils.toFixedFloat(lengthValue, PRECISION),\r\n              _unit: value.get('_unit'),\r\n              _length: MathUtils.toFixedFloat(convert(lengthValue).from(this.context.catalog.unit).to(value.get('_unit')), PRECISION)\r\n            });\r\n\r\n            attributesFormData = attributesFormData.set(attributeName, offsetAttribute);\r\n\r\n            break;\r\n          }\r\n          case 'offsetB':\r\n          {\r\n            let line = this.props.layer.lines.get(this.props.element.line);\r\n\r\n            let orderedVertices = GeometryUtils.orderVertices([\r\n              this.props.layer.vertices.get(line.vertices.get(0)),\r\n              this.props.layer.vertices.get(line.vertices.get(1))\r\n            ]);\r\n\r\n            let [ {x: x0, y: y0}, {x: x1, y: y1} ] = orderedVertices;\r\n\r\n            let alpha = GeometryUtils.angleBetweenTwoPoints(x0, y0, x1, y1);\r\n            let lineLength = GeometryUtils.pointsDistance(x0, y0, x1, y1);\r\n            let widthLength = this.props.element.properties.get('width').get('length');\r\n            let halfWidthLength = widthLength / 2;\r\n\r\n            let lengthValue = value.get('length');\r\n            lengthValue = Math.max(lengthValue, 0);\r\n            lengthValue = Math.min(lengthValue, lineLength - widthLength);\r\n\r\n            let xp = x1 - (lengthValue + halfWidthLength) * Math.cos(alpha);\r\n            let yp = y1 - (lengthValue + halfWidthLength) * Math.sin(alpha);\r\n\r\n            let offset = GeometryUtils.pointPositionOnLineSegment(x0, y0, x1, y1, xp, yp);\r\n\r\n            let startAt = MathUtils.toFixedFloat((lineLength * offset) - halfWidthLength, PRECISION);\r\n            let offsetUnit = attributesFormData.getIn(['offsetA', '_unit']);\r\n\r\n            let offsetA = new Map({\r\n              length: startAt,\r\n              _length: convert(startAt).from(this.context.catalog.unit).to(offsetUnit),\r\n              _unit: offsetUnit\r\n            });\r\n\r\n            attributesFormData = attributesFormData.set('offsetA', offsetA).set('offset', offset);\r\n\r\n            let offsetAttribute = new Map({\r\n              length: MathUtils.toFixedFloat(lengthValue, PRECISION),\r\n              _unit: value.get('_unit'),\r\n              _length: MathUtils.toFixedFloat(convert(lengthValue).from(this.context.catalog.unit).to(value.get('_unit')), PRECISION)\r\n            });\r\n\r\n            attributesFormData = attributesFormData.set(attributeName, offsetAttribute);\r\n\r\n            break;\r\n          }\r\n          default:\r\n          {\r\n            attributesFormData = attributesFormData.set(attributeName, value);\r\n            break;\r\n          }\r\n        };\r\n        break;\r\n      }\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.setState({attributesFormData});\r\n    this.save({attributesFormData});\r\n  }\r\n\r\n  updateProperty(propertyName, value) {\r\n    let {state: {propertiesFormData}} = this;\r\n    propertiesFormData = propertiesFormData.setIn([propertyName, 'currentValue'], value);\r\n    this.setState({propertiesFormData});\r\n    this.save({propertiesFormData});\r\n  }\r\n\r\n  reset() {\r\n    this.setState({propertiesFormData: this.initPropData(this.props.element, this.props.layer, this.props.state)});\r\n  }\r\n\r\n  save({propertiesFormData, attributesFormData}) {\r\n\r\n    if( propertiesFormData ) {\r\n      let properties = propertiesFormData.map(data => {\r\n        return data.get('currentValue');\r\n      });\r\n\r\n      this.context.projectActions.setProperties(properties);\r\n    }\r\n\r\n    if( attributesFormData ) {\r\n      switch (this.props.element.prototype) {\r\n        case 'items': {\r\n          this.context.projectActions.setItemsAttributes(attributesFormData);\r\n          break;\r\n        }\r\n        case 'lines': {\r\n          this.context.projectActions.setLinesAttributes(attributesFormData);\r\n          break;\r\n        }\r\n        case 'holes': {\r\n          this.context.projectActions.setHolesAttributes(attributesFormData);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  copyProperties( properties ) {\r\n    this.context.projectActions.copyProperties( properties );\r\n  }\r\n\r\n  pasteProperties() {\r\n    this.context.projectActions.pasteProperties();\r\n  }\r\n\r\n  render() {\r\n    let {\r\n      state: {propertiesFormData, attributesFormData},\r\n      context: {projectActions, catalog, translator},\r\n      props: {state: appState, element},\r\n    } = this;\r\n\r\n    return (\r\n      <div>\r\n\r\n        <AttributesEditor\r\n          element={element}\r\n          onUpdate={this.updateAttribute}\r\n          attributeFormData={attributesFormData}\r\n          state={appState}\r\n        />\r\n\r\n        <div style={attrPorpSeparatorStyle}>\r\n          <div style={headActionStyle}>\r\n            <div title={translator.t('Copy')} style={iconHeadStyle} onClick={ e => this.copyProperties(element.properties) }><MdContentCopy /></div>\r\n            {\r\n              appState.get('clipboardProperties') && appState.get('clipboardProperties').size ?\r\n                <div title={translator.t('Paste')} style={iconHeadStyle} onClick={ e => this.pasteProperties() }><MdContentPaste /></div> : null\r\n            }\r\n          </div>\r\n        </div>\r\n\r\n        {propertiesFormData.entrySeq()\r\n          .map(([propertyName, data]) => {\r\n\r\n            let currentValue = data.get('currentValue'), configs = data.get('configs');\r\n\r\n            let {Editor} = catalog.getPropertyType(configs.type);\r\n\r\n            return <Editor\r\n              key={propertyName}\r\n              propertyName={propertyName}\r\n              value={currentValue}\r\n              configs={configs}\r\n              onUpdate={value => this.updateProperty(propertyName, value)}\r\n              state={appState}\r\n              sourceElement={element}\r\n              internalState={this.state}\r\n            />\r\n          })\r\n        }\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nElementEditor.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  element: PropTypes.object.isRequired,\r\n  layer: PropTypes.object.isRequired\r\n};\r\n\r\nElementEditor.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  catalog: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ItemAttributesEditor from './item-attributes-editor';\r\nimport LineAttributesEditor from './line-attributes-editor';\r\nimport HoleAttributesEditor from './hole-attributes-editor';\r\n\r\n\r\nexport default function AttributesEditor({element, onUpdate, onValid, attributeFormData, state, ...rest}) {\r\n\r\n  switch (element.prototype) {\r\n    case 'items':\r\n      return <ItemAttributesEditor\r\n              element={element}\r\n              onUpdate={onUpdate}\r\n              onValid={onValid}\r\n              attributeFormData={attributeFormData}\r\n              state={state}\r\n              {...rest}\r\n            />;\r\n    case 'lines':\r\n      return <LineAttributesEditor\r\n              element={element}\r\n              onUpdate={onUpdate}\r\n              onValid={onValid}\r\n              attributeFormData={attributeFormData}\r\n              state={state}\r\n              {...rest}\r\n            />;\r\n    case 'holes':\r\n      return <HoleAttributesEditor\r\n              element={element}\r\n              onUpdate={onUpdate}\r\n              onValid={onValid}\r\n              attributeFormData={attributeFormData}\r\n              state={state}\r\n              {...rest}\r\n            />;\r\n    case 'areas':\r\n      return null;\r\n\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nAttributesEditor.propTypes = {\r\n  element: PropTypes.object.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  onValid: PropTypes.func,\r\n  attributeFormData: PropTypes.object.isRequired,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FormNumberInput from '../../../style/form-number-input';\r\nimport FormTextInput from '../../../style/form-text-input';\r\n\r\nconst tableStyle = { width: '100%' };\r\nconst firstTdStyle = { width: '6em' };\r\nconst inputStyle = { textAlign: 'left' };\r\n\r\nexport default function ItemAttributesEditor({element, onUpdate, attributeFormData, state, ...rest}, {translator}) {\r\n  let name = attributeFormData.has('name') ? attributeFormData.get('name') : element.name;\r\n  let renderedX = attributeFormData.has('x') ? attributeFormData.get('x') : element.x;\r\n  let renderedY = attributeFormData.has('y') ? attributeFormData.get('y') : element.y;\r\n  let renderedR = attributeFormData.has('rotation') ? attributeFormData.get('rotation') : element.rotation;\r\n\r\n  return (\r\n    <table style={tableStyle}>\r\n      <tbody>\r\n        <tr>\r\n          <td style={firstTdStyle}>{translator.t('Name')}</td>\r\n          <td>\r\n            <FormTextInput\r\n              value={name}\r\n              onChange={event => onUpdate('name', event.target.value)}\r\n              style={inputStyle}\r\n            />\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style={firstTdStyle}>X</td>\r\n          <td>\r\n            <FormNumberInput\r\n              value={renderedX}\r\n              onChange={event => onUpdate('x', event.target.value)}\r\n              style={inputStyle}\r\n              state={state}\r\n              precision={2}\r\n              {...rest}\r\n            />\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style={firstTdStyle}>Y</td>\r\n          <td>\r\n            <FormNumberInput\r\n              value={renderedY}\r\n              onChange={event => onUpdate('y', event.target.value)}\r\n              style={inputStyle}\r\n              state={state}\r\n              precision={2}\r\n              {...rest}\r\n            />\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style={firstTdStyle}>{translator.t('Rotation')}</td>\r\n          <td>\r\n            <FormNumberInput\r\n              value={renderedR}\r\n              onChange={event => onUpdate('rotation', event.target.value)}\r\n              style={inputStyle}\r\n              state={state}\r\n              precision={2}\r\n              {...rest}\r\n            />\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nItemAttributesEditor.propTypes = {\r\n  element: PropTypes.object.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  attributeFormData: PropTypes.object.isRequired,\r\n  state: PropTypes.object.isRequired\r\n};\r\n\r\nItemAttributesEditor.contextTypes = {\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { FormNumberInput, FormTextInput } from \"../../../style/export\";\r\nimport { PropertyLengthMeasure } from \"../../../../catalog/properties/export\";\r\n\r\nconst tableStyle = { width: \"100%\" };\r\nconst firstTdStyle = { width: \"6em\" };\r\nconst inputStyle = { textAlign: \"left\" };\r\n\r\nexport default function LineAttributesEditor(\r\n  { element, onUpdate, attributeFormData, state, ...rest },\r\n  { translator }\r\n) {\r\n  let name = attributeFormData.has(\"name\")\r\n    ? attributeFormData.get(\"name\")\r\n    : element.name;\r\n  let vertexOne = attributeFormData.has(\"vertexOne\")\r\n    ? attributeFormData.get(\"vertexOne\")\r\n    : null;\r\n  let vertexTwo = attributeFormData.has(\"vertexTwo\")\r\n    ? attributeFormData.get(\"vertexTwo\")\r\n    : null;\r\n  let lineLength = attributeFormData.has(\"lineLength\")\r\n    ? attributeFormData.get(\"lineLength\")\r\n    : null;\r\n\r\n  return (\r\n    <div>\r\n      <table style={tableStyle}>\r\n        <tbody>\r\n          <tr>\r\n            <td style={firstTdStyle}>{translator.t(\"Name\")}</td>\r\n            <td>\r\n              <FormTextInput\r\n                value={name}\r\n                onChange={(event) => onUpdate(\"name\", event.target.value)}\r\n                style={inputStyle}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style={firstTdStyle}>X1</td>\r\n            <td>\r\n              <FormNumberInput\r\n                value={vertexOne.get(\"x\")}\r\n                onChange={(event) =>\r\n                  onUpdate(\"vertexOne\", { x: event.target.value })\r\n                }\r\n                style={inputStyle}\r\n                state={state}\r\n                precision={2}\r\n                {...rest}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style={firstTdStyle}>Y1</td>\r\n            <td>\r\n              <FormNumberInput\r\n                value={vertexOne.get(\"y\")}\r\n                onChange={(event) =>\r\n                  onUpdate(\"vertexOne\", { y: event.target.value })\r\n                }\r\n                style={inputStyle}\r\n                state={state}\r\n                precision={2}\r\n                {...rest}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style={firstTdStyle}>X2</td>\r\n            <td>\r\n              <FormNumberInput\r\n                value={vertexTwo.get(\"x\")}\r\n                onChange={(event) =>\r\n                  onUpdate(\"vertexTwo\", { x: event.target.value })\r\n                }\r\n                style={inputStyle}\r\n                state={state}\r\n                precision={2}\r\n                {...rest}\r\n              />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td style={firstTdStyle}>Y2</td>\r\n            <td>\r\n              <FormNumberInput\r\n                value={vertexTwo.get(\"y\")}\r\n                onChange={(event) =>\r\n                  onUpdate(\"vertexTwo\", { y: event.target.value })\r\n                }\r\n                style={inputStyle}\r\n                state={state}\r\n                precision={2}\r\n                {...rest}\r\n              />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <PropertyLengthMeasure\r\n        value={lineLength}\r\n        onUpdate={(mapped) => onUpdate(\"lineLength\", mapped)}\r\n        configs={{\r\n          label: translator.t(\"Length\"),\r\n          min: 0,\r\n          max: Infinity,\r\n          precision: 2,\r\n        }}\r\n        state={state}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nLineAttributesEditor.propTypes = {\r\n  element: PropTypes.object.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  onValid: PropTypes.func,\r\n  attributeFormData: PropTypes.object.isRequired,\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nLineAttributesEditor.contextTypes = {\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport PropertyLengthMeasure from \"../../../../catalog/properties/property-lenght-measure\";\r\nimport PropertyString from \"../../../../catalog/properties/property-string\";\r\n\r\nexport default function HoleAttributesEditor(\r\n  { element, onUpdate, attributeFormData, state, ...rest },\r\n  { translator }\r\n) {\r\n  let name = attributeFormData.has(\"name\")\r\n    ? attributeFormData.get(\"name\")\r\n    : element.name;\r\n  let offsetA = attributeFormData.has(\"offsetA\")\r\n    ? attributeFormData.get(\"offsetA\")\r\n    : element.offsetA;\r\n  let offsetB = attributeFormData.has(\"offsetB\")\r\n    ? attributeFormData.get(\"offsetB\")\r\n    : element.offsetA;\r\n\r\n  return (\r\n    <div>\r\n      <PropertyString\r\n        value={name}\r\n        onUpdate={(mapped) => onUpdate(\"name\", mapped)}\r\n        configs={{ label: \"Nome\" }}\r\n        state={state}\r\n        {...rest}\r\n      />\r\n      <PropertyLengthMeasure\r\n        value={offsetA}\r\n        onUpdate={(mapped) => onUpdate(\"offsetA\", mapped)}\r\n        configs={{ label: \"Offset 1\", min: 0, max: Infinity, precision: 2 }}\r\n        state={state}\r\n        {...rest}\r\n      />\r\n      <PropertyLengthMeasure\r\n        value={offsetB}\r\n        onUpdate={(mapped) => onUpdate(\"offsetB\", mapped)}\r\n        configs={{ label: \"Offset 2\", min: 0, max: Infinity, precision: 2 }}\r\n        state={state}\r\n        {...rest}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nHoleAttributesEditor.propTypes = {\r\n  element: PropTypes.object.isRequired,\r\n  onUpdate: PropTypes.func.isRequired,\r\n  attributeFormData: PropTypes.object.isRequired,\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nHoleAttributesEditor.contextTypes = {\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Panel from './panel';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport { FormNumberInput, FormTextInput } from '../style/export';\r\nimport { Map } from 'immutable';\r\n\r\nimport {FaUnlink} from 'react-icons/fa';\r\n\r\nimport {\r\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM, MODE_RESIZE_ITEM_RIGHT_TOP, MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP\r\n} from '../../constants';\r\n\r\nconst VISIBILITY_MODE = {\r\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM, MODE_RESIZE_ITEM_RIGHT_TOP, MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP\r\n};\r\n\r\nconst tableStyle = { width: '100%' };\r\nconst firstTdStyle = { width: '6em' };\r\nconst inputStyle = { textAlign: 'left' };\r\nconst styleEditButton = {\r\n  marginLeft: '5px',\r\n  border: '0px',\r\n  background: 'none',\r\n  color: SharedStyle.COLORS.white,\r\n  fontSize: '14px',\r\n  outline: '0px'\r\n};\r\n\r\nconst tablegroupStyle = {\r\n  width: '100%',\r\n  cursor: 'pointer',\r\n  maxHeight: '20em',\r\n  marginLeft: '1px',\r\n  marginTop: '1em'\r\n};\r\n\r\nconst iconColStyle = {width: '2em'};\r\n\r\nexport default class PanelGroupEditor extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {};\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return true;\r\n  }\r\n\r\n  componentWillReceiveProps( nextProps, nextContext ) {\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.groupID || !VISIBILITY_MODE[this.props.state.mode]) return null;\r\n\r\n    let group = this.props.state.getIn(['scene', 'groups', this.props.groupID]);\r\n    let elements = group.get('elements');\r\n\r\n    return (\r\n      <Panel name={this.context.translator.t('Group [{0}]', group.get('name'))} opened={true}>\r\n        <div style={{padding: '5px 15px'}}>\r\n          <table style={tableStyle}>\r\n            <tbody>\r\n              <tr>\r\n                <td style={firstTdStyle}>{this.context.translator.t('Name')}</td>\r\n                <td>\r\n                  <FormTextInput\r\n                    value={group.get('name')}\r\n                    onChange={e => this.context.groupsActions.setGroupAttributes( this.props.groupID, new Map({ 'name': e.target.value }) ) }\r\n                    style={inputStyle}\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style={firstTdStyle}>X</td>\r\n                <td>\r\n                  <FormNumberInput\r\n                    value={group.get('x')}\r\n                    onChange={e => this.context.groupsActions.groupTranslate( this.props.groupID, e.target.value, group.get('y') ) }\r\n                    style={inputStyle}\r\n                    state={this.props.state}\r\n                    precision={2}\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style={firstTdStyle}>Y</td>\r\n                <td>\r\n                  <FormNumberInput\r\n                    value={group.get('y')}\r\n                    onChange={e => this.context.groupsActions.groupTranslate( this.props.groupID, group.get('x'), e.target.value ) }\r\n                    style={inputStyle}\r\n                    state={this.props.state}\r\n                    precision={2}\r\n                  />\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style={firstTdStyle}>{this.context.translator.t('Rotation')}</td>\r\n                <td>\r\n                  <FormNumberInput\r\n                    value={group.get('rotation')}\r\n                    onChange={e => this.context.groupsActions.groupRotate( this.props.groupID, e.target.value ) }\r\n                    style={inputStyle}\r\n                    state={this.props.state}\r\n                    precision={2}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          {\r\n            elements.size ?\r\n              <div>\r\n                <p style={{textAlign:'center', borderBottom:SharedStyle.PRIMARY_COLOR.border , paddingBottom:'1em'}}>{this.context.translator.t('Group\\'s Elements')}</p>\r\n                <table style={tablegroupStyle}>\r\n                  <thead>\r\n                    <tr>\r\n                      <th style={iconColStyle}></th>\r\n                      <th>{this.context.translator.t('Layer')}</th>\r\n                      <th>{this.context.translator.t('Prototype')}</th>\r\n                      <th>{this.context.translator.t('Name')}</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {\r\n                      elements.entrySeq().map(([ layerID, layerElements ]) => {\r\n\r\n                        return layerElements.entrySeq().map(([elementPrototype, ElementList]) => {\r\n\r\n                          return ElementList.valueSeq().map( elementID => {\r\n                            let element = this.props.state.getIn(['scene', 'layers', layerID, elementPrototype, elementID]);\r\n\r\n                            return <tr\r\n                              key={elementID}\r\n                            >\r\n                              <td style={iconColStyle} title={this.context.translator.t('Un-chain Element from Group')}>\r\n                                <FaUnlink\r\n                                  onClick={ e => this.context.groupsActions.removeFromGroup( this.props.groupID, layerID, elementPrototype, elementID ) }\r\n                                  style={styleEditButton}\r\n                                />\r\n                              </td>\r\n                              <td style={{textAlign:'center'}}>\r\n                                {layerID}\r\n                              </td>\r\n                              <td style={{textAlign:'center', textTransform:'capitalize'}}>\r\n                                {elementPrototype}\r\n                              </td>\r\n                              <td style={{textAlign:'center'}}>\r\n                                {element.name}\r\n                              </td>\r\n                            </tr>;\r\n                          });\r\n                        });\r\n                      })\r\n                    }\r\n                  </tbody>\r\n                </table>\r\n              </div> :\r\n              null\r\n          }\r\n        </div>\r\n      </Panel>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nPanelGroupEditor.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  groupID: PropTypes.string\r\n};\r\n\r\nPanelGroupEditor.contextTypes = {\r\n  catalog: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  groupsActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Panel from '../panel';\r\nimport {Seq} from 'immutable';\r\nimport {\r\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM, MODE_RESIZE_ITEM_RIGHT_TOP, MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP\r\n} from '../../../constants';\r\nimport { FormSelect } from '../../../components/style/export';\r\nimport { Group } from '../../../class/export';\r\n\r\nconst tableStyle = { width: '100%' };\r\nconst firstTdStyle = { width: '6em' };\r\n\r\nexport default class PanelMultiElementsEditor extends Component {\r\n//export default function PanelMultiElementsEditor({state}, {projectActions, translator}) {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      selectedGroupID: ''\r\n    };\r\n  }\r\n\r\n  addSelectToGroup( state, groupID, layerID, selecteds ) {\r\n    if( !groupID || groupID === '' || !selecteds || !selecteds.size ) return;\r\n\r\n    console.log('need to be added to group', groupID, 'elements', selecteds );\r\n\r\n    /*let selectedJs = selecteds.toJS();\r\n\r\n    for( let lineID in selectedJs.lines ) Group.addElement( state, groupID, layerID, 'lines', lineID );*/\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    let { mode } = this.props.state;\r\n\r\n    if (![MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN,\r\n      MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n      MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM,\r\n      MODE_DRAGGING_LINE, MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE,\r\n      MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM, MODE_RESIZE_ITEM_RIGHT_TOP, MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP, MODE_UPLOADING_IMAGE, MODE_FITTING_IMAGE].includes(mode)) return null;\r\n\r\n    let groups = this.props.state.getIn(['scene', 'groups']);\r\n\r\n    //TODO change in multi-layer check\r\n    let selectedLayer = this.props.state.getIn(['scene', 'selectedLayer']);\r\n    let selecteds = this.props.state.getIn(['scene', 'layers', selectedLayer, 'selected']);\r\n\r\n    return (\r\n      <Panel name={'Multiselected'} opened={true}>\r\n        <div style={{padding: '5px 15px'}}>\r\n          <p>Multiselection tab</p>\r\n          <table style={tableStyle}>\r\n            <tbody>\r\n              <tr>\r\n                <td style={firstTdStyle}>Add to Group</td>\r\n                <td>\r\n                  <FormSelect value={this.state.selectedGroupID} onChange={ e => this.setState({'selectedGroupID': e.target.value}) }>\r\n                    <option key={0} value={''}></option>\r\n                    {\r\n                      groups.entrySeq().map( ([ groupID, group ]) => <option key={groupID} value={groupID}>{group.get('name')}</option>)\r\n                    }\r\n                  </FormSelect>\r\n                </td>\r\n                <td style={{cursor:'pointer', padding:'0.5em 0', textAlign:'center'}} onClick={ e => {\r\n                  if( !this.state.selectedGroupID || this.state.selectedGroupID === '' || !selecteds || !selecteds.size ) return;\r\n\r\n                  let selectedJs = selecteds.toJS();\r\n\r\n                  for( let x = 0; x < selectedJs.lines.length; x++ )\r\n                    this.context.groupsActions.addToGroup( this.state.selectedGroupID, selectedLayer, 'lines', selectedJs.lines[x] );\r\n\r\n                }}>+</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </Panel>\r\n    );\r\n\r\n  }\r\n}\r\n\r\nPanelMultiElementsEditor.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n};\r\n\r\nPanelMultiElementsEditor.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  groupsActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Panel from './panel';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport {TiPlus, TiDelete} from 'react-icons/ti';\r\nimport {FaTrash, FaEye, FaLink, FaUnlink} from 'react-icons/fa';\r\nimport { Map } from 'immutable';\r\n\r\nimport {\r\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM, MODE_RESIZE_ITEM_RIGHT_TOP, MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP\r\n} from '../../constants';\r\n\r\nconst VISIBILITY_MODE = {\r\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\r\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\r\n  MODE_ROTATING_ITEM, MODE_RESIZE_ITEM_RIGHT_BOTTOM, MODE_RESIZE_ITEM_RIGHT_TOP, MODE_RESIZE_ITEM_LEFT_BOTTOM, MODE_RESIZE_ITEM_LEFT_TOP\r\n};\r\n\r\nconst styleEditButton = {\r\n  marginLeft: '5px',\r\n  border: '0px',\r\n  background: 'none',\r\n  color: SharedStyle.COLORS.white,\r\n  fontSize: '14px',\r\n  outline: '0px'\r\n};\r\n\r\nconst tablegroupStyle = {\r\n  width: '100%',\r\n  cursor: 'pointer',\r\n  maxHeight: '20em',\r\n  padding: '0 1em',\r\n  marginLeft: '1px'\r\n};\r\n\r\nconst iconColStyle = {width: '2em', textAlign: 'center'};\r\nconst styleHoverColor = {color: SharedStyle.SECONDARY_COLOR.main};\r\nconst styleEditButtonHover = {...styleEditButton, ...styleHoverColor};\r\nconst styleAddLabel = {fontSize: '10px', marginLeft: '5px'};\r\nconst styleEyeVisible = {fontSize: '1.25em'};\r\nconst styleEyeHidden = {...styleEyeVisible, color: '#a5a1a1'};\r\nconst newLayerLableStyle = {fontSize: '1.3em', cursor: 'pointer', textAlign: 'center'};\r\nconst newLayerLableHoverStyle = {...newLayerLableStyle, ...styleHoverColor};\r\n\r\nexport default class PanelGroups extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      newEmptyHover: false,\r\n      newSelectedHover: false\r\n    };\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return ( \r\n      this.props.groups.hashCode() !== nextProps.groups.hashCode() ||\r\n      this.props.layers.hashCode() !== nextProps.layers.hashCode() ||\r\n      this.props.mode !== nextProps.mode\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let { mode, groups, layers } = this.props;\r\n\r\n    if (!VISIBILITY_MODE[ mode ]) return null;\r\n\r\n    return (\r\n      <Panel name={this.context.translator.t('Groups')} opened={groups.size > 0}>\r\n        { groups.size ? <table style={tablegroupStyle}>\r\n          <thead>\r\n            <tr>\r\n              <th colSpan=\"4\"></th>\r\n              <th>{this.context.translator.t('Elements')}</th>\r\n              <th>{this.context.translator.t('Name')}</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {\r\n              groups.entrySeq().map(([ groupID, group ]) => {\r\n\r\n                let selectClick = e => this.context.groupsActions.selectGroup(groupID);\r\n\r\n                let swapVisibility = e => {\r\n                  e.stopPropagation();\r\n                  this.context.groupsActions.setGroupProperties(groupID, new Map({visible: !group.get('visible')}));\r\n                };\r\n\r\n                let chainToGroup = e => {\r\n                  layers.forEach((layer) => {\r\n\r\n                    let layerID = layer.get('id');\r\n                    let layerElements = {\r\n                      'lines': layer.get('lines'),\r\n                      'items': layer.get('items'),\r\n                      'holes': layer.get('holes'),\r\n                      'areas': layer.get('areas')\r\n                    };\r\n\r\n                    for( let elementPrototype in layerElements )\r\n                    {\r\n                      let ElementList = layerElements[elementPrototype];\r\n                      ElementList.filter( el => el.get('selected') ).forEach( element => {\r\n                        this.context.groupsActions.addToGroup( groupID, layerID, elementPrototype, element.get('id') );\r\n                      });\r\n                    }\r\n                  });\r\n\r\n                  selectClick(e);\r\n                };\r\n\r\n                let isCurrentgroup = group.get('selected');\r\n                let shouldHighlight = isCurrentgroup;\r\n                let rowStyle = !shouldHighlight ? null : styleHoverColor;\r\n\r\n                let dimension = group.get('elements').reduce( ( sum, layer ) => {\r\n                  return sum + layer.reduce( ( lSum, elProt ) => lSum + elProt.size, 0 );\r\n                }, 0);\r\n\r\n                return (\r\n                  <tr\r\n                    key={groupID}\r\n                    style={rowStyle}\r\n                  >\r\n                    <td style={iconColStyle} title={this.context.translator.t('Toggle Group Visibility')}>\r\n                      <FaEye\r\n                        onClick={swapVisibility}\r\n                        style={!group.get('visible') ? styleEyeHidden : styleEyeVisible}\r\n                      />\r\n                    </td>\r\n                    <td style={iconColStyle} title={this.context.translator.t('Chain selected Elements to Group')}>\r\n                      <FaLink\r\n                        onClick={chainToGroup}\r\n                        style={!shouldHighlight ? styleEditButton : styleEditButtonHover}\r\n                      />\r\n                    </td>\r\n                    <td style={iconColStyle} title={this.context.translator.t('Un-chain all Group\\'s Elements and remove Group')}>\r\n                      <FaUnlink\r\n                        onClick={ e => this.context.groupsActions.removeGroup(groupID) }\r\n                        style={!shouldHighlight ? styleEditButton : styleEditButtonHover}\r\n                      />\r\n                    </td>\r\n                    <td style={iconColStyle} title={this.context.translator.t('Delete group and all Elements')}>\r\n                      <FaTrash\r\n                        onClick={ e => this.context.groupsActions.removeGroupAndDeleteElements(groupID) }\r\n                        style={!shouldHighlight ? styleEditButton : styleEditButtonHover}\r\n                      />\r\n                    </td>\r\n                    <td onClick={selectClick} style={{width:'0em', textAlign:'center'}}>\r\n                      { dimension }\r\n                    </td>\r\n                    <td onClick={selectClick}>\r\n                      {group.get('name')}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            }\r\n          </tbody>\r\n        </table> : null }\r\n\r\n        <table style={{width:'100%', marginTop: '0.1em'}}>\r\n          <tbody>\r\n            <tr>\r\n              <td\r\n                style={ !this.state.newEmptyHover ? newLayerLableStyle : newLayerLableHoverStyle }\r\n                onMouseOver={ () => this.setState({newEmptyHover: true}) }\r\n                onMouseOut={ () => this.setState({newEmptyHover: false}) }\r\n                onClick={ e => this.context.groupsActions.addGroup() }\r\n              >\r\n                <TiPlus />\r\n                <b style={styleAddLabel}>{this.context.translator.t('New Empty Group')}</b>\r\n              </td>\r\n              <td\r\n                style={ !this.state.newSelectedHover ? newLayerLableStyle : newLayerLableHoverStyle }\r\n                onMouseOver={ () => this.setState({newSelectedHover: true}) }\r\n                onMouseOut={ () => this.setState({newSelectedHover: false}) }\r\n                onClick={ e => this.context.groupsActions.addGroupFromSelected() }\r\n              >\r\n                <TiPlus />\r\n                <b style={styleAddLabel}>{this.context.translator.t('New Group from selected')}</b>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n      </Panel>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nPanelGroups.propTypes = {\r\n  mode: PropTypes.string.isRequired,\r\n  groups: PropTypes.object.isRequired,\r\n  layers: PropTypes.object.isRequired\r\n};\r\n\r\nPanelGroups.contextTypes = {\r\n  catalog: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  groupsActions: PropTypes.object.isRequired,\r\n  projectActions: PropTypes.object.isRequired\r\n};\r\n","import FooterToggleButton from './footer-toggle-button';\r\nimport FooterContentButton from './footer-content-button';\r\nimport FooterBar from './footerbar';\r\n\r\nexport {\r\n  FooterToggleButton,\r\n  FooterContentButton,\r\n  FooterBar\r\n};\r\n\r\nexport default {\r\n  FooterToggleButton,\r\n  FooterContentButton,\r\n  FooterBar\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport If from \"../../utils/react-if\";\r\nimport FooterToggleButton from \"./footer-toggle-button\";\r\nimport FooterContentButton from \"./footer-content-button\";\r\nimport {\r\n  SNAP_POINT,\r\n  SNAP_LINE,\r\n  SNAP_SEGMENT,\r\n  SNAP_GRID,\r\n  SNAP_GUIDE,\r\n} from \"../../utils/snap\";\r\nimport { MODE_SNAPPING } from \"../../constants\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\nimport { MdAddCircle, MdWarning } from \"react-icons/md\";\r\nimport { VERSION } from \"../../version\";\r\n\r\nconst footerBarStyle = {\r\n  lineHeight: \"14px\",\r\n  fontSize: \"12px\",\r\n  color: SharedStyle.COLORS.white,\r\n  backgroundColor: SharedStyle.SECONDARY_COLOR.alt,\r\n  padding: \"3px 1em\",\r\n  margin: 0,\r\n  boxSizing: \"border-box\",\r\n  cursor: \"default\",\r\n  userSelect: \"none\",\r\n  zIndex: \"9001\",\r\n};\r\n\r\nexport const leftTextStyle = {\r\n  position: \"relative\",\r\n  borderRight: \"1px solid #FFF\",\r\n  float: \"left\",\r\n  padding: \"0 1em\",\r\n  display: \"inline-block\",\r\n};\r\n\r\nexport const rightTextStyle = {\r\n  position: \"relative\",\r\n  borderLeft: \"1px solid #FFF\",\r\n  float: \"right\",\r\n  padding: \"0 1em\",\r\n  display: \"inline-block\",\r\n};\r\n\r\nconst coordStyle = {\r\n  display: \"inline-block\",\r\n  width: \"6em\",\r\n  margin: 0,\r\n  padding: 0,\r\n};\r\n\r\nconst appMessageStyle = { borderBottom: \"1px solid #555\", lineHeight: \"1.5em\" };\r\n\r\nexport default class FooterBar extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n    let { state: globalState, width, height } = this.props;\r\n    let { translator, projectActions } = this.context;\r\n\r\n    let { x, y } = globalState.get(\"mouse\").toJS();\r\n    let zoom = globalState.get(\"zoom\");\r\n    let mode = globalState.get(\"mode\");\r\n\r\n    let errors = globalState.get(\"errors\").toArray();\r\n    let errorsJsx = errors.map((err, ind) => (\r\n      <div key={ind} style={appMessageStyle}>\r\n        [ {new Date(err.date).toLocaleString()} ] {err.error}\r\n      </div>\r\n    ));\r\n    let errorLableStyle = errors.length\r\n      ? { color: SharedStyle.MATERIAL_COLORS[500].red }\r\n      : {};\r\n    let errorIconStyle = errors.length\r\n      ? {\r\n          transform: \"rotate(45deg)\",\r\n          color: SharedStyle.MATERIAL_COLORS[500].red,\r\n        }\r\n      : { transform: \"rotate(45deg)\" };\r\n\r\n    let warnings = globalState.get(\"warnings\").toArray();\r\n    let warningsJsx = warnings.map((warn, ind) => (\r\n      <div key={ind} style={appMessageStyle}>\r\n        [ {new Date(warn.date).toLocaleString()} ] {warn.warning}\r\n      </div>\r\n    ));\r\n    let warningLableStyle = warnings.length\r\n      ? { color: SharedStyle.MATERIAL_COLORS[500].yellow }\r\n      : {};\r\n    let warningIconStyle = warningLableStyle;\r\n\r\n    let updateSnapMask = (val) =>\r\n      projectActions.toggleSnap(globalState.snapMask.merge(val));\r\n\r\n    return (\r\n      <div style={{ ...footerBarStyle, width, height }}>\r\n        <If condition={MODE_SNAPPING.includes(mode)}>\r\n          <div style={leftTextStyle}>\r\n            <div title={translator.t(\"Mouse X Coordinate\")} style={coordStyle}>\r\n              X : {x.toFixed(3)}\r\n            </div>\r\n            <div title={translator.t(\"Mouse Y Coordinate\")} style={coordStyle}>\r\n              Y : {y.toFixed(3)}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={leftTextStyle} title={translator.t(\"Scene Zoom Level\")}>\r\n            Zoom: {zoom.toFixed(3)}X\r\n          </div>\r\n\r\n          <div style={leftTextStyle}>\r\n            <FooterToggleButton\r\n              state={this.state}\r\n              toggleOn={() => {\r\n                updateSnapMask({ SNAP_POINT: true });\r\n              }}\r\n              toggleOff={() => {\r\n                updateSnapMask({ SNAP_POINT: false });\r\n              }}\r\n              text=\"Snap PT\"\r\n              toggleState={globalState.snapMask.get(SNAP_POINT)}\r\n              title={translator.t(\"Snap to Point\")}\r\n            />\r\n            <FooterToggleButton\r\n              state={this.state}\r\n              toggleOn={() => {\r\n                updateSnapMask({ SNAP_LINE: true });\r\n              }}\r\n              toggleOff={() => {\r\n                updateSnapMask({ SNAP_LINE: false });\r\n              }}\r\n              text=\"Snap LN\"\r\n              toggleState={globalState.snapMask.get(SNAP_LINE)}\r\n              title={translator.t(\"Snap to Line\")}\r\n            />\r\n            <FooterToggleButton\r\n              state={this.state}\r\n              toggleOn={() => {\r\n                updateSnapMask({ SNAP_SEGMENT: true });\r\n              }}\r\n              toggleOff={() => {\r\n                updateSnapMask({ SNAP_SEGMENT: false });\r\n              }}\r\n              text=\"Snap SEG\"\r\n              toggleState={globalState.snapMask.get(SNAP_SEGMENT)}\r\n              title={translator.t(\"Snap to Segment\")}\r\n            />\r\n            <FooterToggleButton\r\n              state={this.state}\r\n              toggleOn={() => {\r\n                updateSnapMask({ SNAP_GRID: true });\r\n              }}\r\n              toggleOff={() => {\r\n                updateSnapMask({ SNAP_GRID: false });\r\n              }}\r\n              text=\"Snap GRD\"\r\n              toggleState={globalState.snapMask.get(SNAP_GRID)}\r\n              title={translator.t(\"Snap to Grid\")}\r\n            />\r\n            <FooterToggleButton\r\n              state={this.state}\r\n              toggleOn={() => {\r\n                updateSnapMask({ SNAP_GUIDE: true });\r\n              }}\r\n              toggleOff={() => {\r\n                updateSnapMask({ SNAP_GUIDE: false });\r\n              }}\r\n              text=\"Snap GDE\"\r\n              toggleState={globalState.snapMask.get(SNAP_GUIDE)}\r\n              title={translator.t(\"Snap to Guide\")}\r\n            />\r\n          </div>\r\n        </If>\r\n\r\n        {this.props.footerbarComponents.map((Component, index) => (\r\n          <Component state={state} key={index} />\r\n        ))}\r\n\r\n        {this.props.softwareSignature ? (\r\n          <div\r\n            style={rightTextStyle}\r\n            title={\r\n              this.props.softwareSignature +\r\n              (this.props.softwareSignature.includes(\"FloorPlan-3D\")\r\n                ? \"\"\r\n                : ` using FloorPlan-3D ${VERSION}`)\r\n            }\r\n          >\r\n            {this.props.softwareSignature}\r\n          </div>\r\n        ) : null}\r\n\r\n        <div style={rightTextStyle}>\r\n          <FooterContentButton\r\n            state={this.state}\r\n            icon={MdAddCircle}\r\n            iconStyle={errorIconStyle}\r\n            text={errors.length.toString()}\r\n            textStyle={errorLableStyle}\r\n            title={`Errors [ ${errors.length} ]`}\r\n            titleStyle={errorLableStyle}\r\n            content={[errorsJsx]}\r\n          />\r\n          <FooterContentButton\r\n            state={this.state}\r\n            icon={MdWarning}\r\n            iconStyle={warningIconStyle}\r\n            text={warnings.length.toString()}\r\n            textStyle={warningLableStyle}\r\n            title={`Warnings [ ${warnings.length} ]`}\r\n            titleStyle={warningLableStyle}\r\n            content={[warningsJsx]}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFooterBar.propTypes = {\r\n  state: PropTypes.object.isRequired,\r\n  footerbarComponents: PropTypes.array.isRequired,\r\n  width: PropTypes.number.isRequired,\r\n  height: PropTypes.number.isRequired,\r\n  softwareSignature: PropTypes.string,\r\n};\r\n\r\nFooterBar.contextTypes = {\r\n  projectActions: PropTypes.object.isRequired,\r\n  viewer2DActions: PropTypes.object.isRequired,\r\n  viewer3DActions: PropTypes.object.isRequired,\r\n  linesActions: PropTypes.object.isRequired,\r\n  holesActions: PropTypes.object.isRequired,\r\n  itemsActions: PropTypes.object.isRequired,\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import * as TabsStyle from './tabs.css';\r\n\r\nexport {\r\n  TabsStyle\r\n};\r\n\r\nexport default {\r\n  TabsStyle\r\n};\r\n","var update = require(\"!../../node_modules/style-loader/lib/addStyleUrl.js\")(\n  require(\"!!../../node_modules/file-loader/dist/cjs.js!./tabs.css\")\n, {\"hmr\":true});\nif(module.hot) {\n  module.hot.accept(\"!!../../node_modules/file-loader/dist/cjs.js!./tabs.css\", function() {\n    update(require(\"!!../../node_modules/file-loader/dist/cjs.js!./tabs.css\"));\n  });\n\n  module.hot.dispose(function() { update(); });\n}","module.exports = __webpack_public_path__ + \"9ff5c73468bd1a909d16f19f1dae3e51.css\";","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, Typography, Grid } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport UploadSingleFile from \"./UploadSingleFile\";\r\nimport { loadProjectFromFile } from \"./parse-svg\";\r\nimport actions from \"../actions/export\";\r\nimport {\r\n  MODE_IDLE,\r\n  MODE_3D_VIEW,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_VIEWING_CATALOG,\r\n  MODE_CONFIGURING_PROJECT,\r\n} from \"../constants\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    backgroundColor: \"#f8f8f8\",\r\n    flexGrow: 1,\r\n    maxHeight: \"52px\",\r\n  },\r\n  container: {\r\n    width: \"961px\",\r\n    height: \"457px\",\r\n    margin: \"auto\",\r\n    background: \"#FFFFFF\",\r\n    border: \"1px dashed #A7A7A7\",\r\n    borderRadius: \"18px\",\r\n    padding: \"124px 135px\",\r\n  },\r\n  menubar: {\r\n    background: \"#FFFFFF\",\r\n    height: \"52px\",\r\n    borderBottom: \"1px solid #DEDEDE\",\r\n    zIndex: 1,\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-start\",\r\n    alignItems: \"center\",\r\n  },\r\n  barsub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n    lineHeight: \"24px\",\r\n    color: \"#1F2735\",\r\n    display: \"block\",\r\n    \"&:hover\": {\r\n      cursor: \"pointer\",\r\n    },\r\n  },\r\n  barsubbar: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n    lineHeight: \"50px\",\r\n    color: \"#9199A7\",\r\n    display: \"block\",\r\n    marginLeft: \"24px\",\r\n    cursor: \"pointer\",\r\n    \"&:hover\": {\r\n      color: \"#1F2735\",\r\n    },\r\n  },\r\n  barsubbarH: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n    lineHeight: \"50px\",\r\n    display: \"block\",\r\n    marginLeft: \"24px\",\r\n    cursor: \"pointer\",\r\n    color: \"#1F2735\",\r\n    borderBottom: \"2px solid #1F2735\",\r\n  },\r\n  backbarWrap: {\r\n    textDecoration: \"none\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    background: \"#FFFFFF\",\r\n    borderRight: \"1px solid #E4E8EE\",\r\n    width: \"52px\",\r\n    height: \"50px\",\r\n    \"&:hover\": {\r\n      \"& $backbar\": {\r\n        cursor: \"pointer\",\r\n        width: \"18px\",\r\n        height: \"18px\",\r\n        transition: \"0.01s ease\",\r\n      },\r\n    },\r\n  },\r\n  backbar: {\r\n    margin: \"18px\",\r\n    width: \"16px\",\r\n    height: \"16px\",\r\n  },\r\n  sub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 500,\r\n    fontSize: \"13px\",\r\n    lineHeight: \"20px\",\r\n    color: \"#4D5B73\",\r\n  },\r\n}));\r\n\r\nexport default function Topbar(props) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n\r\n  const [file, setFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let { catalog } = props;\r\n    props.dispatch(actions.projectActions.initCatalog(catalog));\r\n  }, [props]);\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <Box className={classes.menubar}>\r\n        <Link to=\"/\" className={classes.backbarWrap}>\r\n          <img src=\"/assets/back1.png\" className={classes.backbar} />\r\n        </Link>\r\n        <Box\r\n          display=\"flex\"\r\n          justifyContent=\"space-between\"\r\n          alignItems=\"center\"\r\n          sx={{\r\n            width: \"calc(100% - 16px)\",\r\n          }}\r\n        >\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography\r\n              className={\r\n                props.tab == 0 ? classes.barsubbarH : classes.barsubbar\r\n              }\r\n              onClick={() => {\r\n                props.setTab(0);\r\n                console.log(\"setTab\");\r\n                props.dispatch(actions.projectActions.setMode(MODE_IDLE));\r\n              }}\r\n            >\r\n              Drawing\r\n            </Typography>\r\n            <Typography\r\n              className={\r\n                props.tab == 1 ? classes.barsubbarH : classes.barsubbar\r\n              }\r\n              onClick={() => {\r\n                props.setTab(1);\r\n                props.dispatch(actions.viewer3DActions.selectTool3DView());\r\n              }}\r\n            >\r\n              3D\r\n            </Typography>\r\n          </Box>\r\n          <Typography className={classes.barsub}>New Floorplan</Typography>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography className={classes.sub}>Your file is saved</Typography>\r\n            <img\r\n              src=\"/assets/cloudadd.png\"\r\n              style={{\r\n                margin: \"0 1rem\",\r\n              }}\r\n            />\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, Typography, TextField, Checkbox } from \"@material-ui/core\";\r\n\r\nimport { alpha, makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport UploadSingleFile from \"./UploadSingleFile\";\r\nimport { loadProjectFromFile } from \"./parse-svg\";\r\nimport actions from \"../actions/export\";\r\nimport {\r\n  MODE_IDLE,\r\n  MODE_3D_VIEW,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_VIEWING_CATALOG,\r\n  MODE_CONFIGURING_PROJECT,\r\n} from \"../constants\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    backgroundColor: \"transparent\",\r\n    flexGrow: 1,\r\n    maxHeight: \"52px\",\r\n    position: \"absolute\",\r\n    bottom: \"14px\",\r\n    right: \"15.81px\",\r\n  },\r\n  menubar: {\r\n    background: \"transparent\",\r\n    height: \"52px\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  wrap: {\r\n    padding: \"7px 13px\",\r\n    background: \"#FFFFFF\",\r\n    border: \"1px solid #E3E3E3\",\r\n    borderRadius: \"10px\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n  },\r\n  paragrah1: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"13px\",\r\n    lineHeight: \"26px\",\r\n    color: \"#333333\",\r\n    marginRight: \"4px\",\r\n  },\r\n  paragrah2: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"12px\",\r\n    lineHeight: \"26px\",\r\n    color: \"#B5B5B5\",\r\n    marginRight: \"10px\",\r\n  },\r\n  inputText: {\r\n    \"&:hover .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline\": {\r\n      borderColor: \"#0CA9EB\",\r\n    },\r\n    \"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline\": {\r\n      borderColor: \"#0CA9EB\",\r\n    },\r\n    \"& .MuiOutlinedInput-input\": {\r\n      color: \"#000\",\r\n      padding: \"11.5px 14px\",\r\n      fontFamily: \"DM Sans\",\r\n      fontStyle: \"normal\",\r\n      fontWeight: 400,\r\n      fontSize: \"13px\",\r\n      lineHeight: \"20px\",\r\n      color: \"#9199A7\",\r\n    },\r\n    \"& .MuiInputLabel-outlined.Mui-focused\": {\r\n      color: \"#000\",\r\n    },\r\n    \"& .MuiOutlinedInput-root\": {\r\n      backgroundColor: \"#fff\",\r\n      borderRadius: \"6px\",\r\n      padding: \"offset\",\r\n      width: \"100px\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function Footerbar(props) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n\r\n  const [width, setWidth] = useState(\"\");\r\n  const [height, setHeight] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let { catalog } = props;\r\n    props.dispatch(actions.projectActions.initCatalog(catalog));\r\n  }, [props]);\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <Box className={classes.menubar}>\r\n        <Box className={classes.wrap}>\r\n          <Typography className={classes.paragrah1}>Width</Typography>\r\n          <Typography className={classes.paragrah2}>mm</Typography>\r\n          <TextField\r\n            className={classes.inputText}\r\n            fullWidth\r\n            autoComplete=\"username\"\r\n            type=\"string\"\r\n            placeholder=\"\"\r\n            label=\"\"\r\n            value={width}\r\n            sx={{ mb: 1 }}\r\n            variant=\"outlined\"\r\n            onChange={(e) => {\r\n              if (!isNaN(e.target.value)) setWidth(e.target.value);\r\n            }}\r\n          />\r\n          <Typography\r\n            className={classes.paragrah1}\r\n            style={{ marginLeft: \"24px\" }}\r\n          >\r\n            Height\r\n          </Typography>\r\n          <Typography className={classes.paragrah2}>mm</Typography>\r\n          <TextField\r\n            className={classes.inputText}\r\n            fullWidth\r\n            autoComplete=\"username\"\r\n            type=\"string\"\r\n            placeholder=\"\"\r\n            label=\"\"\r\n            sx={{ mb: 1 }}\r\n            variant=\"outlined\"\r\n            value={height}\r\n            onChange={(e) => {\r\n              if (!isNaN(e.target.value)) setHeight(e.target.value);\r\n            }}\r\n          />\r\n        </Box>\r\n        <Box className={classes.wrap} style={{ marginLeft: \"12px\" }}>\r\n          <Checkbox\r\n            sx={{\r\n              \"&.Mui-checked.MuiIconButton-colorSecondary\": {\r\n                color: \"#407AEC\",\r\n              },\r\n              \"&.MuiCheckbox-indeterminate\": {\r\n                color: \"#407AEC\",\r\n              },\r\n              \"&:hover, &.Mui-checked:hover\": {\r\n                backgroundColor: alpha(\"#407AEC\", 0.08),\r\n              },\r\n            }}\r\n          />\r\n          <Typography\r\n            style={{\r\n              fontFamily: \"DM Sans\",\r\n              fontStyle: \"normal\",\r\n              fontWeight: 400,\r\n              fontSize: \"14px\",\r\n              lineHeight: \"26px\",\r\n              color: \"#333333\",\r\n            }}\r\n          >\r\n            Show blueprint\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import Autosave from './autosave';\r\nimport Keyboard from './keyboard';\r\nimport ConsoleDebugger from './console-debugger';\r\n\r\nexport {\r\n  Autosave,\r\n  Keyboard,\r\n  ConsoleDebugger\r\n};\r\n\r\nexport default {\r\n  Autosave,\r\n  Keyboard,\r\n  ConsoleDebugger\r\n};\r\n","const localStorage = window.hasOwnProperty(\"localStorage\")\r\n  ? window.localStorage\r\n  : false;\r\nimport { loadProject } from \"../actions/project-actions\";\r\n\r\nconst TIMEOUT_DELAY = 500;\r\n\r\nlet timeout = null;\r\n\r\nexport default function autosave(autosaveKey, delay) {\r\n  return (store, stateExtractor) => {\r\n    // delay = delay || TIMEOUT_DELAY;\r\n    // if (!autosaveKey) return;\r\n    // if (!localStorage) return;\r\n    // //revert\r\n    // if (localStorage.getItem(autosaveKey) !== null) {\r\n    //   let data = localStorage.getItem(autosaveKey);\r\n    //   let json = JSON.parse(data);\r\n    //   // store.dispatch(loadProject(json));\r\n    // }\r\n    // //update\r\n    // store.subscribe(() => {\r\n    //   if (timeout) clearTimeout(timeout);\r\n    //   timeout = setTimeout(() => {\r\n    //     let state = stateExtractor(store.getState());\r\n    //     localStorage.setItem(autosaveKey, JSON.stringify(state.scene.toJS()));\r\n    //     /*let scene = state.sceneHistory.last;\r\n    //     if (scene) {\r\n    //       let json = JSON.stringify(scene.toJS());\r\n    //       localStorage.setItem(autosaveKey, json);\r\n    //     }*/\r\n    //   }, delay);\r\n    // });\r\n  };\r\n}\r\n","import {\r\n  MODE_IDLE,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_3D_VIEW,\r\n  MODE_SNAPPING,\r\n  KEYBOARD_BUTTON_CODE,\r\n} from \"../constants\";\r\n\r\nimport {\r\n  rollback,\r\n  undo,\r\n  remove,\r\n  toggleSnap,\r\n  copyProperties,\r\n  pasteProperties,\r\n  setAlterateState,\r\n} from \"../actions/project-actions\";\r\n\r\nexport default function keyboard() {\r\n  return (store, stateExtractor) => {\r\n    console.log(\"store\", store);\r\n\r\n    window.addEventListener(\"keydown\", (event) => {\r\n      let state = stateExtractor(store.getState());\r\n      let mode = state.get(\"mode\");\r\n\r\n      switch (event.keyCode) {\r\n        // case KEYBOARD_BUTTON_CODE.BACKSPACE:\r\n        case KEYBOARD_BUTTON_CODE.DELETE: {\r\n          if ([MODE_IDLE, MODE_3D_FIRST_PERSON, MODE_3D_VIEW].includes(mode))\r\n            store.dispatch(remove());\r\n          break;\r\n        }\r\n        case KEYBOARD_BUTTON_CODE.ESC: {\r\n          store.dispatch(rollback());\r\n          break;\r\n        }\r\n        case KEYBOARD_BUTTON_CODE.Z: {\r\n          if (\r\n            event.getModifierState(\"Control\") ||\r\n            event.getModifierState(\"Meta\")\r\n          )\r\n            store.dispatch(undo());\r\n          break;\r\n        }\r\n        case KEYBOARD_BUTTON_CODE.ALT: {\r\n          if (MODE_SNAPPING.includes(mode))\r\n            store.dispatch(\r\n              toggleSnap(\r\n                state.snapMask.merge({\r\n                  SNAP_POINT: false,\r\n                  SNAP_LINE: false,\r\n                  SNAP_SEGMENT: false,\r\n                  SNAP_GRID: false,\r\n                  SNAP_GUIDE: false,\r\n                  tempSnapConfiguartion: state.snapMask.toJS(),\r\n                })\r\n              )\r\n            );\r\n          break;\r\n        }\r\n        case KEYBOARD_BUTTON_CODE.C: {\r\n          let selectedLayer = state.getIn([\"scene\", \"selectedLayer\"]);\r\n          let selected = state.getIn([\r\n            \"scene\",\r\n            \"layers\",\r\n            selectedLayer,\r\n            \"selected\",\r\n          ]);\r\n\r\n          if (\r\n            (mode === MODE_IDLE || mode === MODE_3D_VIEW) &&\r\n            (selected.holes.size ||\r\n              selected.areas.size ||\r\n              selected.items.size ||\r\n              selected.lines.size)\r\n          ) {\r\n            if (selected.holes.size) {\r\n              let hole = state.getIn([\r\n                \"scene\",\r\n                \"layers\",\r\n                selectedLayer,\r\n                \"holes\",\r\n                selected.holes.get(0),\r\n              ]);\r\n              store.dispatch(copyProperties(hole.get(\"properties\")));\r\n            } else if (selected.areas.size) {\r\n              let area = state.getIn([\r\n                \"scene\",\r\n                \"layers\",\r\n                selectedLayer,\r\n                \"areas\",\r\n                selected.areas.get(0),\r\n              ]);\r\n              store.dispatch(copyProperties(area.properties));\r\n            } else if (selected.items.size) {\r\n              let item = state.getIn([\r\n                \"scene\",\r\n                \"layers\",\r\n                selectedLayer,\r\n                \"items\",\r\n                selected.items.get(0),\r\n              ]);\r\n              store.dispatch(copyProperties(item.properties));\r\n            } else if (selected.lines.size) {\r\n              let line = state.getIn([\r\n                \"scene\",\r\n                \"layers\",\r\n                selectedLayer,\r\n                \"lines\",\r\n                selected.lines.get(0),\r\n              ]);\r\n              store.dispatch(copyProperties(line.properties));\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case KEYBOARD_BUTTON_CODE.V: {\r\n          store.dispatch(pasteProperties());\r\n          break;\r\n        }\r\n        case KEYBOARD_BUTTON_CODE.CTRL: {\r\n          store.dispatch(setAlterateState());\r\n          break;\r\n        }\r\n      }\r\n    });\r\n\r\n    window.addEventListener(\"keyup\", (event) => {\r\n      let state = stateExtractor(store.getState());\r\n      let mode = state.get(\"mode\");\r\n\r\n      switch (event.keyCode) {\r\n        case KEYBOARD_BUTTON_CODE.ALT: {\r\n          if (MODE_SNAPPING.includes(mode))\r\n            store.dispatch(\r\n              toggleSnap(\r\n                state.snapMask.merge(\r\n                  state.snapMask.get(\"tempSnapConfiguartion\")\r\n                )\r\n              )\r\n            );\r\n          break;\r\n        }\r\n        case KEYBOARD_BUTTON_CODE.CTRL: {\r\n          store.dispatch(setAlterateState());\r\n          break;\r\n        }\r\n      }\r\n    });\r\n  };\r\n}\r\n","import actions from '../actions/export';\r\n\r\nexport default function consoleDebugger() {\r\n\r\n  return (store, stateExtractor) => {\r\n    window.ReactPlanner = {\r\n      ...actions,\r\n\r\n      getStore() {\r\n        return store;\r\n      },\r\n\r\n      getState() {\r\n        return stateExtractor(store.getState())\r\n      },\r\n\r\n      do(actions, delay = 300) {\r\n        actions = actions.reverse();\r\n        let dispatch = store.dispatch;\r\n        let dispatchAction = () => {\r\n          console.info(`There are other ${actions.length} actions on stack`);\r\n          if (actions.length === 0) return;\r\n          dispatch(actions.pop());\r\n          if (actions.length === 0) return;\r\n          setTimeout(dispatchAction, delay);\r\n        };\r\n        setTimeout(dispatchAction, 0);\r\n      }\r\n    };\r\n\r\n    console.groupCollapsed(\"ReactPlanner\");\r\n    console.info(\"ReactPlanner is ready\");\r\n    console.info(\"console.log(ReactPlanner)\");\r\n    console.log(window.ReactPlanner);\r\n    console.groupEnd();\r\n  }\r\n}\r\n","import WallFactory from './wall-factory';\r\nimport AreaFactory from './area-factory';\r\n\r\nexport {\r\n  WallFactory,\r\n  AreaFactory\r\n};\r\n\r\nexport default {\r\n  WallFactory,\r\n  AreaFactory\r\n};\r\n","import React from \"react\";\r\nimport { buildWall, updatedWall } from \"./wall-factory-3d\";\r\nimport * as SharedStyle from \"../../shared-style\";\r\nimport * as Geometry from \"../../utils/geometry\";\r\nimport Translator from \"../../translator/translator\";\r\nimport { GeometryUtils } from \"../../utils/export\";\r\n\r\n\r\nconst epsilon = 20;\r\nconst STYLE_TEXT = { textAnchor: \"middle\" };\r\nconst STYLE_LINE = { stroke: SharedStyle.LINE_MESH_COLOR.selected };\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: SharedStyle.LINE_MESH_COLOR.unselected,\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: SharedStyle.LINE_MESH_COLOR.selected,\r\n};\r\n\r\nlet translator = new Translator();\r\n\r\nexport default function WallFactory(name, info, textures) {\r\n  let wallElement = {\r\n    name,\r\n    prototype: \"lines\",\r\n    info,\r\n    properties: {\r\n      height: {\r\n        label: translator.t(\"height\"),\r\n        type: \"length-measure\",\r\n        defaultValue: {\r\n          length: 300,\r\n        },\r\n      },\r\n      thickness: {\r\n        label: translator.t(\"thickness\"),\r\n        type: \"length-measure\",\r\n        defaultValue: {\r\n          length: info.thickness,\r\n        },\r\n      },\r\n    },\r\n\r\n    render2D: function (element, layer, scene) {\r\n      const lineType = element.getIn([\"name\"]);\r\n\r\n      if (lineType == \"Dividerwall\") {\r\n        let { x: x1, y: y1 } = layer.vertices.get(element.vertices.get(0));\r\n        let { x: x2, y: y2 } = layer.vertices.get(element.vertices.get(1));\r\n\r\n        let length = Geometry.pointsDistance(x1, y1, x2, y2);\r\n\r\n        return element.selected ? (\r\n          <g>\r\n            <line\r\n              x1=\"0\"\r\n              y1=\"0\"\r\n              x2={length}\r\n              y2=\"0\"\r\n              style={STYLE_RECT_SELECTED}\r\n              stroke=\"black\"\r\n              strokeDasharray=\"4\"\r\n            />\r\n          </g>\r\n        ) : (\r\n          <g>\r\n            <line\r\n              x1=\"0\"\r\n              y1=\"0\"\r\n              x2={length}\r\n              y2=\"0\"\r\n              style={STYLE_RECT}\r\n              stroke=\"black\"\r\n              strokeDasharray=\"4\"\r\n            />\r\n          </g>\r\n        );\r\n      } else {\r\n        let { x: x1, y: y1 } = layer.vertices.get(element.vertices.get(0));\r\n        let { x: x2, y: y2 } = layer.vertices.get(element.vertices.get(1));\r\n\r\n        let line1 = null\r\n        let line2 = null\r\n        \r\n        layer.lines.forEach(line => {\r\n          if((line.vertices.get(0) == element.vertices.get(0) || line.vertices.get(1) == element.vertices.get(0)) && line.id != element.id)\r\n          line1 = line\r\n          else if((line.vertices.get(0) == element.vertices.get(1) || line.vertices.get(1) == element.vertices.get(1)) && line.id != element.id)\r\n          line2 = line\r\n        })\r\n        \r\n        let length = Geometry.pointsDistance(x1, y1, x2, y2);\r\n\r\n        let thickness = element.getIn([\"properties\", \"thickness\", \"length\"]);\r\n        let half_thickness = thickness / 2;\r\n\r\n        let angle = GeometryUtils.angleBetweenTwoPointsAndOrigin(x1, y1, x2, y2);\r\n        let angle1 = 0;\r\n        let angle2 = 0;\r\n        let beta1 = 0\r\n        let beta2 = 0\r\n        let poly1 = `0,${half_thickness}`, poly2 = `${length},${half_thickness}`, poly3 = `${length},${-half_thickness}`, poly4 = `0,-${half_thickness}`;\r\n\r\n        let angleAbs = Math.abs(angle);\r\n        if(angleAbs > 90) {\r\n          angleAbs = 180 - angleAbs\r\n        }\r\n        let directionEle = 0; // Y\r\n        if(angleAbs < 45) {\r\n          directionEle = 1; // X\r\n        }\r\n\r\n        // if(line1 != null) {\r\n        //   let { x:line1x1, y: line1y1 } = layer.vertices.get(line1.vertices.get(0));\r\n        //   let { x: line1x2, y: line1y2 } = layer.vertices.get(line1.vertices.get(1));\r\n\r\n        //   if ((y1 >= y2 && x1 <= x2)) {\r\n        //     const tempAngle = GeometryUtils.angleBetweenTwoPointsAndOrigin(line1x1, line1y1, line1x2, line1y2);\r\n        //     angle1 = Math.abs(Math.abs(tempAngle) - Math.abs(angle)) / 2\r\n        //     beta1 = thickness / Math.tan(angle1);\r\n\r\n        //     let endPoint = { x1:line1x1, y1: line1y1, x2: line1x2, y2: line1y2 }\r\n        //     if (element.vertices.get(0) == line1.vertices.get(0)) {\r\n        //       endPoint = { x2:line1x1, y2: line1y1, x1: line1x2, y1: line1y2 }\r\n        //     }\r\n        //     if(directionEle == 1) { // X\r\n        //       if(endPoint.y1 < endPoint.y2) {\r\n        //         // Uper line is longer than the bottom line\r\n        //         poly1 = `-${beta1},${half_thickness}`\r\n        //         poly4 = `${beta1},-${half_thickness}`\r\n        //       } else {\r\n        //         poly1 = `${beta1},${half_thickness}`\r\n        //         poly4 = `-${beta1},-${half_thickness}`\r\n        //       }\r\n        //     } else { // Y\r\n        //       if(endPoint.x1 < endPoint.x2) {\r\n        //         // Uper line is longer than the bottom line\r\n        //         poly1 = `-${beta1},${half_thickness}`\r\n        //         poly4 = `${beta1},-${half_thickness}`\r\n        //       } else {\r\n        //         poly1 = `${beta1},${half_thickness}`\r\n        //         poly4 = `-${beta1},-${half_thickness}`\r\n        //       }\r\n        //     }\r\n        //   }\r\n        // }\r\n        // if(line2 != null) {\r\n        //   let { x:line2x1, y: line2y1 } = layer.vertices.get(line2.vertices.get(0));\r\n        //   let { x: line2x2, y: line2y2 } = layer.vertices.get(line2.vertices.get(1));\r\n          \r\n        //   if ((y1 >= y2 && x1 <= x2)) {\r\n        //     const tempAngle = GeometryUtils.angleBetweenTwoPointsAndOrigin(line2x1, line2y1, line2x2, line2y2);\r\n        //     angle2 = Math.abs(Math.abs(tempAngle) - Math.abs(angle)) / 2\r\n        //     beta2 = thickness / Math.tan(angle2);\r\n            \r\n        //     console.log('param', {tempAngle, angle})\r\n        //     console.log('angle2', angle2)\r\n            \r\n        //     let endPoint = { x1:line2x1, y1: line2y1, x2: line2x2, y2: line2y2 }\r\n        //     if (element.vertices.get(1) == line2.vertices.get(1)) {\r\n        //       endPoint = { x2:line2x1, y2: line2y1, x1: line2x2, y1: line2y2 }\r\n        //     }\r\n\r\n        //     if(directionEle == 1) { // X\r\n        //       if(endPoint.y1 > endPoint.y2) {\r\n        //         // Uper line is longer than the bottom line\r\n        //         poly2 = `${length + beta2},${half_thickness}`\r\n        //         poly3 = `${length - beta2},-${half_thickness}`\r\n        //       } else {\r\n        //         poly2 = `${length - beta2},${half_thickness}`\r\n        //         poly3 = `${length + beta2},-${half_thickness}`\r\n        //       }\r\n        //     } else { // Y\r\n        //       if(endPoint.x1 > endPoint.x2) {\r\n        //         // Uper line is longer than the bottom line\r\n        //         poly2 = `${length + beta2},${half_thickness}`\r\n        //         poly3 = `${length - beta2},-${half_thickness}`\r\n\r\n        //       } else {\r\n        //         poly2 = `${length - beta2},${half_thickness}`\r\n        //         poly3 = `${length + beta2},-${half_thickness}`\r\n        //       }\r\n        //     }\r\n        //   }\r\n        // }\r\n\r\n        return element.selected ? (\r\n          <g>\r\n            <polygon points={`${poly1 + \" \" + poly2 + \" \" + poly3 + \" \" + poly4}`} style={STYLE_RECT_SELECTED} />\r\n          </g>\r\n        ) : (\r\n          <polygon points={`${poly1 + \" \" + poly2 + \" \" + poly3 + \" \" + poly4}`} style={STYLE_RECT} />\r\n        );\r\n      }\r\n    },\r\n\r\n    render3D: function (element, layer, scene) {\r\n      return buildWall(element, layer, scene, textures);\r\n    },\r\n\r\n    updateRender3D: (\r\n      element,\r\n      layer,\r\n      scene,\r\n      mesh,\r\n      oldElement,\r\n      differences,\r\n      selfDestroy,\r\n      selfBuild\r\n    ) => {\r\n      return updatedWall(\r\n        element,\r\n        layer,\r\n        scene,\r\n        textures,\r\n        mesh,\r\n        oldElement,\r\n        differences,\r\n        selfDestroy,\r\n        selfBuild\r\n      );\r\n    },\r\n  };\r\n\r\n  if (textures && textures !== {}) {\r\n    let textureValues = { none: \"None\" };\r\n\r\n    for (let textureName in textures) {\r\n      textureValues[textureName] = textures[textureName].name;\r\n    }\r\n\r\n    wallElement.properties.textureA = {\r\n      label: translator.t(\"texture\") + \" A\",\r\n      type: \"enum\",\r\n      defaultValue: textureValues.bricks ? \"bricks\" : \"none\",\r\n      values: textureValues,\r\n    };\r\n\r\n    wallElement.properties.textureB = {\r\n      label: translator.t(\"texture\") + \" B\",\r\n      type: \"enum\",\r\n      defaultValue: textureValues.bricks ? \"bricks\" : \"none\",\r\n      values: textureValues,\r\n    };\r\n  }\r\n\r\n  return wallElement;\r\n}\r\n","import {\r\n  TextureLoader,\r\n  Mesh,\r\n  RepeatWrapping,\r\n  Vector2,\r\n  BoxGeometry,\r\n  MeshBasicMaterial,\r\n  Group\r\n} from 'three';\r\n\r\nimport ThreeBSP from '../../utils/threeCSG.es6';\r\nimport {verticesDistance} from '../../utils/geometry';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\nconst halfPI = Math.PI / 2;\r\n\r\n/**\r\n * Apply a texture to a wall face\r\n * @param material: The material of the face\r\n * @param texture: The texture to load\r\n * @param length: The lenght of the face\r\n * @param height: The height of the face\r\n */\r\nconst applyTexture = (material, texture, length, height) => {\r\n  let loader = new TextureLoader();\r\n\r\n  if (texture) {\r\n    material.map = loader.load(texture.uri);\r\n    material.needsUpdate = true;\r\n    material.map.wrapS = RepeatWrapping;\r\n    material.map.wrapT = RepeatWrapping;\r\n    material.map.repeat.set(length * texture.lengthRepeatScale, height * texture.heightRepeatScale);\r\n\r\n    if (texture.normal) {\r\n      material.normalMap = loader.load(texture.normal.uri);\r\n      material.normalScale = new Vector2(texture.normal.normalScaleX, texture.normal.normalScaleY);\r\n      material.normalMap.wrapS = RepeatWrapping;\r\n      material.normalMap.wrapT = RepeatWrapping;\r\n      material.normalMap.repeat.set(length * texture.normal.lengthRepeatScale, height * texture.normal.heightRepeatScale);\r\n    }\r\n  }\r\n};\r\n\r\nexport function buildWall(element, layer, scene, textures)\r\n{\r\n  // Get the two vertices of the wall\r\n  let vertex0 = layer.vertices.get(element.vertices.get(0));\r\n  let vertex1 = layer.vertices.get(element.vertices.get(1));\r\n  let inverted = false;\r\n\r\n  // The first vertex is the smaller one\r\n  if (vertex0.x > vertex1.x) {\r\n    let app = vertex0;\r\n    vertex0 = vertex1;\r\n    vertex1 = app;\r\n    inverted = true;\r\n  }\r\n\r\n  // Get height and thickness of the wall converting them into the current scene units\r\n  let height = element.properties.getIn(['height', 'length']);\r\n  let thickness = element.properties.getIn(['thickness', 'length']);\r\n  let halfThickness = thickness / 2;\r\n  let faceThickness = 0.2;\r\n  let faceDistance = 1;\r\n\r\n  let distance = verticesDistance( vertex0, vertex1 );\r\n  let halfDistance = distance / 2;\r\n\r\n  let soulMaterial = new MeshBasicMaterial( {color: ( element.selected ? SharedStyle.MESH_SELECTED : 0xD3D3D3 )} );\r\n  let soul = new Mesh( new BoxGeometry(distance, height, thickness), soulMaterial );\r\n\r\n  let alpha = Math.asin((vertex1.y - vertex0.y) / (distance));\r\n\r\n  let sinAlpha = Math.sin(alpha);\r\n  let cosAlpha = Math.cos(alpha);\r\n\r\n  soul.position.y += height / 2;\r\n  soul.position.x += halfDistance * cosAlpha;\r\n  soul.position.z -= halfDistance * sinAlpha;\r\n\r\n  soul.rotation.y = alpha;\r\n\r\n  element.holes.forEach( holeID => {\r\n    let holeData = layer.holes.get(holeID);\r\n\r\n    let holeWidth = holeData.properties.getIn(['width', 'length']);\r\n    let holeHeight = holeData.properties.getIn(['height', 'length']);\r\n    let holeAltitude = holeData.properties.getIn(['altitude', 'length']);\r\n    let offset = inverted ? 1 - holeData.offset : holeData.offset;\r\n    let holeDistance = offset * distance;\r\n\r\n    let holeGeometry = new BoxGeometry( holeWidth, holeHeight, thickness );\r\n    let holeMesh = new Mesh( holeGeometry );\r\n\r\n    holeMesh.position.y += holeHeight / 2 + holeAltitude;\r\n    holeMesh.position.x += holeDistance * cosAlpha;\r\n    holeMesh.position.z -= holeDistance * sinAlpha;\r\n\r\n    holeMesh.rotation.y = alpha;\r\n\r\n    let wallBSP = new ThreeBSP( soul );\r\n    let holeBSP = new ThreeBSP( holeMesh );\r\n\r\n    let wallWithHoleBSP = wallBSP.subtract( holeBSP );\r\n    soul = wallWithHoleBSP.toMesh( soulMaterial );\r\n  });\r\n\r\n  soul.name = 'soul';\r\n\r\n  let frontMaterial = new MeshBasicMaterial();\r\n  let backMaterial = new MeshBasicMaterial();\r\n\r\n  applyTexture(frontMaterial, textures[element.properties.get('textureB')], distance, height);\r\n  applyTexture(backMaterial, textures[element.properties.get('textureA')], distance, height);\r\n\r\n  let scaleFactor = faceThickness / thickness;\r\n  let texturedFaceDistance = halfThickness + faceDistance;\r\n\r\n  let frontFace = soul.clone();\r\n  frontFace.material = frontMaterial;\r\n  frontFace.scale.set( 1, 1, scaleFactor );\r\n  frontFace.position.x += texturedFaceDistance * Math.cos(alpha - ( halfPI ) );\r\n  frontFace.position.z -= texturedFaceDistance * Math.sin(alpha - ( halfPI ) );\r\n  frontFace.name = 'frontFace';\r\n\r\n  let backFace = soul.clone();\r\n  backFace.material = backMaterial;\r\n  backFace.scale.set( 1, 1, scaleFactor );\r\n  backFace.position.x += texturedFaceDistance * Math.cos(alpha + ( halfPI ) );\r\n  backFace.position.z -= texturedFaceDistance * Math.sin(alpha + ( halfPI ) );\r\n  backFace.name = 'backFace';\r\n\r\n  let merged = new Group();\r\n  merged.add( soul, frontFace, backFace );\r\n\r\n  return Promise.resolve( merged );\r\n}\r\n\r\nexport function updatedWall( element, layer, scene, textures, mesh, oldElement, differences, selfDestroy, selfBuild ) {\r\n  let noPerf = () => { selfDestroy(); return selfBuild(); };\r\n\r\n  let soul = mesh.getObjectByName('soul');\r\n  let frontFace = mesh.getObjectByName('frontFace');\r\n  let backFace = mesh.getObjectByName('backFace');\r\n\r\n  if( differences[0] == 'selected' ) {\r\n    soul.material = new MeshBasicMaterial( {color: ( element.selected ? SharedStyle.MESH_SELECTED : 0xD3D3D3 )} );\r\n  }\r\n  else if( differences[0] == 'properties' ){\r\n\r\n    if( differences[1] == 'thickness' ){\r\n      let newThickness = element.getIn(['properties', 'thickness', 'length']);\r\n      let oldThickness = oldElement.getIn(['properties', 'thickness', 'length']);\r\n      let halfNewThickness = newThickness / 2;\r\n      let texturedFaceDistance = halfNewThickness + 1;\r\n      let originalThickness = oldThickness / soul.scale.z;\r\n      let alpha = soul.rotation.y;\r\n\r\n      let xTemp = texturedFaceDistance * Math.cos(alpha - ( halfPI ) );\r\n      let zTemp = texturedFaceDistance * Math.sin(alpha - ( halfPI ) );\r\n\r\n      soul.scale.set( 1, 1, ( newThickness / originalThickness ) );\r\n\r\n      frontFace.position.x = soul.position.x + ( xTemp );\r\n      frontFace.position.z = soul.position.z + ( zTemp );\r\n\r\n      backFace.position.x = soul.position.x - ( xTemp );\r\n      backFace.position.z = soul.position.z - ( zTemp );\r\n    }\r\n    else return noPerf();\r\n  }\r\n  else return noPerf();\r\n\r\n  return Promise.resolve(mesh);\r\n}\r\n","/*jshint esversion: 6 */\r\nimport * as THREE from 'three';\r\n\r\nconst EPSILON = 1e-5,\r\n    COPLANAR = 0,\r\n    FRONT = 1,\r\n    BACK = 2,\r\n    SPANNING = 3;\r\n\r\nexport default  class ThreeBSP {\r\n    constructor(geometry) {\r\n        // Convert THREE.Geometry to ThreeBSP\r\n        var i, _length_i,\r\n            face, vertex, faceVertexUvs, uvs,\r\n            polygon,\r\n            polygons = [],\r\n            tree;\r\n\r\n        this.Polygon = Polygon;\r\n        this.Vertex = Vertex;\r\n        this.Node = Node;\r\n        if (geometry instanceof THREE.Geometry) {\r\n            this.matrix = new THREE.Matrix4();\r\n        } else if (geometry instanceof THREE.Mesh) {\r\n            // #todo: add hierarchy support\r\n            geometry.updateMatrix();\r\n            this.matrix = geometry.matrix.clone();\r\n            geometry = geometry.geometry;\r\n        } else if (geometry instanceof Node) {\r\n            this.tree = geometry;\r\n            this.matrix = new THREE.Matrix4();\r\n            return this;\r\n        } else {\r\n            throw 'ThreeBSP: Given geometry is unsupported';\r\n        }\r\n\r\n        for (i = 0, _length_i = geometry.faces.length; i < _length_i; i++) {\r\n            face = geometry.faces[i];\r\n            faceVertexUvs = geometry.faceVertexUvs[0][i];\r\n            polygon = new Polygon();\r\n\r\n            if (face instanceof THREE.Face3) {\r\n                vertex = geometry.vertices[face.a];\r\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[0].x, faceVertexUvs[0].y) : null;\r\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[0], uvs);\r\n                vertex.applyMatrix4(this.matrix);\r\n                polygon.vertices.push(vertex);\r\n\r\n                vertex = geometry.vertices[face.b];\r\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[1].x, faceVertexUvs[1].y) : null;\r\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[1], uvs);\r\n                vertex.applyMatrix4(this.matrix);\r\n                polygon.vertices.push(vertex);\r\n\r\n                vertex = geometry.vertices[face.c];\r\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[2].x, faceVertexUvs[2].y) : null;\r\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[2], uvs);\r\n                vertex.applyMatrix4(this.matrix);\r\n                polygon.vertices.push(vertex);\r\n            } else if (typeof THREE.Face4) {\r\n                vertex = geometry.vertices[face.a];\r\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[0].x, faceVertexUvs[0].y) : null;\r\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[0], uvs);\r\n                vertex.applyMatrix4(this.matrix);\r\n                polygon.vertices.push(vertex);\r\n\r\n                vertex = geometry.vertices[face.b];\r\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[1].x, faceVertexUvs[1].y) : null;\r\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[1], uvs);\r\n                vertex.applyMatrix4(this.matrix);\r\n                polygon.vertices.push(vertex);\r\n\r\n                vertex = geometry.vertices[face.c];\r\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[2].x, faceVertexUvs[2].y) : null;\r\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[2], uvs);\r\n                vertex.applyMatrix4(this.matrix);\r\n                polygon.vertices.push(vertex);\r\n\r\n                vertex = geometry.vertices[face.d];\r\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[3].x, faceVertexUvs[3].y) : null;\r\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[3], uvs);\r\n                vertex.applyMatrix4(this.matrix);\r\n                polygon.vertices.push(vertex);\r\n            } else {\r\n                throw 'Invalid face type at index ' + i;\r\n            }\r\n\r\n            polygon.calculateProperties();\r\n            polygons.push(polygon);\r\n        }\r\n\r\n        this.tree = new Node(polygons);\r\n    }\r\n\r\n    subtract(other_tree) {\r\n        var a = this.tree.clone(),\r\n            b = other_tree.tree.clone();\r\n\r\n        a.invert();\r\n        a.clipTo(b);\r\n        b.clipTo(a);\r\n        b.invert();\r\n        b.clipTo(a);\r\n        b.invert();\r\n        a.build(b.allPolygons());\r\n        a.invert();\r\n        a = new ThreeBSP(a);\r\n        a.matrix = this.matrix;\r\n        return a;\r\n    }\r\n\r\n    union(other_tree) {\r\n        var a = this.tree.clone(),\r\n            b = other_tree.tree.clone();\r\n\r\n        a.clipTo(b);\r\n        b.clipTo(a);\r\n        b.invert();\r\n        b.clipTo(a);\r\n        b.invert();\r\n        a.build(b.allPolygons());\r\n        a = new ThreeBSP(a);\r\n        a.matrix = this.matrix;\r\n        return a;\r\n    }\r\n\r\n    intersect(other_tree) {\r\n        var a = this.tree.clone(),\r\n            b = other_tree.tree.clone();\r\n\r\n        a.invert();\r\n        b.clipTo(a);\r\n        b.invert();\r\n        a.clipTo(b);\r\n        b.clipTo(a);\r\n        a.build(b.allPolygons());\r\n        a.invert();\r\n        a = new ThreeBSP(a);\r\n        a.matrix = this.matrix;\r\n        return a;\r\n    }\r\n\r\n    toGeometry() {\r\n        var i, j,\r\n            matrix = new THREE.Matrix4().getInverse(this.matrix),\r\n            geometry = new THREE.Geometry(),\r\n            polygons = this.tree.allPolygons(),\r\n            polygon_count = polygons.length,\r\n            polygon, polygon_vertice_count,\r\n            vertice_dict = {},\r\n            vertex_idx_a, vertex_idx_b, vertex_idx_c,\r\n            vertex, face,\r\n            verticeUvs;\r\n\r\n        for (i = 0; i < polygon_count; i++) {\r\n            polygon = polygons[i];\r\n            polygon_vertice_count = polygon.vertices.length;\r\n\r\n            for (j = 2; j < polygon_vertice_count; j++) {\r\n                verticeUvs = [];\r\n\r\n                vertex = polygon.vertices[0];\r\n                verticeUvs.push(new THREE.Vector2(vertex.uv.x, vertex.uv.y));\r\n                vertex = new THREE.Vector3(vertex.x, vertex.y, vertex.z);\r\n                vertex.applyMatrix4(matrix);\r\n\r\n                if (typeof vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] !== 'undefined') {\r\n                    vertex_idx_a = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z];\r\n                } else {\r\n                    geometry.vertices.push(vertex);\r\n                    vertex_idx_a = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] = geometry.vertices.length - 1;\r\n                }\r\n\r\n                vertex = polygon.vertices[j - 1];\r\n                verticeUvs.push(new THREE.Vector2(vertex.uv.x, vertex.uv.y));\r\n                vertex = new THREE.Vector3(vertex.x, vertex.y, vertex.z);\r\n                vertex.applyMatrix4(matrix);\r\n                if (typeof vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] !== 'undefined') {\r\n                    vertex_idx_b = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z];\r\n                } else {\r\n                    geometry.vertices.push(vertex);\r\n                    vertex_idx_b = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] = geometry.vertices.length - 1;\r\n                }\r\n\r\n                vertex = polygon.vertices[j];\r\n                verticeUvs.push(new THREE.Vector2(vertex.uv.x, vertex.uv.y));\r\n                vertex = new THREE.Vector3(vertex.x, vertex.y, vertex.z);\r\n                vertex.applyMatrix4(matrix);\r\n                if (typeof vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] !== 'undefined') {\r\n                    vertex_idx_c = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z];\r\n                } else {\r\n                    geometry.vertices.push(vertex);\r\n                    vertex_idx_c = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] = geometry.vertices.length - 1;\r\n                }\r\n\r\n                face = new THREE.Face3(\r\n                    vertex_idx_a,\r\n                    vertex_idx_b,\r\n                    vertex_idx_c,\r\n                    new THREE.Vector3(polygon.normal.x, polygon.normal.y, polygon.normal.z)\r\n                );\r\n\r\n                geometry.faces.push(face);\r\n                geometry.faceVertexUvs[0].push(verticeUvs);\r\n            }\r\n\r\n        }\r\n        return geometry;\r\n    }\r\n\r\n    toMesh (material) {\r\n        var geometry = this.toGeometry(),\r\n            mesh = new THREE.Mesh(geometry, material);\r\n\r\n        mesh.position.setFromMatrixPosition(this.matrix);\r\n        mesh.rotation.setFromRotationMatrix(this.matrix);\r\n\r\n        return mesh;\r\n    }\r\n}\r\nclass Polygon {\r\n    constructor(vertices, normal, w) {\r\n        if (!( vertices instanceof Array )) {\r\n            vertices = [];\r\n        }\r\n\r\n        this.vertices = vertices;\r\n        if (vertices.length > 0) {\r\n            this.calculateProperties();\r\n        } else {\r\n            this.normal = this.w = undefined;\r\n        }\r\n    }\r\n\r\n    calculateProperties() {\r\n        var a = this.vertices[0],\r\n            b = this.vertices[1],\r\n            c = this.vertices[2];\r\n\r\n        this.normal = b.clone().subtract(a).cross(\r\n            c.clone().subtract(a)\r\n        ).normalize();\r\n\r\n        this.w = this.normal.clone().dot(a);\r\n\r\n        return this;\r\n    }\r\n\r\n    clone() {\r\n        var i, vertice_count,\r\n            polygon = new Polygon();\r\n\r\n        for (i = 0, vertice_count = this.vertices.length; i < vertice_count; i++) {\r\n            polygon.vertices.push(this.vertices[i].clone());\r\n        }\r\n        polygon.calculateProperties();\r\n\r\n        return polygon;\r\n    }\r\n\r\n    flip() {\r\n        var i, vertices = [];\r\n\r\n        this.normal.multiplyScalar(-1);\r\n        this.w *= -1;\r\n\r\n        for (i = this.vertices.length - 1; i >= 0; i--) {\r\n            vertices.push(this.vertices[i]);\r\n        }\r\n        this.vertices = vertices;\r\n\r\n        return this;\r\n    }\r\n\r\n    classifyVertex(vertex) {\r\n        var side_value = this.normal.dot(vertex) - this.w;\r\n\r\n        if (side_value < -EPSILON) {\r\n            return BACK;\r\n        } else if (side_value > EPSILON) {\r\n            return FRONT;\r\n        } else {\r\n            return COPLANAR;\r\n        }\r\n    }\r\n\r\n    classifySide(polygon) {\r\n        var i, vertex, classification,\r\n            num_positive = 0,\r\n            num_negative = 0,\r\n            vertice_count = polygon.vertices.length;\r\n\r\n        for (i = 0; i < vertice_count; i++) {\r\n            vertex = polygon.vertices[i];\r\n            classification = this.classifyVertex(vertex);\r\n            if (classification === FRONT) {\r\n                num_positive++;\r\n            } else if (classification === BACK) {\r\n                num_negative++;\r\n            }\r\n        }\r\n\r\n        if (num_positive > 0 && num_negative === 0) {\r\n            return FRONT;\r\n        } else if (num_positive === 0 && num_negative > 0) {\r\n            return BACK;\r\n        } else if (num_positive === 0 && num_negative === 0) {\r\n            return COPLANAR;\r\n        } else {\r\n            return SPANNING;\r\n        }\r\n    }\r\n\r\n    splitPolygon(polygon, coplanar_front, coplanar_back, front, back) {\r\n        var classification = this.classifySide(polygon);\r\n\r\n        if (classification === COPLANAR) {\r\n\r\n            ( this.normal.dot(polygon.normal) > 0 ? coplanar_front : coplanar_back ).push(polygon);\r\n\r\n        } else if (classification === FRONT) {\r\n\r\n            front.push(polygon);\r\n\r\n        } else if (classification === BACK) {\r\n\r\n            back.push(polygon);\r\n\r\n        } else {\r\n\r\n            var vertice_count,\r\n                i, j, ti, tj, vi, vj,\r\n                t, v,\r\n                f = [],\r\n                b = [];\r\n\r\n            for (i = 0, vertice_count = polygon.vertices.length; i < vertice_count; i++) {\r\n\r\n                j = (i + 1) % vertice_count;\r\n                vi = polygon.vertices[i];\r\n                vj = polygon.vertices[j];\r\n                ti = this.classifyVertex(vi);\r\n                tj = this.classifyVertex(vj);\r\n\r\n                if (ti != BACK) f.push(vi);\r\n                if (ti != FRONT) b.push(vi);\r\n                if ((ti | tj) === SPANNING) {\r\n                    t = ( this.w - this.normal.dot(vi) ) / this.normal.dot(vj.clone().subtract(vi));\r\n                    v = vi.interpolate(vj, t);\r\n                    f.push(v);\r\n                    b.push(v);\r\n                }\r\n            }\r\n\r\n\r\n            if (f.length >= 3) front.push(new Polygon(f).calculateProperties());\r\n            if (b.length >= 3) back.push(new Polygon(b).calculateProperties());\r\n        }\r\n    }\r\n}\r\nclass Vertex {\r\n    constructor(x, y, z, normal, uv) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.normal = normal || new THREE.Vector3();\r\n        this.uv = uv || new THREE.Vector2();\r\n    }\r\n\r\n    clone() {\r\n        return new Vertex(this.x, this.y, this.z, this.normal.clone(), this.uv.clone());\r\n    }\r\n\r\n    add(vertex) {\r\n        this.x += vertex.x;\r\n        this.y += vertex.y;\r\n        this.z += vertex.z;\r\n        return this;\r\n    }\r\n\r\n    subtract(vertex) {\r\n        this.x -= vertex.x;\r\n        this.y -= vertex.y;\r\n        this.z -= vertex.z;\r\n        return this;\r\n    }\r\n\r\n    multiplyScalar(scalar) {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        this.z *= scalar;\r\n        return this;\r\n    }\r\n\r\n    cross(vertex) {\r\n        var x = this.x,\r\n            y = this.y,\r\n            z = this.z;\r\n\r\n        this.x = y * vertex.z - z * vertex.y;\r\n        this.y = z * vertex.x - x * vertex.z;\r\n        this.z = x * vertex.y - y * vertex.x;\r\n\r\n        return this;\r\n    }\r\n\r\n    normalize() {\r\n        var length = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n\r\n        this.x /= length;\r\n        this.y /= length;\r\n        this.z /= length;\r\n\r\n        return this;\r\n    }\r\n\r\n    dot(vertex) {\r\n        return this.x * vertex.x + this.y * vertex.y + this.z * vertex.z;\r\n    }\r\n\r\n    lerp(a, t) {\r\n        this.add(\r\n            a.clone().subtract(this).multiplyScalar(t)\r\n        );\r\n\r\n        this.normal.add(\r\n            a.normal.clone().sub(this.normal).multiplyScalar(t)\r\n        );\r\n\r\n        this.uv.add(\r\n            a.uv.clone().sub(this.uv).multiplyScalar(t)\r\n        );\r\n\r\n        return this;\r\n    }\r\n\r\n    interpolate(other, t) {\r\n        return this.clone().lerp(other, t);\r\n    }\r\n\r\n    applyMatrix4(m) {\r\n\r\n        // input: THREE.Matrix4 affine matrix\r\n\r\n        var x = this.x, y = this.y, z = this.z;\r\n\r\n        var e = m.elements;\r\n\r\n        this.x = e[0] * x + e[4] * y + e[8] * z + e[12];\r\n        this.y = e[1] * x + e[5] * y + e[9] * z + e[13];\r\n        this.z = e[2] * x + e[6] * y + e[10] * z + e[14];\r\n\r\n        return this;\r\n\r\n    }\r\n}\r\nclass Node {\r\n    constructor(polygons) {\r\n        var i, polygon_count,\r\n            front = [],\r\n            back = [];\r\n\r\n        this.polygons = [];\r\n        this.front = this.back = undefined;\r\n\r\n        if (!(polygons instanceof Array) || polygons.length === 0) return;\r\n\r\n        this.divider = polygons[0].clone();\r\n\r\n        for (i = 0, polygon_count = polygons.length; i < polygon_count; i++) {\r\n            this.divider.splitPolygon(polygons[i], this.polygons, this.polygons, front, back);\r\n        }\r\n\r\n        if (front.length > 0) {\r\n            this.front = new Node(front);\r\n        }\r\n\r\n        if (back.length > 0) {\r\n            this.back = new Node(back);\r\n        }\r\n    }\r\n\r\n    isConvex(polygons) {\r\n        var i, j;\r\n        for (i = 0; i < polygons.length; i++) {\r\n            for (j = 0; j < polygons.length; j++) {\r\n                if (i !== j && polygons[i].classifySide(polygons[j]) !== BACK) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    build(polygons) {\r\n        var i, polygon_count,\r\n            front = [],\r\n            back = [];\r\n\r\n        if (!this.divider) {\r\n            this.divider = polygons[0].clone();\r\n        }\r\n\r\n        for (i = 0, polygon_count = polygons.length; i < polygon_count; i++) {\r\n            this.divider.splitPolygon(polygons[i], this.polygons, this.polygons, front, back);\r\n        }\r\n\r\n        if (front.length > 0) {\r\n            if (!this.front) this.front = new Node();\r\n            this.front.build(front);\r\n        }\r\n\r\n        if (back.length > 0) {\r\n            if (!this.back) this.back = new Node();\r\n            this.back.build(back);\r\n        }\r\n    }\r\n\r\n    allPolygons() {\r\n        var polygons = this.polygons.slice();\r\n        if (this.front) polygons = polygons.concat(this.front.allPolygons());\r\n        if (this.back) polygons = polygons.concat(this.back.allPolygons());\r\n        return polygons;\r\n    }\r\n\r\n    clone() {\r\n        var node = new Node();\r\n\r\n        node.divider = this.divider.clone();\r\n        node.polygons = this.polygons.map(function (polygon) {\r\n            return polygon.clone();\r\n        });\r\n        node.front = this.front && this.front.clone();\r\n        node.back = this.back && this.back.clone();\r\n\r\n        return node;\r\n    }\r\n\r\n    invert() {\r\n        var i, polygon_count, temp;\r\n\r\n        for (i = 0, polygon_count = this.polygons.length; i < polygon_count; i++) {\r\n            this.polygons[i].flip();\r\n        }\r\n\r\n        this.divider.flip();\r\n        if (this.front) this.front.invert();\r\n        if (this.back) this.back.invert();\r\n\r\n        temp = this.front;\r\n        this.front = this.back;\r\n        this.back = temp;\r\n\r\n        return this;\r\n    }\r\n\r\n    clipPolygons(polygons) {\r\n        var i, polygon_count,\r\n            front, back;\r\n\r\n        if (!this.divider) return polygons.slice();\r\n\r\n        front = [];\r\n        back = [];\r\n\r\n        for (i = 0, polygon_count = polygons.length; i < polygon_count; i++) {\r\n            this.divider.splitPolygon(polygons[i], front, back, front, back);\r\n        }\r\n\r\n        if (this.front) front = this.front.clipPolygons(front);\r\n        if (this.back) back = this.back.clipPolygons(back);\r\n        else back = [];\r\n\r\n        return front.concat(back);\r\n    }\r\n\r\n    clipTo(node) {\r\n        this.polygons = node.clipPolygons(this.polygons);\r\n        if (this.front) this.front.clipTo(node);\r\n        if (this.back) this.back.clipTo(node);\r\n    }\r\n}\r\n\r\nwindow.ThreeBSP = ThreeBSP;\r\n","import React from 'react';\r\nimport { createArea, updatedArea } from './area-factory-3d';\r\nimport * as SharedStyle from '../../shared-style';\r\nimport Translator from '../../translator/translator';\r\n\r\nlet translator = new Translator();\r\n\r\nexport default function AreaFactory(name, info, textures) {\r\n\r\n  let areaElement = {\r\n    name,\r\n    prototype: 'areas',\r\n    info: {\r\n      ...info,\r\n      visibility: {\r\n        catalog: false,\r\n        layerElementsVisible: false\r\n      }\r\n    },\r\n    properties: {\r\n      patternColor: {\r\n        label: translator.t('color'),\r\n        type: 'color',\r\n        defaultValue: SharedStyle.AREA_MESH_COLOR.unselected\r\n      },\r\n      thickness: {\r\n        label: translator.t('thickness'),\r\n        type: 'length-measure',\r\n        defaultValue: {\r\n          length: 0,\r\n        }\r\n      }\r\n    },\r\n    render2D: function (element, layer, scene) {\r\n      let path = '';\r\n\r\n      ///print area path\r\n      element.vertices.forEach((vertexID, ind) => {\r\n        let vertex = layer.vertices.get(vertexID);\r\n        path += (ind ? 'L' : 'M') + vertex.x + ' ' + vertex.y + ' ';\r\n      });\r\n\r\n      //add holes\r\n      element.holes.forEach(areaID => {\r\n        let area = layer.areas.get(areaID);\r\n\r\n        area.vertices.reverse().forEach((vertexID, ind) => {\r\n          let vertex = layer.vertices.get(vertexID);\r\n          path += (ind ? 'L' : 'M') + vertex.x + ' ' + vertex.y + ' ';\r\n        });\r\n\r\n      });\r\n\r\n      let fill = element.selected ? SharedStyle.AREA_MESH_COLOR.selected : element.properties.get('patternColor');\r\n\r\n      return (<path d={path} fill={fill} />);\r\n    },\r\n\r\n    render3D: function (element, layer, scene) {\r\n      return createArea(element, layer, scene, textures)\r\n    },\r\n\r\n    updateRender3D: (element, layer, scene, mesh, oldElement, differences, selfDestroy, selfBuild) => {\r\n      return updatedArea(element, layer, scene, textures, mesh, oldElement, differences, selfDestroy, selfBuild);\r\n    }\r\n\r\n  };\r\n\r\n  if (textures && textures !== {}) {\r\n\r\n    let textureValues = { 'none': 'None' };\r\n\r\n    for (let textureName in textures) {\r\n      textureValues[textureName] = textures[textureName].name\r\n    }\r\n\r\n    areaElement.properties.texture = {\r\n      label: translator.t('texture'),\r\n      type: 'enum',\r\n      defaultValue: 'none',\r\n      values: textureValues\r\n    };\r\n\r\n  }\r\n\r\n  return areaElement\r\n\r\n}\r\n","import {\r\n  Shape,\r\n  MeshPhongMaterial,\r\n  ShapeGeometry,\r\n  Box3,\r\n  TextureLoader,\r\n  BackSide,\r\n  FrontSide,\r\n  Object3D,\r\n  Mesh,\r\n  MeshBasicMaterial,\r\n  RepeatWrapping,\r\n  Vector2,\r\n  DoubleSide\r\n} from 'three';\r\nimport * as SharedStyle from '../../shared-style';\r\n\r\n/**\r\n * Apply a texture to a wall face\r\n * @param material: The material of the face\r\n * @param texture: The texture to load\r\n * @param length: The lenght of the face\r\n * @param height: The height of the face\r\n */\r\nconst applyTexture = (material, texture, length, height) => {\r\n  let loader = new TextureLoader();\r\n\r\n  if (texture) {\r\n    material.map = loader.load(texture.uri);\r\n    material.needsUpdate = true;\r\n    material.map.wrapS = RepeatWrapping;\r\n    material.map.wrapT = RepeatWrapping;\r\n    material.map.repeat.set(length * texture.lengthRepeatScale, height * texture.heightRepeatScale);\r\n\r\n    if (texture.normal) {\r\n      material.normalMap = loader.load(texture.normal.uri);\r\n      material.normalScale = new Vector2(texture.normal.normalScaleX, texture.normal.normalScaleY);\r\n      material.normalMap.wrapS = RepeatWrapping;\r\n      material.normalMap.wrapT = RepeatWrapping;\r\n      material.normalMap.repeat.set(length * texture.normal.lengthRepeatScale, height * texture.normal.heightRepeatScale);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Function that assign UV coordinates to a geometry\r\n * @param geometry\r\n */\r\nconst assignUVs = (geometry) => {\r\n  geometry.computeBoundingBox();\r\n\r\n  let {min, max} = geometry.boundingBox;\r\n\r\n  let offset = new Vector2(0 - min.x, 0 - min.y);\r\n  let range = new Vector2(max.x - min.x, max.y - min.y);\r\n\r\n  geometry.faceVertexUvs[0] = geometry.faces.map((face) => {\r\n\r\n    let v1 = geometry.vertices[face.a];\r\n    let v2 = geometry.vertices[face.b];\r\n    let v3 = geometry.vertices[face.c];\r\n\r\n    return [\r\n      new Vector2((v1.x + offset.x) / range.x, (v1.y + offset.y) / range.y),\r\n      new Vector2((v2.x + offset.x) / range.x, (v2.y + offset.y) / range.y),\r\n      new Vector2((v3.x + offset.x) / range.x, (v3.y + offset.y) / range.y)\r\n    ];\r\n\r\n  });\r\n\r\n  geometry.uvsNeedUpdate = true;\r\n};\r\n\r\nexport function createArea(element, layer, scene, textures) {\r\n  let vertices = [];\r\n\r\n  element.vertices.forEach(vertexID => {\r\n    vertices.push(layer.vertices.get(vertexID));\r\n  });\r\n\r\n  let textureName = element.properties.get('texture');\r\n  let color = element.properties.get('patternColor');\r\n\r\n  if (element.selected) {\r\n    color = SharedStyle.AREA_MESH_COLOR.selected;\r\n  } else if (textureName && textureName !== 'none') {\r\n    color = SharedStyle.AREA_MESH_COLOR.unselected;\r\n  }\r\n\r\n  let shape = new Shape();\r\n  shape.moveTo(vertices[0].x, vertices[0].y);\r\n  for (let i = 1; i < vertices.length; i++) {\r\n    shape.lineTo(vertices[i].x, vertices[i].y);\r\n  }\r\n\r\n  let areaMaterial = new MeshPhongMaterial({side: DoubleSide, color});\r\n\r\n  /* Create holes for the area */\r\n  element.holes.forEach(holeID => {\r\n    let holeCoords = [];\r\n    layer.getIn(['areas', holeID, 'vertices']).forEach(vertexID => {\r\n      let {x, y} = layer.getIn(['vertices', vertexID]);\r\n      holeCoords.push([x, y]);\r\n    });\r\n    holeCoords = holeCoords.reverse();\r\n    let holeShape = createShape(holeCoords);\r\n    shape.holes.push(holeShape);\r\n  });\r\n\r\n  let shapeGeometry = new ShapeGeometry(shape);\r\n  assignUVs(shapeGeometry);\r\n\r\n  let boundingBox = new Box3().setFromObject(new Mesh(shapeGeometry, new MeshBasicMaterial()));\r\n\r\n  let width = boundingBox.max.x - boundingBox.min.x;\r\n  let height = boundingBox.max.y - boundingBox.min.y;\r\n\r\n  let texture = textures[textureName];\r\n\r\n  applyTexture(areaMaterial, texture, width, height);\r\n\r\n  let area = new Mesh(shapeGeometry, areaMaterial);\r\n\r\n  area.rotation.x -= Math.PI / 2;\r\n  area.name = 'floor';\r\n\r\n  return Promise.resolve(area);\r\n}\r\n\r\nexport function updatedArea( element, layer, scene, textures, mesh, oldElement, differences, selfDestroy, selfBuild ) {\r\n  let noPerf = () => { selfDestroy(); return selfBuild(); };\r\n  let floor = mesh.getObjectByName('floor');\r\n\r\n  if( differences[0] == 'selected' ) {\r\n    let color = element.selected ? SharedStyle.AREA_MESH_COLOR.selected : ( element.properties.get('patternColor') || SharedStyle.AREA_MESH_COLOR.unselected );\r\n    floor.material.color.set( color );\r\n  }\r\n  else if( differences[0] == 'properties' ){\r\n    if( differences[1] === 'texture' ) {\r\n      return noPerf();\r\n    }\r\n  }\r\n  else return noPerf();\r\n\r\n  return Promise.resolve(mesh);\r\n}\r\n\r\n/**\r\n * This function will create a shape given a list of coordinates\r\n * @param shapeCoords\r\n * @returns {Shape}\r\n */\r\nconst createShape = (shapeCoords) => {\r\n  let shape = new Shape();\r\n  shape.moveTo(shapeCoords[0][0], shapeCoords[0][1]);\r\n  for (let i = 1; i < shapeCoords.length; i++) {\r\n    shape.lineTo(shapeCoords[i][0], shapeCoords[i][1]);\r\n  }\r\n  return shape;\r\n};\r\n","import { ElementsFactories } from \"react-planner\";\r\n\r\nlet info = {\r\n  title: \"area\",\r\n  tag: [\"area\"],\r\n  description: \"Generic Room\",\r\n  image: \"\",\r\n};\r\n\r\nlet textures = {\r\n  parquet: {\r\n    name: \"Parquet\",\r\n    uri: require(\"./textures/parquet.jpg\"),\r\n    lengthRepeatScale: 0.004,\r\n    heightRepeatScale: 0.004,\r\n  },\r\n  tile1: {\r\n    name: \"Tile1\",\r\n    uri: require(\"./textures/tile1.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n  },\r\n  ceramic: {\r\n    name: \"Ceramic Tile\",\r\n    uri: require(\"./textures/ceramic-tile.jpg\"),\r\n    lengthRepeatScale: 0.02,\r\n    heightRepeatScale: 0.02,\r\n  },\r\n  strand_porcelain: {\r\n    name: \"Strand Porcelain Tile\",\r\n    uri: require(\"./textures/strand-porcelain.jpg\"),\r\n    lengthRepeatScale: 0.02,\r\n    heightRepeatScale: 0.02,\r\n  },\r\n  grass: {\r\n    name: \"Grass\",\r\n    uri: require(\"./textures/grass.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n  },\r\n};\r\n\r\nexport default ElementsFactories.AreaFactory(\"area\", info, textures);\r\n","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/parquet.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/tile1.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/ceramic-tile.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/strand-porcelain.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/grass.jpg\";","import { ElementsFactories } from \"react-planner\";\r\n\r\nconst info = {\r\n  title: \"dividerwall\",\r\n  tag: [\"dividerwall\"],\r\n  description: \"Wall with bricks or painted\",\r\n  image: require(\"./wall.png\"),\r\n  visibility: {\r\n    catalog: true,\r\n    layerElementsVisible: true,\r\n  },\r\n  thickness: 0,\r\n};\r\n\r\nconst textures = {\r\n  bricks: {\r\n    name: \"Bricks\",\r\n    uri: require(\"./textures/painted.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n    normal: {\r\n      uri: require(\"./textures/painted-normal.jpg\"),\r\n      lengthRepeatScale: 0.01,\r\n      heightRepeatScale: 0.01,\r\n      normalScaleX: 0.8,\r\n      normalScaleY: 0.8,\r\n    },\r\n  },\r\n  painted: {\r\n    name: \"Painted\",\r\n    uri: require(\"./textures/painted.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n    normal: {\r\n      uri: require(\"./textures/painted-normal.jpg\"),\r\n      lengthRepeatScale: 0.01,\r\n      heightRepeatScale: 0.01,\r\n      normalScaleX: 0.4,\r\n      normalScaleY: 0.4,\r\n    },\r\n  },\r\n};\r\n\r\nexport default ElementsFactories.WallFactory(\"dividerwall\", info, textures);\r\n","module.exports = __webpack_public_path__ + \"catalog/lines/dividerwall/wall.png\";","import { ElementsFactories } from \"react-planner\";\r\n\r\nconst info = {\r\n  title: \"externalwall\",\r\n  tag: [\"externalwall\"],\r\n  description: \"Wall with bricks or painted\",\r\n  image: require(\"./wall.png\"),\r\n  visibility: {\r\n    catalog: true,\r\n    layerElementsVisible: true,\r\n  },\r\n  thickness: 20,\r\n};\r\n\r\nconst textures = {\r\n  bricks: {\r\n    name: \"Bricks\",\r\n    uri: require(\"./textures/painted.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n    normal: {\r\n      uri: require(\"./textures/painted-normal.jpg\"),\r\n      lengthRepeatScale: 0.01,\r\n      heightRepeatScale: 0.01,\r\n      normalScaleX: 0.8,\r\n      normalScaleY: 0.8,\r\n    },\r\n  },\r\n  painted: {\r\n    name: \"Painted\",\r\n    uri: require(\"./textures/painted.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n    normal: {\r\n      uri: require(\"./textures/painted-normal.jpg\"),\r\n      lengthRepeatScale: 0.01,\r\n      heightRepeatScale: 0.01,\r\n      normalScaleX: 0.4,\r\n      normalScaleY: 0.4,\r\n    },\r\n  },\r\n};\r\n\r\nexport default ElementsFactories.WallFactory(\"externalwall\", info, textures);\r\n","module.exports = __webpack_public_path__ + \"catalog/lines/externalwall/wall.png\";","import { ElementsFactories } from \"react-planner\";\r\n\r\nconst info = {\r\n  title: \"interiorWall\",\r\n  tag: [\"interiorWall\"],\r\n  description: \"Wall with bricks or painted\",\r\n  image: require(\"./wall.png\"),\r\n  visibility: {\r\n    catalog: true,\r\n    layerElementsVisible: true,\r\n  },\r\n  thickness: 10,\r\n};\r\n\r\nconst textures = {\r\n  bricks: {\r\n    name: \"Bricks\",\r\n    uri: require(\"./textures/painted.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n    normal: {\r\n      uri: require(\"./textures/painted-normal.jpg\"),\r\n      lengthRepeatScale: 0.01,\r\n      heightRepeatScale: 0.01,\r\n      normalScaleX: 0.8,\r\n      normalScaleY: 0.8,\r\n    },\r\n  },\r\n  painted: {\r\n    name: \"Painted\",\r\n    uri: require(\"./textures/painted.jpg\"),\r\n    lengthRepeatScale: 0.01,\r\n    heightRepeatScale: 0.01,\r\n    normal: {\r\n      uri: require(\"./textures/painted-normal.jpg\"),\r\n      lengthRepeatScale: 0.01,\r\n      heightRepeatScale: 0.01,\r\n      normalScaleX: 0.4,\r\n      normalScaleY: 0.4,\r\n    },\r\n  },\r\n};\r\n\r\nexport default ElementsFactories.WallFactory(\"internalwall\", info, textures);\r\n","module.exports = __webpack_public_path__ + \"catalog/lines/interiorwall/wall.png\";","import React from 'react';\r\nimport * as Three from 'three';\r\nimport {loadObjWithMaterial} from '../../utils/load-obj';\r\nimport path from 'path';\r\n\r\nlet cached3DDoor = null;\r\n\r\nconst STYLE_HOLE_BASE = {stroke: '#FFF', strokeWidth: '0px', fill: '#FFF'};\r\nconst STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '2px', fill: '#FFF', cursor: 'move'};\r\nconst STYLE_LINE_BASE = {stroke: '#BABABA', strokeWidth: '1px', fill: '#BABABA'};\r\nconst STYLE_LINE_SELECTED = {stroke: '#0096fd', strokeWidth: '2px', fill: '#none', cursor: 'move'};\r\nconst STYLE_ARC_BASE = {stroke: '#BABABA', strokeWidth: '1px', fill: 'none'};\r\nconst STYLE_ARC_SELECTED = {stroke: '#0096fd', strokeWidth: '1px', fill: 'none', cursor: 'move'};\r\nconst STYLE_PNG_BASE = { transform: 'translate(50px, -5px)' };\r\nconst EPSILON = 3;\r\n\r\nexport default {\r\n  name: 'door-cursor',\r\n  prototype: 'cursor',\r\n\r\n  info: {\r\n    title: 'door-cursor',\r\n    tag: ['door-cursor'],\r\n    description: 'Wooden door',\r\n    image: require('./door.png')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'Width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 80\r\n      }\r\n    },\r\n    height: {\r\n      label: 'Height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 215\r\n      }\r\n    },\r\n    altitude: {\r\n      label: 'Altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 0\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'Thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 30\r\n      }\r\n    },\r\n    flip_orizzontal: {\r\n      label: 'flip orizzontale',\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n      values: {\r\n        'none': false,\r\n        'yes':  true\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    let epsilon = 20;\r\n    let holeWidth = 80;\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${0}  L${0} ${0}  z`;\r\n    let arcPath = `M${0},${0}  A${holeWidth},${holeWidth} 0 0,1 ${holeWidth},${holeWidth}`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let lineStyle = element.selected ? STYLE_LINE_SELECTED : STYLE_LINE_BASE;\r\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n\r\n    return (\r\n      <g transform={`translate(${-length / 2}, 0)`}>\r\n        <path d={arcPath} style={STYLE_ARC_SELECTED} transform={`translate(${0},${holeWidth}) scale(${1},${-1}) rotate(${0})`}/>\r\n        <line x1={0} y1={holeWidth} x2={0} y2={0 - EPSILON} style={STYLE_LINE_SELECTED} transform={`scale(${-1},${1})`}/>\r\n        <path d={holePath} style={STYLE_HOLE_SELECTED}/>\r\n        <image href=\"/assets/disable.png\" style={STYLE_PNG_BASE}/>\r\n      </g>\r\n    )\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    let onLoadItem = (object) => {\r\n      let boundingBox = new Three.Box3().setFromObject(object);\r\n\r\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\r\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\r\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\r\n\r\n      if (element.selected) {\r\n        let box = new Three.BoxHelper(object, 0x99c3fb);\r\n        box.material.linewidth = 2;\r\n        box.material.depthTest = false;\r\n        box.renderOrder = 1000;\r\n        object.add(box);\r\n      }\r\n\r\n      let width = element.properties.get('width').get('length');\r\n      let height = element.properties.get('height').get('length');\r\n      let thickness = element.properties.get('thickness').get('length');\r\n\r\n      object.scale.set(width / initialWidth, height / initialHeight,\r\n        thickness / initialThickness);\r\n\r\n      return object;\r\n    };\r\n\r\n    if(cached3DDoor) {\r\n      return Promise.resolve(onLoadItem(cached3DDoor.clone()));\r\n    }\r\n\r\n    let mtl = require('./door.mtl');\r\n    let obj = require('./door.obj');\r\n    let img = require('./texture.jpg');\r\n\r\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\r\n      .then(object => {\r\n        cached3DDoor = object;\r\n        return onLoadItem(cached3DDoor.clone())\r\n      })\r\n\r\n  }\r\n};\r\n","/**\r\n * Loads a Wavefront .mtl file specifying materials\r\n *\r\n * @author angelxuanchang\r\n */\r\n\r\nvar THREE = window.THREE || require('three');\r\nlet MTLLoader;\r\n\r\nMTLLoader = function( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nObject.assign( MTLLoader.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\t/**\r\n\t * Loads and parses a MTL asset from a URL.\r\n\t *\r\n\t * @param {String} url - URL to the MTL file.\r\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\r\n\t * @param {Function} [onProgress] - Callback for download progress.\r\n\t * @param {Function} [onError] - Callback for download errors.\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\r\n\t */\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set base path for resolving references.\r\n\t * If set this path will be prepended to each loaded and found reference.\r\n\t *\r\n\t * @see setTexturePath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetPath: function ( path ) {\r\n\r\n\t\tthis.path = path;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Set base path for resolving texture references.\r\n\t * If set this path will be prepended found texture reference.\r\n\t * If not set and setPath is, it will be used as texture base path.\r\n\t *\r\n\t * @see setPath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetTexturePath: function( path ) {\r\n\r\n\t\tthis.texturePath = path;\r\n\r\n\t},\r\n\r\n\tsetBaseUrl: function( path ) {\r\n\r\n\t\tconsole.warn( 'THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );\r\n\r\n\t\tthis.setTexturePath( path );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetMaterialOptions: function ( value ) {\r\n\r\n\t\tthis.materialOptions = value;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Parses a MTL file.\r\n\t *\r\n\t * @param {String} text - Content of MTL file\r\n\t * @return {THREE.MTLLoader.MaterialCreator}\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\r\n\t */\r\n\tparse: function ( text ) {\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\t\tvar info = {};\r\n\t\tvar delimiter_pattern = /\\s+/;\r\n\t\tvar materialsInfo = {};\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tvar line = lines[ i ];\r\n\t\t\tline = line.trim();\r\n\r\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\r\n\r\n\t\t\t\t// Blank line or comment ignore\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = line.indexOf( ' ' );\r\n\r\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\r\n\t\t\tkey = key.toLowerCase();\r\n\r\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\r\n\t\t\tvalue = value.trim();\r\n\r\n\t\t\tif ( key === 'newmtl' ) {\r\n\r\n\t\t\t\t// New material\r\n\r\n\t\t\t\tinfo = { name: value };\r\n\t\t\t\tmaterialsInfo[ value ] = info;\r\n\r\n\t\t\t} else if ( info ) {\r\n\r\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' ) {\r\n\r\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\r\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tinfo[ key ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );\r\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\r\n\t\tmaterialCreator.setManager( this.manager );\r\n\t\tmaterialCreator.setMaterials( materialsInfo );\r\n\t\treturn materialCreator;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n/**\r\n * Create a new THREE-MTLLoader.MaterialCreator\r\n * @param baseUrl - Url relative to which textures are loaded\r\n * @param options - Set of options on how to construct the materials\r\n *                  side: Which side to apply the material\r\n *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide\r\n *                  wrap: What type of wrapping to apply for textures\r\n *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\r\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\r\n *                                Default: false, assumed to be already normalized\r\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\r\n *                                  Default: false\r\n * @constructor\r\n */\r\n\r\nMTLLoader.MaterialCreator = function( baseUrl, options ) {\r\n\r\n\tthis.baseUrl = baseUrl || '';\r\n\tthis.options = options;\r\n\tthis.materialsInfo = {};\r\n\tthis.materials = {};\r\n\tthis.materialsArray = [];\r\n\tthis.nameLookup = {};\r\n\r\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;\r\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;\r\n\r\n};\r\n\r\nMTLLoader.MaterialCreator.prototype = {\r\n\r\n\tconstructor: MTLLoader.MaterialCreator,\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetManager: function ( value ) {\r\n\r\n\t\tthis.manager = value;\r\n\r\n\t},\r\n\r\n\tsetMaterials: function( materialsInfo ) {\r\n\r\n\t\tthis.materialsInfo = this.convert( materialsInfo );\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t},\r\n\r\n\tconvert: function( materialsInfo ) {\r\n\r\n\t\tif ( ! this.options ) return materialsInfo;\r\n\r\n\t\tvar converted = {};\r\n\r\n\t\tfor ( var mn in materialsInfo ) {\r\n\r\n\t\t\t// Convert materials info into normalized form based on options\r\n\r\n\t\t\tvar mat = materialsInfo[ mn ];\r\n\r\n\t\t\tvar covmat = {};\r\n\r\n\t\t\tconverted[ mn ] = covmat;\r\n\r\n\t\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\t\tvar save = true;\r\n\t\t\t\tvar value = mat[ prop ];\r\n\t\t\t\tvar lprop = prop.toLowerCase();\r\n\r\n\t\t\t\tswitch ( lprop ) {\r\n\r\n\t\t\t\t\tcase 'kd':\r\n\t\t\t\t\tcase 'ka':\r\n\t\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\r\n\r\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\r\n\r\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// ignore\r\n\r\n\t\t\t\t\t\t\t\tsave = false;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( save ) {\r\n\r\n\t\t\t\t\tcovmat[ lprop ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn converted;\r\n\r\n\t},\r\n\r\n\tpreload: function () {\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.create( mn );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetIndex: function( materialName ) {\r\n\r\n\t\treturn this.nameLookup[ materialName ];\r\n\r\n\t},\r\n\r\n\tgetAsArray: function() {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\r\n\t\t\tthis.nameLookup[ mn ] = index;\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materialsArray;\r\n\r\n\t},\r\n\r\n\tcreate: function ( materialName ) {\r\n\r\n\t\tif ( this.materials[ materialName ] === undefined ) {\r\n\r\n\t\t\tthis.createMaterial_( materialName );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materials[ materialName ];\r\n\r\n\t},\r\n\r\n\tcreateMaterial_: function ( materialName ) {\r\n\r\n\t\t// Create material\r\n\r\n\t\tvar mat = this.materialsInfo[ materialName ];\r\n\t\tvar params = {\r\n\r\n\t\t\tname: materialName,\r\n\t\t\tside: this.side\r\n\r\n\t\t};\r\n\r\n\t\tvar resolveURL = function ( baseUrl, url ) {\r\n\r\n\t\t\tif ( typeof url !== 'string' || url === '' )\r\n\t\t\t\treturn '';\r\n\r\n\t\t\t// Absolute URL\r\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) {\r\n\t\t\t\treturn url;\r\n\t\t\t}\r\n\r\n\t\t\treturn baseUrl + url;\r\n\t\t};\r\n\r\n\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\tvar value = mat[ prop ];\r\n\r\n\t\t\tif ( value === '' ) continue;\r\n\r\n\t\t\tswitch ( prop.toLowerCase() ) {\r\n\r\n\t\t\t\t// Ns is material specular exponent\r\n\r\n\t\t\t\tcase 'kd':\r\n\r\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\tparams.color = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\r\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_kd':\r\n\r\n\t\t\t\t\t// Diffuse texture map\r\n\r\n\t\t\t\t\tif ( params.map ) break; // Keep the first encountered texture\r\n\r\n\t\t\t\t\tvar texParams = this.getTextureParams( value, params );\r\n\r\n\t\t\t\t\tparams.map = this.loadTexture( resolveURL( this.baseUrl, texParams.url ) );\r\n\t\t\t\t\tparams.map.repeat.copy( texParams.scale );\r\n\t\t\t\t\tparams.map.offset.copy( texParams.offset );\r\n\r\n\t\t\t\t\tparams.map.wrapS = this.wrap;\r\n\t\t\t\t\tparams.map.wrapT = this.wrap;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_ks':\r\n\r\n\t\t\t\t\t// Specular map\r\n\r\n\t\t\t\t\tif ( params.specularMap ) break; // Keep the first encountered texture\r\n\r\n\t\t\t\t\tparams.specularMap = this.loadTexture( resolveURL( this.baseUrl, value ) );\r\n\t\t\t\t\tparams.specularMap.wrapS = this.wrap;\r\n\t\t\t\t\tparams.specularMap.wrapT = this.wrap;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ns':\r\n\r\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\r\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\r\n\r\n\t\t\t\t\tparams.shininess = parseFloat( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'd':\r\n\r\n\t\t\t\t\tif ( value < 1 ) {\r\n\r\n\t\t\t\t\t\tparams.opacity = value;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Tr':\r\n\r\n\t\t\t\t\tif ( value > 0 ) {\r\n\r\n\t\t\t\t\t\tparams.opacity = 1 - value;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_bump':\r\n\t\t\t\tcase 'bump':\r\n\r\n\t\t\t\t\t// Bump texture map\r\n\r\n\t\t\t\t\tif ( params.bumpMap ) break; // Keep the first encountered texture\r\n\r\n\t\t\t\t\tvar texParams = this.getTextureParams( value, params );\r\n\r\n\t\t\t\t\tparams.bumpMap = this.loadTexture( resolveURL( this.baseUrl, texParams.url ) );\r\n\t\t\t\t\tparams.bumpMap.repeat.copy( texParams.scale );\r\n\t\t\t\t\tparams.bumpMap.offset.copy( texParams.offset );\r\n\r\n\t\t\t\t\tparams.bumpMap.wrapS = this.wrap;\r\n\t\t\t\t\tparams.bumpMap.wrapT = this.wrap;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\r\n\t\treturn this.materials[ materialName ];\r\n\t},\r\n\r\n\tgetTextureParams: function( value, matParams ) {\r\n\r\n\t\tvar texParams = {\r\n\r\n\t\t\tscale: new THREE.Vector2( 1, 1 ),\r\n\t\t\toffset: new THREE.Vector2( 0, 0 ),\r\n\r\n\t\t };\r\n\r\n\t\tvar items = value.split(/\\s+/);\r\n\t\tvar pos;\r\n\r\n\t\tpos = items.indexOf('-bm');\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\tmatParams.bumpScale = parseFloat( items[pos+1] );\r\n\t\t\titems.splice( pos, 2 );\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf('-s');\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\ttexParams.scale.set( parseFloat( items[pos+1] ), parseFloat( items[pos+2] ) );\r\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf('-o');\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\ttexParams.offset.set( parseFloat( items[pos+1] ), parseFloat( items[pos+2] ) );\r\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\ttexParams.url = items.join(' ').trim();\r\n\t\treturn texParams;\r\n\r\n\t},\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture;\r\n\t\tvar loader = THREE.Loader.Handlers.get( url );\r\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;\r\n\r\n\t\tif ( loader === null ) {\r\n\r\n\t\t\tloader = new THREE.TextureLoader( manager );\r\n\r\n\t\t}\r\n\r\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\r\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\r\n\r\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\nmodule.exports = MTLLoader;\r\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\nvar THREE = window.THREE || require('three');\r\nlet OBJLoader;\r\nOBJLoader = (function () {\r\n  // o object_name | g group_name\r\n  var object_pattern = /^[og]\\s*(.+)?/;\r\n  // mtllib file_reference\r\n  var material_library_pattern = /^mtllib /;\r\n  // usemtl material_name\r\n  var material_use_pattern = /^usemtl /;\r\n  function ParserState() {\r\n    var state = {\r\n      objects: [],\r\n      object: {},\r\n      vertices: [],\r\n      normals: [],\r\n      colors: [],\r\n      uvs: [],\r\n      materialLibraries: [],\r\n      startObject: function (name, fromDeclaration) {\r\n        // If the current object (initial from reset) is not from a g/o declaration in the parsed\r\n        // file. We need to use it for the first parsed g/o to keep things in sync.\r\n        if (this.object && this.object.fromDeclaration === false) {\r\n          this.object.name = name;\r\n          this.object.fromDeclaration = (fromDeclaration !== false);\r\n          return;\r\n        }\r\n        var previousMaterial = (this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined);\r\n        if (this.object && typeof this.object._finalize === 'function') {\r\n          this.object._finalize(true);\r\n        }\r\n        this.object = {\r\n          name: name || '',\r\n          fromDeclaration: (fromDeclaration !== false),\r\n          geometry: {\r\n            vertices: [],\r\n            normals: [],\r\n            colors: [],\r\n            uvs: []\r\n          },\r\n          materials: [],\r\n          smooth: true,\r\n          startMaterial: function (name, libraries) {\r\n            var previous = this._finalize(false);\r\n            // New usemtl declaration overwrites an inherited material, except if faces were declared\r\n            // after the material, then it must be preserved for proper MultiMaterial continuation.\r\n            if (previous && (previous.inherited || previous.groupCount <= 0)) {\r\n              this.materials.splice(previous.index, 1);\r\n            }\r\n            var material = {\r\n              index: this.materials.length,\r\n              name: name || '',\r\n              mtllib: (Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : ''),\r\n              smooth: (previous !== undefined ? previous.smooth : this.smooth),\r\n              groupStart: (previous !== undefined ? previous.groupEnd : 0),\r\n              groupEnd: - 1,\r\n              groupCount: - 1,\r\n              inherited: false,\r\n              clone: function (index) {\r\n                var cloned = {\r\n                  index: (typeof index === 'number' ? index : this.index),\r\n                  name: this.name,\r\n                  mtllib: this.mtllib,\r\n                  smooth: this.smooth,\r\n                  groupStart: 0,\r\n                  groupEnd: - 1,\r\n                  groupCount: - 1,\r\n                  inherited: false\r\n                };\r\n                cloned.clone = this.clone.bind(cloned);\r\n                return cloned;\r\n              }\r\n            };\r\n            this.materials.push(material);\r\n            return material;\r\n          },\r\n          currentMaterial: function () {\r\n            if (this.materials.length > 0) {\r\n              return this.materials[this.materials.length - 1];\r\n            }\r\n            return undefined;\r\n          },\r\n          _finalize: function (end) {\r\n            var lastMultiMaterial = this.currentMaterial();\r\n            if (lastMultiMaterial && lastMultiMaterial.groupEnd === - 1) {\r\n              lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\r\n              lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\r\n              lastMultiMaterial.inherited = false;\r\n            }\r\n            // Ignore objects tail materials if no face declarations followed them before a new o/g started.\r\n            if (end && this.materials.length > 1) {\r\n              for (var mi = this.materials.length - 1; mi >= 0; mi--) {\r\n                if (this.materials[mi].groupCount <= 0) {\r\n                  this.materials.splice(mi, 1);\r\n                }\r\n              }\r\n            }\r\n            // Guarantee at least one empty material, this makes the creation later more straight forward.\r\n            if (end && this.materials.length === 0) {\r\n              this.materials.push({\r\n                name: '',\r\n                smooth: this.smooth\r\n              });\r\n            }\r\n            return lastMultiMaterial;\r\n          }\r\n        };\r\n        // Inherit previous objects material.\r\n        // Spec tells us that a declared material must be set to all objects until a new material is declared.\r\n        // If a usemtl declaration is encountered while this new object is being parsed, it will\r\n        // overwrite the inherited material. Exception being that there was already face declarations\r\n        // to the inherited material, then it will be preserved for proper MultiMaterial continuation.\r\n        if (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function') {\r\n          var declared = previousMaterial.clone(0);\r\n          declared.inherited = true;\r\n          this.object.materials.push(declared);\r\n        }\r\n        this.objects.push(this.object);\r\n      },\r\n      finalize: function () {\r\n        if (this.object && typeof this.object._finalize === 'function') {\r\n          this.object._finalize(true);\r\n        }\r\n      },\r\n      parseVertexIndex: function (value, len) {\r\n        var index = parseInt(value, 10);\r\n        return (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n      },\r\n      parseNormalIndex: function (value, len) {\r\n        var index = parseInt(value, 10);\r\n        return (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n      },\r\n      parseUVIndex: function (value, len) {\r\n        var index = parseInt(value, 10);\r\n        return (index >= 0 ? index - 1 : index + len / 2) * 2;\r\n      },\r\n      addVertex: function (a, b, c) {\r\n        var src = this.vertices;\r\n        var dst = this.object.geometry.vertices;\r\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\r\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\r\n      },\r\n      addVertexPoint: function (a) {\r\n        var src = this.vertices;\r\n        var dst = this.object.geometry.vertices;\r\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n      },\r\n      addVertexLine: function (a) {\r\n        var src = this.vertices;\r\n        var dst = this.object.geometry.vertices;\r\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n      },\r\n      addNormal: function (a, b, c) {\r\n        var src = this.normals;\r\n        var dst = this.object.geometry.normals;\r\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\r\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\r\n      },\r\n      addColor: function (a, b, c) {\r\n        var src = this.colors;\r\n        var dst = this.object.geometry.colors;\r\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\r\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\r\n      },\r\n      addUV: function (a, b, c) {\r\n        var src = this.uvs;\r\n        var dst = this.object.geometry.uvs;\r\n        dst.push(src[a + 0], src[a + 1]);\r\n        dst.push(src[b + 0], src[b + 1]);\r\n        dst.push(src[c + 0], src[c + 1]);\r\n      },\r\n      addUVLine: function (a) {\r\n        var src = this.uvs;\r\n        var dst = this.object.geometry.uvs;\r\n        dst.push(src[a + 0], src[a + 1]);\r\n      },\r\n      addFace: function (a, b, c, ua, ub, uc, na, nb, nc) {\r\n        var vLen = this.vertices.length;\r\n        var ia = this.parseVertexIndex(a, vLen);\r\n        var ib = this.parseVertexIndex(b, vLen);\r\n        var ic = this.parseVertexIndex(c, vLen);\r\n        this.addVertex(ia, ib, ic);\r\n        if (ua !== undefined && ua !== '') {\r\n          var uvLen = this.uvs.length;\r\n          ia = this.parseUVIndex(ua, uvLen);\r\n          ib = this.parseUVIndex(ub, uvLen);\r\n          ic = this.parseUVIndex(uc, uvLen);\r\n          this.addUV(ia, ib, ic);\r\n        }\r\n        if (na !== undefined && na !== '') {\r\n          // Normals are many times the same. If so, skip function call and parseInt.\r\n          var nLen = this.normals.length;\r\n          ia = this.parseNormalIndex(na, nLen);\r\n          ib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\r\n          ic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\r\n          this.addNormal(ia, ib, ic);\r\n        }\r\n        if (this.colors.length > 0) {\r\n          this.addColor(ia, ib, ic);\r\n        }\r\n      },\r\n      addPointGeometry: function (vertices) {\r\n        this.object.geometry.type = 'Points';\r\n        var vLen = this.vertices.length;\r\n        for (var vi = 0, l = vertices.length; vi < l; vi++) {\r\n          this.addVertexPoint(this.parseVertexIndex(vertices[vi], vLen));\r\n        }\r\n      },\r\n      addLineGeometry: function (vertices, uvs) {\r\n        this.object.geometry.type = 'Line';\r\n        var vLen = this.vertices.length;\r\n        var uvLen = this.uvs.length;\r\n        for (var vi = 0, l = vertices.length; vi < l; vi++) {\r\n          this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\r\n        }\r\n        for (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\r\n          this.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\r\n        }\r\n      }\r\n    };\r\n    state.startObject('', false);\r\n    return state;\r\n  }\r\n  //\r\n  function OBJLoader(manager) {\r\n    this.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\r\n    this.materials = null;\r\n  }\r\n  OBJLoader.prototype = {\r\n    constructor: OBJLoader,\r\n    load: function (url, onLoad, onProgress, onError) {\r\n      var scope = this;\r\n      var loader = new THREE.FileLoader(scope.manager);\r\n      loader.setPath(this.path);\r\n      loader.load(url, function (text) {\r\n        onLoad(scope.parse(text));\r\n      }, onProgress, onError);\r\n    },\r\n    setPath: function (value) {\r\n      this.path = value;\r\n    },\r\n    setMaterials: function (materials) {\r\n      this.materials = materials;\r\n      return this;\r\n    },\r\n    parse: function (text) {\r\n      console.time('OBJLoader');\r\n      var state = new ParserState();\r\n      if (text.indexOf('\\r\\n') !== - 1) {\r\n        // This is faster than String.split with regex that splits on both\r\n        text = text.replace(/\\r\\n/g, '\\n');\r\n      }\r\n      if (text.indexOf('\\\\\\n') !== - 1) {\r\n        // join lines separated by a line continuation character (\\)\r\n        text = text.replace(/\\\\\\n/g, '');\r\n      }\r\n      var lines = text.split('\\n');\r\n      var line = '', lineFirstChar = '';\r\n      var lineLength = 0;\r\n      var result = [];\r\n      // Faster to just trim left side of the line. Use if available.\r\n      var trimLeft = (typeof ''.trimLeft === 'function');\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        line = lines[i];\r\n        line = trimLeft ? line.trimLeft() : line.trim();\r\n        lineLength = line.length;\r\n        if (lineLength === 0) continue;\r\n        lineFirstChar = line.charAt(0);\r\n        // @todo invoke passed in handler if any\r\n        if (lineFirstChar === '#') continue;\r\n        if (lineFirstChar === 'v') {\r\n          var data = line.split(/\\s+/);\r\n          switch (data[0]) {\r\n            case 'v':\r\n              state.vertices.push(\r\n                parseFloat(data[1]),\r\n                parseFloat(data[2]),\r\n                parseFloat(data[3])\r\n              );\r\n              if (data.length === 8) {\r\n                state.colors.push(\r\n                  parseFloat(data[4]),\r\n                  parseFloat(data[5]),\r\n                  parseFloat(data[6])\r\n                );\r\n              }\r\n              break;\r\n            case 'vn':\r\n              state.normals.push(\r\n                parseFloat(data[1]),\r\n                parseFloat(data[2]),\r\n                parseFloat(data[3])\r\n              );\r\n              break;\r\n            case 'vt':\r\n              state.uvs.push(\r\n                parseFloat(data[1]),\r\n                parseFloat(data[2])\r\n              );\r\n              break;\r\n          }\r\n        } else if (lineFirstChar === 'f') {\r\n          var lineData = line.substr(1).trim();\r\n          var vertexData = lineData.split(/\\s+/);\r\n          var faceVertices = [];\r\n          // Parse the face vertex data into an easy to work with format\r\n          for (var j = 0, jl = vertexData.length; j < jl; j++) {\r\n            var vertex = vertexData[j];\r\n            if (vertex.length > 0) {\r\n              var vertexParts = vertex.split('/');\r\n              faceVertices.push(vertexParts);\r\n            }\r\n          }\r\n          // Draw an edge between the first vertex and all subsequent vertices to form an n-gon\r\n          var v1 = faceVertices[0];\r\n          for (var j = 1, jl = faceVertices.length - 1; j < jl; j++) {\r\n            var v2 = faceVertices[j];\r\n            var v3 = faceVertices[j + 1];\r\n            state.addFace(\r\n              v1[0], v2[0], v3[0],\r\n              v1[1], v2[1], v3[1],\r\n              v1[2], v2[2], v3[2]\r\n            );\r\n          }\r\n        } else if (lineFirstChar === 'l') {\r\n          var lineParts = line.substring(1).trim().split(\" \");\r\n          var lineVertices = [], lineUVs = [];\r\n          if (line.indexOf(\"/\") === - 1) {\r\n            lineVertices = lineParts;\r\n          } else {\r\n            for (var li = 0, llen = lineParts.length; li < llen; li++) {\r\n              var parts = lineParts[li].split(\"/\");\r\n              if (parts[0] !== \"\") lineVertices.push(parts[0]);\r\n              if (parts[1] !== \"\") lineUVs.push(parts[1]);\r\n            }\r\n          }\r\n          state.addLineGeometry(lineVertices, lineUVs);\r\n        } else if (lineFirstChar === 'p') {\r\n          var lineData = line.substr(1).trim();\r\n          var pointData = lineData.split(\" \");\r\n          state.addPointGeometry(pointData);\r\n        } else if ((result = object_pattern.exec(line)) !== null) {\r\n          // o object_name\r\n          // or\r\n          // g group_name\r\n          // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\r\n          // var name = result[ 0 ].substr( 1 ).trim();\r\n          var name = (\" \" + result[0].substr(1).trim()).substr(1);\r\n          state.startObject(name);\r\n        } else if (material_use_pattern.test(line)) {\r\n          // material\r\n          state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\r\n        } else if (material_library_pattern.test(line)) {\r\n          // mtl file\r\n          state.materialLibraries.push(line.substring(7).trim());\r\n        } else if (lineFirstChar === 's') {\r\n          result = line.split(' ');\r\n          // smooth shading\r\n          // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\r\n          // but does not define a usemtl for each face set.\r\n          // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\r\n          // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\r\n          // where explicit usemtl defines geometry groups.\r\n          // Example asset: examples/models/obj/cerberus/Cerberus.obj\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\r\n\t\t\t\t\t * or\r\n\t\t\t\t\t * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\r\n\t\t\t\t\t *\r\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\r\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\r\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\r\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\r\n\t\t\t\t\t * than 0.\"\r\n\t\t\t\t\t */\r\n          if (result.length > 1) {\r\n            var value = result[1].trim().toLowerCase();\r\n            state.object.smooth = (value !== '0' && value !== 'off');\r\n          } else {\r\n            // ZBrush can produce \"s\" lines #11707\r\n            state.object.smooth = true;\r\n          }\r\n          var material = state.object.currentMaterial();\r\n          if (material) material.smooth = state.object.smooth;\r\n        } else {\r\n          // Handle null terminated files without exception\r\n          if (line === '\\0') continue;\r\n          throw new Error('THREE.OBJLoader: Unexpected line: \"' + line + '\"');\r\n        }\r\n      }\r\n      state.finalize();\r\n      var container = new THREE.Group();\r\n      container.materialLibraries = [].concat(state.materialLibraries);\r\n      for (var i = 0, l = state.objects.length; i < l; i++) {\r\n        var object = state.objects[i];\r\n        var geometry = object.geometry;\r\n        var materials = object.materials;\r\n        var isLine = (geometry.type === 'Line');\r\n        var isPoints = (geometry.type === 'Points');\r\n        var hasVertexColors = false;\r\n        // Skip o/g line declarations that did not follow with any faces\r\n        if (geometry.vertices.length === 0) continue;\r\n        var buffergeometry = new THREE.BufferGeometry();\r\n        buffergeometry.addAttribute('position', new THREE.Float32BufferAttribute(geometry.vertices, 3));\r\n        if (geometry.normals.length > 0) {\r\n          buffergeometry.addAttribute('normal', new THREE.Float32BufferAttribute(geometry.normals, 3));\r\n        } else {\r\n          buffergeometry.computeVertexNormals();\r\n        }\r\n        if (geometry.colors.length > 0) {\r\n          hasVertexColors = true;\r\n          buffergeometry.addAttribute('color', new THREE.Float32BufferAttribute(geometry.colors, 3));\r\n        }\r\n        if (geometry.uvs.length > 0) {\r\n          buffergeometry.addAttribute('uv', new THREE.Float32BufferAttribute(geometry.uvs, 2));\r\n        }\r\n        // Create materials\r\n        var createdMaterials = [];\r\n        for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n          var sourceMaterial = materials[mi];\r\n          var material = undefined;\r\n          if (this.materials !== null) {\r\n            material = this.materials.create(sourceMaterial.name);\r\n            // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\r\n            if (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\r\n              var materialLine = new THREE.LineBasicMaterial();\r\n              materialLine.copy(material);\r\n              materialLine.lights = false; // TOFIX\r\n              material = materialLine;\r\n            } else if (isPoints && material && !(material instanceof THREE.PointsMaterial)) {\r\n              var materialPoints = new THREE.PointsMaterial({ size: 10, sizeAttenuation: false });\r\n              materialLine.copy(material);\r\n              material = materialPoints;\r\n            }\r\n          }\r\n          if (!material) {\r\n            if (isLine) {\r\n              material = new THREE.LineBasicMaterial();\r\n            } else if (isPoints) {\r\n              material = new THREE.PointsMaterial({ size: 1, sizeAttenuation: false });\r\n            } else {\r\n              material = new THREE.MeshPhongMaterial();\r\n            }\r\n            material.name = sourceMaterial.name;\r\n          }\r\n          material.flatShading = sourceMaterial.smooth ? false : true;\r\n          material.vertexColors = hasVertexColors ? THREE.VertexColors : THREE.NoColors;\r\n          createdMaterials.push(material);\r\n        }\r\n        // Create mesh\r\n        var mesh;\r\n        if (createdMaterials.length > 1) {\r\n          for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n            var sourceMaterial = materials[mi];\r\n            buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\r\n          }\r\n          if (isLine) {\r\n            mesh = new THREE.LineSegments(buffergeometry, createdMaterials);\r\n          } else if (isPoints) {\r\n            mesh = new THREE.Points(buffergeometry, createdMaterials);\r\n          } else {\r\n            mesh = new THREE.Mesh(buffergeometry, createdMaterials);\r\n          }\r\n        } else {\r\n          if (isLine) {\r\n            mesh = new THREE.LineSegments(buffergeometry, createdMaterials[0]);\r\n          } else if (isPoints) {\r\n            mesh = new THREE.Points(buffergeometry, createdMaterials[0]);\r\n          } else {\r\n            mesh = new THREE.Mesh(buffergeometry, createdMaterials[0]);\r\n          }\r\n        }\r\n        mesh.name = object.name;\r\n        container.add(mesh);\r\n      }\r\n      console.timeEnd('OBJLoader');\r\n      return container;\r\n    }\r\n  };\r\n  return OBJLoader;\r\n})();\r\nmodule.exports = OBJLoader;\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/door-cursor/door.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/door-cursor/door.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/door-cursor/door.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/door-cursor/texture.jpg\";","import React from 'react';\r\nimport * as Three from 'three';\r\n\r\nconst black = new Three.MeshLambertMaterial({color: 0x000000});\r\nconst metalBlue = new Three.MeshLambertMaterial({color: 0xB7CEEC});\r\nconst grey = new Three.MeshLambertMaterial({color: 0xD2B06A});\r\nconst darkGrey = new Three.MeshLambertMaterial({color:0xFFEFCE});\r\n\r\nconst boxMaterials = [grey, grey, grey, grey,darkGrey,darkGrey];\r\n\r\nfunction makeDoor(width,height,thickness){\r\n\r\n  let door_double = new Three.Mesh();\r\n\r\n  let LongDoorGeometry = new Three.BoxGeometry(.75*width,height,thickness);\r\n  let longDoor = new Three.Mesh(LongDoorGeometry,boxMaterials);\r\n  longDoor.position.x -= width*.25 ;\r\n  door_double.add(longDoor);\r\n\r\n  let ShortDoorGeometry = new Three.BoxGeometry(.25*width,height,thickness);\r\n  let shortDoor = new Three.Mesh(ShortDoorGeometry,boxMaterials);\r\n  shortDoor.position.x += width*0.25;\r\n  shortDoor.position.z += thickness/10;\r\n  door_double.add(shortDoor);\r\n\r\n  let handle = makeHandle(width);\r\n  handle.position.set(width/20,height/40,thickness/2+thickness/10);\r\n  handle.rotation.z += Math.PI;\r\n  handle.rotation.x += Math.PI/2;\r\n  door_double.add(handle);\r\n\r\n  let handleBase = makeHandleBase();\r\n  handleBase.position.set(width/20,0,thickness/2);\r\n  handleBase.rotation.x = 0;\r\n  door_double.add(handleBase);\r\n\r\n  let handle2 = makeHandle(width);\r\n  handle2.position.set(width/20,height/40,-thickness/2-thickness/10);\r\n  handle2.rotation.z += Math.PI;\r\n  handle2.rotation.x -= Math.PI/2;\r\n  door_double.add(handle2);\r\n\r\n  let handleBase2 = makeHandleBase();\r\n  handleBase2.position.set(width/20,0,-thickness/2);\r\n  handleBase2.rotation.x = 0;\r\n  door_double.add(handleBase2);\r\n\r\n  return door_double\r\n}\r\n\r\n\r\nfunction makeHandle(width) {\r\n\r\n  let handle = new Three.Object3D();\r\n  let geometry_p1 = new Three.CylinderGeometry(width/100, width/100, width/32.5, Math.round(32));\r\n  let geometry_p2 = new Three.SphereGeometry(width/100, Math.round(32), Math.round(32));\r\n  let geometry_p3 = new Three.CylinderGeometry(width/100, width/100, width/14.5, Math.round(32));\r\n  let p1 = new Three.Mesh(geometry_p1, black);\r\n  let p2 = new Three.Mesh(geometry_p2, black);\r\n  let p3 = new Three.Mesh(geometry_p3, black);\r\n  let p4 = new Three.Mesh(geometry_p2, black);\r\n  p3.rotation.z = Math.PI / 2;\r\n  p3.position.x = width/14.5 / 2;\r\n  p2.position.y = -width/32.5 / 2;\r\n  p4.position.y = -width/14.5 / 2;\r\n  p3.add(p4);\r\n  p2.add(p3);\r\n  p1.add(p2);\r\n  handle.add(p1);\r\n\r\n  return handle;\r\n}\r\n\r\nfunction makeHandleBase() {\r\n\r\n  let handleBase = new Three.Object3D();\r\n  let geometryBase1 = new Three.BoxGeometry(7.6, 28, 2);\r\n  let geometryBase2 = new Three.CylinderGeometry(3.6, 3.6, 2, Math.round(32));\r\n  let lock = makeLock();\r\n  let handleBase1 = new Three.Mesh(geometryBase1, black);\r\n  let handleBase2 = new Three.Mesh(geometryBase2, black);\r\n  lock.rotation.x = Math.PI / 2;\r\n  lock.position.y = -3;\r\n  handleBase2.rotation.x = Math.PI / 2;\r\n  handleBase2.position.y = -3.3;\r\n  handleBase2.scale.z = 1.5;\r\n  handleBase1.add(lock);\r\n  handleBase1.add(handleBase2);\r\n  handleBase.add(handleBase1);\r\n\r\n  return handleBase;\r\n}\r\n\r\nfunction makeLock() {\r\n\r\n  let lock = new Three.Object3D();\r\n  let LockGeometry1 = new Three.CylinderGeometry(1.5, 1.5, 4, Math.round(32));\r\n  let lockGeometry2 = new Three.BoxGeometry(1.6, 4, 4);\r\n  let lockGeometry3 = new Three.BoxGeometry(1.4, 4.06, 0.36);\r\n  let lock_p1 = new Three.Mesh(LockGeometry1, metalBlue);\r\n  let lock_p2 = new Three.Mesh(lockGeometry2, metalBlue);\r\n  let lock_p3 = new Three.Mesh(lockGeometry3, grey);\r\n  lock_p2.position.z = 1;\r\n  lock_p1.add(lock_p2);\r\n  lock_p1.add(lock_p3);\r\n  lock.add(lock_p1);\r\n\r\n  return lock;\r\n}\r\n\r\nexport default {\r\n  name: 'double door',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    tag: ['door'],\r\n    title: 'double door',\r\n    description: 'iron door',\r\n    image: require('./door_double.png')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 200,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    height: {\r\n      label: 'height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 215,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 30,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    altitude: {\r\n      label:'altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 0,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    flip_horizontal: {\r\n      label: 'flip',\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n      values: {\r\n        'none': false,\r\n        'yes':  true\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n\r\n    const STYLE_HOLE_BASE = {stroke: '#ff0000', strokeWidth: '3px', fill: '#ff0000'};\r\n    const STYLE_HOLE_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', fill: '#ff0000', cursor: 'move'};\r\n    const STYLE_ARC_BASE = {stroke: '#ff0000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\r\n    const STYLE_ARC_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', strokeDasharray: '5,5', fill: 'none', cursor: 'move'};\r\n\r\n    let epsilon = 3;\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let arcPath = `M${0},${0}  A${holeWidth/4},${holeWidth/4} 0 0,1 ${holeWidth/4},${holeWidth/4}`;\r\n    let arcPath2 =`M${0},${0}  A${holeWidth/2+holeWidth/4},${holeWidth/2+holeWidth/4} 0 0,0 ${holeWidth/2+holeWidth/4},${holeWidth/2+holeWidth/4}`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n\r\n\r\n    if(flip){\r\n      return (\r\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\r\n          <path key='1' d={arcPath} style={arcStyle} transform={`translate(${0},${-holeWidth/4})`}/>\r\n          <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={-holeWidth/4 - epsilon} style={holeStyle}/>\r\n          <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${holeWidth},${-holeWidth/2-holeWidth/4}) rotate(90)`}/>\r\n          <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={-holeWidth/2 - holeWidth/4 - epsilon} style={holeStyle}/>\r\n          <path key='5' d={holePath} style={holeStyle}/>\r\n        </g>\r\n      )\r\n    }\r\n    else {\r\n      return (\r\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\r\n          <path key='1' d={arcPath} style={arcStyle} transform={`translate(${holeWidth},${holeWidth/4}) rotate(180)`}/>\r\n          <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={holeWidth/2 + holeWidth/4 - epsilon} style={holeStyle}/>\r\n          <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${0},${holeWidth/2+holeWidth/4}) rotate(270)`}/>\r\n          <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={holeWidth/4 - epsilon} style={holeStyle}/>\r\n          <path key='5' d={holePath} style={holeStyle}/>\r\n        </g>\r\n      )\r\n    }\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let width = element.properties.get('width').get('length');\r\n    let height = element.properties.get('height').get('length');\r\n    let thickness = element.properties.get('thickness').get('length');\r\n    let newAltitude = element.properties.get('altitude').get('length');\r\n\r\n    let door_double = new Three.Object3D();\r\n    door_double.add(makeDoor(width,height,thickness).clone(width,height,thickness));\r\n\r\n    let valuePosition = new Three.Box3().setFromObject(door_double);\r\n\r\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\r\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\r\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\r\n\r\n    if (element.selected) {\r\n      let bbox = new Three.BoxHelper(door_double, 0x99c3fb);\r\n      bbox.material.linewidth = 5;\r\n      bbox.renderOrder = 1000;\r\n      bbox.material.depthTest = false;\r\n      door_double.add(bbox);\r\n    }\r\n\r\n    if(flip) {\r\n      door_double.rotation.y += Math.PI;\r\n      door_double.position.x -= width/4;\r\n    }\r\n\r\n    door_double.position.y += newAltitude;\r\n    door_double.position.x += width/8;\r\n    door_double.scale.set( width / deltaX, height / deltaY,thickness / deltaZ);\r\n\r\n    return Promise.resolve(door_double);\r\n\r\n  }\r\n};\r\n\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/door-double/door_double.png\";","import React from 'react';\r\nimport * as Three from 'three';\r\nimport {loadObjWithMaterial} from '../../utils/load-obj';\r\nimport { GeometryUtils } from \"../../../../../src/utils/export\";\r\nimport path from 'path';\r\n\r\nlet cached3DDoor = null;\r\n\r\nconst STYLE_HOLE_BASE = {stroke: '#FFF', strokeWidth: '0px', fill: '#FFF'};\r\nconst STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '2px', fill: '#FFF', cursor: 'move'};\r\nconst STYLE_LINE_BASE = {stroke: '#BABABA', strokeWidth: '1px', fill: '#BABABA'};\r\nconst STYLE_LINE_SELECTED = {stroke: '#0096fd', strokeWidth: '2px', fill: '#none', cursor: 'move'};\r\nconst STYLE_ARC_BASE = {stroke: '#BABABA', strokeWidth: '1px', fill: 'none'};\r\nconst STYLE_ARC_SELECTED = {stroke: '#0096fd', strokeWidth: '1px', fill: 'none', cursor: 'move'};\r\nconst STYLE_PNG_BASE = { transform: 'translate(50px, -5px)' };\r\nconst EPSILON = 3;\r\n\r\nexport default {\r\n  name: 'door',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    title: 'door',\r\n    tag: ['door'],\r\n    description: 'Wooden door',\r\n    image: require('./door.png')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'Width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 80\r\n      }\r\n    },\r\n    height: {\r\n      label: 'Height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 215\r\n      }\r\n    },\r\n    altitude: {\r\n      label: 'Altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 0\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'Thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 30\r\n      }\r\n    },\r\n    flip_orizzontal: {\r\n      label: 'flip orizzontale',\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n      values: {\r\n        'none': false,\r\n        'yes':  true\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    let flip = element.properties.get('flip_orizzontal');\r\n    let line = layer.lines.get(element.line);\r\n    let epsilon = (line.properties.get(\"thickness\").get(\"length\")) / 2;\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let arcPath = `M${0},${0}  A${holeWidth},${holeWidth} 0 0,1 ${holeWidth},${holeWidth}`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let lineStyle = element.selected ? STYLE_LINE_SELECTED : STYLE_LINE_BASE;\r\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n\r\n    let vertex0 = layer.vertices.get(line.vertices.get(0));\r\n    let vertex1 = layer.vertices.get(line.vertices.get(1));\r\n\r\n    if (vertex0.id === vertex1.id || GeometryUtils.samePoints(vertex0, vertex1))\r\n      return null; //avoid 0-length lines\r\n\r\n    let { x: x1, y: y1 } = vertex0;\r\n    let { x: x2, y: y2 } = vertex1;\r\n\r\n    if (x1 > x2) {\r\n      ({ x: x1, y: y1 } = vertex1);\r\n      ({ x: x2, y: y2 } = vertex0);\r\n    }\r\n\r\n    let Linelength = GeometryUtils.pointsDistance(x1, y1, x2, y2);\r\n    let angle = GeometryUtils.angleBetweenTwoPointsAndOrigin(x1, y1, x2, y2);\r\n\r\n    if(flip == false) {\r\n      return (\r\n        <g transform={`translate(${-length / 2}, 0)`}>\r\n          <path d={arcPath} style={arcStyle} transform={`translate(${0},${holeWidth}) scale(${1},${-1}) rotate(${0})`}/>\r\n          <line x1={0} y1={holeWidth} x2={0} y2={0 - EPSILON} style={lineStyle} transform={`scale(${-1},${1})`}/>\r\n          <path d={holePath} style={holeStyle}/>\r\n          {element.selected && <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/> }\r\n        </g>\r\n      )\r\n    }\r\n    else{\r\n      return (\r\n        <g transform={`translate(${-length / 2}, 0)`}>\r\n          <path d={arcPath} style={arcStyle} transform={`translate(${0},${-holeWidth}) scale(${1},${1}) rotate(${0})`}/>\r\n          <line x1={0} y1={-holeWidth} x2={0} y2={0 - EPSILON} style={lineStyle} transform={`scale(${-1},${1})`}/>\r\n          <path d={holePath} style={holeStyle}/>\r\n          {element.selected && <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/> }\r\n        </g>\r\n      )\r\n    }\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    let onLoadItem = (object) => {\r\n      let boundingBox = new Three.Box3().setFromObject(object);\r\n\r\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\r\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\r\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\r\n\r\n      if (element.selected) {\r\n        let box = new Three.BoxHelper(object, 0x99c3fb);\r\n        box.material.linewidth = 2;\r\n        box.material.depthTest = false;\r\n        box.renderOrder = 1000;\r\n        object.add(box);\r\n      }\r\n\r\n      let width = element.properties.get('width').get('length');\r\n      let height = element.properties.get('height').get('length');\r\n      let thickness = element.properties.get('thickness').get('length');\r\n\r\n      object.scale.set(width / initialWidth, height / initialHeight,\r\n        thickness / initialThickness);\r\n\r\n      return object;\r\n    };\r\n\r\n    if(cached3DDoor) {\r\n      return Promise.resolve(onLoadItem(cached3DDoor.clone()));\r\n    }\r\n\r\n    let mtl = require('./door.mtl');\r\n    let obj = require('./door.obj');\r\n    let img = require('./texture.jpg');\r\n\r\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\r\n      .then(object => {\r\n        cached3DDoor = object;\r\n        return onLoadItem(cached3DDoor.clone())\r\n      })\r\n\r\n  }\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/door/door.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/door/door.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/door/door.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/door/texture.jpg\";","import React from 'react';\r\nimport * as Three from 'three';\r\nimport path from 'path';\r\n\r\nexport default {\r\n  name: 'gate',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    tag: ['gate'],\r\n    title: 'gate',\r\n    description: 'hole in the wall',\r\n    image: require('./gate.jpg')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 80\r\n      }\r\n    },\r\n    height: {\r\n      label: 'height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 215\r\n      }\r\n    },\r\n    altitude: {\r\n      label: 'altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 0\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 30\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const STYLE_HOLE_BASE = {stroke: '#000', strokeWidth: '3px', fill: '#000'};\r\n    const STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '4px', fill: '#0096fd', cursor: 'move'};\r\n    const STYLE_ARC_BASE = {stroke: '#000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\r\n    const STYLE_ARC_SELECTED = {\r\n      stroke: '#0096fd',\r\n      strokeWidth: '4px',\r\n      strokeDasharray: '5,5',\r\n      fill: 'none',\r\n      cursor: 'move'\r\n    };\r\n\r\n    let epsilon = 3;\r\n\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let arcPath = `M${0},${0}  A${0},${0} 0 0,1 ${holeWidth},${0}`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n\r\n\r\n    return (\r\n      <g transform={`translate(${-length / 2}, 0)`}>\r\n        <line key='1' x1={0} y1={holeWidth/6 - epsilon} x2={0} y2={-holeWidth/6 + epsilon} style={holeStyle}\r\n              transform={`scale(${-1},${1})`}/>\r\n        <line key='2' x1={-holeWidth} y1={holeWidth/6 - epsilon} x2={-holeWidth} y2={-holeWidth/6 + epsilon} style={holeStyle}\r\n              transform={`scale(${-1},${1})`}/>\r\n        <path key='3' d={arcPath} style={arcStyle}/>\r\n      </g>\r\n    )\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n\r\n    let object = new Three.Object3D();\r\n    return Promise.resolve(object);\r\n\r\n  }\r\n\r\n}\r\n\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/gate/gate.jpg\";","import React from 'react';\r\nimport * as Three from 'three';\r\n\r\nconst black = new Three.MeshLambertMaterial({color : 0x000000});\r\nconst green = new Three.MeshLambertMaterial( {color : 0x348781});\r\nconst red = new Three.MeshLambertMaterial({color : 0xFF0000});\r\nconst turquoise = new Three.MeshLambertMaterial({color : 0x43C6DB,opacity :0.7,transparent: true});\r\nconst metalBlue = new Three.MeshLambertMaterial({color : 0xB7CEEC});\r\nconst darkGrey = new Three.MeshLambertMaterial({color : 0x313131});\r\nconst darkGrey2 = new Three.MeshLambertMaterial({color : 0x212121});\r\nconst metalBlueGrey = new Three.MeshLambertMaterial({color : 0x566D7E});\r\n\r\n\r\nfunction makePanicDoor() {\r\n\r\n  let panicDoorDouble = new Three.Mesh();\r\n  let doorLeft = makeDoorStructure();\r\n  let doorRight = makeDoorStructure();\r\n  let handle = makeHandle();\r\n  let doorLeftPivot = makePivot();\r\n  let doorRightPivot = makePivot();\r\n  let safetyHandleLeft = makeSafetyHandle();\r\n  let safetyHandleRight = makeSafetyHandle();\r\n  let lock = makeLock();\r\n  let doorLockLeft = makeDoorLock();\r\n  let doorLockRight = makeDoorLock();\r\n  lock.position.set(-0.05, -0.02, 0.03);\r\n  handle.position.set(-0.47 / 2, 0.85 / 2, -0.03);\r\n  doorLeftPivot.position.set(0.595 / 2, 0, -0.06 / 2);\r\n  doorRightPivot.position.set(0.6 / 2, 0, 0.077 / 2);\r\n  doorRight.rotation.y = Math.PI;\r\n  doorRight.position.set(-0.35 / 2 - 0.084, 0, 0.0043);\r\n  doorLeft.position.set(0.35 / 2 + 0.084, 0, -0.0043);\r\n  safetyHandleLeft.position.set(0, 0.4, 0.06 / 2);\r\n  safetyHandleRight.position.set(0, 0.4, -0.062 / 2);\r\n  handle.add(lock);\r\n  doorLeft.add(handle);\r\n  doorLeft.add(safetyHandleLeft);\r\n  doorRight.add(safetyHandleRight);\r\n  doorLeft.add(doorLeftPivot);\r\n  panicDoorDouble.add(doorLeft);\r\n  doorRight.add(doorRightPivot);\r\n  doorLeft.add(doorLockLeft);\r\n  doorRight.add(doorLockRight);\r\n  panicDoorDouble.add(doorRight);\r\n\r\n  return panicDoorDouble\r\n}\r\n\r\nfunction makeDoorLock() {\r\n\r\n  let block = new Three.Object3D();\r\n  let DoorLockGeometry1 = new Three.CylinderGeometry(0.012, 0.012, 1.905, Math.round(32));\r\n  let DoorLockGeometry2 = new Three.CylinderGeometry(0.007, 0.007, 1.907, Math.round(32));\r\n  let DoorLock1 = new Three.Mesh(DoorLockGeometry1, metalBlue);\r\n  let DoorLock2 = new Three.Mesh(DoorLockGeometry2, metalBlueGrey);\r\n  block.position.set(-0.275, 0.7 / 2, 0);\r\n  block.scale.x = 1 / 1.3;\r\n  DoorLock1.add(DoorLock2);\r\n  block.add(DoorLock1);\r\n\r\n  return block;\r\n}\r\n\r\nfunction makeLock() {\r\n\r\n  let mechanism = new Three.Object3D();\r\n  let BaseGeometry = new Three.BoxGeometry(0.01, 0.1, 0.02);\r\n  let FirstBlockGeometry = new Three.BoxGeometry(0.01, 0.02, 0.01);\r\n  let SecondBlockGeometry = new Three.BoxGeometry(0.006, 0.04, 0.008);\r\n  let base = new Three.Mesh(BaseGeometry, metalBlue);\r\n  let FirstBlock = new Three.Mesh(FirstBlockGeometry, metalBlueGrey);\r\n  let SecondBlock = new Three.Mesh(SecondBlockGeometry, metalBlueGrey);\r\n  FirstBlock.position.set(-0.008 / 2, 0.03, 0);\r\n  SecondBlock.position.y = -0.05;\r\n  FirstBlock.add(SecondBlock);\r\n  base.add(FirstBlock);\r\n  mechanism.add(base);\r\n\r\n  return mechanism;\r\n}\r\n\r\nfunction makeSafetyHandle() {\r\n\r\n  let handle = new Three.Object3D();\r\n  let handleSupportGeometry = new Three.BoxGeometry(0.5, 0.1, 0.005);\r\n  let PushButtonGeometry = new Three.CylinderGeometry(0.04, 0.04, 0.48, Math.round(32 ));\r\n  let PushButtonCoverGeometry = new Three.CylinderGeometry(0.042, 0.042, 0.01, Math.round(32 ));\r\n  let handleSupport = new Three.Mesh(handleSupportGeometry, black);\r\n  let pushButton = new Three.Mesh(PushButtonGeometry, red);\r\n  let pushButtonCover1 = new Three.Mesh(PushButtonCoverGeometry, black);\r\n  let pushButtonCover2 = new Three.Mesh(PushButtonCoverGeometry, black);\r\n  handleSupport.position.z = 0.005 / 2;\r\n  pushButton.rotation.z = Math.PI / 2;\r\n  pushButtonCover1.position.y = 0.48 / 2 + 0.01 / 2;\r\n  pushButtonCover2.position.y = -0.48 / 2 - 0.01 / 2;\r\n  pushButton.add(pushButtonCover1);\r\n  pushButton.add(pushButtonCover2);\r\n  handleSupport.add(pushButton);\r\n  handle.add(handleSupport);\r\n\r\n  return handle;\r\n}\r\n\r\nfunction makePivot() {\r\n\r\n  let DoorPivot = new Three.Object3D();\r\n  let DownPivotGeometry = new Three.CylinderGeometry(0.009, 0.009, 0.04, Math.round(32 ));\r\n  let UpPivotGeometry = new Three.CylinderGeometry(0.01, 0.01, 0.04, Math.round(32 ));\r\n  let downPivot1 = new Three.Mesh(DownPivotGeometry, green);\r\n  let upPivot1 = new Three.Mesh(UpPivotGeometry, green);\r\n  let downPivot2 = new Three.Mesh(DownPivotGeometry, green);\r\n  let upPivot2 = new Three.Mesh(UpPivotGeometry, green);\r\n  downPivot1.position.y = -0.4;\r\n  upPivot1.position.y = 0.04;\r\n  downPivot2.position.y = 1;\r\n  upPivot2.position.y = 0.04;\r\n  downPivot2.add(upPivot2);\r\n  downPivot1.add(upPivot1);\r\n  DoorPivot.add(downPivot2);\r\n  DoorPivot.add(downPivot1);\r\n\r\n  return DoorPivot;\r\n}\r\n\r\nfunction makeHandle() {\r\n\r\n  let handle = new Three.Object3D();\r\n  let handleBase = makeHandleBase();\r\n  let hilt = makeHilt();\r\n  hilt.rotation.x = Math.PI / 2;\r\n  hilt.position.set(0, 0.04, -0.03 / 2 - 0.01 / 2);\r\n  handle.add(handleBase);\r\n  handle.add(hilt);\r\n  handle.scale.set(1.1, 1.1, 1.1);\r\n\r\n  return handle;\r\n}\r\n\r\nfunction makeHilt() {\r\n\r\n  let hilt = new Three.Object3D();\r\n  let GeometryPiece1 = new Three.CylinderGeometry(0.01, 0.01, 0.03, Math.round(32 ));\r\n  let GeometryPiece2 = new Three.SphereGeometry(0.01, Math.round(32 ), Math.round(32 ));\r\n  let GeometryPiece3 = new Three.CylinderGeometry(0.01, 0.01, 0.07, Math.round(32 ));\r\n  let piece1 = new Three.Mesh(GeometryPiece1, black);\r\n  let piece2 = new Three.Mesh(GeometryPiece2, black);\r\n  let piece3 = new Three.Mesh(GeometryPiece3, black);\r\n  let piece4 = new Three.Mesh(GeometryPiece2, black);\r\n  piece3.rotation.z = Math.PI / 2;\r\n  piece3.position.x = 0.07 / 2;\r\n  piece2.position.y = -0.03 / 2;\r\n  piece4.position.y = -0.07 / 2;\r\n  piece3.add(piece4);\r\n  piece2.add(piece3);\r\n  piece1.add(piece2);\r\n  hilt.add(piece1);\r\n\r\n  return hilt;\r\n}\r\n\r\nfunction makeHandleBase() {\r\n\r\n  let base = new Three.Object3D();\r\n  let BaseGeometry1 = new Three.BoxGeometry(0.038, 0.14, 0.01);\r\n  let BaseGeometry2 = new Three.CylinderGeometry(0.023, 0.023, 0.01, Math.round(32 ));\r\n  let lock = makeLockKey();\r\n  let base1 = new Three.Mesh(BaseGeometry1, black);\r\n  let base2 = new Three.Mesh(BaseGeometry2, black);\r\n  lock.rotation.x = Math.PI / 2;\r\n  lock.position.y = -0.03;\r\n  base2.rotation.x = Math.PI / 2;\r\n  base2.position.y = -0.033;\r\n  base2.scale.z = 1.5;\r\n  base1.add(lock);\r\n  base1.add(base2);\r\n  base.add(base1);\r\n\r\n  return base;\r\n}\r\n\r\nfunction makeLockKey() {\r\n\r\n  let lock = new Three.Object3D();\r\n  let geometryLock1 = new Three.CylinderGeometry(0.005, 0.005, 0.02, Math.round(32 ));\r\n  let geometryLock2 = new Three.BoxGeometry(0.008, 0.02, 0.02);\r\n  let geometryLock3 = new Three.BoxGeometry(0.007, 0.0203, 0.0018);\r\n  let lockPiece1 = new Three.Mesh(geometryLock1, metalBlue);\r\n  let lockPiece2 = new Three.Mesh(geometryLock2, metalBlue);\r\n  let lockPiece3 = new Three.Mesh(geometryLock3, metalBlueGrey);\r\n  lockPiece2.position.z = 0.01;\r\n  lockPiece1.add(lockPiece2);\r\n  lockPiece1.add(lockPiece3);\r\n  lock.add(lockPiece1);\r\n\r\n  return lock;\r\n}\r\n\r\nfunction makeDoorStructure() {\r\n\r\n  let door = new Three.Object3D();\r\n  let lowBaseDoorGeometry = new Three.BoxGeometry(0.6,1.2,0.01);\r\n  let middleBaseDoorGeometry = new Three.BoxGeometry(0.2,0.7,0.01);\r\n  let highBaseDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.01);\r\n  let BorderCoverDoorGeometry1 = new Three.CylinderGeometry(0.005,0.005,1.9,Math.round(32));\r\n  let BorderCoverDoorGeometry2 = new Three.BoxGeometry(0.03,1.9,0.01);\r\n  let MiddleDoorGeometry2 = new Three.BoxGeometry(0.2,0.7,0.06);\r\n  let MiddleDoorGeometry1 = new Three.BoxGeometry(0.19,0.7,0.06);\r\n  let HighDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.06);\r\n  let glassGeometry = new Three.BoxGeometry(0.2,0.5,0.05);\r\n  let LowDoorGeometry = new Three.BoxGeometry(0.59,1.2,0.06);\r\n  let glassCoverVertical = new Three.BoxGeometry(0.01,0.52,0.064);\r\n  let glassCoverHorizontal = new Three.BoxGeometry(0.224,0.01,0.064);\r\n  let lowCoverDoor = new Three.Mesh( lowBaseDoorGeometry , green );\r\n  let middleDoor1 = new Three.Mesh( MiddleDoorGeometry1, green);\r\n  let middleDoor2 = new Three.Mesh( MiddleDoorGeometry2, green);\r\n  let baseDoor = new Three.Mesh( LowDoorGeometry, green );\r\n  let middleCoverDoor1 = new Three.Mesh( middleBaseDoorGeometry, green);\r\n  let middleCoverDoor2 = new Three.Mesh( middleBaseDoorGeometry, green);\r\n  let highCoverDoor = new Three.Mesh( highBaseDoorGeometry, green);\r\n  let highDoor = new Three.Mesh( HighDoorGeometry, green);\r\n  let borderCoverDoor1 = new Three.Mesh( BorderCoverDoorGeometry1, green);\r\n  let borderCoverDoor2 = new Three.Mesh( BorderCoverDoorGeometry2, green);\r\n  let glass = new Three.Mesh( glassGeometry, turquoise);\r\n  let glassVerticalCover1 = new Three.Mesh( glassCoverVertical, green);\r\n  let glassVerticalCover2 = new Three.Mesh( glassCoverVertical, green);\r\n  let glassHorizontalCover1 = new Three.Mesh( glassCoverHorizontal, green);\r\n  let glassHorizontalCover2 = new Three.Mesh( glassCoverHorizontal, green);\r\n  lowCoverDoor.position.set(-(0.6-0.59)/2,0,-0.05/2);\r\n  middleCoverDoor1.position.set(-0.2,1.2/2 +0.7/2,0);\r\n  middleCoverDoor2.position.set(0.2,1.2/2 +0.7/2,0);\r\n  highCoverDoor.position.set(0,(0.5 +0.2)/2,-0.05/2);\r\n  highDoor.position.set(0,(0.5 +0.2)/2,-0.05/2 +0.05/2);\r\n  glass.position.set(-0.01/2,1.2/2 +0.5/2,0);\r\n  middleDoor2.position.z =0.05/2;\r\n  middleDoor1.position.set(0.005,0,0.05/2);\r\n  borderCoverDoor1.position.set(-0.6/2,0.7/2,0);\r\n  glassVerticalCover1.position.x = 0.2/2 +0.014/2;\r\n  glassVerticalCover2.position.x =-0.2/2 -0.014/2;\r\n  glassHorizontalCover1.position.y = 0.5/2 +0.014/2;\r\n  glassHorizontalCover2.position.y =-0.5/2 -0.014/2;\r\n  borderCoverDoor2.position.set(0.02/2,0,-0.01/2 );\r\n  borderCoverDoor1.add(borderCoverDoor2);\r\n  glass.add(highCoverDoor);\r\n  glass.add(glassVerticalCover1);\r\n  glass.add(glassVerticalCover2);\r\n  glass.add(glassHorizontalCover1);\r\n  glass.add(glassHorizontalCover2);\r\n  glass.add(highCoverDoor);\r\n  glass.add(highDoor);\r\n  baseDoor.add(glass);\r\n  middleCoverDoor1.add(middleDoor1);\r\n  middleCoverDoor2.add(middleDoor2);\r\n  lowCoverDoor.add(borderCoverDoor1);\r\n  lowCoverDoor.add(middleCoverDoor1);\r\n  lowCoverDoor.add(middleCoverDoor2);\r\n  baseDoor.add(lowCoverDoor);\r\n  door.add(baseDoor);\r\n  door.scale.x = 0.9;\r\n\r\n  return door;\r\n}\r\n\r\nexport default {\r\n  name: 'double panic door',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    tag: ['door'],\r\n    title: 'double panic door',\r\n    description: 'iron door',\r\n    image: require('./panicDoorDouble.png')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 200,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    height: {\r\n      label: 'height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 215,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 30,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    altitude: {\r\n      label:'altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 0,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    flip_horizontal: {\r\n      label: 'flip',\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n      values: {\r\n        'none': false,\r\n        'yes':  true\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n\r\n    const STYLE_HOLE_BASE = {stroke: '#ff0000', strokeWidth: '3px', fill: '#ff0000'};\r\n    const STYLE_HOLE_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', fill: '#ff0000', cursor: 'move'};\r\n    const STYLE_ARC_BASE = {stroke: '#ff0000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\r\n    const STYLE_ARC_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', strokeDasharray: '5,5', fill: 'none', cursor: 'move'};\r\n\r\n    let epsilon = 3;\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let arcPath = `M${0},${0}  A${holeWidth/2},${holeWidth/2} 0 0,1 ${holeWidth/2},${holeWidth/2}`;\r\n    let arcPath2 =`M${0},${0}  A${holeWidth/2},${holeWidth/2} 0 0,0 ${holeWidth/2},${holeWidth/2}`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n\r\n\r\n    if(flip){\r\n      return (\r\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\r\n          <path key='1' d={arcPath} style={arcStyle} transform={`translate(${0},${-holeWidth/2})`}/>\r\n          <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={-holeWidth/2 - epsilon} style={holeStyle}/>\r\n          <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${holeWidth},${-holeWidth/2}) rotate(90)`}/>\r\n          <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={-holeWidth/2 - epsilon} style={holeStyle}/>\r\n          <path key='5' d={holePath} style={holeStyle}/>\r\n        </g>\r\n      )\r\n    }\r\n    else {\r\n        return (\r\n          <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\r\n            <path key='1' d={arcPath} style={arcStyle} transform={`translate(${holeWidth},${holeWidth/2}) rotate(180)`}/>\r\n            <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={holeWidth/2 - epsilon} style={holeStyle}/>\r\n            <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${0},${holeWidth/2}) rotate(270)`}/>\r\n            <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={holeWidth/2 - epsilon} style={holeStyle}/>\r\n            <path key='5' d={holePath} style={holeStyle}/>\r\n          </g>\r\n        )\r\n    }\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let width = element.properties.get('width').get('length');\r\n    let height = element.properties.get('height').get('length');\r\n    let thickness = element.properties.get('thickness').get('length');\r\n    let newAltitude = element.properties.get('altitude').get('length');\r\n\r\n    let panicDoorDouble = new Three.Object3D();\r\n    panicDoorDouble.add(makePanicDoor().clone());\r\n\r\n    let valuePosition = new Three.Box3().setFromObject(panicDoorDouble);\r\n\r\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\r\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\r\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\r\n\r\n    if (element.selected) {\r\n      let boundingBox = new Three.BoxHelper(panicDoorDouble, 0x99c3fb);\r\n      boundingBox.material.linewidth = 5;\r\n      boundingBox.renderOrder = 1000;\r\n      boundingBox.material.depthTest = false;\r\n      panicDoorDouble.add(boundingBox);\r\n    }\r\n\r\n    if(flip)\r\n      panicDoorDouble.rotation.y+=Math.PI;\r\n\r\n    panicDoorDouble.position.y+= newAltitude;\r\n    panicDoorDouble.scale.set( width / deltaX, height / deltaY,thickness / deltaZ);\r\n\r\n    return Promise.resolve(panicDoorDouble);\r\n\r\n  }\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/panic-door-double/panicDoorDouble.png\";","import React from 'react';\r\nimport * as Three from 'three';\r\n\r\nconst black = new Three.MeshLambertMaterial({color : 0x000000});\r\nconst green = new Three.MeshLambertMaterial( {color : 0x348781});\r\nconst red = new Three.MeshLambertMaterial({color : 0xFF0000});\r\nconst turquoise = new Three.MeshLambertMaterial({color : 0x43C6DB,opacity :0.7,transparent: true});\r\nconst metalBlue = new Three.MeshLambertMaterial({color : 0xB7CEEC});\r\nconst darkGrey = new Three.MeshLambertMaterial({color : 0x313131});\r\nconst darkGrey2 = new Three.MeshLambertMaterial({color : 0x212121});\r\nconst metalBlueGrey = new Three.MeshLambertMaterial({color : 0x566D7E});\r\n\r\nlet flip_value;\r\nlet handleSide_value;\r\n\r\nfunction makePanicDoor(handleSide) {\r\n\r\n  let panicDoor = new Three.Mesh();\r\n  let leftDoor = makeDoorStructure();\r\n  let handle = makeHandle(handleSide);\r\n  let leftDoorPivot = makePivot();\r\n  let rightDoorPivot = makePivot();\r\n  let safetyHandleLeft = makeSafetyHandle();\r\n  let safetyHandleRight = makeSafetyHandle();\r\n  let hilt = makeLock();\r\n  let doorLock = makeDoorLock();\r\n  hilt.position.set(-0.05,-0.02,0.03);\r\n  handle.position.set(-0.47/2,0.85/2,-0.03);\r\n\r\n  if(handleSide) {\r\n    leftDoorPivot.position.set(0.595 / 2, 0, -0.06 / 2);\r\n  }\r\n  else {\r\n    leftDoorPivot.position.set(-0.595 / 2, 0, -0.06 / 2);\r\n  }\r\n  rightDoorPivot.position.set(0.6/2 ,0,0.077/2);\r\n  safetyHandleLeft.position.set(0,0.4,0.06/2);\r\n  safetyHandleRight.position.set(0,0.4,-0.062/2);\r\n  handle.add(hilt);\r\n  leftDoor.add(handle);\r\n  leftDoor.add(safetyHandleLeft);\r\n  leftDoor.add(leftDoorPivot);\r\n  panicDoor.add(leftDoor);\r\n  leftDoor.add(doorLock);\r\n\r\n  return panicDoor\r\n}\r\n\r\nfunction makeDoorLock () {\r\n\r\n  let DoorLock = new Three.Object3D();\r\n  let doorLockGeometry1 = new Three.CylinderGeometry(0.012,0.012,1.905,Math.round(32));\r\n  let doorLockGeometry2 = new Three.CylinderGeometry(0.007,0.007,1.907,Math.round(32));\r\n  let doorLock1 = new Three.Mesh( doorLockGeometry1, metalBlue);\r\n  let doorLock2 = new Three.Mesh( doorLockGeometry2, metalBlueGrey);\r\n  DoorLock.position.set(-0.275,0.7/2,0);\r\n  DoorLock.scale.x =1/1.3;\r\n  doorLock1.add(doorLock2);\r\n  DoorLock.add(doorLock1);\r\n  return DoorLock;\r\n}\r\n\r\nfunction makeLock () {\r\n\r\n  let mechanism = new Three.Object3D();\r\n  let BaseGeometry = new Three.BoxGeometry(0.01,0.1,0.02);\r\n  let PieceGeometry1 = new Three.BoxGeometry(0.01,0.02,0.01);\r\n  let PieceGeometry2 = new Three.BoxGeometry(0.006,0.04,0.008);\r\n  let base = new Three.Mesh( BaseGeometry, metalBlue);\r\n  let piece1 = new Three.Mesh( PieceGeometry1, metalBlueGrey);\r\n  let piece2 = new Three.Mesh( PieceGeometry2, metalBlueGrey);\r\n  piece1.position.set(-0.008/2,0.03,0);\r\n  piece2.position.y =-0.05;\r\n  piece1.add(piece2);\r\n  base.add(piece1);\r\n  mechanism.add(base);\r\n\r\n  return mechanism;\r\n}\r\n\r\nfunction makeSafetyHandle () {\r\n\r\n  let handle = new Three.Object3D();\r\n  let HandleSupportGeometry = new Three.BoxGeometry(0.5,0.1,0.005);\r\n  let PushGeometry = new Three.CylinderGeometry(0.04,0.04,0.48,Math.round(32));\r\n  let CoverPushGeometry = new Three.CylinderGeometry(0.042,0.042,0.01,Math.round(32));\r\n  let handleSupport = new Three.Mesh( HandleSupportGeometry, black);\r\n  let PushButton = new Three.Mesh( PushGeometry, red);\r\n  let CoverPush1 = new Three.Mesh( CoverPushGeometry, black);\r\n  let CoverPush2 = new Three.Mesh( CoverPushGeometry, black);\r\n  handleSupport.position.z =0.005/2;\r\n  PushButton.rotation.z =Math.PI/2;\r\n  CoverPush1.position.y =0.48/2 +0.01/2;\r\n  CoverPush2.position.y =-0.48/2 -0.01/2;\r\n  PushButton.add(CoverPush1);\r\n  PushButton.add(CoverPush2);\r\n  handleSupport.add(PushButton);\r\n  handle.add(handleSupport);\r\n\r\n  return handle;\r\n}\r\n\r\nfunction makePivot () {\r\n\r\n  let DoorPivot = new Three.Object3D();\r\n  let DownPivotGeometry = new Three.CylinderGeometry(0.009,0.009,0.04,Math.round(32));\r\n  let UpPivotGeometry = new Three.CylinderGeometry(0.01,0.01,0.04,Math.round(32));\r\n  let downPivot1 = new Three.Mesh( DownPivotGeometry, green);\r\n  let upPivot1 = new Three.Mesh( UpPivotGeometry, green);\r\n  let downPivot2 = new Three.Mesh( DownPivotGeometry, green);\r\n  let upPivot2 = new Three.Mesh( UpPivotGeometry, green);\r\n  downPivot1.position.y =-0.4;\r\n  upPivot1.position.y =0.04;\r\n  downPivot2.position.y =1;\r\n  upPivot2.position.y =0.04;\r\n  downPivot2.add(upPivot2);\r\n  downPivot1.add(upPivot1);\r\n  DoorPivot.add(downPivot2);\r\n  DoorPivot.add(downPivot1);\r\n\r\n  return DoorPivot;\r\n}\r\n\r\nfunction makeHandle (handleSide_value) {\r\n\r\n  let handle = new Three.Object3D();\r\n  let handleBase = makeHandleBase(handleSide_value);\r\n  let hilt = makeHilt();\r\n  hilt.rotation.x = Math.PI / 2;\r\n\r\n  if(handleSide_value) {\r\n    hilt.position.set(0, 0.04, -0.03 / 2 - 0.01 / 2);\r\n  }\r\n  else {\r\n    hilt.position.set(0.4, 0.04, -0.03 / 2 - 0.01 / 2);\r\n    hilt.rotation.y = Math.PI ;\r\n  }\r\n  handle.add(handleBase);\r\n  handle.add(hilt);\r\n  handle.scale.set(1.1, 1.1, 1.1);\r\n  return handle;\r\n}\r\n\r\nfunction makeHilt () {\r\n\r\n  let hilt = new Three.Object3D();\r\n  let Geometry_p1 = new Three.CylinderGeometry(0.01,0.01,0.03,Math.round(32));\r\n  let Geometry_p2 = new Three.SphereGeometry(0.01,Math.round(32),Math.round(32));\r\n  let Geometry_p3 = new Three.CylinderGeometry(0.01,0.01,0.07,Math.round(32));\r\n  let piece1 = new Three.Mesh( Geometry_p1, black);\r\n  let piece2 = new Three.Mesh( Geometry_p2, black);\r\n  let piece3 = new Three.Mesh( Geometry_p3, black);\r\n  let piece4 = new Three.Mesh( Geometry_p2, black);\r\n  piece3.rotation.z =Math.PI/2;\r\n  piece3.position.x =0.07/2;\r\n  piece2.position.y =-0.03/2;\r\n  piece4.position.y =-0.07/2;\r\n  piece3.add(piece4);\r\n  piece2.add(piece3);\r\n  piece1.add(piece2);\r\n  hilt.add(piece1);\r\n\r\n  return hilt;\r\n}\r\n\r\nfunction makeHandleBase (handleSide_value) {\r\n  let base = new Three.Object3D();\r\n  let BaseGeometry1 = new Three.BoxGeometry(0.038,0.14,0.01);\r\n  let BaseGeometry2 = new Three.CylinderGeometry(0.023,0.023,0.01,Math.round(32));\r\n  let lock = makeLockKey();\r\n  let base1 = new Three.Mesh( BaseGeometry1, black);\r\n  let base2 = new Three.Mesh( BaseGeometry2, black);\r\n  lock.rotation.x = Math.PI/2;\r\n  base2.rotation.x =Math.PI/2;\r\n  lock.position.y = -0.03;\r\n  base2.position.y = -0.033;\r\n  if(!handleSide_value)\r\n    base1.position.x = 0.4;\r\n  base2.scale.z =1.5;\r\n  base1.add(lock);\r\n  base1.add(base2);\r\n  base.add(base1);\r\n  return base;\r\n}\r\n\r\nfunction makeLockKey () {\r\n\r\n  let Lock = new Three.Object3D();\r\n  let geometry1 = new Three.CylinderGeometry(0.005,0.005,0.02,Math.round(32));\r\n  let geometry2 = new Three.BoxGeometry(0.008,0.02,0.02);\r\n  let geometry3 = new Three.BoxGeometry(0.007,0.0203,0.0018);\r\n  let LockPiece1 = new Three.Mesh( geometry1, metalBlue);\r\n  let LockPiece2 = new Three.Mesh( geometry2, metalBlue);\r\n  let LockPiece3 = new Three.Mesh( geometry3, metalBlueGrey );\r\n  LockPiece2.position.z = 0.01;\r\n  LockPiece1.add(LockPiece2);\r\n  LockPiece1.add(LockPiece3);\r\n  Lock.add(LockPiece1);\r\n\r\n  return Lock;\r\n}\r\n\r\nfunction makeDoorStructure () {\r\n\r\n  let door = new Three.Object3D();\r\n  let lowBaseDoorGeometry = new Three.BoxGeometry(0.6,1.2,0.01);\r\n  let middleBaseDoorGeometry = new Three.BoxGeometry(0.2,0.7,0.01);\r\n  let highBaseDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.01);\r\n  let BorderCoverDoorGeometry1 = new Three.CylinderGeometry(0.005,0.005,1.9,Math.round(32));\r\n  let BorderCoverDoorGeometry2 = new Three.BoxGeometry(0.03,1.9,0.01);\r\n  let MiddleDoorGeometry2 = new Three.BoxGeometry(0.2,0.7,0.06);\r\n  let MiddleDoorGeometry1 = new Three.BoxGeometry(0.19,0.7,0.06);\r\n  let HighDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.06);\r\n  let glassGeometry = new Three.BoxGeometry(0.2,0.5,0.05);\r\n  let LowDoorGeometry = new Three.BoxGeometry(0.59,1.2,0.06);\r\n  let glassCoverVertical = new Three.BoxGeometry(0.01,0.52,0.064);\r\n  let glassCoverHorizontal = new Three.BoxGeometry(0.224,0.01,0.064);\r\n  let lowCoverDoor = new Three.Mesh( lowBaseDoorGeometry , green );\r\n  let middleDoor1 = new Three.Mesh( MiddleDoorGeometry1, green);\r\n  let middleDoor2 = new Three.Mesh( MiddleDoorGeometry2, green);\r\n  let baseDoor = new Three.Mesh( LowDoorGeometry, green );\r\n  let middleCoverDoor1 = new Three.Mesh( middleBaseDoorGeometry, green);\r\n  let middleCoverDoor2 = new Three.Mesh( middleBaseDoorGeometry, green);\r\n  let highCoverDoor = new Three.Mesh( highBaseDoorGeometry, green);\r\n  let highDoor = new Three.Mesh( HighDoorGeometry, green);\r\n  let borderCoverDoor1 = new Three.Mesh( BorderCoverDoorGeometry1, green);\r\n  let borderCoverDoor2 = new Three.Mesh( BorderCoverDoorGeometry2, green);\r\n  let glass = new Three.Mesh( glassGeometry, turquoise);\r\n  let glassVerticalCover1 = new Three.Mesh( glassCoverVertical, green);\r\n  let glassVerticalCover2 = new Three.Mesh( glassCoverVertical, green);\r\n  let glassHorizontalCover1 = new Three.Mesh( glassCoverHorizontal, green);\r\n  let glassHorizontalCover2 = new Three.Mesh( glassCoverHorizontal, green);\r\n  lowCoverDoor.position.set(-(0.6-0.59)/2,0,-0.05/2);\r\n  middleCoverDoor1.position.set(-0.2,1.2/2 +0.7/2,0);\r\n  middleCoverDoor2.position.set(0.2,1.2/2 +0.7/2,0);\r\n  highCoverDoor.position.set(0,(0.5 +0.2)/2,-0.05/2);\r\n  highDoor.position.set(0,(0.5 +0.2)/2,-0.05/2 +0.05/2);\r\n  glass.position.set(-0.01/2,1.2/2 +0.5/2,0);\r\n  middleDoor2.position.z =0.05/2;\r\n  middleDoor1.position.set(0.005,0,0.05/2);\r\n  borderCoverDoor1.position.set(-0.6/2,0.7/2,0);\r\n  glassVerticalCover1.position.x = 0.2/2 +0.014/2;\r\n  glassVerticalCover2.position.x =-0.2/2 -0.014/2;\r\n  glassHorizontalCover1.position.y = 0.5/2 +0.014/2;\r\n  glassHorizontalCover2.position.y =-0.5/2 -0.014/2;\r\n  borderCoverDoor2.position.set(0.02/2,0,-0.01/2 );\r\n  borderCoverDoor1.add(borderCoverDoor2);\r\n  glass.add(highCoverDoor);\r\n  glass.add(glassVerticalCover1);\r\n  glass.add(glassVerticalCover2);\r\n  glass.add(glassHorizontalCover1);\r\n  glass.add(glassHorizontalCover2);\r\n  glass.add(highCoverDoor);\r\n  glass.add(highDoor);\r\n  baseDoor.add(glass);\r\n  middleCoverDoor1.add(middleDoor1);\r\n  middleCoverDoor2.add(middleDoor2);\r\n  lowCoverDoor.add(borderCoverDoor1);\r\n  lowCoverDoor.add(middleCoverDoor1);\r\n  lowCoverDoor.add(middleCoverDoor2);\r\n  baseDoor.add(lowCoverDoor);\r\n  door.add(baseDoor);\r\n  door.scale.x = 1.3;\r\n  return door;\r\n}\r\n\r\nexport default {\r\n  name: 'panic door',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    tag: ['door'],\r\n    title: 'panic door',\r\n    description: 'iron door',\r\n    image: require('./panicDoor.png')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 100,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    height: {\r\n      label: 'height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 215,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 30,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    altitude: {\r\n      label: 'altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 0,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    flip_horizontal: {\r\n      label: 'horizontal flip',\r\n      type: 'checkbox',\r\n      defaultValue: 'none',\r\n      values: {\r\n        'none': 'none',\r\n        'yes':  'yes'\r\n      }\r\n    },\r\n    flip_vertical: {\r\n      label: 'vertical flip',\r\n      type: 'checkbox',\r\n      defaultValue: 'right',\r\n      values: {\r\n        'right': 'right',\r\n        'left':  'left'\r\n      }\r\n    },\r\n  },\r\n\r\n\r\n  render2D: function (element, layer, scene) {\r\n\r\n    const STYLE_HOLE_BASE = {stroke: '#ff0000', strokeWidth: '3px', fill: '#ff0000'};\r\n    const STYLE_HOLE_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', fill: '#ff0000', cursor: 'move'};\r\n    const STYLE_ARC_BASE = {stroke: '#ff0000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\r\n    const STYLE_ARC_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', strokeDasharray: '5,5', fill: 'none', cursor: 'move'};\r\n\r\n    let epsilon = 3;\r\n\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let handleSide = element.properties.get('flip_vertical');\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let arcPath = `M${0},${0}  A${holeWidth},${holeWidth} 0 0,1 ${holeWidth},${holeWidth}`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n\r\n    let scaleX, scaleY;\r\n    let rotateAngle;\r\n    let tX, tY;\r\n    let pX1, pX2, pY1, pY2;\r\n\r\n    flip ? flip_value = 'yes' : flip_value = 'none';\r\n    handleSide ? handleSide_value = 'right' : handleSide_value = 'left';\r\n\r\n    if(flip_value === 'yes') {\r\n      scaleX = 1;\r\n      if (handleSide_value === 'right') {\r\n        tX = holeWidth;\r\n        tY = -holeWidth;\r\n        pX1 = -holeWidth;\r\n        pY1 = 0;\r\n        pX2 = -holeWidth;\r\n        pY2 = holeWidth;\r\n        rotateAngle = 180;\r\n        scaleY = -1;\r\n      }\r\n      else {\r\n        tX = 0;\r\n        tY = -holeWidth;\r\n        pX1 = 0;\r\n        pY1 = 0;\r\n        pX2 = 0;\r\n        pY2 = -holeWidth;\r\n        scaleY = 1;\r\n        rotateAngle = 0;\r\n      }\r\n    }\r\n    else if (flip_value === 'none') {\r\n      scaleX = -1;\r\n      if (handleSide_value === 'left') {\r\n        tX = holeWidth;\r\n        tY = 0;\r\n        pX1 = 0;\r\n        pY1 = 0;\r\n        pX2 = 0;\r\n        pY2 = -holeWidth;\r\n        rotateAngle = -90;\r\n        scaleY = -1;\r\n      }\r\n      else{\r\n        tX = 0;\r\n        tY = 0;\r\n        pX1 = holeWidth;\r\n        pY1 = 0;\r\n        pX2 = holeWidth;\r\n        pY2 = holeWidth;\r\n        rotateAngle = 90;\r\n        scaleY = 1;\r\n      }\r\n    }\r\n\r\n      return (\r\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\r\n          <path key='1' d={arcPath} style={arcStyle}\r\n                transform={`translate(${tX},${tY}) scale(${scaleX},${scaleY}) rotate(${rotateAngle})`}/>\r\n          <line key='2' x1={pX1} y1={pY1 - epsilon} x2={pX2} y2={pY2 - epsilon} style={holeStyle}\r\n                transform={`scale(${-scaleX},${scaleY})`}/>\r\n          <path key='5' d={holePath} style={holeStyle}/>\r\n        </g>\r\n\r\n      );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let handleSide = element.properties.get('flip_vertical');\r\n    let width = element.properties.get('width').get('length');\r\n    let height = element.properties.get('height').get('length');\r\n    let thickness = element.properties.get('thickness').get('length');\r\n    let newAltitude = element.properties.get('altitude').get('length');\r\n\r\n    let panicDoor = new Three.Object3D();\r\n    panicDoor.add(makePanicDoor(handleSide).clone());\r\n\r\n    if (element.selected) {\r\n      let boundingBox = new Three.BoxHelper(panicDoor, 0x99c3fb);\r\n      boundingBox.material.linewidth = 5;\r\n      boundingBox.renderOrder = 1000;\r\n      boundingBox.material.depthTest = false;\r\n      panicDoor.add(boundingBox);\r\n    }\r\n\r\n    let valuePosition = new Three.Box3().setFromObject(panicDoor);\r\n\r\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\r\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\r\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\r\n\r\n    if(flip)\r\n      panicDoor.rotation.y += Math.PI;\r\n\r\n    panicDoor.position.y+= newAltitude;\r\n    panicDoor.scale.set(width / deltaX, height / deltaY, thickness / deltaZ);\r\n\r\n    return Promise.resolve(panicDoor);\r\n\r\n  }\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/panic-door/panicDoor.png\";","import React from 'react';\r\nimport * as Three from 'three';\r\nimport {loadObjWithMaterial} from '../../utils/load-obj';\r\nimport path from 'path';\r\n\r\nlet cached3DWindow = null;\r\n\r\nexport default {\r\n  name: \"sash window\",\r\n  prototype: \"holes\",\r\n\r\n  info: {\r\n    title: \"sash window\",\r\n    tag: ['window'],\r\n    description: \"Sash window\",\r\n    image: require('./window.png')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: \"Width\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 90\r\n      }\r\n    },\r\n    height: {\r\n      label: \"Height\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 100\r\n      }\r\n    },\r\n    altitude: {\r\n      label: \"Altitude\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 90\r\n      }\r\n    },\r\n    thickness: {\r\n      label: \"Thickness\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 10\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const STYLE_HOLE_BASE = {stroke: \"#000\", strokeWidth: \"3px\", fill: \"#000\"};\r\n    const STYLE_HOLE_SELECTED = {stroke: \"#0096fd\", strokeWidth: \"3px\", fill: \"#0096fd\", cursor: \"move\"};\r\n    //let line = layer.lines.get(hole.line);\r\n    //let epsilon = line.properties.get('thickness') / 2;\r\n\r\n    let epsilon = 3;\r\n\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n    return (\r\n      <g transform={`translate(${-length / 2}, 0)`}>\r\n        <path key=\"1\" d={holePath} style={holeStyle}/>\r\n        <line key=\"2\" x1={holeWidth / 2} y1={-10 - epsilon} x2={holeWidth / 2} y2={10 + epsilon} style={holeStyle}/>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    let onLoadItem = (object) => {\r\n      let boundingBox = new Three.Box3().setFromObject(object);\r\n\r\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\r\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\r\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\r\n\r\n      if (element.selected) {\r\n        let box = new Three.BoxHelper(object, 0x99c3fb);\r\n        box.material.linewidth = 2;\r\n        box.material.depthTest = false;\r\n        box.renderOrder = 1000;\r\n        object.add(box);\r\n      }\r\n\r\n      let width = element.properties.get('width').get('length');\r\n      let height = element.properties.get('height').get('length');\r\n      let thickness = element.properties.get('thickness').get('length');\r\n\r\n      object.scale.set(width / initialWidth, height / initialHeight,\r\n        thickness / initialThickness);\r\n\r\n      return object;\r\n    };\r\n\r\n    if(cached3DWindow) {\r\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));\r\n    }\r\n\r\n    let mtl = require('./sash-window.mtl');\r\n    let obj = require('./sash-window.obj');\r\n    let img = require('./texture.png');\r\n\r\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\r\n      .then(object => {\r\n        cached3DWindow = object;\r\n        return onLoadItem(cached3DWindow.clone());\r\n      })\r\n  }\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/window.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/sash-window.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/sash-window.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/texture.png\";","import React from 'react';\r\nimport * as Three from 'three';\r\n\r\nconst grey = new Three.MeshLambertMaterial({color: 0x3f3f3f});\r\nconst white = new Three.MeshLambertMaterial({color: 0xffffff, transparent:true, opacity:0.5});\r\nconst black = new Three.MeshLambertMaterial({color: 0x000000});\r\n\r\nfunction makeDoor(handleSide) {\r\n\r\n  let slidingDoor = new Three.Mesh();\r\n\r\n  let doorShape = new Three.Shape();\r\n  doorShape.moveTo( 1, 2 );\r\n  doorShape.lineTo( 0, 2);\r\n  doorShape.lineTo( 0, 0);\r\n  doorShape.lineTo( 1, 0);\r\n\r\n  let doorHole = new Three.Path();\r\n  doorHole.moveTo(.65, 1.75 );\r\n  doorHole.lineTo(.35, 1.75);\r\n  doorHole.lineTo(.35, 1.25);\r\n  doorHole.lineTo(.65, 1.25);\r\n  doorShape.holes.push( doorHole );\r\n\r\n  let extrudeSettings = {\r\n    steps: 2,\r\n    depth: 0.05,\r\n    bevelEnabled: false,\r\n    bevelThickness: 1,\r\n    bevelSize: 1,\r\n    bevelSegments: 1\r\n  };\r\n\r\n  let geometry = new Three.ExtrudeGeometry( doorShape, extrudeSettings );\r\n  let door = new Three.Mesh( geometry, grey ) ;\r\n  if(handleSide === 'right')\r\n    door.position.set(-1,0,0);\r\n  else\r\n    door.position.set(0,0,0);\r\n  slidingDoor.add(door);\r\n\r\n  let doorGeometry = new Three.BoxGeometry(1,2,0.05);\r\n  let door2 = new Three.Mesh(doorGeometry,grey);\r\n  if (handleSide === 'right')\r\n    door2.position.set(1.5,1,0.065);\r\n  else\r\n    door2.position.set(-.5,1,0.065);\r\n  door.add(door2);\r\n\r\n  let barGeometry = new Three.BoxGeometry(2,0.1,0.1);\r\n  let doorBar = new Three.Mesh(barGeometry,grey);\r\n  doorBar.position.set(-0,2.07,0.05);\r\n  slidingDoor.add(doorBar);\r\n\r\n  let glassGeometry = new Three.BoxGeometry(0.3,0.5,0.05);\r\n  let glass = new Three.Mesh(glassGeometry,white);\r\n  glass.position.set(0.5,1.5,0.025);\r\n  door.add(glass);\r\n\r\n  let HandleGeometry1 = new Three.CylinderGeometry(0.051,0.051,0.0625,80,80,true);\r\n  black.side=Three.DoubleSide;\r\n  let handle_p1 = new Three.Mesh(HandleGeometry1,black);\r\n  handle_p1.position.set(0.2,1,0.025);\r\n  handle_p1.rotation.x=Math.PI/2;\r\n  door.add(handle_p1);\r\n\r\n  let HandleGeometry2 = new Three.BoxGeometry(0.1,0.02,0.0625);\r\n  let handle_p2 = new Three.Mesh( HandleGeometry2,black  );\r\n  handle_p2.position.set(0.2,1,0.025);\r\n  door.add(handle_p2);\r\n\r\n  if (handleSide === 'left'){\r\n    handle_p1.position.x=0.8;\r\n    handle_p2.position.x=0.8;\r\n  }\r\n\r\n  return slidingDoor\r\n}\r\n\r\nexport default {\r\n  name: 'sliding door',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    tag: ['door'],\r\n    title: 'sliding door',\r\n    description: 'iron door',\r\n    image: require('./slidingDoor.png')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 200,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    height: {\r\n      label: 'height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 215,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 30,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    altitude: {\r\n      label: 'altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 0,\r\n        unit: 'cm'\r\n      }\r\n    },\r\n    flip_horizontal: {\r\n      label: 'horizontal flip',\r\n      type: 'checkbox',\r\n      defaultValue: 'none',\r\n      values: {\r\n        'none': 'none',\r\n        'yes':  'yes'\r\n      }\r\n    },\r\n    flip_vertical: {\r\n      label: 'vertical flip',\r\n      type: 'checkbox',\r\n      defaultValue: 'right',\r\n      values: {\r\n        'right': 'right',\r\n        'left':  'left'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n\r\n    const STYLE_HOLE_BASE = {stroke: '#000', strokeWidth: '14px', fill: '#000'};\r\n    const STYLE_HOLE_BASE2 = {stroke: '#000', strokeWidth: '16px', fill: '#000'};\r\n    const STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '14px', fill: '#0096fd', cursor: 'move'};\r\n\r\n    let epsilon = 3;\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let handleSide = element.properties.get('flip_vertical');\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let holeStyle2 = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE2;\r\n    let length = element.properties.get('width').get('length');\r\n\r\n    let scaleX, scaleY;\r\n    let scaleX2, scaleY2;\r\n    let pX1, pX2;\r\n\r\n    flip ? flip = 'yes' : flip = 'none';\r\n    handleSide ? handleSide = 'right' : handleSide = 'left';\r\n\r\n    if(flip === 'yes') {\r\n      scaleX = 1;\r\n      if (handleSide === 'right') {\r\n        pX1 = 0;\r\n        pX2 = holeWidth/2;\r\n        scaleY = -1;\r\n      }\r\n      else {\r\n        pX1 = holeWidth/2;\r\n        pX2 = holeWidth;\r\n        scaleY = -1;\r\n      }\r\n    }\r\n    else {\r\n      scaleX = 1;\r\n      if (handleSide === 'right') {\r\n        pX1 = holeWidth/2;\r\n        pX2 = holeWidth;\r\n        scaleY = 1;\r\n      }\r\n      else {\r\n        pX1 = 0;\r\n        pX2 = holeWidth/2;\r\n        scaleY = 1;\r\n      }\r\n\r\n    }\r\n      return (\r\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\r\n          <line key='1' x1='0' y1={0 - epsilon} x2={holeWidth} y2={0 - epsilon} style={holeStyle}\r\n                transform={`scale(${scaleX},${scaleY})`}/>\r\n          <line key='2' x1={pX1} y1={5 - epsilon} x2={pX2} y2={5 - epsilon} style={holeStyle2}\r\n                transform={`scale(${scaleX},${scaleY})`}/>\r\n          <line key='3' x1={holeWidth} y1={0 - epsilon} x2={holeWidth} y2={15 + epsilon} style={holeStyle2}\r\n                transform={`scale(${scaleX},${scaleY})`}/>\r\n          <line key='4' x1='0' y1={0 - epsilon} x2='0' y2={15 + epsilon} style={holeStyle2}\r\n                transform={`scale(${scaleX},${scaleY})`}/>\r\n        </g>\r\n      )\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n\r\n    let flip = element.properties.get('flip_horizontal');\r\n    let handleSide = element.properties.get('flip_vertical');\r\n    let width = element.properties.get('width').get('length');\r\n    let height = element.properties.get('height').get('length');\r\n    let thickness = element.properties.get('thickness').get('length');\r\n    let newAltitude = element.properties.get('altitude').get('length');\r\n\r\n    flip ? flip = 'yes' : flip = 'none';\r\n    handleSide ? handleSide = 'right' : handleSide = 'left';\r\n\r\n    let slidingDoor = new Three.Object3D();\r\n    slidingDoor.add(makeDoor(handleSide).clone());\r\n\r\n    let valuePosition = new Three.Box3().setFromObject(slidingDoor);\r\n\r\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\r\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\r\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\r\n\r\n    if (element.selected) {\r\n      let boundingBox = new Three.BoxHelper(slidingDoor, 0x99c3fb);\r\n      boundingBox.material.linewidth = 5;\r\n      boundingBox.renderOrder = 1000;\r\n      boundingBox.material.depthTest = false;\r\n      slidingDoor.add(boundingBox);\r\n    }\r\n\r\n    if(flip === 'yes')\r\n      slidingDoor.rotation.y += Math.PI;\r\n\r\n    slidingDoor.position.y+= newAltitude;\r\n    slidingDoor.scale.set(width / deltaX, height / deltaY, thickness / deltaZ);\r\n\r\n    return Promise.resolve(slidingDoor);\r\n\r\n  }\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/sliding-door/slidingDoor.png\";","import React from 'react';\r\nimport * as Three from 'three';\r\nimport {loadObjWithMaterial} from '../../utils/load-obj';\r\nimport path from 'path';\r\n\r\nlet cached3DWindow = null;\r\n\r\nexport default {\r\n  name: 'venetian-blind-window',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    tag: ['Window'],\r\n    title: 'Venetian Blind Window',\r\n    description: 'Venetian Blind Window',\r\n    image: require('./venetian.jpg')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'Width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 90\r\n      }\r\n    },\r\n    height: {\r\n      label: 'Height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 100\r\n      }\r\n    },\r\n    altitude: {\r\n      label: 'Altitude',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 90\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'Thickness',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 10\r\n      }\r\n    },\r\n    flip: {\r\n      label: 'Flip',\r\n      type: 'checkbox',\r\n      defaultValue: 'false',\r\n    },\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n\r\n    const STYLE_HOLE_BASE = {stroke: '#000', strokeWidth: '3px', fill: '#000'};\r\n    const STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '3px', fill: '#0096fd', cursor: 'move'};\r\n\r\n    let epsilon = 3;\r\n\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n    return (\r\n      <g transform={`translate(${-length / 2}, 0)`}>\r\n        <path key='1' d={holePath} style={holeStyle}/>\r\n        <line key='2' x1={holeWidth / 2} y1={-10 - epsilon} x2={holeWidth / 2} y2={10 + epsilon} style={holeStyle}/>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n\r\n    let width = element.properties.get('width').get('length');\r\n    let height = element.properties.get('height').get('length');\r\n    let thickness = element.properties.get('thickness').get('length');\r\n    let flip = element.properties.get('flip');\r\n\r\n    let onLoadItem = (object) => {\r\n\r\n      let venetian = new Three.Object3D();\r\n\r\n      let boundingBox = new Three.Box3().setFromObject(object);\r\n\r\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\r\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\r\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\r\n\r\n      if (element.selected) {\r\n        let box = new Three.BoxHelper(object, 0x99c3fb);\r\n        box.material.linewidth = 2;\r\n        box.material.depthTest = false;\r\n        box.renderOrder = 1000;\r\n        object.add(box);\r\n      }\r\n\r\n      let width = element.properties.get('width').get('length');\r\n      let height = element.properties.get('height').get('length');\r\n      let thickness = element.properties.get('thickness').get('length');\r\n\r\n      object.scale.set(width / initialWidth, height / initialHeight,\r\n         thickness/2 / initialThickness);\r\n\r\n      venetian.add(object);\r\n      venetian.add(createTenda());\r\n\r\n      if(flip === true)\r\n        venetian.rotation.y += Math.PI;\r\n\r\n      return venetian;\r\n    };\r\n\r\n    if(cached3DWindow) {\r\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));;\r\n    }\r\n\r\n    let mtl = require('./venetian.mtl');\r\n    let obj = require('./venetian.obj');\r\n    let img = require('./texture.png');\r\n\r\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\r\n      .then(object => {\r\n        cached3DWindow = object;\r\n        return onLoadItem(cached3DWindow.clone());\r\n      });\r\n\r\n    function createTenda() {\r\n\r\n      var venetian = new Three.Object3D();\r\n\r\n      //colors\r\n      var white = new Three.MeshLambertMaterial( {color: 0xffffff, opacity:0.5, transparent:true} );\r\n      var grey = new Three.MeshLambertMaterial( {color: 0xCCCCCC} );\r\n\r\n      var roundedRectShape = new Three.Shape();\r\n\r\n      var x=0;\r\n      var y=0;\r\n      var width=1;\r\n      var height=18;\r\n      var radius=0.25;\r\n\r\n      roundedRectShape.moveTo( x, y + radius );\r\n      roundedRectShape.lineTo( x, y + height - radius );\r\n      roundedRectShape.quadraticCurveTo( x, y + height, x + radius, y + height );\r\n      roundedRectShape.lineTo( x + width - radius, y + height) ;\r\n      roundedRectShape.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );\r\n      roundedRectShape.lineTo( x + width, y + radius );\r\n      roundedRectShape.quadraticCurveTo( x + width, y, x + width - radius, y );\r\n      roundedRectShape.lineTo( x + radius, y );\r\n      roundedRectShape.quadraticCurveTo( x, y, x, y + radius );\r\n\r\n      var holePath1 = new Three.Path();\r\n      holePath1.moveTo( 0.5, 0.6 );\r\n      holePath1.arc(0, .7, .15 ,0, Math.PI,false);\r\n      holePath1.arc(0.15, -.09, .15 ,Math.PI,0,false);\r\n      roundedRectShape.holes.push( holePath1 );\r\n\r\n      var holePath2 = new Three.Path();\r\n      holePath2.moveTo( 0.5, 4.6 );\r\n      holePath2.arc(0, .7, .15 ,0, Math.PI,false);\r\n      holePath2.arc(0.15, -.09, .15 ,Math.PI,0,false);\r\n      roundedRectShape.holes.push( holePath2 );\r\n\r\n      var holePath3 = new Three.Path();\r\n      holePath3.moveTo( 0.5, 8.6 );\r\n      holePath3.arc(0, .7, .15 ,0, Math.PI,false);\r\n      holePath3.arc(0.15, -.09, .15 ,Math.PI,0,false);\r\n      roundedRectShape.holes.push( holePath3 );\r\n\r\n      var holePath4 = new Three.Path();\r\n      holePath4.moveTo( 0.5, 12.6 );\r\n      holePath4.arc(0, .7, .15 ,0, Math.PI,false);\r\n      holePath4.arc(0.15, -.09, .15 ,Math.PI,0,false);\r\n      roundedRectShape.holes.push( holePath4 );\r\n\r\n      var holePath5 = new Three.Path();\r\n      holePath5.moveTo( 0.5, 16.6 );\r\n      holePath5.arc(0, .7, .15 ,0, Math.PI,false);\r\n      holePath5.arc(0.15, -.09, .15 ,Math.PI,0,false);\r\n      roundedRectShape.holes.push( holePath5 );\r\n\r\n      var extrudeSettings = {\r\n        steps: 1,\r\n        depth: 0.2,\r\n        bevelEnabled: false,\r\n        bevelThickness: .4,\r\n        bevelSize: .4,\r\n        bevelSegments: 1\r\n      };\r\n\r\n\r\n      for (var i = 0; i < 25; i+=.7) {\r\n        var geometry = new Three.ExtrudeGeometry( roundedRectShape, extrudeSettings );\r\n        var mesh = new Three.Mesh( geometry, grey ) ;\r\n        mesh.position.set(0,i,0.86);\r\n        mesh.rotation.z+=Math.PI/2;\r\n        mesh.rotation.x+=-Math.PI/2;\r\n        venetian.add(mesh);\r\n\r\n      }\r\n\r\n      for (var j = -1.25; j > -19; j+=-4) {\r\n\r\n        var geometry1 = new Three.CylinderGeometry( 0.105, 0.105, 26, 32 );\r\n        var tubo = new Three.Mesh(geometry1,white);\r\n        tubo.position.set(j,12.5,.35);\r\n        venetian.add(tubo);\r\n\r\n      }\r\n\r\n      var roundedRectShape2 = new Three.Shape();\r\n\r\n      var x1=0;\r\n      var y1=0;\r\n      var width1=1;\r\n      var height1=18;\r\n      var radius1=0.25;\r\n\r\n      roundedRectShape2.moveTo( x1, y1 + radius1 );\r\n      roundedRectShape2.lineTo( x1, y1 + height1 - radius1 );\r\n      roundedRectShape2.quadraticCurveTo( x1, y1 + height1, x1 + radius1, y1 + height1 );\r\n      roundedRectShape2.lineTo( x1 + width1 - radius1, y1 + height1) ;\r\n      roundedRectShape2.quadraticCurveTo( x1 + width1, y1 + height1, x1 + width1, y1 + height1 - radius1 );\r\n      roundedRectShape2.lineTo( x1 + width1, y1 + radius1 );\r\n      roundedRectShape2.quadraticCurveTo( x1 + width1, y1, x1 + width1 - radius1, y1 );\r\n      roundedRectShape2.lineTo( x1 + radius1, y1 );\r\n      roundedRectShape2.quadraticCurveTo( x1, y1, x1, y1 + radius1 );\r\n\r\n      var extrudeSettings2 = {\r\n        steps: 1,\r\n        depth: 0.4,\r\n        bevelEnabled: false,\r\n        bevelThickness: .4,\r\n        bevelSize: .4,\r\n        bevelSegments: 1\r\n      };\r\n\r\n\r\n      for (var k = -.5; k < 27; k+=26) {\r\n        var geometry2 = new Three.ExtrudeGeometry( roundedRectShape2, extrudeSettings2 );\r\n        var mesh2 = new Three.Mesh( geometry2, grey ) ;\r\n        mesh2.position.set(0,k,1);\r\n        mesh2.rotation.z+=Math.PI/2;\r\n        mesh2.rotation.x+=-Math.PI/2;\r\n        venetian.add(mesh2);\r\n      }\r\n\r\n\r\n      let valueObject = new Three.Box3().setFromObject(venetian);\r\n\r\n      let deltaX = Math.abs(valueObject.max.x - valueObject.min.x);\r\n      let deltaY = Math.abs(valueObject.max.y - valueObject.min.y);\r\n      let deltaZ = Math.abs(valueObject.max.z - valueObject.min.z);\r\n\r\n       venetian.position.x+=width1/.025;\r\n       venetian.position.y+=-height1/.4;\r\n       venetian.scale.set(5.2*width1 / deltaZ, 5.45*height1 / deltaY, 2.5*thickness / deltaX);\r\n\r\n\r\n      return venetian;\r\n    }\r\n  }\r\n\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/venetian.jpg\";","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/venetian.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/venetian.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/texture.png\";","import React from \"react\";\r\nimport * as Three from \"three\";\r\nimport { loadObjWithMaterial } from \"../../utils/load-obj\";\r\nimport path from \"path\";\r\n\r\nlet cached3DWindow = null;\r\n\r\nexport default {\r\n  name: \"window-cursor\",\r\n  prototype: \"cursor\",\r\n\r\n  info: {\r\n    title: \"window-cursor\",\r\n    tag: [\"window\"],\r\n    description: \"window-cursor\",\r\n    image: require(\"./window.png\"),\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: \"Width\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 90,\r\n      },\r\n    },\r\n    height: {\r\n      label: \"Height\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 100,\r\n      },\r\n    },\r\n    altitude: {\r\n      label: \"Altitude\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 90,\r\n      },\r\n    },\r\n    thickness: {\r\n      label: \"Thickness\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 10,\r\n      },\r\n    },\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const STYLE_HOLE_BASE = {\r\n      stroke: \"#FFF\",\r\n      strokeWidth: \"3px\",\r\n      fill: \"#FFF\",\r\n    };\r\n    const STYLE_HOLE_INTERN_BASE = {\r\n      stroke: \"#E3E3E3\",\r\n      strokeWidth: \"3px\",\r\n      fill: \"#E3E3E3\",\r\n    };\r\n    const STYLE_HOLE_SELECTED = {\r\n      stroke: \"#0096fd\",\r\n      strokeWidth: \"1px\",\r\n      fill: \"#0096fd\",\r\n      cursor: \"move\",\r\n    };\r\n    const STYLE_PNG_BASE = {\r\n      transform: 'translate(50px, -5px)'\r\n    };\r\n\r\n    let epsilon = (20 * 0.7) / 2;\r\n\r\n    // // let epsilon = 3;\r\n\r\n    let holeWidth = 100;\r\n    let epsilonIntern = epsilon * 0.7;\r\n    let widthIntern = holeWidth * 0.95;\r\n    let holePath = `M${0} ${-epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let holeInternPath = `M${\r\n      holeWidth * 0.05\r\n    } ${-epsilonIntern}  L${widthIntern} ${-epsilonIntern}  L${widthIntern} ${epsilonIntern}  L${\r\n      holeWidth * 0.05\r\n    } ${epsilonIntern}  z`;\r\n\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let holeInternStyle = element.selected\r\n      ? STYLE_HOLE_INTERN_BASE\r\n      : STYLE_HOLE_INTERN_BASE;\r\n    let length = element.properties.get(\"width\").get(\"length\");\r\n    return (\r\n      <g transform={`translate(${-length / 2}, 0)`}>\r\n        <path key=\"1\" d={holePath} style={holeStyle} />\r\n        <path key=\"2\" d={holeInternPath} style={holeInternStyle} />\r\n        <image href=\"/assets/disable.png\" style={STYLE_PNG_BASE}/>  \r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    let onLoadItem = (object) => {\r\n      let boundingBox = new Three.Box3().setFromObject(object);\r\n\r\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\r\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\r\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\r\n\r\n      if (element.selected) {\r\n        let box = new Three.BoxHelper(object, 0x99c3fb);\r\n        box.material.linewidth = 2;\r\n        box.material.depthTest = false;\r\n        box.renderOrder = 1000;\r\n        object.add(box);\r\n      }\r\n\r\n      let width = element.properties.get(\"width\").get(\"length\");\r\n      let height = element.properties.get(\"height\").get(\"length\");\r\n      let thickness = element.properties.get(\"thickness\").get(\"length\");\r\n\r\n      object.scale.set(\r\n        width / initialWidth,\r\n        height / initialHeight,\r\n        thickness / initialThickness\r\n      );\r\n\r\n      return object;\r\n    };\r\n\r\n    if (cached3DWindow) {\r\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));\r\n    }\r\n\r\n    let mtl = require(\"./window.mtl\");\r\n    let obj = require(\"./window.obj\");\r\n    let img = require(\"./texture.png\");\r\n\r\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + \"/\").then(\r\n      (object) => {\r\n        cached3DWindow = object;\r\n        return onLoadItem(cached3DWindow.clone());\r\n      }\r\n    );\r\n  },\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/window-cursor/window.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-cursor/window.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-cursor/window.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-cursor/texture.png\";","import React from 'react';\r\nimport * as Three from 'three';\r\nimport { loadObjWithMaterial } from '../../utils/load-obj';\r\nimport path from 'path';\r\n\r\nlet cached3DWindow = null;\r\n\r\nconst STYLE_HOLE_BASE = { stroke: '#000', strokeWidth: '3px', fill: '#000' };\r\nconst STYLE_HOLE_SELECTED = { stroke: '#0096fd', strokeWidth: '3px', fill: '#0096fd', cursor: 'move' };\r\nconst EPSILON = 3;\r\n\r\nexport default {\r\n  name: 'window-curtain',\r\n  prototype: 'holes',\r\n\r\n  info: {\r\n    tag: ['Finestre'],\r\n    title: 'Curtain window',\r\n    description: 'Curtain window',\r\n    image: require('./window-curtain.jpg')\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: 'width',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 90\r\n      }\r\n    },\r\n    height: {\r\n      label: 'height',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 100\r\n      }\r\n    },\r\n    altitude: {\r\n      label: 'altitudine',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 90\r\n      }\r\n    },\r\n    thickness: {\r\n      label: 'spessore',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 10\r\n      }\r\n    },\r\n    flip: {\r\n      label: 'flip',\r\n      type: 'checkbox',\r\n      defaultValue: 'none',\r\n      values: {\r\n        'none': 'none',\r\n        'yes': 'yes'\r\n      }\r\n    },\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    let holeWidth = element.properties.get('width').get('length');\r\n    let holePath = `M${0} ${-EPSILON}  L${holeWidth} ${-EPSILON}  L${holeWidth} ${EPSILON}  L${0} ${EPSILON}  z`;\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let length = element.properties.get('width').get('length');\r\n    return (\r\n      <g transform={`translate(${-length / 2}, 0)`}>\r\n        <path key='1' d={holePath} style={holeStyle} />\r\n        <line key='2' x1={holeWidth / 2} y1={-10 - EPSILON} x2={holeWidth / 2} y2={10 + EPSILON} style={holeStyle} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n\r\n    let width = element.properties.get('width').get('length');\r\n    let height = element.properties.get('height').get('length');\r\n    let thickness = element.properties.get('thickness').get('length');\r\n    let flip = element.properties.get('flip');\r\n\r\n    let onLoadItem = (object) => {\r\n\r\n      let window = new Three.Object3D();\r\n\r\n      let boundingBox = new Three.Box3().setFromObject(object);\r\n\r\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\r\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\r\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\r\n\r\n      if (element.selected) {\r\n        let box = new Three.BoxHelper(object, 0x99c3fb);\r\n        box.material.linewidth = 2;\r\n        box.material.depthTest = false;\r\n        box.renderOrder = 1000;\r\n        object.add(box);\r\n      }\r\n\r\n      let width = element.properties.get('width').get('length');\r\n      let height = element.properties.get('height').get('length');\r\n      let thickness = element.properties.get('thickness').get('length');\r\n\r\n      object.scale.set(width / initialWidth, height / initialHeight,\r\n        thickness / 2 / initialThickness);\r\n\r\n      window.add(object);\r\n      window.add(createTenda());\r\n\r\n      if (flip === true)\r\n        window.rotation.y += Math.PI;\r\n\r\n      return window;\r\n    };\r\n\r\n    if (cached3DWindow) {\r\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));\r\n    }\r\n\r\n    let mtl = require('./window.mtl');\r\n    let obj = require('./window.obj');\r\n    let img = require('./texture.png');\r\n\r\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\r\n      .then(object => {\r\n        cached3DWindow = object;\r\n        return onLoadItem(cached3DWindow.clone());\r\n      });\r\n\r\n    function createTenda() {\r\n\r\n      let radialWave = function (u, v) {\r\n        let r = 10;\r\n        let x = Math.sin(u) * 3 * r;\r\n        let z = Math.sin(v / 2) * 2 * r;\r\n        let y = (Math.sin(u * 2 * Math.PI) + Math.cos(v * 2 * Math.PI)) * .5;\r\n\r\n        return new Three.Vector3(x, y, z);\r\n      };\r\n\r\n      //color\r\n      let white = new Three.MeshLambertMaterial({ color: 0xeae6ca });\r\n\r\n      let Tenda = new Three.Object3D();\r\n\r\n      let mesh = createMesh(new Three.ParametricGeometry(radialWave, 20, 20));\r\n      mesh.rotation.x += Math.PI / 2;\r\n      mesh.rotation.y += Math.PI / 2;\r\n      mesh.position.y += 3.1;\r\n      mesh.position.x += .05;\r\n      mesh.scale.set(.125, .125, .125);\r\n\r\n      let mesh2 = mesh.clone();\r\n      mesh2.rotation.x += Math.PI;\r\n      mesh2.position.set(1.4, 0, 0.06);\r\n\r\n      Tenda.add(mesh);\r\n      Tenda.add(mesh2);\r\n\r\n      for (let i = -.7; i > -3.4; i -= .45) {\r\n        let geometry = new Three.TorusGeometry(.08, .016, 32, 32, 2 * Math.PI);\r\n        let torus = new Three.Mesh(geometry, white);\r\n\r\n        if (i == -1.15)\r\n          torus.position.set(i, 3.14, .045);\r\n        else if (i == -2.5)\r\n          torus.position.set(i, 3.14, -.01);\r\n        else\r\n          torus.position.set(i, 3.14, .04);\r\n        torus.rotation.y += Math.PI / 2;\r\n        Tenda.add(torus);\r\n      }\r\n\r\n      let geometryAsta = new Three.CylinderGeometry(0.02, 0.02, 1.25, 32);\r\n      let asta = new Three.Mesh(geometryAsta, white);\r\n      asta.position.set(-1.1, 3.18, 0.02);\r\n      asta.rotation.z += Math.PI / 2;\r\n      Tenda.add(asta);\r\n\r\n      let asta2 = asta.clone();\r\n      asta2.position.set(-2.5, 3.18, 0.02);\r\n      Tenda.add(asta2);\r\n\r\n      let geometrySphereUp = new Three.SphereGeometry(0.04, 32, 32);\r\n      let sphere = new Three.Mesh(geometrySphereUp, white);\r\n      sphere.position.set(-.5, 3.18, 0.02);\r\n      sphere.rotation.x += Math.PI / 2;\r\n      sphere.scale.set(0.8, 1, 1);\r\n      Tenda.add(sphere);\r\n\r\n      let sphere2 = sphere.clone();\r\n      sphere2.position.x += -1.2;\r\n      Tenda.add(sphere2);\r\n\r\n      let sphere3 = sphere.clone();\r\n      sphere3.position.x += -1.4;\r\n      Tenda.add(sphere3);\r\n\r\n      let sphere4 = sphere.clone();\r\n      sphere4.position.x += -2.6;\r\n      Tenda.add(sphere4);\r\n\r\n      let valueObject = new Three.Box3().setFromObject(Tenda);\r\n\r\n      let deltaX = Math.abs(valueObject.max.x - valueObject.min.x);\r\n      let deltaY = Math.abs(valueObject.max.y - valueObject.min.y);\r\n      let deltaZ = Math.abs(valueObject.max.z - valueObject.min.z);\r\n\r\n      Tenda.position.x += width / 1.48;\r\n      Tenda.position.y += -height / 2.1;\r\n      Tenda.position.z += thickness / 1024;\r\n      Tenda.scale.set(width / deltaX, height / deltaY, thickness / deltaZ);\r\n\r\n      return Tenda;\r\n    }\r\n\r\n    function createMesh(geom) {\r\n      geom.applyMatrix(new Three.Matrix4().makeTranslation(-25, 0, -25));\r\n      let meshMaterial = new Three.MeshLambertMaterial({ color: 0xffffff, opacity: 0.9, transparent: true });\r\n      meshMaterial.side = Three.DoubleSide;\r\n\r\n      let plane = new Three.Mesh(geom, meshMaterial);\r\n      return plane;\r\n    }\r\n\r\n  }\r\n\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/window-curtain.jpg\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/window.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/window.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/texture.png\";","import React from \"react\";\r\nimport * as Three from \"three\";\r\nimport { loadObjWithMaterial } from \"../../utils/load-obj\";\r\nimport path from \"path\";\r\n\r\nlet cached3DWindow = null;\r\n\r\nexport default {\r\n  name: \"window\",\r\n  prototype: \"holes\",\r\n\r\n  info: {\r\n    title: \"window\",\r\n    tag: [\"window\"],\r\n    description: \"Window\",\r\n    image: require(\"./window.png\"),\r\n  },\r\n\r\n  properties: {\r\n    width: {\r\n      label: \"Width\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 90,\r\n      },\r\n    },\r\n    height: {\r\n      label: \"Height\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 100,\r\n      },\r\n    },\r\n    altitude: {\r\n      label: \"Altitude\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 90,\r\n      },\r\n    },\r\n    thickness: {\r\n      label: \"Thickness\",\r\n      type: \"length-measure\",\r\n      defaultValue: {\r\n        length: 10,\r\n      },\r\n    },\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const STYLE_HOLE_BASE = {\r\n      stroke: \"#FFF\",\r\n      strokeWidth: \"3px\",\r\n      fill: \"#FFF\",\r\n    };\r\n    const STYLE_HOLE_INTERN_BASE = {\r\n      stroke: \"#E3E3E3\",\r\n      strokeWidth: \"3px\",\r\n      fill: \"#E3E3E3\",\r\n    };\r\n    const STYLE_HOLE_SELECTED = {\r\n      stroke: \"#0096fd\",\r\n      strokeWidth: \"1px\",\r\n      fill: \"#0096fd\",\r\n      cursor: \"move\",\r\n    };\r\n    const STYLE_PNG_BASE = {\r\n      transform: 'translate(50px, -5px)'\r\n    };\r\n    const STYLE = {\r\n      stroke: \"#99BCFF\",\r\n      strokeWidth: \"1px\",\r\n    };\r\n    \r\n    const STYLE_TEXT = {\r\n      fontFamily: \"DM Sans\",\r\n      fontStyle: \"normal\",\r\n      fontWeight: 400,\r\n      fontSize: \"11px\",\r\n      lineHeight: \"9px\",\r\n      textAlign: \"right\",\r\n      fill: \"#407AEC\",\r\n    \r\n      //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n      WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n      WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n      MozUserSelect: \"none\" /* Firefox */,\r\n      MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n      userSelect: \"none\",\r\n    };\r\n    let line = layer.lines.get(element.line);\r\n    let epsilon = (line.properties.get(\"thickness\").get(\"length\") * 0.7) / 2;\r\n    \r\n    // let epsilon = 3;\r\n    \r\n    let holeWidth = element.properties.get(\"width\").get(\"length\");\r\n    let epsilonIntern = epsilon * 0.7;\r\n    let widthIntern = holeWidth * 0.95;\r\n    let holePath = `M${0} ${-epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\r\n    let holeInternPath = `M${holeWidth * 0.05} ${-epsilonIntern}  L${widthIntern} ${-epsilonIntern}  L${widthIntern} ${epsilonIntern}  L${holeWidth * 0.05} ${epsilonIntern}  z`;\r\n\r\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\r\n    let holeInternStyle = element.selected\r\n      ? STYLE_HOLE_INTERN_BASE\r\n      : STYLE_HOLE_INTERN_BASE;\r\n    let length = element.properties.get(\"width\").get(\"length\");\r\n    \r\n    return (\r\n      <g transform={`translate(${-length / 2}, 0)`}>\r\n        <path key=\"1\" d={holePath} style={holeStyle} />\r\n        <path key=\"2\" d={holeInternPath} style={holeInternStyle} />\r\n        {element.selected && <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>}\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    let onLoadItem = (object) => {\r\n      let boundingBox = new Three.Box3().setFromObject(object);\r\n\r\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\r\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\r\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\r\n\r\n      if (element.selected) {\r\n        let box = new Three.BoxHelper(object, 0x99c3fb);\r\n        box.material.linewidth = 2;\r\n        box.material.depthTest = false;\r\n        box.renderOrder = 1000;\r\n        object.add(box);\r\n      }\r\n\r\n      let width = element.properties.get(\"width\").get(\"length\");\r\n      let height = element.properties.get(\"height\").get(\"length\");\r\n      let thickness = element.properties.get(\"thickness\").get(\"length\");\r\n\r\n      object.scale.set(\r\n        width / initialWidth,\r\n        height / initialHeight,\r\n        thickness / initialThickness\r\n      );\r\n\r\n      return object;\r\n    };\r\n\r\n    if (cached3DWindow) {\r\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));\r\n    }\r\n\r\n    let mtl = require(\"./window.mtl\");\r\n    let obj = require(\"./window.obj\");\r\n    let img = require(\"./texture.png\");\r\n\r\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + \"/\").then(\r\n      (object) => {\r\n        cached3DWindow = object;\r\n        return onLoadItem(cached3DWindow.clone());\r\n      }\r\n    );\r\n  },\r\n};\r\n","module.exports = __webpack_public_path__ + \"catalog/holes/window/window.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/window/window.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/window/window.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/window/texture.png\";","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 28 * ZOOM;\r\nconst DEPTH = 16 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst INNER_WIDTH = 23.95 * ZOOM;\r\nconst INNER_HEIGHT = 11.88 * ZOOM;\r\nconst CIRCLE_RADIUS = 1 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 26.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'bathtub',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['bathtub', 'bathtub'],\r\n    title: 'bathtub',\r\n    description: 'bathtub',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n    \r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <svg width={INNER_WIDTH + 2 * STROKE_WIDTH} height={INNER_HEIGHT + 2 * STROKE_WIDTH} x={-(INNER_WIDTH + 2 * STROKE_WIDTH) / 2} y={(DEPTH - INNER_HEIGHT) / 2 - STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={INNER_HEIGHT / 2} ry={INNER_HEIGHT / 2} width={INNER_WIDTH} height={INNER_HEIGHT} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-(CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH) / 2 - WIDTH * 2.5 / 7} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={1} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <svg width={INNER_WIDTH + 2 * STROKE_WIDTH} height={INNER_HEIGHT + 2 * STROKE_WIDTH} x={-(INNER_WIDTH + 2 * STROKE_WIDTH) / 2} y={(DEPTH - INNER_HEIGHT) / 2 - STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={INNER_HEIGHT / 2} ry={INNER_HEIGHT / 2} width={INNER_WIDTH} height={INNER_HEIGHT} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-(CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH) / 2 - WIDTH * 2.5 / 7} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={1} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 12.99 * ZOOM;\r\nconst DEPTH = 22.78 * ZOOM;\r\nconst H1 = 20.78 * ZOOM;\r\nconst H2 = 14.56 * ZOOM;\r\nconst H3 = 2 * ZOOM;\r\nconst BOTTOM1 = 10.91 * ZOOM;\r\nconst BOTTOM2 = 12.99 * ZOOM;\r\nconst PADDING_LEFT = 1.35 * ZOOM;\r\nconst PADDING_TOP = 1.31 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 56.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'bed-1',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['bed-1', 'bed-1'],\r\n    title: 'bed-1',\r\n    description: 'bed-1',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-BOTTOM1 / 2},${half_thickness}`, poly12 = `${BOTTOM1 / 2},${half_thickness}`, poly13 = `${BOTTOM1 / 2},-${half_thickness}`, poly14 = `${-BOTTOM1 / 2},-${half_thickness}`;\r\n    let poly21 = `${-BOTTOM1 / 2 - half_thickness},${H1}`, poly22 = `${-BOTTOM1 / 2 + half_thickness},${H1}`, poly23 = `${-BOTTOM1 / 2 + half_thickness},${0}`, poly24 = `${-BOTTOM1 / 2 - half_thickness},${0}`;\r\n    let poly31 = `${BOTTOM1 / 2 - half_thickness},${H1}`, poly32 = `${BOTTOM1 / 2 + half_thickness},${H1}`, poly33 = `${BOTTOM1 / 2 + half_thickness},${0}`, poly34 = `${BOTTOM1 / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-BOTTOM1 / 2},${H1+ half_thickness}`, poly42 = `${BOTTOM1 / 2},${H1 + half_thickness}`, poly43 = `${BOTTOM1 / 2},${H1 - half_thickness}`, poly44 = `${-BOTTOM1 / 2},${H1 - half_thickness}`;\r\n\r\n    let poly51 = `${-BOTTOM1 / 2 + PADDING_LEFT},${half_thickness + H2}`, poly52 = `${BOTTOM1 / 2 - PADDING_LEFT},${half_thickness + H2}`, poly53 = `${BOTTOM1 / 2 - PADDING_LEFT},${-half_thickness + H2}`, poly54 = `${-BOTTOM1 / 2 + PADDING_LEFT},${-half_thickness + H2}`;\r\n    let poly61 = `${-BOTTOM1 / 2 + PADDING_LEFT},${half_thickness + H1 - PADDING_TOP}`, poly62 = `${BOTTOM1 / 2 - PADDING_LEFT},${half_thickness + H1 - PADDING_TOP}`, poly63 = `${BOTTOM1 / 2 - PADDING_LEFT},${-half_thickness + H1 - PADDING_TOP}`, poly64 = `${-BOTTOM1 / 2 + PADDING_LEFT},${-half_thickness + H1 - PADDING_TOP}`;\r\n    let poly71 = `${-BOTTOM1 / 2 - half_thickness + PADDING_LEFT},${H1 - PADDING_TOP}`, poly72 = `${-BOTTOM1 / 2 + half_thickness + PADDING_LEFT},${H1 - PADDING_TOP}`, poly73 = `${-BOTTOM1 / 2 + half_thickness + PADDING_LEFT},${H2}`, poly74 = `${-BOTTOM1 / 2 - half_thickness + PADDING_LEFT},${H2}`;\r\n    let poly81 = `${BOTTOM1 / 2 - half_thickness - PADDING_LEFT},${H1 - PADDING_TOP}`, poly82 = `${BOTTOM1 / 2 + half_thickness - PADDING_LEFT},${H1 - PADDING_TOP}`, poly83 = `${BOTTOM1 / 2 + half_thickness - PADDING_LEFT},${H2}`, poly84 = `${BOTTOM1 / 2 - half_thickness - PADDING_LEFT},${H2}`;\r\n\r\n    let poly91 = `${-BOTTOM2 / 2},${H1 + half_thickness}`, poly92 = `${BOTTOM2 / 2},${H1 + half_thickness}`, poly93 = `${BOTTOM2 / 2},${H1 - half_thickness}`, poly94 = `${-BOTTOM2 / 2},${H1 - half_thickness}`;\r\n    let poly101 = `${-BOTTOM2 / 2 - half_thickness},${H1}`, poly102 = `${-BOTTOM2 / 2 + half_thickness},${H1}`, poly103 = `${-BOTTOM2 / 2 + half_thickness},${H1 + H3}`, poly104 = `${-BOTTOM2 / 2 - half_thickness},${H1 + H3}`;\r\n    let poly111 = `${BOTTOM2 / 2 - half_thickness},${H1}`, poly112 = `${BOTTOM2 / 2 + half_thickness},${H1}`, poly113 = `${BOTTOM2 / 2 + half_thickness},${H1 + H3}`, poly114 = `${BOTTOM2 / 2 - half_thickness},${H1 + H3}`;\r\n    let poly121 = `${-BOTTOM2 / 2},${H1 + H3 + half_thickness}`, poly122 = `${BOTTOM2 / 2},${H1 + H3 + half_thickness}`, poly123 = `${BOTTOM2 / 2},${H1 + H3 - half_thickness}`, poly124 = `${-BOTTOM2 / 2},${H1 + H3 - half_thickness}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly111 + \" \" + poly112 + \" \" + poly113 + \" \" + poly114}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly121 + \" \" + poly122 + \" \" + poly123 + \" \" + poly124}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + BOTTOM1 / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${BOTTOM1 / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly111 + \" \" + poly112 + \" \" + poly113 + \" \" + poly114}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly121 + \" \" + poly122 + \" \" + poly123 + \" \" + poly124}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 12.99 * ZOOM;\r\nconst DEPTH = 22.78 * ZOOM;\r\nconst H1 = 20.78 * ZOOM;\r\nconst H2 = 14.56 * ZOOM;\r\nconst H3 = 2 * ZOOM;\r\nconst BOTTOM1 = 18.39 * ZOOM;\r\nconst BOTTOM2 = 20.39 * ZOOM;\r\nconst BOTTOM3 = 7.38 * ZOOM;\r\nconst PADDING_LEFT = 1.35 * ZOOM;\r\nconst PADDING_TOP = 1.31 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 40.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'bed-2',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['bed-2', 'bed-2'],\r\n    title: 'bed-2',\r\n    description: 'bed-2',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - BOTTOM1 / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - BOTTOM1 / 2;\r\n        } else if (dis3 > -line.x1 + x - BOTTOM1 / 2) {\r\n          dis3 = -line.x1 + x - BOTTOM1 / 2;\r\n        }\r\n      } else if(line.x1 > x + BOTTOM1 / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - BOTTOM1 / 2;\r\n        } else if (dis4 > line.x1 - x - BOTTOM1 / 2) {\r\n          dis4 = line.x1 - x - BOTTOM1 / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-BOTTOM1 / 2},${half_thickness}`, poly12 = `${BOTTOM1 / 2},${half_thickness}`, poly13 = `${BOTTOM1 / 2},-${half_thickness}`, poly14 = `${-BOTTOM1 / 2},-${half_thickness}`;\r\n    let poly21 = `${-BOTTOM1 / 2 - half_thickness},${H1}`, poly22 = `${-BOTTOM1 / 2 + half_thickness},${H1}`, poly23 = `${-BOTTOM1 / 2 + half_thickness},${0}`, poly24 = `${-BOTTOM1 / 2 - half_thickness},${0}`;\r\n    let poly31 = `${BOTTOM1 / 2 - half_thickness},${H1}`, poly32 = `${BOTTOM1 / 2 + half_thickness},${H1}`, poly33 = `${BOTTOM1 / 2 + half_thickness},${0}`, poly34 = `${BOTTOM1 / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-BOTTOM1 / 2},${H1+ half_thickness}`, poly42 = `${BOTTOM1 / 2},${H1 + half_thickness}`, poly43 = `${BOTTOM1 / 2},${H1 - half_thickness}`, poly44 = `${-BOTTOM1 / 2},${H1 - half_thickness}`;\r\n\r\n    let poly51 = `${-BOTTOM1 / 2 + PADDING_LEFT},${half_thickness + H2}`, poly52 = `${-BOTTOM1 / 2 + PADDING_LEFT + BOTTOM3},${half_thickness + H2}`, poly53 = `${-BOTTOM1 / 2 + PADDING_LEFT + BOTTOM3},${-half_thickness + H2}`, poly54 = `${-BOTTOM1 / 2 + PADDING_LEFT},${-half_thickness + H2}`;\r\n    let poly61 = `${-BOTTOM1 / 2 + PADDING_LEFT},${half_thickness + H1 - PADDING_TOP}`, poly62 = `${-BOTTOM1 / 2 + BOTTOM3 + PADDING_LEFT},${half_thickness + H1 - PADDING_TOP}`, poly63 = `${-BOTTOM1 / 2 + BOTTOM3 + PADDING_LEFT},${-half_thickness + H1 - PADDING_TOP}`, poly64 = `${-BOTTOM1 / 2 + PADDING_LEFT},${-half_thickness + H1 - PADDING_TOP}`;\r\n    let poly71 = `${-BOTTOM1 / 2 - half_thickness + PADDING_LEFT},${H1 - PADDING_TOP}`, poly72 = `${-BOTTOM1 / 2 + half_thickness + PADDING_LEFT},${H1 - PADDING_TOP}`, poly73 = `${-BOTTOM1 / 2 + half_thickness + PADDING_LEFT},${H2}`, poly74 = `${-BOTTOM1 / 2 - half_thickness + PADDING_LEFT},${H2}`;\r\n    let poly81 = `${-BOTTOM1 / 2 + BOTTOM3 + PADDING_LEFT - half_thickness},${H1 - PADDING_TOP}`, poly82 = `${-BOTTOM1 / 2 + BOTTOM3 + PADDING_LEFT + half_thickness},${H1 - PADDING_TOP}`, poly83 = `${-BOTTOM1 / 2 + BOTTOM3 + PADDING_LEFT + half_thickness},${H2}`, poly84 = `${-BOTTOM1 / 2 + BOTTOM3 + PADDING_LEFT - half_thickness},${H2}`;\r\n\r\n    let poly131 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3},${half_thickness + H2}`, poly132 = `${BOTTOM1 / 2 - PADDING_LEFT},${half_thickness + H2}`, poly133 = `${BOTTOM1 / 2 - PADDING_LEFT},${-half_thickness + H2}`, poly134 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3},${-half_thickness + H2}`;\r\n    let poly141 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3},${half_thickness + H1 - PADDING_TOP}`, poly142 = `${BOTTOM1 / 2 - PADDING_LEFT},${half_thickness + H1 - PADDING_TOP}`, poly143 = `${BOTTOM1 / 2 - PADDING_LEFT},${-half_thickness + H1 - PADDING_TOP}`, poly144 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3},${-half_thickness + H1 - PADDING_TOP}`;\r\n    let poly151 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3 - half_thickness},${H1 - PADDING_TOP}`, poly152 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3 + half_thickness},${H1 - PADDING_TOP}`, poly153 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3 + half_thickness},${H2}`, poly154 = `${BOTTOM1 / 2 - PADDING_LEFT - BOTTOM3 - half_thickness},${H2}`;\r\n    let poly161 = `${BOTTOM1 / 2 - PADDING_LEFT - half_thickness},${H1 - PADDING_TOP}`, poly162 = `${BOTTOM1 / 2 - PADDING_LEFT + half_thickness},${H1 - PADDING_TOP}`, poly163 = `${BOTTOM1 / 2 - PADDING_LEFT + half_thickness},${H2}`, poly164 = `${BOTTOM1 / 2 - PADDING_LEFT - half_thickness},${H2}`;\r\n\r\n    let poly91 = `${-BOTTOM2 / 2},${H1 + half_thickness}`, poly92 = `${BOTTOM2 / 2},${H1 + half_thickness}`, poly93 = `${BOTTOM2 / 2},${H1 - half_thickness}`, poly94 = `${-BOTTOM2 / 2},${H1 - half_thickness}`;\r\n    let poly101 = `${-BOTTOM2 / 2 - half_thickness},${H1}`, poly102 = `${-BOTTOM2 / 2 + half_thickness},${H1}`, poly103 = `${-BOTTOM2 / 2 + half_thickness},${H1 + H3}`, poly104 = `${-BOTTOM2 / 2 - half_thickness},${H1 + H3}`;\r\n    let poly111 = `${BOTTOM2 / 2 - half_thickness},${H1}`, poly112 = `${BOTTOM2 / 2 + half_thickness},${H1}`, poly113 = `${BOTTOM2 / 2 + half_thickness},${H1 + H3}`, poly114 = `${BOTTOM2 / 2 - half_thickness},${H1 + H3}`;\r\n    let poly121 = `${-BOTTOM2 / 2},${H1 + H3 + half_thickness}`, poly122 = `${BOTTOM2 / 2},${H1 + H3 + half_thickness}`, poly123 = `${BOTTOM2 / 2},${H1 + H3 - half_thickness}`, poly124 = `${-BOTTOM2 / 2},${H1 + H3 - half_thickness}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly111 + \" \" + poly112 + \" \" + poly113 + \" \" + poly114}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly121 + \" \" + poly122 + \" \" + poly123 + \" \" + poly124}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly131 + \" \" + poly132 + \" \" + poly133 + \" \" + poly134}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly141 + \" \" + poly142 + \" \" + poly143 + \" \" + poly144}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly151 + \" \" + poly152 + \" \" + poly153 + \" \" + poly154}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly161 + \" \" + poly162 + \" \" + poly163 + \" \" + poly164}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + BOTTOM1 / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${BOTTOM1 / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly111 + \" \" + poly112 + \" \" + poly113 + \" \" + poly114}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly121 + \" \" + poly122 + \" \" + poly123 + \" \" + poly124}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly131 + \" \" + poly132 + \" \" + poly133 + \" \" + poly134}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly141 + \" \" + poly142 + \" \" + poly143 + \" \" + poly144}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly151 + \" \" + poly152 + \" \" + poly153 + \" \" + poly154}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly161 + \" \" + poly162 + \" \" + poly163 + \" \" + poly164}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 17.82 * ZOOM;\r\nconst DEPTH = 10.32 * ZOOM;\r\nconst CIRCLE_RADIUS = 2.22 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 5.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'cooktop-2x',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['cooktop-2x', 'cooktop-2x'],\r\n    title: 'cooktop-2x',\r\n    description: 'cooktop-2x',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH - WIDTH / 4} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH + WIDTH / 4} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH - WIDTH / 4} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH + WIDTH / 4} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 17.82 * ZOOM;\r\nconst DEPTH = 17.82 * ZOOM;\r\nconst CIRCLE_RADIUS = 2.22 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 32.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'cooktop-4x',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['cooktop-4x', 'cooktop-4x'],\r\n    title: 'cooktop-4x',\r\n    description: 'cooktop-4x',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH - WIDTH / 4} y={DEPTH / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH + WIDTH / 4} y={DEPTH / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH - WIDTH / 4} y={DEPTH * 3 / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH + WIDTH / 4} y={DEPTH * 3 / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH - WIDTH / 4} y={DEPTH / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH + WIDTH / 4} y={DEPTH / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH - WIDTH / 4} y={DEPTH * 3 / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH + WIDTH / 4} y={DEPTH * 3 / 4 - CIRCLE_RADIUS - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={2} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 18.38 * ZOOM;\r\nconst DEPTH = 9.28 * ZOOM;\r\nconst PARAM = 4.74 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 15.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'dresser',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['dresser', 'dresser'],\r\n    title: 'dresser',\r\n    description: 'dresser',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n\r\n    let poly51 = `${-WIDTH / 2},${half_thickness + PARAM}`, poly52 = `${WIDTH / 2},${half_thickness + PARAM}`, poly53 = `${WIDTH / 2},${-half_thickness + PARAM}`, poly54 = `${-WIDTH / 2},${-half_thickness + PARAM}`;\r\n    let poly61 = `${- half_thickness - WIDTH / 6},${0}`, poly62 = `${half_thickness - WIDTH / 6},${0}`, poly63 = `${half_thickness - WIDTH / 6},${PARAM}`, poly64 = `${-half_thickness - WIDTH / 6},${PARAM}`;\r\n    let poly71 = `${- half_thickness + WIDTH / 6},${0}`, poly72 = `${half_thickness + WIDTH / 6},${0}`, poly73 = `${half_thickness + WIDTH / 6},${PARAM}`, poly74 = `${-half_thickness + WIDTH / 6},${PARAM}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 10.7 * ZOOM;\r\nconst DEPTH = 10.54 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 15.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'nightstand',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['nightstand', 'nightstand'],\r\n    title: 'nightstand',\r\n    description: 'nightstand',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 18.15 * ZOOM;\r\nconst DEPTH = 20.32 * ZOOM;\r\nconst INNER_DEPTH = 1.65 * ZOOM;\r\nconst INNER_WIDTH = 15.3 * ZOOM;\r\nconst PARAM = 3.3 * ZOOM;\r\nconst PARAM1 = 3.31 * ZOOM;\r\nconst PARAM2 = 1.35 * ZOOM;\r\nconst STROKE_WIDTH = 0;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8E9BA2\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 35.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'oven',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['oven', 'oven'],\r\n    title: 'oven',\r\n    description: 'oven',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH - INNER_DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH - INNER_DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH - INNER_DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH - INNER_DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH - INNER_DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH - INNER_DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - INNER_DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - INNER_DEPTH - half_thickness}`;\r\n    let poly51 = `${-WIDTH / 2},${half_thickness + PARAM}`, poly52 = `${WIDTH / 2},${half_thickness + PARAM}`, poly53 = `${WIDTH / 2},${-half_thickness + PARAM}`, poly54 = `${-WIDTH / 2},${-half_thickness + PARAM}`;\r\n    \r\n    let poly61 = `${-INNER_WIDTH / 2 - half_thickness},${-INNER_DEPTH}`, poly62 = `${-INNER_WIDTH / 2 + half_thickness},${-INNER_DEPTH}`, poly63 = `${-INNER_WIDTH / 2 + half_thickness},${0}`, poly64 = `${-INNER_WIDTH / 2 - half_thickness},${0}`;\r\n    let poly71 = `${INNER_WIDTH / 2 - half_thickness},${-INNER_DEPTH}`, poly72 = `${INNER_WIDTH / 2 + half_thickness},${-INNER_DEPTH}`, poly73 = `${INNER_WIDTH / 2 + half_thickness},${0}`, poly74 = `${INNER_WIDTH / 2 - half_thickness},${0}`;\r\n    let poly81 = `${-INNER_WIDTH / 2},${-INNER_DEPTH + half_thickness}`, poly82 = `${INNER_WIDTH / 2},${- INNER_DEPTH + half_thickness}`, poly83 = `${INNER_WIDTH / 2},${- INNER_DEPTH - half_thickness}`, poly84 = `${-INNER_WIDTH / 2},${- INNER_DEPTH - half_thickness}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"#407AEC\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2 - WIDTH / 3} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"#407AEC\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2 + WIDTH / 3} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"#407AEC\" />\r\n        </svg>  \r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"#8E9BA2\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2 - WIDTH / 3} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"#8E9BA2\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2 + WIDTH / 3} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"#8E9BA2\" />\r\n        </svg>  \r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 16.09 * ZOOM;\r\nconst DEPTH = 15.86 * ZOOM;\r\nconst INNER_WIDTH = 7.87 * ZOOM;\r\nconst INNER_HEIGHT = 9.03 * ZOOM;\r\nconst PARAM = 3.47 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 5.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'rangehood',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['rangehood', 'rangehood'],\r\n    title: 'rangehood',\r\n    description: 'rangehood',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH - PARAM}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH - PARAM}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH - PARAM}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH - PARAM}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness - PARAM}`, poly42 = `${-(WIDTH - INNER_WIDTH) / 2},${DEPTH + half_thickness - PARAM}`, poly43 = `${-(WIDTH - INNER_WIDTH) / 2},${DEPTH - half_thickness - PARAM}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness - PARAM}`;\r\n    let poly51 = `${(WIDTH - INNER_WIDTH) / 2},${DEPTH + half_thickness - PARAM}`, poly52 = `${(WIDTH) / 2},${DEPTH + half_thickness - PARAM}`, poly53 = `${(WIDTH) / 2},${DEPTH - half_thickness - PARAM}`, poly54 = `${(WIDTH - INNER_WIDTH) / 2},${DEPTH - half_thickness - PARAM}`;\r\n\r\n    let poly61 = `${-INNER_WIDTH / 2},${half_thickness + DEPTH - INNER_HEIGHT}`, poly62 = `${INNER_WIDTH / 2},${half_thickness + DEPTH - INNER_HEIGHT}`, poly63 = `${INNER_WIDTH / 2},${-half_thickness + DEPTH - INNER_HEIGHT}`, poly64 = `${-INNER_WIDTH / 2},${-half_thickness + DEPTH - INNER_HEIGHT}`;\r\n    let poly71 = `${-INNER_WIDTH / 2 - half_thickness},${DEPTH}`, poly72 = `${-INNER_WIDTH / 2 + half_thickness},${DEPTH}`, poly73 = `${-INNER_WIDTH / 2 + half_thickness},${DEPTH - INNER_HEIGHT}`, poly74 = `${-INNER_WIDTH / 2 - half_thickness},${DEPTH - INNER_HEIGHT}`;\r\n    let poly81 = `${INNER_WIDTH / 2 - half_thickness},${DEPTH}`, poly82 = `${INNER_WIDTH / 2 + half_thickness},${DEPTH}`, poly83 = `${INNER_WIDTH / 2 + half_thickness},${DEPTH - INNER_HEIGHT}`, poly84 = `${INNER_WIDTH / 2 - half_thickness},${DEPTH - INNER_HEIGHT}`;\r\n    let poly91 = `${-INNER_WIDTH / 2},${DEPTH + half_thickness}`, poly92 = `${INNER_WIDTH / 2},${DEPTH + half_thickness}`, poly93 = `${INNER_WIDTH / 2},${DEPTH - half_thickness}`, poly94 = `${-INNER_WIDTH / 2},${DEPTH - half_thickness}`;\r\n\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 27.5 * ZOOM;\r\nconst DEPTH = 19.71 * ZOOM;\r\nconst PARAM1 = 6.66 * ZOOM;\r\nconst PARAM2 = 2.1 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst INNER_HEIGHT = 11.82 * ZOOM;\r\nconst INNER_WIDTH = 19.5 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 37.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'rectangle-table',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['rectangle-table', 'rectangle-table'],\r\n    title: 'rectangle-table',\r\n    description: 'rectangle-table',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1.2;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-INNER_WIDTH / 2},${half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly12 = `${INNER_WIDTH / 2},${half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly13 = `${INNER_WIDTH / 2},${-half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly14 = `${-INNER_WIDTH / 2},${-half_thickness + (DEPTH - INNER_HEIGHT) / 2}`;\r\n    let poly21 = `${-INNER_WIDTH / 2 - half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly22 = `${-INNER_WIDTH / 2 + half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly23 = `${-INNER_WIDTH / 2 + half_thickness},${(DEPTH - INNER_HEIGHT) / 2}`, poly24 = `${-INNER_WIDTH / 2 - half_thickness},${(DEPTH - INNER_HEIGHT) / 2}`;\r\n    let poly31 = `${INNER_WIDTH / 2 - half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly32 = `${INNER_WIDTH / 2 + half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly33 = `${INNER_WIDTH / 2 + half_thickness},${(DEPTH - INNER_HEIGHT) / 2}`, poly34 = `${INNER_WIDTH / 2 - half_thickness},${(DEPTH - INNER_HEIGHT) / 2}`;\r\n    let poly41 = `${-INNER_WIDTH / 2},${INNER_HEIGHT + half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly42 = `${INNER_WIDTH / 2},${INNER_HEIGHT + half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly43 = `${INNER_WIDTH / 2},${INNER_HEIGHT - half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly44 = `${-INNER_WIDTH / 2},${INNER_HEIGHT - half_thickness + (DEPTH - INNER_HEIGHT) / 2}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH)} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={(STROKE_WIDTH)} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH)} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={(STROKE_WIDTH)} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={-(WIDTH) / 2} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={(WIDTH) / 2 - PARAM2 - 2 * STROKE_WIDTH} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH)} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={(STROKE_WIDTH)} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH)} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={(STROKE_WIDTH)} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={-(WIDTH) / 2} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={(WIDTH) / 2 - PARAM2 - 2 * STROKE_WIDTH} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst WIDTH=150;\r\nconst DEPTH=150;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(80px, 50px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'room',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['room', 'wall'],\r\n    title: 'room',\r\n    description: 'room',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 5;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - DEPTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - DEPTH / 2;\r\n        } else if (dis3 > -line.x1 + x - DEPTH / 2) {\r\n          dis3 = -line.x1 + x - DEPTH / 2;\r\n        }\r\n      } else if(line.x1 > x + DEPTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - DEPTH / 2;\r\n        } else if (dis4 > line.x1 - x - DEPTH / 2) {\r\n          dis4 = line.x1 - x - DEPTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH + half_thickness},${0}`, poly04 = `${- half_thickness},${0}`;\r\n    let poly11 = `${half_thickness},${half_thickness}`, poly12 = `${length - half_thickness},${half_thickness}`, poly13 = `${length + half_thickness},${-half_thickness}`, poly14 = `-${half_thickness},-${half_thickness}`;\r\n    let poly21 = `${-half_thickness},${DEPTH + half_thickness}`, poly22 = `${length + half_thickness},${DEPTH + half_thickness}`, poly23 = `${length - half_thickness},${DEPTH - half_thickness}`, poly24 = `${half_thickness}, ${DEPTH - half_thickness}`;\r\n    let poly31 = `${-half_thickness},${DEPTH + half_thickness}`, poly32 = `${half_thickness},${DEPTH - half_thickness}`, poly33 = `${half_thickness},${half_thickness}`, poly34 = `${-half_thickness}, -${half_thickness}`;\r\n    let poly41 = `${WIDTH -half_thickness},${DEPTH - half_thickness}`, poly42 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly43 = `${WIDTH + half_thickness},-${half_thickness}`, poly44 = `${WIDTH -half_thickness}, ${half_thickness}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${WIDTH / 2}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3}, ${WIDTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH}, ${WIDTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 21.71 * ZOOM;\r\nconst DEPTH = 21.71 * ZOOM;\r\nconst PARAM1 = 6.66 * ZOOM;\r\nconst PARAM2 = 2.1 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst CIRCLE_RADIUS = 7.41 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 41.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'round-table',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['round-table', 'round-table'],\r\n    title: 'round-table',\r\n    description: 'round-table',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={-(WIDTH) / 2} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={(WIDTH) / 2 - PARAM2 - 2 * STROKE_WIDTH} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={CIRCLE_RADIUS * 2 + 6} width={CIRCLE_RADIUS * 2 + 6} x={-(CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH) / 2} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={-(WIDTH) / 2} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={(WIDTH) / 2 - PARAM2 - 2 * STROKE_WIDTH} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={CIRCLE_RADIUS * 2 + 6} width={CIRCLE_RADIUS * 2 + 6} x={-(CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH) / 2}  y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 21.89 * ZOOM;\r\nconst DEPTH = 22.51 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst INNER_WIDTH = 17.82 * ZOOM;\r\nconst INNER_HEIGHT = 18.32 * ZOOM;\r\nconst CIRCLE_RADIUS = 1 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(8px, 26.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'shower',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['shower', 'shower'],\r\n    title: 'shower',\r\n    description: 'shower',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n\r\n    let poly51 = `${-INNER_WIDTH / 2},${half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly52 = `${INNER_WIDTH / 2},${half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly53 = `${INNER_WIDTH / 2},${-half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly54 = `${-INNER_WIDTH / 2},${-half_thickness + (DEPTH - INNER_HEIGHT) / 2}`;\r\n    let poly61 = `${-INNER_WIDTH / 2 - half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly62 = `${-INNER_WIDTH / 2 + half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly63 = `${-INNER_WIDTH / 2 + half_thickness},${ + (DEPTH - INNER_HEIGHT) / 2}`, poly64 = `${-INNER_WIDTH / 2 - half_thickness},${ + (DEPTH - INNER_HEIGHT) / 2}`;\r\n    let poly71 = `${INNER_WIDTH / 2 - half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly72 = `${INNER_WIDTH / 2 + half_thickness},${INNER_HEIGHT + (DEPTH - INNER_HEIGHT) / 2}`, poly73 = `${INNER_WIDTH / 2 + half_thickness},${0 + (DEPTH - INNER_HEIGHT) / 2}`, poly74 = `${INNER_WIDTH / 2 - half_thickness},${ + (DEPTH - INNER_HEIGHT) / 2}`;\r\n    let poly81 = `${-INNER_WIDTH / 2},${INNER_HEIGHT + half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly82 = `${INNER_WIDTH / 2},${INNER_HEIGHT + half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly83 = `${INNER_WIDTH / 2},${INNER_HEIGHT - half_thickness + (DEPTH - INNER_HEIGHT) / 2}`, poly84 = `${-INNER_WIDTH / 2},${INNER_HEIGHT - half_thickness + (DEPTH - INNER_HEIGHT) / 2}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={1} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS - STROKE_WIDTH} y={(DEPTH - 2 *  CIRCLE_RADIUS) / 2 - STROKE_WIDTH}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={1} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 21.98 * ZOOM;\r\nconst DEPTH = 14.2 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst PARAM1 = 2.03 * ZOOM;\r\nconst INNER_WIDTH = 18.93 * ZOOM;\r\nconst INNER_HEIGHT = 11.17 * ZOOM;\r\nconst CORNER_RADIUS = 2 * ZOOM;\r\nconst CIRCLE_RADIUS = 1 * ZOOM\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(11px, 14.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'sink',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['sink', 'sink'],\r\n    title: 'sink',\r\n    description: 'sink',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH + PARAM1}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH + PARAM1}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH + PARAM1}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH + PARAM1}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n    let poly51 = `${-WIDTH / 2},${DEPTH + half_thickness + PARAM1}`, poly52 = `${WIDTH / 2},${DEPTH + half_thickness + PARAM1}`, poly53 = `${WIDTH / 2},${DEPTH - half_thickness + PARAM1}`, poly54 = `${-WIDTH / 2},${DEPTH - half_thickness + PARAM1}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <svg width={INNER_WIDTH + 2 * STROKE_WIDTH} height={INNER_HEIGHT + 2 * STROKE_WIDTH} x={-(INNER_WIDTH + 2 * STROKE_WIDTH) / 2} y={(DEPTH - INNER_HEIGHT) / 2 - STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={CORNER_RADIUS} ry={CORNER_RADIUS} width={INNER_WIDTH} height={INNER_HEIGHT} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS- STROKE_WIDTH} y={(DEPTH - INNER_HEIGHT) / 2 + INNER_HEIGHT / 5}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#407AEC\" strokeWidth={1.5} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <svg width={INNER_WIDTH + 2 * STROKE_WIDTH} height={INNER_HEIGHT + 2 * STROKE_WIDTH} x={-(INNER_WIDTH + 2 * STROKE_WIDTH) / 2} y={(DEPTH - INNER_HEIGHT) / 2 - STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={CORNER_RADIUS} ry={CORNER_RADIUS} width={INNER_WIDTH} height={INNER_HEIGHT} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} width={CIRCLE_RADIUS * 2 + 2 * STROKE_WIDTH} x={-CIRCLE_RADIUS- STROKE_WIDTH} y={(DEPTH - INNER_HEIGHT) / 2 + INNER_HEIGHT / 5}>\r\n          <circle cx={CIRCLE_RADIUS  + 3} cy={CIRCLE_RADIUS  + 3} r={CIRCLE_RADIUS} stroke=\"#8E9BA2\" strokeWidth={1.5} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 26.01 * ZOOM;\r\nconst DEPTH = 17.42 * ZOOM;\r\nconst MHEIGHT = 7.75 * ZOOM;\r\nconst RADIUS = 1 * ZOOM;\r\nconst TOP = 2.38 * ZOOM;\r\nconst GAP1 = 1.93 * ZOOM;\r\nconst GAP2 = 7.45 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(55px, 23px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'sofa-L',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['sofa-L', 'sofa-L'],\r\n    title: 'sofa-L',\r\n    description: 'sofa-L',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${- half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH + half_thickness},${0}`, poly04 = `${- half_thickness},${0}`;\r\n    let poly11 = `${GAP1 + 2 * GAP2},${half_thickness}`, poly12 = `${length - RADIUS},${half_thickness}`, poly13 = `${length - RADIUS},${-half_thickness}`, poly14 = `${GAP1 + 2 * GAP2},-${half_thickness}`;\r\n    let poly21 = `${-half_thickness},${DEPTH + half_thickness}`, poly22 = `${length + half_thickness},${DEPTH + half_thickness}`, poly23 = `${length - half_thickness},${DEPTH - half_thickness}`, poly24 = `${half_thickness}, ${DEPTH - half_thickness}`;\r\n    let poly31 = `${-half_thickness},${DEPTH + half_thickness}`, poly32 = `${half_thickness},${DEPTH - half_thickness}`, poly33 = `${half_thickness},${DEPTH - MHEIGHT}`, poly34 = `${-half_thickness}, ${DEPTH - MHEIGHT}`;\r\n    let poly41 = `${WIDTH -half_thickness},${DEPTH - half_thickness}`, poly42 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly43 = `${WIDTH + half_thickness},${RADIUS}`, poly44 = `${WIDTH -half_thickness}, ${RADIUS}`;\r\n    \r\n    let poly51 = `${-half_thickness},${DEPTH + half_thickness - TOP}`, poly52 = `${length + half_thickness},${DEPTH + half_thickness - TOP}`, poly53 = `${length - half_thickness},${DEPTH - half_thickness - TOP}`, poly54 = `${half_thickness}, ${DEPTH - half_thickness - TOP}`;\r\n    let poly61 = `${-half_thickness + GAP1},${DEPTH + half_thickness - TOP}`, poly62 = `${half_thickness + GAP1},${DEPTH - half_thickness - TOP}`, poly63 = `${half_thickness + GAP1},${DEPTH - MHEIGHT - RADIUS}`, poly64 = `${-half_thickness + GAP1}, ${DEPTH - MHEIGHT - RADIUS}`;\r\n    let poly71 = `${-half_thickness + GAP1 + GAP2},${DEPTH + half_thickness - TOP}`, poly72 = `${half_thickness + GAP1 + GAP2},${DEPTH - half_thickness - TOP}`, poly73 = `${half_thickness + GAP1 + GAP2},${DEPTH - MHEIGHT - RADIUS}`, poly74 = `${-half_thickness + GAP1 + GAP2}, ${DEPTH - MHEIGHT - RADIUS}`;\r\n    let poly81 = `${-half_thickness + GAP1 + 2 * GAP2},${DEPTH + half_thickness - TOP}`, poly82 = `${half_thickness + GAP1 + 2 * GAP2},${DEPTH - half_thickness - TOP}`, poly83 = `${half_thickness + GAP1 + 2 * GAP2},${0}`, poly84 = `${-half_thickness + GAP1 + 2 * GAP2}, ${0}`;\r\n    let poly91 = `${-half_thickness + WIDTH - GAP1},${DEPTH + half_thickness - TOP}`, poly92 = `${half_thickness + WIDTH - GAP1},${DEPTH - half_thickness - TOP}`, poly93 = `${half_thickness + WIDTH - GAP1},${0}`, poly94 = `${-half_thickness + WIDTH - GAP1}, ${0}`;\r\n\r\n    let poly101 = `${RADIUS},${DEPTH + half_thickness - MHEIGHT - RADIUS}`, poly102 = `${GAP1 + 2 * GAP2},${DEPTH + half_thickness - MHEIGHT - RADIUS}`, poly103 = `${GAP1 + 2 * GAP2},${DEPTH - half_thickness - MHEIGHT - RADIUS}`, poly104 = `${RADIUS},${DEPTH - half_thickness - MHEIGHT - RADIUS}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT_SELECTED} />\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x=\"-3px\" y={DEPTH - MHEIGHT - RADIUS - 3}>\r\n          <circle cx={RADIUS  + 3} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(153, 195, 251)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x={WIDTH - half_thickness - RADIUS} y=\"-3px\">\r\n          <circle cx={0} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(153, 195, 251)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH - MHEIGHT - RADIUS} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2 - DEPTH + MHEIGHT + RADIUS} x2=\"5\" y2={-dis2 - DEPTH + MHEIGHT + RADIUS} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2 - DEPTH + MHEIGHT + RADIUS} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3}, ${DEPTH  * 3 / 4} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT} />\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x=\"-3px\" y={DEPTH - MHEIGHT - RADIUS - 3}>\r\n          <circle cx={RADIUS  + 3} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(139, 139, 139)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x={WIDTH - half_thickness - RADIUS} y=\"-3px\">\r\n          <circle cx={0} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(139, 139, 139)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 26.01 * ZOOM;\r\nconst DEPTH = 17.42 * ZOOM;\r\nconst MHEIGHT = 7.75 * ZOOM;\r\nconst RADIUS = 1 * ZOOM;\r\nconst TOP = 2.38 * ZOOM;\r\nconst GAP1 = 1.82 * ZOOM;\r\nconst GAP2 = 6.03 * ZOOM;\r\nconst GAP3 = 6.08 * ZOOM;\r\nconst GAP4 = 6.12 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(55px, 23px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'sofa-U',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['sofa-U', 'sofa-U'],\r\n    title: 'sofa-U',\r\n    description: 'sofa-U',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${- half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH + half_thickness},${0}`, poly04 = `${- half_thickness},${0}`;\r\n    let poly11 = `${WIDTH - GAP1 - GAP2 },${half_thickness}`, poly12 = `${length - RADIUS},${half_thickness}`, poly13 = `${length - RADIUS},${-half_thickness}`, poly14 = `${WIDTH - GAP1 - GAP2 },-${half_thickness}`;\r\n    let poly21 = `${-half_thickness},${DEPTH + half_thickness}`, poly22 = `${length + half_thickness},${DEPTH + half_thickness}`, poly23 = `${length - half_thickness},${DEPTH - half_thickness}`, poly24 = `${half_thickness}, ${DEPTH - half_thickness}`;\r\n    let poly31 = `${-half_thickness},${DEPTH + half_thickness}`, poly32 = `${half_thickness},${DEPTH - half_thickness}`, poly33 = `${half_thickness},${RADIUS}`, poly34 = `${-half_thickness}, ${RADIUS}`;\r\n    let poly41 = `${WIDTH -half_thickness},${DEPTH - half_thickness}`, poly42 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly43 = `${WIDTH + half_thickness},${RADIUS}`, poly44 = `${WIDTH -half_thickness}, ${RADIUS}`;\r\n    \r\n    let poly51 = `${-half_thickness},${DEPTH + half_thickness - TOP}`, poly52 = `${length + half_thickness},${DEPTH + half_thickness - TOP}`, poly53 = `${length - half_thickness},${DEPTH - half_thickness - TOP}`, poly54 = `${half_thickness}, ${DEPTH - half_thickness - TOP}`;\r\n    let poly61 = `${-half_thickness + GAP1},${DEPTH + half_thickness - TOP}`, poly62 = `${half_thickness + GAP1},${DEPTH - half_thickness - TOP}`, poly63 = `${half_thickness + GAP1},${0}`, poly64 = `${-half_thickness + GAP1}, ${0}`;\r\n    let poly71 = `${-half_thickness + GAP1 + GAP2},${DEPTH + half_thickness - TOP}`, poly72 = `${half_thickness + GAP1 + GAP2},${DEPTH - half_thickness - TOP}`, poly73 = `${half_thickness + GAP1 + GAP2},${0}`, poly74 = `${-half_thickness + GAP1 + GAP2}, ${0}`;\r\n    let poly81 = `${-half_thickness + WIDTH - GAP1 - GAP2 },${DEPTH + half_thickness - TOP}`, poly82 = `${half_thickness + WIDTH - GAP1 - GAP2 },${DEPTH - half_thickness - TOP}`, poly83 = `${half_thickness + WIDTH - GAP1 - GAP2 },${0}`, poly84 = `${-half_thickness + WIDTH - GAP1 - GAP2 }, ${0}`;\r\n    let poly91 = `${-half_thickness + WIDTH - GAP1},${DEPTH + half_thickness - TOP}`, poly92 = `${half_thickness + WIDTH - GAP1},${DEPTH - half_thickness - TOP}`, poly93 = `${half_thickness + WIDTH - GAP1},${0}`, poly94 = `${-half_thickness + WIDTH - GAP1}, ${0}`;\r\n\r\n    let poly101 = `${RADIUS},${half_thickness}`, poly102 = `${GAP1 + GAP2},${half_thickness}`, poly103 = `${GAP1 + GAP2},${- half_thickness}`, poly104 = `${RADIUS},${- half_thickness}`;\r\n    let poly111 = `${-half_thickness + WIDTH / 2},${DEPTH + half_thickness - TOP}`, poly112 = `${half_thickness + WIDTH / 2},${DEPTH - half_thickness - TOP}`, poly113 = `${half_thickness + WIDTH / 2},${DEPTH - GAP4 - TOP}`, poly114 = `${-half_thickness + WIDTH / 2}, ${DEPTH - GAP4 - TOP}`;\r\n    let poly121 = `${GAP1 + GAP2},${half_thickness + DEPTH - GAP4 - TOP}`, poly122 = `${WIDTH - GAP1 - GAP2},${half_thickness + DEPTH - GAP4 - TOP}`, poly123 = `${GAP1 + GAP2},${- half_thickness + DEPTH - GAP4 - TOP}`, poly124 = `${WIDTH - GAP1 - GAP2},${- half_thickness + DEPTH - GAP4 - TOP}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly111 + \" \" + poly112 + \" \" + poly113 + \" \" + poly114}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly121 + \" \" + poly122 + \" \" + poly123 + \" \" + poly124}`} style={STYLE_RECT_SELECTED} />\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x=\"-3px\" y={-3}>\r\n          <circle cx={RADIUS  + 3} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(153, 195, 251)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x={WIDTH - half_thickness - RADIUS} y=\"-3px\">\r\n          <circle cx={0} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(153, 195, 251)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH - MHEIGHT - RADIUS} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2 - DEPTH + MHEIGHT + RADIUS} x2=\"5\" y2={-dis2 - DEPTH + MHEIGHT + RADIUS} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2 - DEPTH + MHEIGHT + RADIUS} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3}, ${DEPTH  / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly101 + \" \" + poly102 + \" \" + poly103 + \" \" + poly104}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly111 + \" \" + poly112 + \" \" + poly113 + \" \" + poly114}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly121 + \" \" + poly122 + \" \" + poly123 + \" \" + poly124}`} style={STYLE_RECT} />\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x=\"-3px\" y={-3}>\r\n          <circle cx={RADIUS  + 3} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(139, 139, 139)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x={WIDTH - half_thickness - RADIUS} y=\"-3px\">\r\n          <circle cx={0} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(139, 139, 139)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 26.01 * ZOOM;\r\nconst DEPTH = 10 * ZOOM;\r\nconst RADIUS = 1 * ZOOM;\r\nconst TOP = 2.38 * ZOOM;\r\nconst GAP1 = 1.93 * ZOOM;\r\nconst GAP2 = 7.45 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(55px, 15px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'sofa',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['sofa', 'sofa'],\r\n    title: 'sofa',\r\n    description: 'sofa',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${- half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH + half_thickness},${0}`, poly04 = `${- half_thickness},${0}`;\r\n    let poly11 = `${RADIUS},${half_thickness}`, poly12 = `${length - RADIUS},${half_thickness}`, poly13 = `${length - RADIUS},${-half_thickness}`, poly14 = `${RADIUS},-${half_thickness}`;\r\n    let poly21 = `${-half_thickness},${DEPTH + half_thickness}`, poly22 = `${length + half_thickness},${DEPTH + half_thickness}`, poly23 = `${length - half_thickness},${DEPTH - half_thickness}`, poly24 = `${half_thickness}, ${DEPTH - half_thickness}`;\r\n    let poly31 = `${-half_thickness},${DEPTH + half_thickness}`, poly32 = `${half_thickness},${DEPTH - half_thickness}`, poly33 = `${half_thickness},${RADIUS}`, poly34 = `${-half_thickness}, ${RADIUS}`;\r\n    let poly41 = `${WIDTH -half_thickness},${DEPTH - half_thickness}`, poly42 = `${WIDTH + half_thickness},${DEPTH + half_thickness}`, poly43 = `${WIDTH + half_thickness},${RADIUS}`, poly44 = `${WIDTH -half_thickness}, ${RADIUS}`;\r\n    let poly51 = `${-half_thickness},${DEPTH + half_thickness - TOP}`, poly52 = `${length + half_thickness},${DEPTH + half_thickness - TOP}`, poly53 = `${length - half_thickness},${DEPTH - half_thickness - TOP}`, poly54 = `${half_thickness}, ${DEPTH - half_thickness - TOP}`;\r\n    let poly61 = `${-half_thickness + GAP1},${DEPTH + half_thickness - TOP}`, poly62 = `${half_thickness + GAP1},${DEPTH - half_thickness - TOP}`, poly63 = `${half_thickness + GAP1},${0}`, poly64 = `${-half_thickness + GAP1}, ${0}`;\r\n    let poly71 = `${-half_thickness + GAP1 + GAP2},${DEPTH + half_thickness - TOP}`, poly72 = `${half_thickness + GAP1 + GAP2},${DEPTH - half_thickness - TOP}`, poly73 = `${half_thickness + GAP1 + GAP2},${0}`, poly74 = `${-half_thickness + GAP1 + GAP2}, ${0}`;\r\n    let poly81 = `${-half_thickness + GAP1 + 2 * GAP2},${DEPTH + half_thickness - TOP}`, poly82 = `${half_thickness + GAP1 + 2 * GAP2},${DEPTH - half_thickness - TOP}`, poly83 = `${half_thickness + GAP1 + 2 * GAP2},${0}`, poly84 = `${-half_thickness + GAP1 + 2 * GAP2}, ${0}`;\r\n    let poly91 = `${-half_thickness + WIDTH - GAP1},${DEPTH + half_thickness - TOP}`, poly92 = `${half_thickness + WIDTH - GAP1},${DEPTH - half_thickness - TOP}`, poly93 = `${half_thickness + WIDTH - GAP1},${0}`, poly94 = `${-half_thickness + WIDTH - GAP1}, ${0}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT_SELECTED} />\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x=\"-3px\" y=\"-3px\">\r\n          <circle cx={RADIUS  + 3} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(153, 195, 251)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x={WIDTH - half_thickness - RADIUS} y=\"-3px\">\r\n          <circle cx={0} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(153, 195, 251)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${WIDTH / 2}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${-WIDTH / 2},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly81 + \" \" + poly82 + \" \" + poly83 + \" \" + poly84}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly91 + \" \" + poly92 + \" \" + poly93 + \" \" + poly94}`} style={STYLE_RECT} />\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x=\"-3px\" y=\"-3px\">\r\n          <circle cx={RADIUS  + 3} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(139, 139, 139)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={RADIUS + 3} width={RADIUS + 3} x={WIDTH - half_thickness - RADIUS} y=\"-3px\">\r\n          <circle cx={0} cy={RADIUS  + 3} r={RADIUS} stroke=\"rgb(139, 139, 139)\" strokeWidth=\"3\" fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 21.71 * ZOOM;\r\nconst DEPTH = 21.71 * ZOOM;\r\nconst PARAM1 = 6.66 * ZOOM;\r\nconst PARAM2 = 2.1 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst INNER_WIDTH = 13.82 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 41.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'square-table',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['square-table', 'square-table'],\r\n    title: 'square-table',\r\n    description: 'square-table',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1.2;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-INNER_WIDTH / 2},${half_thickness + (DEPTH - INNER_WIDTH) / 2}`, poly12 = `${INNER_WIDTH / 2},${half_thickness + (DEPTH - INNER_WIDTH) / 2}`, poly13 = `${INNER_WIDTH / 2},${-half_thickness + (DEPTH - INNER_WIDTH) / 2}`, poly14 = `${-INNER_WIDTH / 2},${-half_thickness + (DEPTH - INNER_WIDTH) / 2}`;\r\n    let poly21 = `${-INNER_WIDTH / 2 - half_thickness},${INNER_WIDTH + (DEPTH - INNER_WIDTH) / 2}`, poly22 = `${-INNER_WIDTH / 2 + half_thickness},${INNER_WIDTH + (DEPTH - INNER_WIDTH) / 2}`, poly23 = `${-INNER_WIDTH / 2 + half_thickness},${(DEPTH - INNER_WIDTH) / 2}`, poly24 = `${-INNER_WIDTH / 2 - half_thickness},${(DEPTH - INNER_WIDTH) / 2}`;\r\n    let poly31 = `${INNER_WIDTH / 2 - half_thickness},${INNER_WIDTH + (DEPTH - INNER_WIDTH) / 2}`, poly32 = `${INNER_WIDTH / 2 + half_thickness},${INNER_WIDTH + (DEPTH - INNER_WIDTH) / 2}`, poly33 = `${INNER_WIDTH / 2 + half_thickness},${(DEPTH - INNER_WIDTH) / 2}`, poly34 = `${INNER_WIDTH / 2 - half_thickness},${(DEPTH - INNER_WIDTH) / 2}`;\r\n    let poly41 = `${-INNER_WIDTH / 2},${INNER_WIDTH + half_thickness + (DEPTH - INNER_WIDTH) / 2}`, poly42 = `${INNER_WIDTH / 2},${INNER_WIDTH + half_thickness + (DEPTH - INNER_WIDTH) / 2}`, poly43 = `${INNER_WIDTH / 2},${INNER_WIDTH - half_thickness + (DEPTH - INNER_WIDTH) / 2}`, poly44 = `${-INNER_WIDTH / 2},${INNER_WIDTH - half_thickness + (DEPTH - INNER_WIDTH) / 2}`;\r\n\r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={-(WIDTH) / 2} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={(WIDTH) / 2 - PARAM2 - 2 * STROKE_WIDTH} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y=\"0px\">\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={DEPTH - PARAM2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={-(WIDTH) / 2} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg width={PARAM2 + 2 * STROKE_WIDTH} height={PARAM1 + 2 * STROKE_WIDTH} x={(WIDTH) / 2 - PARAM2 - 2 * STROKE_WIDTH} y={DEPTH / 2 - PARAM1 / 2 - 2 * STROKE_WIDTH}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM2} height={PARAM1} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 14 * ZOOM;\r\nconst PARAM = 4.5 * ZOOM;\r\nconst DEPTH = 20.69 * ZOOM;\r\nconst INNER_WIDTH = 10.68 * ZOOM;\r\nconst INNER_HEIGHT = 12.75 * ZOOM;\r\nconst STROKE_WIDTH = 3;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 15.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'toilet',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['toilet', 'toilet'],\r\n    title: 'toilet',\r\n    description: 'toilet',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly12 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly13 = `${-WIDTH / 2 + half_thickness},${WIDTH / 2}`, poly14 = `${-WIDTH / 2 - half_thickness},${WIDTH / 2}`;\r\n    let poly21 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${WIDTH / 2 + half_thickness},${WIDTH / 2}`, poly24 = `${WIDTH / 2 - half_thickness},${WIDTH / 2}`;\r\n    let poly31 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly32 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly33 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly34 = `${-WIDTH / 2},${DEPTH - half_thickness }`;\r\n\r\n    let poly41 = `${-INNER_WIDTH / 2 - half_thickness},${INNER_HEIGHT + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly42 = `${-INNER_WIDTH / 2 + half_thickness},${INNER_HEIGHT + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly43 = `${-INNER_WIDTH / 2 + half_thickness},${INNER_WIDTH / 2 + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly44 = `${-INNER_WIDTH / 2 - half_thickness},${INNER_WIDTH / 2 + (DEPTH - PARAM - INNER_HEIGHT) / 2}`;\r\n    let poly51 = `${INNER_WIDTH / 2 - half_thickness},${INNER_HEIGHT + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly52 = `${INNER_WIDTH / 2 + half_thickness},${INNER_HEIGHT + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly53 = `${INNER_WIDTH / 2 + half_thickness},${INNER_WIDTH / 2 + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly54 = `${INNER_WIDTH / 2 - half_thickness},${INNER_WIDTH / 2 + (DEPTH - PARAM - INNER_HEIGHT) / 2}`;\r\n    let poly61 = `${-INNER_WIDTH / 2},${INNER_HEIGHT + half_thickness + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly62 = `${INNER_WIDTH / 2},${INNER_HEIGHT + half_thickness + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly63 = `${INNER_WIDTH / 2},${INNER_HEIGHT - half_thickness + (DEPTH - PARAM - INNER_HEIGHT) / 2}`, poly64 = `${-INNER_WIDTH / 2},${INNER_HEIGHT - half_thickness  + (DEPTH - PARAM - INNER_HEIGHT) / 2}`;\r\n\r\n    let poly71 = `${-WIDTH / 2},${DEPTH + half_thickness - PARAM}`, poly72 = `${WIDTH / 2},${DEPTH + half_thickness - PARAM}`, poly73 = `${WIDTH / 2},${DEPTH - half_thickness - PARAM}`, poly74 = `${-WIDTH / 2},${DEPTH - half_thickness - PARAM}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <svg height={WIDTH / 2 + STROKE_WIDTH} width={WIDTH + 2 * STROKE_WIDTH} x={-WIDTH / 2- STROKE_WIDTH} y={0}>\r\n          <circle cx={WIDTH / 2  + STROKE_WIDTH} cy={WIDTH / 2  + STROKE_WIDTH} r={WIDTH / 2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n        <svg height={INNER_WIDTH / 2 + STROKE_WIDTH} width={INNER_WIDTH + 2 * STROKE_WIDTH} x={-INNER_WIDTH / 2- STROKE_WIDTH} y={(DEPTH - PARAM - INNER_HEIGHT) / 2}>\r\n          <circle cx={INNER_WIDTH / 2  + STROKE_WIDTH} cy={INNER_WIDTH / 2  + STROKE_WIDTH} r={INNER_WIDTH / 2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n        <svg height={WIDTH / 2 + STROKE_WIDTH} width={WIDTH + 2 * STROKE_WIDTH} x={-WIDTH / 2- STROKE_WIDTH} y={0}>\r\n          <circle cx={WIDTH / 2  + STROKE_WIDTH} cy={WIDTH / 2  + STROKE_WIDTH} r={WIDTH / 2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <svg height={INNER_WIDTH / 2 + STROKE_WIDTH} width={INNER_WIDTH + 2 * STROKE_WIDTH} x={-INNER_WIDTH / 2- STROKE_WIDTH} y={(DEPTH - PARAM - INNER_HEIGHT) / 2}>\r\n          <circle cx={INNER_WIDTH / 2  + STROKE_WIDTH} cy={INNER_WIDTH / 2  + STROKE_WIDTH} r={INNER_WIDTH / 2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"transparent\" />\r\n        </svg>\r\n        <polygon points={`${poly71 + \" \" + poly72 + \" \" + poly73 + \" \" + poly74}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 18.61 * ZOOM;\r\nconst DEPTH = 19.14 * ZOOM;\r\nconst PARAM = 3.38 * ZOOM;\r\nconst PARAM1 = 10.26 * ZOOM;\r\nconst PARAM2 = 1.39 * ZOOM;\r\nconst STROKE_WIDTH = 0;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8E9BA2\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 35.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'washing-machine',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['washing-machine', 'washing-machine'],\r\n    title: 'washing-machine',\r\n    description: 'washing-machine',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n    let poly51 = `${-WIDTH / 2},${half_thickness + PARAM}`, poly52 = `${WIDTH / 2},${half_thickness + PARAM}`, poly53 = `${WIDTH / 2},${-half_thickness + PARAM}`, poly54 = `${-WIDTH / 2},${-half_thickness + PARAM}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#407AEC\" strokeWidth={STROKE_WIDTH} fill=\"#407AEC\" />\r\n        </svg>\r\n   \r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <svg width={PARAM1 + 2 * STROKE_WIDTH} height={PARAM2 + 2 * STROKE_WIDTH} x={-(PARAM1 + 2 * STROKE_WIDTH) / 2} y={(PARAM - PARAM2) / 2}>\r\n          <rect x={STROKE_WIDTH} y={STROKE_WIDTH} rx={PARAM2 / 2} ry={PARAM2 / 2} width={PARAM1} height={PARAM2} stroke=\"#8E9BA2\" strokeWidth={STROKE_WIDTH} fill=\"#8E9BA2\" />\r\n        </svg>\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import * as Three from 'three';\r\nimport React from 'react';\r\n\r\nconst ZOOM = 5;\r\nconst WIDTH = 22 * ZOOM;\r\nconst DEPTH = 12.96 * ZOOM;\r\nconst PARAM = 2.31 * ZOOM;\r\nconst HEIGHT=150;\r\n\r\nconst STYLE_TRANPARENT = {\r\n  strokeWidth: 1,\r\n  stroke: \"transparent\",\r\n  fill: \"transparent\",\r\n};\r\n\r\nconst STYLE_RECT = {\r\n  strokeWidth: 1,\r\n  stroke: \"#8E9BA2\",\r\n  fill: \"#8B8B8B\",\r\n};\r\nconst STYLE_RECT_SELECTED = {\r\n  fill: \"#407AEC\",\r\n  strokeWidth: 1,\r\n  stroke: \"#407AEC\",\r\n};\r\nconst STYLE_PNG_BASE = {\r\n  transform: 'translate(-11px, 23.95px)'\r\n};\r\n\r\nconst STYLE = {\r\n  stroke: \"#4F8BFF\",\r\n  strokeWidth: \"1px\",\r\n};\r\n\r\nconst STYLE_TEXT = {\r\n  fontFamily: \"DM Sans\",\r\n  fontStyle: \"normal\",\r\n  fontWeight: 400,\r\n  fontSize: \"11px\",\r\n  lineHeight: \"12px\",\r\n  textAlign: \"right\",\r\n  fill: \"#F6F6F6\",\r\n  flex: \"none\",\r\n  order: 0,\r\n  flexGrow: 0,\r\n\r\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\r\n  WebkitTouchCallout: \"none\" /* iOS Safari */,\r\n  WebkitUserSelect: \"none\" /* Chrome/Safari/Opera */,\r\n  MozUserSelect: \"none\" /* Firefox */,\r\n  MsUserSelect: \"none\" /* Internet Explorer/Edge */,\r\n  userSelect: \"none\",\r\n};\r\n\r\nexport default {\r\n  name: 'wordrobe',\r\n  prototype: 'items',\r\n\r\n  info: {\r\n    tag: ['wordrobe', 'wordrobe'],\r\n    title: 'wordrobe',\r\n    description: 'wordrobe',\r\n    image: null\r\n  },\r\n  properties: {\r\n    altitude: {\r\n      label: 'quota',\r\n      type: 'length-measure',\r\n      defaultValue: {\r\n        length: 220,\r\n        unit: 'cm'\r\n      }\r\n    }\r\n  },\r\n\r\n  render2D: function (element, layer, scene) {\r\n    const half_thickness = 1;\r\n    const length = WIDTH;\r\n    const lines = []\r\n    layer.lines.map(line => {\r\n      const vertices = layer.vertices;\r\n      const {x: x1, y: y1} =  vertices.get(line.vertices.get(0))\r\n      const {x: x2, y: y2} =  vertices.get(line.vertices.get(1))\r\n\r\n      lines.push({x1, y1, x2, y2})\r\n    })\r\n\r\n    const x = element.x;\r\n    const y = element.y;\r\n\r\n    let dis1 = 0, dis2 = 0, dis3 = 0, dis4 = 0;\r\n\r\n    lines.map(line => {\r\n      if(line.y1 > y + DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis1 == 0) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        } else if (dis1 > line.y1 - y - DEPTH / 2) {\r\n          dis1 = line.y1 - y - DEPTH / 2;\r\n        }\r\n      } else if(line.y1 < y - DEPTH / 2 && ((line.x1 <= x && line.x2 >= x) || (line.x2 <= x && line.x1 >= x))) {\r\n        if(dis2 == 0) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        } else if (dis2 > y - DEPTH / 2 - line.y1) {\r\n          dis2 = y - DEPTH / 2 - line.y1;\r\n        }\r\n      } else if(line.x1 < x - WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis3 == 0) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        } else if (dis3 > -line.x1 + x - WIDTH / 2) {\r\n          dis3 = -line.x1 + x - WIDTH / 2;\r\n        }\r\n      } else if(line.x1 > x + WIDTH / 2 && ((line.y1 <= y && line.y2 >= y) || (line.y2 <= y && line.y1 >= y))) {\r\n        if(dis4 == 0) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        } else if (dis4 > line.x1 - x - WIDTH / 2) {\r\n          dis4 = line.x1 - x - WIDTH / 2;\r\n        }\r\n      }\r\n    })\r\n    let poly01 = `${-WIDTH / 2 - half_thickness},${DEPTH + half_thickness}`, poly02 = `${WIDTH / 2 + half_thickness},${DEPTH + half_thickness}`, poly03 = `${WIDTH / 2 + half_thickness},${0}`, poly04 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly11 = `${-WIDTH / 2},${half_thickness}`, poly12 = `${WIDTH / 2},${half_thickness}`, poly13 = `${WIDTH / 2},-${half_thickness}`, poly14 = `${-WIDTH / 2},-${half_thickness}`;\r\n    let poly21 = `${-WIDTH / 2 - half_thickness},${DEPTH}`, poly22 = `${-WIDTH / 2 + half_thickness},${DEPTH}`, poly23 = `${-WIDTH / 2 + half_thickness},${0}`, poly24 = `${-WIDTH / 2 - half_thickness},${0}`;\r\n    let poly31 = `${WIDTH / 2 - half_thickness},${DEPTH}`, poly32 = `${WIDTH / 2 + half_thickness},${DEPTH}`, poly33 = `${WIDTH / 2 + half_thickness},${0}`, poly34 = `${WIDTH / 2 - half_thickness},${0}`;\r\n    let poly41 = `${-WIDTH / 2},${DEPTH + half_thickness}`, poly42 = `${WIDTH / 2},${DEPTH + half_thickness}`, poly43 = `${WIDTH / 2},${DEPTH - half_thickness}`, poly44 = `${-WIDTH / 2},${DEPTH - half_thickness}`;\r\n    let poly51 = `${-WIDTH / 2},${half_thickness + PARAM}`, poly52 = `${WIDTH / 2},${half_thickness + PARAM}`, poly53 = `${WIDTH / 2},${-half_thickness +  + PARAM}`, poly54 = `${-WIDTH / 2},${-half_thickness + PARAM}`;\r\n    let poly61 = `${- half_thickness},${0}`, poly62 = `${half_thickness},${0}`, poly63 = `${half_thickness},${PARAM}`, poly64 = `${-half_thickness},${PARAM}`;\r\n   \r\n    return element.selected ? (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <defs>\r\n          <filter id=\"rounded-corners\" x=\"-25%\" width=\"150%\" y=\"-25%\" height=\"150%\">\r\n            <feFlood floodColor=\"#407AEC\" />\r\n            <feGaussianBlur stdDeviation=\"2\" />\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 0 0 1\" />\r\n            </feComponentTransfer>\r\n\r\n            <feComponentTransfer>\r\n              <feFuncA type=\"table\" tableValues=\"0 1 1 1 1 1 1 1\" />\r\n            </feComponentTransfer>\r\n            <feComposite operator=\"over\" in=\"SourceGraphic\" />\r\n          </filter>\r\n        </defs>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT_SELECTED} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT_SELECTED} />\r\n\r\n        <image href=\"/assets/enable.png\" style={STYLE_PNG_BASE}/>\r\n        {dis1 != 0 && <g transform={`translate(${0}, ${DEPTH} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={-dis1 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis1.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={dis1} x2=\"5\" y2={dis1} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={dis1} style={STYLE} />\r\n        </g>}\r\n        {dis2 != 0 && <g transform={`translate(${0}, ${0} )`}>\r\n          <text\r\n            x=\"20\"\r\n            y={dis2 / 2}\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis2.toFixed(1)}\r\n          </text>\r\n          <line x1=\"-5\" y1={-dis2} x2=\"5\" y2={-dis2} style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2=\"0\" y2={-dis2} style={STYLE} />\r\n        </g>}\r\n        {dis3 != 0 && <g transform={`translate(-${dis3 + WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis3 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis3.toFixed(1)}\r\n          </text>\r\n          <line x1={0} y1=\"-5\" x2={0} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis3} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n        {dis4 != 0 && <g transform={`translate(${WIDTH / 2}, ${DEPTH / 2} )`}>\r\n          <text\r\n            x={dis4 / 2}\r\n            y=\"-10\"\r\n            transform={`scale(1, -1)`}\r\n            style={STYLE_TEXT}\r\n            filter=\"url(#rounded-corners)\"\r\n          >\r\n            {dis4.toFixed(1)}\r\n          </text>\r\n          <line x1={dis4} y1=\"-5\" x2={dis4} y2=\"5\" style={STYLE} />\r\n          <line x1=\"0\" y1=\"0\" x2={dis4} y2=\"0\" style={STYLE} />\r\n        </g>}\r\n      </g>\r\n    ) : (\r\n      <g transform={`translate(${0},${-DEPTH / 2})`} width={WIDTH} height={DEPTH}>\r\n        <polygon points={`${poly01 + \" \" + poly02 + \" \" + poly03 + \" \" + poly04}`} style={STYLE_TRANPARENT} />\r\n        <polygon points={`${poly11 + \" \" + poly12 + \" \" + poly13 + \" \" + poly14}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly21 + \" \" + poly22 + \" \" + poly23 + \" \" + poly24}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly31 + \" \" + poly32 + \" \" + poly33 + \" \" + poly34}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly41 + \" \" + poly42 + \" \" + poly43 + \" \" + poly44}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly51 + \" \" + poly52 + \" \" + poly53 + \" \" + poly54}`} style={STYLE_RECT} />\r\n        <polygon points={`${poly61 + \" \" + poly62 + \" \" + poly63 + \" \" + poly64}`} style={STYLE_RECT} />\r\n      </g>\r\n    );\r\n  },\r\n\r\n  render3D: function (element, layer, scene) {\r\n    return null;\r\n  }\r\n\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MdCamera } from \"react-icons/md\";\r\nimport { ReactPlannerComponents, ReactPlannerConstants } from \"react-planner\";\r\n\r\nconst {\r\n  MODE_IDLE,\r\n  MODE_2D_ZOOM_IN,\r\n  MODE_2D_ZOOM_OUT,\r\n  MODE_2D_PAN,\r\n  MODE_WAITING_DRAWING_LINE,\r\n  MODE_DRAGGING_LINE,\r\n  MODE_DRAGGING_VERTEX,\r\n  MODE_DRAGGING_ITEM,\r\n  MODE_DRAWING_LINE,\r\n  MODE_DRAWING_HOLE,\r\n  MODE_DRAWING_ITEM,\r\n  MODE_DRAGGING_HOLE,\r\n  MODE_ROTATING_ITEM,\r\n  MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n  MODE_RESIZE_ITEM_RIGHT_TOP,\r\n  MODE_RESIZE_ITEM_LEFT_TOP,\r\n  MODE_RESIZE_ITEM_LEFT_BOTTOM,\r\n  MODE_3D_FIRST_PERSON,\r\n  MODE_3D_VIEW,\r\n} = ReactPlannerConstants;\r\n\r\nconst { ToolbarButton } = ReactPlannerComponents.ToolbarComponents;\r\n\r\nexport default function ToolbarScreenshotButton({ mode }, { translator }) {\r\n  let imageBrowserDownload = (imageUri) => {\r\n    let fileOutputLink = document.createElement(\"a\");\r\n\r\n    let filename = \"output\" + Date.now() + \".png\";\r\n    filename = window.prompt(\"Insert output filename\", filename);\r\n    if (!filename) return;\r\n\r\n    fileOutputLink.setAttribute(\"download\", filename);\r\n    fileOutputLink.href = imageUri;\r\n    fileOutputLink.style.display = \"none\";\r\n    document.body.appendChild(fileOutputLink);\r\n    fileOutputLink.click();\r\n    document.body.removeChild(fileOutputLink);\r\n  };\r\n\r\n  let saveScreenshotToFile = (event) => {\r\n    event.preventDefault();\r\n    let canvas = document.getElementsByTagName(\"canvas\")[0];\r\n    imageBrowserDownload(canvas.toDataURL());\r\n  };\r\n\r\n  let saveSVGScreenshotToFile = (event) => {\r\n    event.preventDefault();\r\n\r\n    // First of all I need the svg content of the viewer\r\n    let svgElements = document.getElementsByTagName(\"svg\");\r\n\r\n    // I get the element with max width (which is the viewer)\r\n    let maxWidthSVGElement = svgElements[0];\r\n    for (let i = 1; i < svgElements.length; i++) {\r\n      if (\r\n        svgElements[i].width.baseVal.value >\r\n        maxWidthSVGElement.width.baseVal.value\r\n      ) {\r\n        maxWidthSVGElement = svgElements[i];\r\n      }\r\n    }\r\n\r\n    let serializer = new XMLSerializer();\r\n\r\n    let img = new Image();\r\n\r\n    // I create the new canvas to draw\r\n    let canvas = document.createElement(\"canvas\");\r\n    let ctx = canvas.getContext(\"2d\");\r\n\r\n    // Set width and height for the new canvas\r\n    let heightAtt = document.createAttribute(\"height\");\r\n    heightAtt.value = maxWidthSVGElement.height.baseVal.value;\r\n    canvas.setAttributeNode(heightAtt);\r\n\r\n    let widthAtt = document.createAttribute(\"width\");\r\n    widthAtt.value = maxWidthSVGElement.width.baseVal.value;\r\n    canvas.setAttributeNode(widthAtt);\r\n\r\n    ctx.fillStyle = \"white\";\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    img.crossOrigin = \"anonymous\";\r\n    img.src = `data:image/svg+xml;base64,${window.btoa(\r\n      serializer.serializeToString(maxWidthSVGElement)\r\n    )}`;\r\n\r\n    img.onload = () => {\r\n      ctx.drawImage(\r\n        img,\r\n        0,\r\n        0,\r\n        maxWidthSVGElement.width.baseVal.value,\r\n        maxWidthSVGElement.height.baseVal.value\r\n      );\r\n      imageBrowserDownload(canvas.toDataURL());\r\n    };\r\n  };\r\n\r\n  if ([MODE_3D_FIRST_PERSON, MODE_3D_VIEW].includes(mode)) {\r\n    return (\r\n      <ToolbarButton\r\n        active={false}\r\n        tooltip={translator.t(\"Get Screenshot\")}\r\n        onClick={saveScreenshotToFile}\r\n      >\r\n        <MdCamera />\r\n      </ToolbarButton>\r\n    );\r\n  }\r\n\r\n  if (\r\n    [\r\n      MODE_IDLE,\r\n      MODE_2D_ZOOM_IN,\r\n      MODE_2D_ZOOM_OUT,\r\n      MODE_2D_PAN,\r\n      MODE_WAITING_DRAWING_LINE,\r\n      MODE_DRAGGING_LINE,\r\n      MODE_DRAGGING_VERTEX,\r\n      MODE_DRAGGING_ITEM,\r\n      MODE_DRAWING_LINE,\r\n      MODE_DRAWING_HOLE,\r\n      MODE_DRAWING_ITEM,\r\n      MODE_DRAGGING_HOLE,\r\n      MODE_ROTATING_ITEM,\r\n      MODE_RESIZE_ITEM_RIGHT_BOTTOM,\r\n      MODE_RESIZE_ITEM_RIGHT_TOP,\r\n      MODE_RESIZE_ITEM_LEFT_TOP,\r\n      MODE_RESIZE_ITEM_LEFT_BOTTOM,\r\n    ].includes(mode)\r\n  ) {\r\n    return (\r\n      <ToolbarButton\r\n        active={false}\r\n        tooltip={translator.t(\"Get Screenshot\")}\r\n        onClick={saveSVGScreenshotToFile}\r\n      >\r\n        <MdCamera />\r\n      </ToolbarButton>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nToolbarScreenshotButton.propTypes = {\r\n  mode: PropTypes.string.isRequired,\r\n};\r\n\r\nToolbarScreenshotButton.contextTypes = {\r\n  translator: PropTypes.object.isRequired,\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport actions from \"./../actions/export\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    backgroundColor: \"#f8f8f8\",\r\n    flexGrow: 1,\r\n    minHeight: \"100vh\",\r\n  },\r\n  container: {\r\n    width: \"879px\",\r\n    margin: \"auto\",\r\n  },\r\n  title: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 700,\r\n    fontSize: \"32px\",\r\n    lineHeight: \"44px\",\r\n    color: \"#323337\",\r\n    paddingTop: \"252px\",\r\n    paddingBottom: \"100px\",\r\n    textAlign: \"center\",\r\n  },\r\n  wrap: {\r\n    background: \"rgba(255, 255, 255, 0.6)\",\r\n    border: \"1px solid #E1E1E1\",\r\n    borderRadius: \"18px\",\r\n    width: \"400px\",\r\n    height: \"267px\",\r\n    paddingLeft: \"30px\",\r\n    \"&:hover\": {\r\n      cursor: \"pointer\",\r\n      width: \"405px\",\r\n      height: \"269px\",\r\n      background: \"#FFFFFF\",\r\n      border: \"1px solid #2390F4\",\r\n      boxShadow: \"0px 4px 44px rgba(15, 62, 104, 0.05)\",\r\n      borderRadius: \"18px\",\r\n      color: \"#2390F4\",\r\n      \"& $subscription\": {\r\n        color: \"#2390F4\",\r\n      },\r\n      \"& $miniscription\": {\r\n        color: \"#2390F4\",\r\n      },\r\n    },\r\n    transition: \"0.3s ease\",\r\n  },\r\n  icon1: {\r\n    paddingTop: \"85px\",\r\n    paddingBottom: \"1rem\",\r\n  },\r\n  icon2: {\r\n    paddingTop: \"73px\",\r\n    paddingBottom: \"0.8rem\",\r\n  },\r\n  subscription: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 700,\r\n    fontSize: \"24px\",\r\n    lineHeight: \"44px\",\r\n    color: \"#323337\",\r\n    textDecoration: \"none\",\r\n  },\r\n  miniscription: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 400,\r\n    fontSize: \"14px\",\r\n    lineHeight: \"24px\",\r\n    color: \"#828282\",\r\n    textDecoration: \"none\",\r\n  },\r\n}));\r\n\r\nexport default function NewProject(props) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {}, []);\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <Typography className={classes.title}>New Floor Plan</Typography>\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"space-between\"\r\n        alignItems=\"center\"\r\n        className={classes.container}\r\n      >\r\n        <Box\r\n          className={classes.wrap}\r\n          onClick={() => {\r\n            props.dispatch(actions.projectActions.newProject());\r\n            navigate(\"/main\");\r\n          }}\r\n        >\r\n          <img src=\"/assets/Vector.png\" className={classes.icon1} />\r\n          <Typography className={classes.subscription}>\r\n            Start from scratch\r\n          </Typography>\r\n          <Typography className={classes.miniscription}>\r\n            Lets draw your ground. You can either trace a hand drawn plan or\r\n            start from scratch\r\n          </Typography>\r\n        </Box>\r\n        <Link\r\n          to=\"/load\"\r\n          style={{\r\n            textDecoration: \"none\",\r\n          }}\r\n        >\r\n          <Box className={classes.wrap}>\r\n            <img src=\"/assets/Group.png\" className={classes.icon2} />\r\n            <Typography className={classes.subscription}>\r\n              Create from your blueprint\r\n            </Typography>\r\n            <Typography className={classes.miniscription}>\r\n              Lets draw your ground. You can either trace a hand drawn plan or\r\n              start from scratch\r\n            </Typography>\r\n          </Box>\r\n        </Link>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Box, Typography, Grid } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nimport UploadSingleFile from \"./UploadSingleFile\";\r\nimport { loadProjectFromFile } from \"./parse-svg\";\r\nimport actions from \"./../actions/export\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  background: {\r\n    backgroundColor: \"#f8f8f8\",\r\n    flexGrow: 1,\r\n    minHeight: \"100vh\",\r\n    position: \"relative\",\r\n    paddingTop: \"252px\",\r\n  },\r\n  container: {\r\n    width: \"961px\",\r\n    height: \"457px\",\r\n    margin: \"auto\",\r\n    background: \"#FFFFFF\",\r\n    border: \"1px dashed #A7A7A7\",\r\n    borderRadius: \"18px\",\r\n    padding: \"124px 135px\",\r\n  },\r\n  menubar: {\r\n    position: \"absolute\",\r\n    top: \"0px\",\r\n    left: \"0px\",\r\n    background: \"#FFFFFF\",\r\n    height: \"56px\",\r\n    border: \"1px solid #DEDEDE\",\r\n    zIndex: 1,\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"flex-start\",\r\n    alignItems: \"center\",\r\n  },\r\n  barsub: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n    lineHeight: \"18px\",\r\n    color: \"#333333\",\r\n    \"&:hover\": {\r\n      cursor: \"pointer\",\r\n    },\r\n  },\r\n  backbar: {\r\n    margin: \"0 22px\",\r\n    \"&:hover\": {\r\n      cursor: \"pointer\",\r\n    },\r\n  },\r\n  subscription: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: \"700\",\r\n    fontSize: \"32px\",\r\n    lineHeight: \"44px\",\r\n    color: \"#323337\",\r\n  },\r\n  miniscription: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: \"400\",\r\n    fontSize: \"14px\",\r\n    lineHeight: \"26px\",\r\n    color: \"#323337\",\r\n    margin: \"2rem 0\",\r\n  },\r\n  uploadbtn: {\r\n    background: \"#333333\",\r\n    boxShadow: \"0px 2px 5px rgba(0, 0, 0, 0.2)\",\r\n    borderRadius: \"8px\",\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: \"500\",\r\n    fontSize: \"14px\",\r\n    lineHeight: \"18px\",\r\n    letterSpacing: \"-0.02em\",\r\n    color: \"#FFFFFF\",\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    padding: \"11px 18px\",\r\n    gap: \"10px\",\r\n    float: \"left\",\r\n    \"&:hover\": {\r\n      background: \"#333333db\",\r\n      cursor: \"pointer\",\r\n    },\r\n  },\r\n  inputbox: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    padding: \"11px 18px 11px 13px\",\r\n    gap: \"10px\",\r\n    background: \"#EDEDED\",\r\n    borderRadius: \"8px\",\r\n    marginRight: \"1rem\",\r\n  },\r\n  inputboxscript: {\r\n    fontFamily: \"DM Sans\",\r\n    fontStyle: \"normal\",\r\n    fontWeight: \"500\",\r\n    fontSize: \"14px\",\r\n    lineHeight: \"18px\",\r\n    letterSpacing: \"-0.02em\",\r\n    color: \"#262626\",\r\n    flex: \"none\",\r\n    order: 0,\r\n    flexGrow: 0,\r\n  },\r\n  close: {\r\n    \"&:hover\": {\r\n      cursor: \"pointer\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function LoadBluePrint(props) {\r\n  const classes = useStyles();\r\n  const navigate = useNavigate();\r\n\r\n  const [file, setFile] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let { catalog } = props;\r\n    props.dispatch(actions.projectActions.initCatalog(catalog));\r\n  }, [props]);\r\n\r\n  const checkType = (file) => {\r\n    if (file == null) return false;\r\n    if (\r\n      file.type == \"image/png\" ||\r\n      file.type == \"image/jpeg\" ||\r\n      file.type == \"image/svg+xml\"\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.background}>\r\n      <Box className={classes.menubar}>\r\n        <Link\r\n          to=\"/\"\r\n          style={{\r\n            textDecoration: \"none\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <img src=\"/assets/backbar.png\" className={classes.backbar} />\r\n        </Link>\r\n        <Link\r\n          to=\"/\"\r\n          style={{\r\n            textDecoration: \"none\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Typography className={classes.barsub}>New Floorplan</Typography>\r\n        </Link>\r\n      </Box>\r\n      <Grid\r\n        container\r\n        spacing={2}\r\n        display=\"flex\"\r\n        justifyContent=\"space-between\"\r\n        className={classes.container}\r\n      >\r\n        <Grid item xs={12} sm={12} md={8}>\r\n          <Typography className={classes.subscription}>\r\n            Upload your blueprint\r\n          </Typography>\r\n          <Typography className={classes.miniscription}>\r\n            Here we will tell about formats in which the blueprint should be.\r\n            Something like <b>.PNG</b> or <b>.JPEG</b> and the size should be\r\n            max <b>5 MB</b>.\r\n          </Typography>\r\n\r\n          {!checkType(file) && (\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                justifyContent: \"flex-start\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Typography\r\n                className={classes.uploadbtn}\r\n                onClick={() => {\r\n                  var input = document.createElement(\"input\");\r\n                  input.type = \"file\";\r\n\r\n                  input.onchange = (e) => {\r\n                    var file = e.target.files[0];\r\n                    setFile(file);\r\n                  };\r\n\r\n                  input.click();\r\n                }}\r\n              >\r\n                Upload from computer\r\n              </Typography>\r\n              <UploadSingleFile value={file} onChange={setFile} />\r\n            </Box>\r\n          )}\r\n          {checkType(file) && (\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                justifyContent: \"flex-start\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <Box className={classes.inputbox}>\r\n                <img src=\"/assets/check.png\" />\r\n                <Typography className={classes.inputboxscript}>\r\n                  Blueprint has been succesfully uploaded\r\n                </Typography>\r\n                <img\r\n                  src=\"/assets/close.png\"\r\n                  className={classes.close}\r\n                  onClick={() => {\r\n                    setFile(null);\r\n                  }}\r\n                />\r\n              </Box>\r\n              <Typography\r\n                className={classes.uploadbtn}\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  var reader = new FileReader();\r\n                  reader.onload = function (e) {\r\n                    const data = e.target.result;\r\n                    const res = loadProjectFromFile(data);\r\n                    // props.dispatch(actions.projectActions.newProject());\r\n                    props.dispatch(actions.projectActions.loadProject(res));\r\n                    navigate(\"/main\", { replace: true });\r\n                  };\r\n                  reader.readAsText(file);\r\n                }}\r\n              >\r\n                Continue\r\n              </Typography>\r\n            </Box>\r\n          )}\r\n        </Grid>\r\n        <Grid item xs={12} sm={12} md={4}>\r\n          <img\r\n            src=\"/assets/file.png\"\r\n            style={{\r\n              marginTop: \"2rem\",\r\n              marginLeft: \"5rem\",\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n"],"sourceRoot":""}